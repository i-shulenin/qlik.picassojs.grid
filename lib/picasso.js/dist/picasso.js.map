{"version":3,"file":"picasso.js","sources":["../../../node_modules/path2d-polyfill/dist/index.esm.js","../../../node_modules/extend/index.js","../src/about.js","../src/core/utils/event-type.js","../src/core/utils/is-number.js","../src/core/geometry/util.js","../src/core/data/data.js","../../../node_modules/d3-path/src/path.js","../../../node_modules/d3-shape/src/constant.js","../../../node_modules/d3-shape/src/math.js","../../../node_modules/d3-shape/src/arc.js","../../../node_modules/d3-shape/src/curve/linear.js","../../../node_modules/d3-shape/src/point.js","../../../node_modules/d3-shape/src/line.js","../../../node_modules/d3-shape/src/area.js","../../../node_modules/d3-shape/src/descending.js","../../../node_modules/d3-shape/src/identity.js","../../../node_modules/d3-shape/src/pie.js","../../../node_modules/d3-shape/src/array.js","../../../node_modules/d3-shape/src/curve/basis.js","../../../node_modules/d3-shape/src/curve/cardinal.js","../../../node_modules/d3-shape/src/curve/catmullRom.js","../../../node_modules/d3-shape/src/curve/monotone.js","../../../node_modules/d3-shape/src/curve/natural.js","../../../node_modules/d3-shape/src/curve/step.js","../../../node_modules/d3-shape/src/offset/none.js","../../../node_modules/d3-shape/src/order/none.js","../../../node_modules/d3-shape/src/stack.js","../../../node_modules/d3-shape/src/offset/expand.js","../../../node_modules/d3-shape/src/offset/diverging.js","../../../node_modules/d3-shape/src/offset/silhouette.js","../../../node_modules/d3-shape/src/offset/wiggle.js","../../../node_modules/d3-shape/src/order/appearance.js","../../../node_modules/d3-shape/src/order/ascending.js","../../../node_modules/d3-shape/src/order/insideOut.js","../../../node_modules/d3-shape/src/order/reverse.js","../src/core/utils/registry.js","../../../node_modules/d3-format/src/formatDecimal.js","../../../node_modules/d3-format/src/exponent.js","../../../node_modules/d3-format/src/formatGroup.js","../../../node_modules/d3-format/src/formatNumerals.js","../../../node_modules/d3-format/src/formatSpecifier.js","../../../node_modules/d3-format/src/formatTrim.js","../../../node_modules/d3-format/src/formatPrefixAuto.js","../../../node_modules/d3-format/src/formatRounded.js","../../../node_modules/d3-format/src/formatTypes.js","../../../node_modules/d3-format/src/identity.js","../../../node_modules/d3-format/src/locale.js","../../../node_modules/d3-format/src/defaultLocale.js","../../../node_modules/d3-format/src/precisionFixed.js","../../../node_modules/d3-format/src/precisionPrefix.js","../../../node_modules/d3-format/src/precisionRound.js","../src/core/formatter/d3/numberFormat.js","../../../node_modules/d3-time/src/interval.js","../../../node_modules/d3-time/src/duration.js","../../../node_modules/d3-time/src/day.js","../../../node_modules/d3-time/src/week.js","../../../node_modules/d3-time/src/year.js","../../../node_modules/d3-time/src/utcDay.js","../../../node_modules/d3-time/src/utcWeek.js","../../../node_modules/d3-time/src/utcYear.js","../../../node_modules/d3-time-format/src/locale.js","../src/core/formatter/d3/timeFormat.js","../src/core/formatter/index.js","../src/core/data/field.js","../src/core/data/stack.js","../src/core/data/extractor.js","../src/core/data/collections.js","../src/core/chart/formatter/index.js","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/bisect.js","../../../node_modules/d3-array/src/range.js","../../../node_modules/d3-array/src/ticks.js","../../../node_modules/d3-scale/src/init.js","../../../node_modules/d3-collection/src/map.js","../../../node_modules/d3-collection/src/set.js","../../../node_modules/d3-scale/src/array.js","../../../node_modules/d3-scale/src/ordinal.js","../../../node_modules/d3-scale/src/band.js","../../../node_modules/d3-color/src/define.js","../../../node_modules/d3-color/src/color.js","../../../node_modules/d3-interpolate/src/constant.js","../../../node_modules/d3-interpolate/src/color.js","../../../node_modules/d3-interpolate/src/rgb.js","../../../node_modules/d3-interpolate/src/numberArray.js","../../../node_modules/d3-interpolate/src/array.js","../../../node_modules/d3-interpolate/src/date.js","../../../node_modules/d3-interpolate/src/number.js","../../../node_modules/d3-interpolate/src/object.js","../../../node_modules/d3-interpolate/src/string.js","../../../node_modules/d3-interpolate/src/value.js","../../../node_modules/d3-interpolate/src/round.js","../../../node_modules/d3-scale/src/constant.js","../../../node_modules/d3-scale/src/number.js","../../../node_modules/d3-scale/src/continuous.js","../../../node_modules/d3-scale/src/tickFormat.js","../../../node_modules/d3-scale/src/linear.js","../../../node_modules/d3-scale/src/threshold.js","../src/core/scales/ticks/tick-generators.js","../src/core/scales/settings-resolver.js","../src/core/scales/linear.js","../src/core/scales/band.js","../src/core/scales/h-band.js","../src/core/utils/min-max.js","../src/core/scales/color/sequential.js","../src/core/scales/color/threshold.js","../src/core/scales/ordinal.js","../src/core/scales/color/categorical.js","../src/core/chart/scales/index.js","../../../node_modules/node-event-emitter/index.js","../src/core/utils/event-emitter.js","../src/core/scroll-api/index.js","../src/core/chart/scroll-api/index.js","../src/core/brush/range-collection.js","../src/core/brush/value-collection.js","../src/core/brush/brush.js","../src/core/brush/index.js","../../../node_modules/d3-ease/src/cubic.js","../../../node_modules/d3-ease/src/math.js","../../../node_modules/d3-ease/src/elastic.js","../src/core/component/tween.js","../src/core/chart-components/property-resolver/index.js","../src/core/scales/index.js","../src/core/component/settings-resolver.js","../src/core/component/brushing.js","../src/core/scene-graph/attributes.js","../src/core/symbols/circle.js","../src/core/utils/points-to-path.js","../src/core/symbols/diamond.js","../src/core/symbols/cross.js","../src/core/math/angles.js","../src/core/math/vector.js","../src/core/symbols/saltire.js","../src/core/symbols/square.js","../src/core/symbols/triangle.js","../src/core/symbols/line.js","../src/core/symbols/star.js","../src/core/symbols/n-polygon.js","../src/core/symbols/bar.js","../src/core/symbols/index.js","../src/core/layout/dock/config.js","../src/core/component/component-factory.js","../src/core/mediator/index.js","../src/core/math/intersection.js","../src/core/math/narrow-phase-collision.js","../src/core/style/resolver.js","../src/core/theme/index.js","../src/core/layout/dock/settings-resolver.js","../src/core/layout/dock/create-rect.js","../src/core/layout/dock/docker.js","../src/core/chart/component-collection.js","../src/core/chart/index.js","../src/core/renderer/index.js","../src/core/component/index.js","../src/core/data/util.js","../src/core/data/extractor-matrix.js","../src/core/data/dataset.js","../src/core/data/index.js","../src/web/interactions/native/index.js","../src/core/interaction/index.js","../src/core/chart-components/box/box-math.js","../src/core/chart-components/box/box-shapes-helper.js","../src/core/chart-components/box/box-shapes.js","../src/core/chart-components/box/box-resolver.js","../src/core/chart-components/box/box.js","../src/core/chart-components/box/index.js","../src/core/chart-components/point/point.js","../src/core/chart-components/point/index.js","../src/core/chart-components/pie/pie.js","../src/core/chart-components/pie/index.js","../src/core/transposer/crispifier.js","../src/core/transposer/transposer.js","../src/core/chart-components/grid/line.js","../src/core/chart-components/grid/index.js","../src/core/chart-components/ref-line/oob.js","../src/core/chart-components/ref-line/lines-and-labels.js","../src/core/chart-components/ref-line/refline.js","../src/core/chart-components/ref-line/index.js","../src/core/chart-components/axis/axis-line-node.js","../src/core/chart-components/axis/axis-label-node.js","../src/core/chart-components/axis/axis-tick-node.js","../src/core/chart-components/axis/axis-label-size.js","../src/core/chart-components/axis/get-continuous-label-rect.js","../src/core/chart-components/axis/axis-node-builder.js","../src/core/chart-components/axis/axis-default-settings.js","../src/core/chart-components/axis/axis-size-calculator.js","../src/core/chart-components/axis/axis.js","../src/core/chart-components/axis/index.js","../src/core/chart-components/container/container.js","../src/core/chart-components/container/index.js","../src/core/chart-components/text/text.js","../src/core/chart-components/text/index.js","../src/core/chart-components/scrollbar/index.js","../src/web/components/brush-range/brush-range-const.js","../src/web/components/brush-range/brush-range-node-builder.js","../src/web/components/brush-range/brush-range-interaction.js","../src/web/components/brush-range/brush-range.js","../src/web/components/brush-range/brush-area-dir.js","../src/web/components/brush-range/index.js","../src/core/chart-components/range/range.js","../src/core/chart-components/range/index.js","../src/core/chart-components/brush-lasso/brush-lasso.js","../src/core/chart-components/brush-lasso/index.js","../src/core/chart-components/labels/strategies/bars-overlapping-filter.js","../src/core/chart-components/labels/strategies/bars.js","../src/core/chart-components/labels/strategies/slices.js","../src/web/text-manipulation/string-tokenizer.js","../src/web/text-manipulation/text-const.js","../src/web/text-manipulation/font-size-to-height.js","../src/web/text-manipulation/word-break.js","../src/web/text-manipulation/line-break-resolver.js","../src/web/text-manipulation/text-ellipsis.js","../src/web/text-manipulation/baseline-heuristic.js","../src/web/text-manipulation/text-metrics.js","../src/core/chart-components/labels/strategies/rows.js","../src/core/chart-components/labels/strategies/index.js","../src/core/chart-components/labels/labels.js","../src/core/chart-components/labels/index.js","../src/core/chart-components/legend-cat/legend-resolver.js","../src/core/chart-components/legend-cat/item-renderer.js","../src/core/utils/class-string.js","../src/core/chart-components/legend-cat/navigation-renderer.js","../src/core/chart-components/legend-cat/title-renderer.js","../src/core/chart-components/legend-cat/legend-layout.js","../src/core/chart-components/legend-cat/legend-cat.js","../src/core/chart-components/legend-cat/index.js","../src/core/chart-components/legend-seq/node-builder.js","../src/core/chart-components/legend-seq/legend-seq.js","../src/core/chart-components/legend-seq/index.js","../src/core/chart-components/line/line.js","../src/core/chart-components/line/index.js","../src/web/components/brush-area/brush-area.js","../src/web/components/brush-area/index.js","../src/web/components/tooltip/extractor.js","../src/web/components/tooltip/render.js","../src/web/components/tooltip/timespan-dispatcher.js","../src/web/components/tooltip/placement.js","../src/web/components/tooltip/instance-handler.js","../src/web/components/tooltip/tooltip.js","../src/web/components/tooltip/index.js","../src/core/chart-components/debug/debug-collider.js","../src/core/math/arc-to-center.js","../src/core/math/curve-flattness.js","../src/core/math/cubic-bezier-curve-interpolation.js","../src/core/math/quad-bezier-curve-interpolation.js","../src/core/scene-graph/parse-path-d.js","../src/core/chart-components/debug/debug-path-to-points.js","../src/core/chart-components/debug/index.js","../src/api/components.js","../src/core/scene-graph/node.js","../src/core/geometry/rect.js","../src/core/geometry/circle.js","../src/core/geometry/line.js","../src/core/geometry/polygon.js","../src/core/geometry/geopolygon.js","../src/core/geometry/polyline.js","../src/core/geometry/index.js","../src/core/geometry/geometry-collection.js","../src/core/math/matrix.js","../src/core/scene-graph/transform-resolver.js","../src/core/scene-graph/node-selector.js","../src/core/scene-graph/scene-node.js","../src/core/scene-graph/collision.js","../src/core/scene-graph/collision-resolver.js","../src/core/scene-graph/display-objects/display-object.js","../src/core/scene-graph/node-container.js","../src/core/scene-graph/display-objects/container.js","../src/core/scene-graph/display-objects/stage.js","../src/core/scene-graph/display-objects/gradient-item.js","../src/core/scene-graph/display-objects/pattern-item.js","../src/core/scene-graph/display-objects/rect.js","../src/core/scene-graph/display-objects/circle.js","../src/core/scene-graph/display-objects/line.js","../src/core/scene-graph/polyline-to-polygon-collider.js","../src/core/utils/flatten-array.js","../src/core/scene-graph/display-objects/path.js","../src/core/scene-graph/display-objects/text.js","../src/core/scene-graph/display-objects/index.js","../src/core/scene-graph/context.js","../src/core/scene-graph/scene.js","../src/web/renderer/canvas-renderer/canvas-gradient.js","../src/web/renderer/canvas-renderer/canvas-pattern.js","../src/web/renderer/renderer-box.js","../src/web/renderer/index.js","../src/web/text-manipulation/inject-textbounds.js","../src/web/renderer/canvas-renderer/canvas-renderer.js","../src/web/renderer/canvas-renderer/shapes/rect.js","../src/web/renderer/canvas-renderer/shapes/circle.js","../src/web/renderer/canvas-renderer/shapes/line.js","../src/core/utils/rtl-util.js","../src/web/renderer/canvas-renderer/shapes/text.js","../src/web/renderer/canvas-renderer/shapes/path.js","../src/web/renderer/canvas-renderer/index.js","../src/web/renderer/node-tree.js","../src/web/renderer/svg-renderer/svg-nodes.js","../src/web/renderer/svg-renderer/svg-tree.js","../src/core/utils/crypto.js","../src/web/renderer/svg-renderer/svg-gradient.js","../src/web/renderer/svg-renderer/svg-pattern.js","../src/web/renderer/svg-renderer/svg-renderer.js","../../../node_modules/preact/dist/preact.module.js","../src/web/renderer/dom-renderer/dom-renderer.js","../src/web/renderer/dom-renderer/index.js","../src/api/renderers.js","../src/api/scales.js","../src/core/utils/logger.js","../src/core/theme/light/index.js","../src/index.js"],"sourcesContent":["var ARG_LENGTH = {\n  a: 7,\n  c: 6,\n  h: 1,\n  l: 2,\n  m: 2,\n  q: 4,\n  s: 4,\n  t: 2,\n  v: 1,\n  z: 0\n};\nvar SEGMENT_PATTERN = /([astvzqmhlc])([^astvzqmhlc]*)/gi;\nvar NUMBER = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/gi;\n\nfunction parseValues(args) {\n  var numbers = args.match(NUMBER);\n  return numbers ? numbers.map(Number) : [];\n}\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * https://www.w3.org/TR/SVG/paths.html#PathDataGeneralInformation\n * @ignore\n *\n * @param {string} path\n * @returns {array}\n */\n\n\nfunction parse(path) {\n  var data = [];\n  var p = String(path).trim(); // A path data segment (if there is one) must begin with a \"moveto\" command\n\n  if (p[0] !== 'M' && p[0] !== 'm') {\n    return data;\n  }\n\n  p.replace(SEGMENT_PATTERN, function (_, command, args) {\n    var type = command.toLowerCase();\n    var theArgs = parseValues(args);\n    var theCommand = command; // overloaded moveTo\n\n    if (type === 'm' && theArgs.length > 2) {\n      data.push([theCommand].concat(theArgs.splice(0, 2)));\n      type = 'l';\n      theCommand = theCommand === 'm' ? 'l' : 'L';\n    } // Ignore invalid commands\n\n\n    if (theArgs.length < ARG_LENGTH[type]) {\n      return '';\n    }\n\n    data.push([theCommand].concat(theArgs.splice(0, ARG_LENGTH[type]))); // The command letter can be eliminated on subsequent commands if the\n    // same command is used multiple times in a row (e.g., you can drop the\n    // second \"L\" in \"M 100 200 L 200 100 L -100 -200\" and use\n    // \"M 100 200 L 200 100 -100 -200\" instead).\n\n    while (theArgs.length >= ARG_LENGTH[type] && theArgs.length && ARG_LENGTH[type]) {\n      data.push([theCommand].concat(theArgs.splice(0, ARG_LENGTH[type])));\n    }\n\n    return '';\n  });\n  return data;\n}\n\nvar parsePath = parse;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n/**\n * Work around for https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8438884/\n * @ignore\n */\n\nfunction supportsSvgPathArgument(window) {\n  var canvas = window.document.createElement('canvas');\n  var g = canvas.getContext('2d');\n  var p = new window.Path2D('M0 0 L1 1');\n  g.strokeStyle = 'red';\n  g.lineWidth = 1;\n  g.stroke(p);\n  var imgData = g.getImageData(0, 0, 1, 1);\n  return imgData.data[0] === 255; // Check if pixel is red\n}\n\nfunction rotatePoint(point, angle) {\n  var nx = point.x * Math.cos(angle) - point.y * Math.sin(angle);\n  var ny = point.y * Math.cos(angle) + point.x * Math.sin(angle);\n  point.x = nx;\n  point.y = ny;\n}\n\nfunction translatePoint(point, dx, dy) {\n  point.x += dx;\n  point.y += dy;\n}\n\nfunction scalePoint(point, s) {\n  point.x *= s;\n  point.y *= s;\n}\n\nfunction polyFillPath2D(window) {\n  if (typeof window === 'undefined' || !window.CanvasRenderingContext2D) {\n    return;\n  }\n\n  if (window.Path2D && supportsSvgPathArgument(window)) {\n    return;\n  }\n  /**\n   * Crates a Path2D polyfill object\n   * @constructor\n   * @ignore\n   * @param {String} path\n   */\n\n\n  var Path2D = /*#__PURE__*/function () {\n    function Path2D(path) {\n      _classCallCheck(this, Path2D);\n\n      this.segments = [];\n\n      if (path && path instanceof Path2D) {\n        var _this$segments;\n\n        (_this$segments = this.segments).push.apply(_this$segments, _toConsumableArray(path.segments));\n      } else if (path) {\n        this.segments = parsePath(path);\n      }\n    }\n\n    _createClass(Path2D, [{\n      key: \"addPath\",\n      value: function addPath(path) {\n        if (path && path instanceof Path2D) {\n          var _this$segments2;\n\n          (_this$segments2 = this.segments).push.apply(_this$segments2, _toConsumableArray(path.segments));\n        }\n      }\n    }, {\n      key: \"moveTo\",\n      value: function moveTo(x, y) {\n        this.segments.push(['M', x, y]);\n      }\n    }, {\n      key: \"lineTo\",\n      value: function lineTo(x, y) {\n        this.segments.push(['L', x, y]);\n      }\n    }, {\n      key: \"arc\",\n      value: function arc(x, y, r, start, end, ccw) {\n        this.segments.push(['AC', x, y, r, start, end, !!ccw]);\n      }\n    }, {\n      key: \"arcTo\",\n      value: function arcTo(x1, y1, x2, y2, r) {\n        this.segments.push(['AT', x1, y1, x2, y2, r]);\n      }\n    }, {\n      key: \"ellipse\",\n      value: function ellipse(x, y, rx, ry, angle, start, end, ccw) {\n        this.segments.push(['E', x, y, rx, ry, angle, start, end, !!ccw]);\n      }\n    }, {\n      key: \"closePath\",\n      value: function closePath() {\n        this.segments.push(['Z']);\n      }\n    }, {\n      key: \"bezierCurveTo\",\n      value: function bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.segments.push(['C', cp1x, cp1y, cp2x, cp2y, x, y]);\n      }\n    }, {\n      key: \"quadraticCurveTo\",\n      value: function quadraticCurveTo(cpx, cpy, x, y) {\n        this.segments.push(['Q', cpx, cpy, x, y]);\n      }\n    }, {\n      key: \"rect\",\n      value: function rect(x, y, width, height) {\n        this.segments.push(['R', x, y, width, height]);\n      }\n    }]);\n\n    return Path2D;\n  }();\n\n  function buildPath(canvas, segments) {\n    var endAngle;\n    var startAngle;\n    var largeArcFlag;\n    var sweepFlag;\n    var endPoint;\n    var midPoint;\n    var angle;\n    var lambda;\n    var t1;\n    var t2;\n    var x;\n    var x1;\n    var y;\n    var y1;\n    var r;\n    var rx;\n    var ry;\n    var w;\n    var h;\n    var pathType;\n    var centerPoint;\n    var cpx;\n    var cpy;\n    var qcpx;\n    var qcpy;\n    var ccw;\n    var startPoint = {\n      x: 0,\n      y: 0\n    };\n    var currentPoint = {\n      x: 0,\n      y: 0\n    };\n    canvas.beginPath();\n\n    for (var i = 0; i < segments.length; ++i) {\n      var s = segments[i];\n      pathType = s[0]; // Reset control point if command is not cubic\n\n      if (pathType !== 'S' && pathType !== 's' && pathType !== 'C' && pathType !== 'c') {\n        cpx = null;\n        cpy = null;\n      }\n\n      if (pathType !== 'T' && pathType !== 't' && pathType !== 'Q' && pathType !== 'q') {\n        qcpx = null;\n        qcpy = null;\n      }\n\n      switch (pathType) {\n        case 'm':\n        case 'M':\n          if (pathType === 'm') {\n            x += s[1];\n            y += s[2];\n          } else {\n            x = s[1];\n            y = s[2];\n          }\n\n          if (pathType === 'M' || !startPoint) {\n            startPoint = {\n              x: x,\n              y: y\n            };\n          }\n\n          canvas.moveTo(x, y);\n          break;\n\n        case 'l':\n          x += s[1];\n          y += s[2];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'L':\n          x = s[1];\n          y = s[2];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'H':\n          x = s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'h':\n          x += s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'V':\n          y = s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'v':\n          y += s[1];\n          canvas.lineTo(x, y);\n          break;\n\n        case 'a':\n        case 'A':\n          if (pathType === 'a') {\n            x += s[6];\n            y += s[7];\n          } else {\n            x = s[6];\n            y = s[7];\n          }\n\n          rx = s[1]; // rx\n\n          ry = s[2]; // ry\n\n          angle = s[3] * Math.PI / 180;\n          largeArcFlag = !!s[4];\n          sweepFlag = !!s[5];\n          endPoint = {\n            x: x,\n            y: y\n          }; // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\n          midPoint = {\n            x: (currentPoint.x - endPoint.x) / 2,\n            y: (currentPoint.y - endPoint.y) / 2\n          };\n          rotatePoint(midPoint, -angle); // radius correction\n\n          lambda = midPoint.x * midPoint.x / (rx * rx) + midPoint.y * midPoint.y / (ry * ry);\n\n          if (lambda > 1) {\n            lambda = Math.sqrt(lambda);\n            rx *= lambda;\n            ry *= lambda;\n          }\n\n          centerPoint = {\n            x: rx * midPoint.y / ry,\n            y: -(ry * midPoint.x) / rx\n          };\n          t1 = rx * rx * ry * ry;\n          t2 = rx * rx * midPoint.y * midPoint.y + ry * ry * midPoint.x * midPoint.x;\n\n          if (sweepFlag !== largeArcFlag) {\n            scalePoint(centerPoint, Math.sqrt((t1 - t2) / t2) || 0);\n          } else {\n            scalePoint(centerPoint, -Math.sqrt((t1 - t2) / t2) || 0);\n          }\n\n          startAngle = Math.atan2((midPoint.y - centerPoint.y) / ry, (midPoint.x - centerPoint.x) / rx);\n          endAngle = Math.atan2(-(midPoint.y + centerPoint.y) / ry, -(midPoint.x + centerPoint.x) / rx);\n          rotatePoint(centerPoint, angle);\n          translatePoint(centerPoint, (endPoint.x + currentPoint.x) / 2, (endPoint.y + currentPoint.y) / 2);\n          canvas.save();\n          canvas.translate(centerPoint.x, centerPoint.y);\n          canvas.rotate(angle);\n          canvas.scale(rx, ry);\n          canvas.arc(0, 0, 1, startAngle, endAngle, !sweepFlag);\n          canvas.restore();\n          break;\n\n        case 'C':\n          cpx = s[3]; // Last control point\n\n          cpy = s[4];\n          x = s[5];\n          y = s[6];\n          canvas.bezierCurveTo(s[1], s[2], cpx, cpy, x, y);\n          break;\n\n        case 'c':\n          canvas.bezierCurveTo(s[1] + x, s[2] + y, s[3] + x, s[4] + y, s[5] + x, s[6] + y);\n          cpx = s[3] + x; // Last control point\n\n          cpy = s[4] + y;\n          x += s[5];\n          y += s[6];\n          break;\n\n        case 'S':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(2 * x - cpx, 2 * y - cpy, s[1], s[2], s[3], s[4]);\n          cpx = s[1]; // last control point\n\n          cpy = s[2];\n          x = s[3];\n          y = s[4];\n          break;\n\n        case 's':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(2 * x - cpx, 2 * y - cpy, s[1] + x, s[2] + y, s[3] + x, s[4] + y);\n          cpx = s[1] + x; // last control point\n\n          cpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          break;\n\n        case 'Q':\n          qcpx = s[1]; // last control point\n\n          qcpy = s[2];\n          x = s[3];\n          y = s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 'q':\n          qcpx = s[1] + x; // last control point\n\n          qcpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 'T':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n\n          qcpx = 2 * x - qcpx; // last control point\n\n          qcpy = 2 * y - qcpy;\n          x = s[1];\n          y = s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 't':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n\n          qcpx = 2 * x - qcpx; // last control point\n\n          qcpy = 2 * y - qcpy;\n          x += s[1];\n          y += s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n\n        case 'z':\n        case 'Z':\n          x = startPoint.x;\n          y = startPoint.y;\n          startPoint = undefined;\n          canvas.closePath();\n          break;\n\n        case 'AC':\n          // arc\n          x = s[1];\n          y = s[2];\n          r = s[3];\n          startAngle = s[4];\n          endAngle = s[5];\n          ccw = s[6];\n          canvas.arc(x, y, r, startAngle, endAngle, ccw);\n          break;\n\n        case 'AT':\n          // arcTo\n          x1 = s[1];\n          y1 = s[2];\n          x = s[3];\n          y = s[4];\n          r = s[5];\n          canvas.arcTo(x1, y1, x, y, r);\n          break;\n\n        case 'E':\n          // ellipse\n          x = s[1];\n          y = s[2];\n          rx = s[3];\n          ry = s[4];\n          angle = s[5];\n          startAngle = s[6];\n          endAngle = s[7];\n          ccw = s[8];\n          canvas.save();\n          canvas.translate(x, y);\n          canvas.rotate(angle);\n          canvas.scale(rx, ry);\n          canvas.arc(0, 0, 1, startAngle, endAngle, ccw);\n          canvas.restore();\n          break;\n\n        case 'R':\n          // rect\n          x = s[1];\n          y = s[2];\n          w = s[3];\n          h = s[4];\n          startPoint = {\n            x: x,\n            y: y\n          };\n          canvas.rect(x, y, w, h);\n          break;\n\n      }\n\n      currentPoint.x = x;\n      currentPoint.y = y;\n    }\n  }\n\n  var cFill = window.CanvasRenderingContext2D.prototype.fill;\n  var cStroke = window.CanvasRenderingContext2D.prototype.stroke;\n\n  window.CanvasRenderingContext2D.prototype.fill = function fill() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var fillRule = 'nonzero';\n\n    if (args.length === 0 || args.length === 1 && typeof args[0] === 'string') {\n      cFill.apply(this, args);\n      return;\n    }\n\n    if (arguments.length === 2) {\n      fillRule = args[1];\n    }\n\n    var path = args[0];\n    buildPath(this, path.segments);\n    cFill.call(this, fillRule);\n  };\n\n  window.CanvasRenderingContext2D.prototype.stroke = function stroke(path) {\n    if (!path) {\n      cStroke.call(this);\n      return;\n    }\n\n    buildPath(this, path.segments);\n    cStroke.call(this);\n  };\n\n  var cIsPointInPath = window.CanvasRenderingContext2D.prototype.isPointInPath;\n\n  window.CanvasRenderingContext2D.prototype.isPointInPath = function isPointInPath() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    // let fillRule = 'nonzero';\n    if (args[0].constructor.name === 'Path2D') {\n      // first argument is a Path2D object\n      var x = args[1];\n      var y = args[2];\n      var fillRule = args[3] || 'nonzero';\n      var path = args[0];\n      buildPath(this, path.segments);\n      return cIsPointInPath.apply(this, [x, y, fillRule]);\n    } else {\n      return cIsPointInPath.apply(this, args);\n    }\n  };\n\n  window.Path2D = Path2D;\n}\n\nvar path2dPolyfill = polyFillPath2D;\n\nif (typeof window !== 'undefined') {\n  path2dPolyfill(window);\n}\n\nvar src = {\n  path2dPolyfill: path2dPolyfill,\n  parsePath: parsePath\n};\n\nexport default src;\n//# sourceMappingURL=index.esm.js.map\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","export default { version: '1.0.0' };\n","/* global navigator */\n\nexport function detectPointerSupport(e) {\n  if ('onpointerdown' in e && 'onpointerup' in e) {\n    return true;\n  }\n  return false;\n}\n\nexport function detectTouchSupport(e) {\n  if (('ontouchstart' in e && 'ontouchend' in e) || navigator.maxTouchPoints > 1) {\n    return true;\n  }\n  return false;\n}\n\nexport function isTouchEvent(e) {\n  return !!e.changedTouches;\n}\n\nexport function isValidTapEvent(e, eventInfo) {\n  const isTouch = isTouchEvent(e);\n  const ee = isTouch ? e.changedTouches[0] : e;\n  const dt = Date.now() - eventInfo.time;\n  const dx = isNaN(eventInfo.x) ? 0 : Math.abs(ee.clientX - eventInfo.x);\n  const dy = isNaN(eventInfo.y) ? 0 : Math.abs(ee.clientY - eventInfo.y);\n\n  return (e.button === 0 || isTouch) && !eventInfo.multiTouch && dx <= 12 && dy <= 12 && dt <= 300;\n}\n","export function isNumber(v) {\n  return typeof v === 'number' && !isNaN(v);\n}\n\nexport function notNumber(value) {\n  return typeof value !== 'number' || isNaN(value);\n}\n","import { isNumber } from '../utils/is-number';\n\nexport function getMinMax(points) {\n  const num = points.length;\n  let xMin = NaN;\n  let xMax = NaN;\n  let yMin = NaN;\n  let yMax = NaN;\n\n  for (let i = 0; i < num; i++) {\n    xMin = isNaN(xMin) ? points[i].x : Math.min(xMin, points[i].x);\n    xMax = isNaN(xMax) ? points[i].x : Math.max(xMax, points[i].x);\n    yMin = isNaN(yMin) ? points[i].y : Math.min(yMin, points[i].y);\n    yMax = isNaN(yMax) ? points[i].y : Math.max(yMax, points[i].y);\n  }\n  return [xMin, yMin, xMax, yMax];\n}\n\n/**\n * @ignore\n * @param {oject} line\n * @returns {Point[]} Array of points\n */\nexport function lineToPoints(line) {\n  const x1 = line.x1 || 0;\n  const y1 = line.y1 || 0;\n  const x2 = line.x2 || 0;\n  const y2 = line.y2 || 0;\n  return [\n    { x: x1, y: y1 },\n    { x: x2, y: y2 },\n  ];\n}\n\n/**\n * @ignore\n * @param {oject} rect\n * @returns {Point[]} Array of points\n */\nexport function rectToPoints(rect) {\n  return [\n    { x: rect.x, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y },\n    { x: rect.x + rect.width, y: rect.y + rect.height },\n    { x: rect.x, y: rect.y + rect.height },\n  ];\n}\n\nexport function pointsToRect(points) {\n  const [xMin, yMin, xMax, yMax] = getMinMax(points);\n\n  return {\n    x: xMin,\n    y: yMin,\n    width: xMax - xMin,\n    height: yMax - yMin,\n  };\n}\n\nexport function pointsToCircle(points, r) {\n  return {\n    cx: points[0].x,\n    cy: points[0].y,\n    r,\n  };\n}\n\nexport function pointsToLine(points) {\n  return {\n    x1: points[0].x,\n    y1: points[0].y,\n    x2: points[1].x,\n    y2: points[1].y,\n  };\n}\n\nexport function pointToArray(p) {\n  return [p.x, p.y];\n}\n\nexport function arrayToPoint(ary) {\n  return { x: ary[0], y: ary[1] };\n}\n\n/**\n * @ignore\n * @param {oject}\n * @returns {string} Type of geometry\n */\nexport function getShapeType(shape) {\n  const {\n    x,\n    y, // Point\n    width,\n    height, // Rect\n    x1,\n    x2,\n    y1,\n    y2, // Line\n    cx,\n    cy,\n    r, // Circle\n    vertices, // Polygon or GeoPolygon\n  } = shape || {};\n\n  if (isNumber(cx) && isNumber(cy) && isNumber(r)) {\n    return 'circle';\n  }\n  if (isNumber(x1) && isNumber(x2) && isNumber(y1) && isNumber(y2)) {\n    return 'line';\n  }\n  if (isNumber(x) && isNumber(y) && isNumber(width) && isNumber(height)) {\n    return 'rect';\n  }\n  if (isNumber(x) && isNumber(y)) {\n    return 'point';\n  }\n  if (Array.isArray(vertices)) {\n    return vertices.every((item) => Array.isArray(item)) ? 'geopolygon' : 'polygon';\n  }\n  return null;\n}\n\nexport function expandRect(size, rect) {\n  return {\n    x: rect.x - size,\n    y: rect.y - size,\n    width: rect.width + size,\n    height: rect.height + size,\n  };\n}\n","// import types from './types';\n\n/**\n * @ignore\n * @param {Array<DataSource>} dataSources\n * @param {any} { logger }\n * @returns {function}\n */\nexport default function datasets(dataSources, { types, logger }) {\n  const data = {};\n\n  const sets = [];\n  if (!Array.isArray(dataSources)) {\n    logger.warn('Deprecated: \"data-source\" configuration\"');\n    sets.push(dataSources);\n  } else {\n    sets.push(...dataSources);\n  }\n\n  sets.forEach((d, i) => {\n    let datasetFactory = types(d.type);\n    if (datasetFactory) {\n      let key = d.key;\n      if (typeof d.key === 'undefined') {\n        logger.warn(`Missing key for dataset. Using index '${i}' as key.`);\n        key = i;\n      }\n      let dataset = datasetFactory({\n        key,\n        data: d.data,\n        config: d.config,\n      });\n      data[key] = dataset;\n    }\n  });\n\n  /**\n   * Returns the `dataset` which has `key` as identifier\n   * @ignore\n   * @param {string} key - The dataset identifier\n   * @returns {Dataset}\n   */\n  const fn = (key) => {\n    if (key) {\n      return data[key];\n    }\n    return data[Object.keys(data)[0]];\n  };\n  return fn;\n}\n\n/**\n * @typedef {object} DataSource\n * @property {string} key - Unique identifier for this data source\n * @property {string} type - The dataset type\n * @property {any} data - Data\n */\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n          var ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","export var slice = Array.prototype.slice;\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = yp;\n      }\n    }\n  }\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var peaks = series.map(peak);\n  return none(series).sort(function(a, b) { return peaks[a] - peaks[b]; });\n}\n\nfunction peak(series) {\n  var i = -1, j = 0, n = series.length, vi, vj = -Infinity;\n  while (++i < n) if ((vi = +series[i][1]) > vj) vj = vi, j = i;\n  return j;\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import appearance from \"./appearance.js\";\nimport {sum} from \"./ascending.js\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = appearance(series),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","export default function registryFactory(parentRegistry, registerName = 'unspecified', logger) {\n  let defaultValue;\n  const reg = {};\n  const parent = parentRegistry || {\n    get: () => undefined,\n    has: () => false,\n    default: () => undefined,\n  };\n\n  defaultValue = parent.default();\n\n  /**\n   * @private\n   * @param {string} key\n   * @param {any} value\n   * @throws {TypeError} Key must be a non-empty string\n   * @returns {boolean} False if the given key already exists, true otherwise\n   * @example\n   * var r = registry();\n   * r.add( \"marker\", function(args) {\n   *   return new markers[args.type](args);\n   * });\n   *\n   */\n  function add(key, value) {\n    if (!key || typeof key !== 'string') {\n      throw new TypeError('Invalid argument: key must be a non-empty string');\n    }\n    if (key in reg) {\n      return false;\n    }\n    reg[key] = value;\n    return true;\n  }\n\n  function get(key) {\n    return reg[key] || parent.get(key);\n  }\n\n  function has(key) {\n    return !!reg[key] || parent.has(key);\n  }\n\n  function remove(key) {\n    const d = reg[key];\n    delete reg[key];\n    return d;\n  }\n\n  function getKeys() {\n    return Object.keys(reg);\n  }\n\n  function getValues() {\n    return Object.keys(reg).map((key) => reg[key]);\n  }\n\n  function deflt(d) {\n    if (typeof d !== 'undefined') {\n      defaultValue = d;\n    }\n    return defaultValue;\n  }\n\n  /**\n   * Register a `value` with the given `key`. If `value` is omitted, returns the `value` of `key`.\n   * @alias registry\n   * @param {string} key Name of the type to register\n   * @param {any} [value] Value to store in the registry.\n   * @returns {any} Registered value\n   */\n  function registry(key, value) {\n    if (typeof value !== 'undefined') {\n      return add(key, value);\n    }\n    const ret = get(key);\n    if (logger && typeof ret === 'undefined') {\n      logger.warn(`${key} does not exist in ${registerName} registry`);\n    }\n    return ret || get(defaultValue);\n  }\n\n  registry.add = add;\n  registry.get = get;\n  registry.has = has;\n  registry.remove = remove;\n  registry.getKeys = getKeys;\n  registry.getValues = getValues;\n  registry.default = deflt;\n  registry.register = add; // deprecated\n\n  return registry;\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": formatDecimal,\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import { formatLocale } from 'd3-format';\n\nexport default function formatter(pattern, thousand, decimal) {\n  let locale, d3format;\n\n  /**\n   * Format a value according to the specified pattern created at construct\n   * @private\n   *\n   * @param  {Number} value   The number to be formatted\n   * @return {String}         [description]\n   */\n  function format(value) {\n    return d3format(value);\n  }\n\n  /**\n   * Set the locale for the formatter\n   *\n   * @param  {Object} args   Locale object for formatting\n   * @return {Undefined}      Returns nothing\n   */\n  format.locale = function localeFn(settings) {\n    locale = formatLocale(settings);\n    d3format = locale.format(pattern);\n\n    return this;\n  };\n\n  /**\n   * Resets the formatter using format.locale\n   * @ignore\n   */\n  function reset() {\n    format.locale({\n      decimal: decimal || '.',\n      thousands: thousand || ',',\n      grouping: [3],\n      currency: ['$', ''],\n    });\n  }\n  reset();\n\n  /**\n   * Format a value according to a specific pattern\n   * that is not the one specified in the constructor\n   *\n   * @param  {String} p   Pattern\n   * @param  {Number} v   Value\n   * @param  {String} t   Thousand\n   * @param  {String} d   Decimal\n   * @return {String}     Formatted value\n   */\n  format.format = function formatFn(p, v, t, d) {\n    if (t || d) {\n      thousand = t;\n      decimal = d;\n      reset();\n    }\n    return locale.format(p)(v);\n  };\n\n  /**\n   * Change the pattern on existing formatter\n   *\n   * @param  {String} p     Pattern (optional)\n   * @return {String}       Returns the pattern\n   */\n  format.pattern = function patternFn(p) {\n    if (p) {\n      pattern = p;\n      d3format = locale.format(p);\n    }\n    return pattern;\n  };\n\n  return format;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import { timeFormatLocale } from 'd3-time-format';\n\nexport default function formatter(pattern) {\n  // eslint-disable-line import/prefer-default-export\n  let locale = timeFormatLocale({\n    dateTime: '%x, %X',\n    date: '%-m/%-d/%Y',\n    time: '%-I:%M:%S %p',\n    periods: ['AM', 'PM'],\n    days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    months: [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December',\n    ],\n    shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  });\n\n  let d3format = locale.format(pattern);\n\n  /**\n   * Format a value according to the specified pattern created at construct\n   *\n   * @param  {Date} value   The number to be formatted\n   * @return {String}         [description]\n   * @private\n   */\n  function format(value) {\n    return d3format(value);\n  }\n\n  /**\n   * Format a value according to a specific pattern\n   * that is not the one specified in the constructor\n   *\n   * @param  {String} p   Pattern\n   * @param  {Date} v   Value\n   * @return {String}     Formatted value\n   */\n  format.format = function formatFn(p, v) {\n    return locale.format(p)(v);\n  };\n\n  /**\n   * Set the locale for the formatter\n   *\n   * @param  {Object} args   Locale object for formatting\n   * @return {Undefined}      Returns nothing\n   */\n  format.locale = function localeFn(...args) {\n    locale = timeFormatLocale(...args);\n    d3format = locale.format(pattern);\n\n    return this;\n  };\n\n  /**\n   * Parse a string to a date according to a pattern\n   *\n   * @param  {String} p   Pattern\n   * @param  {String} v   Value\n   * @return {Date}     Date\n   */\n  format.parse = function parse(p, v) {\n    return locale.parse(p)(v);\n  };\n\n  /**\n   * Returns a parser that parses strings to date according to the pattern\n   *\n   * @param  {String} p   Pattern\n   * @return {Function}   Parser\n   */\n  format.parsePattern = function parsePattern(p) {\n    return locale.parse(p);\n  };\n\n  return format;\n}\n","import registry from '../utils/registry';\n\nimport { numberFormat as d3NumberFormatter, timeFormat as d3TimeFormatter } from './d3';\n\n/**\n * @typedef {function} formatter\n * @returns {any} Returns a formatted value\n */\n\n/**\n * @typedef {object} FormatterDefinition\n * @property {string} [formatter] Name of the formatter\n * @property {string} [type] Type of formatter\n * @property {string} [format] Format string\n * @property {DataExtraction|DataFieldExtraction} [data] The data to create formatter from\n */\n\nconst formatterRegistry = registry();\n\nformatterRegistry('d3-number', d3NumberFormatter);\nformatterRegistry('d3-time', d3TimeFormatter);\n\nexport { formatterRegistry as default };\n","/* eslint no-return-assign: 0 */\nimport formatterFn from '../formatter';\n\n// TODO - decide whether usage of .call() is appropriate when invoking accessors, if yes then arrow functions are not allowed!\n\nconst getFormatter = (data) => {\n  if (typeof data.formatter === 'function') {\n    return data.formatter();\n  }\n  const f = data.formatter || {};\n  return formatterFn(f.type || 'd3-number')(f.format || '');\n};\n\nconst accessors = {\n  id: (data) => `${data.source}/${data.key || data.title}`,\n  key: (data) => String(data.key || data.title),\n  tags: (data) => data.tags,\n  min: (data) => data.min,\n  max: (data) => data.max,\n  type: (data) => data.type,\n  title: (data) => String(data.title),\n  values: (data) => data.values,\n  value: (v) => v,\n  label: (v) => v,\n  formatter: (data) => getFormatter(data),\n};\n\n/**\n * Create a new field with default settings\n * @ignore\n * @return {Field} Data field\n */\nexport default function field(\n  data,\n  {\n    id = accessors.id,\n    key = accessors.key,\n    min = accessors.min,\n    max = accessors.max,\n    type = accessors.type,\n    tags = accessors.tags,\n    title = accessors.title,\n    values = accessors.values,\n    value = accessors.value,\n    label = accessors.label,\n    formatter = accessors.formatter,\n  } = {}\n) {\n  /**\n   * @alias Field\n   */\n  const f = {\n    /**\n     * Returns this field's id\n     * @returns {string}\n     */\n    id: () => id(data),\n\n    /**\n     * Returns this field's key\n     * @returns {string}\n     */\n    key: () => key(data),\n\n    /**\n     * Returns the input data\n     * @returns {any}\n     */\n    raw: () => data,\n    /**\n     * Returns the tags.\n     * @return {Array<string>}\n     */\n    tags: () => tags(data),\n\n    /**\n     * Returns this field's type: 'dimension' or 'measure'.\n     * @return {string}\n     */\n    type: () => type(data),\n\n    /**\n     * Returns the min value of this field.\n     * @return {number}\n     */\n    min: () => min(data),\n\n    /**\n     * Returns the max value of this field.\n     * @return {number}\n     */\n    max: () => max(data),\n\n    /**\n     * Returns this field's title.\n     * @return {string}\n     */\n    title: () => title(data),\n\n    /**\n     * Returns the values of this field.\n     * @return {Array<DatumExtract>}\n     */\n    items: () => values(data),\n\n    /**\n     * Returns a formatter adapted to the content of this field.\n     */\n    formatter: () => formatter(data),\n\n    value,\n    label,\n  };\n\n  return f;\n}\n","import {\n  stack,\n  stackOrderAscending,\n  stackOrderInsideOut,\n  stackOrderNone,\n  stackOrderReverse,\n  stackOffsetDiverging,\n  stackOffsetNone,\n  stackOffsetSilhouette,\n  stackOffsetExpand,\n  stackOffsetWiggle,\n} from 'd3-shape';\nimport fieldFn from './field';\n\nconst OFFSETS = {\n  diverging: stackOffsetDiverging,\n  none: stackOffsetNone,\n  silhouette: stackOffsetSilhouette,\n  expand: stackOffsetExpand,\n  wiggle: stackOffsetWiggle,\n};\n\nconst ORDERS = {\n  ascending: stackOrderAscending,\n  insideout: stackOrderInsideOut,\n  none: stackOrderNone,\n  reverse: stackOrderReverse,\n};\n\nfunction stacked(data, config, ds) {\n  const stackIds = {};\n  const stackFn = config.stackKey;\n  const valueFn = config.value;\n  const startProp = config.startProp || 'start';\n  const endProp = config.endProp || 'end';\n  const offset = config.offset || 'none';\n  const order = config.order || 'none';\n  const valueRef = config.valueRef || '';\n\n  let maxStackCount = 0;\n\n  let valueFields = {};\n\n  for (let i = 0; i < data.items.length; i++) {\n    let p = data.items[i];\n    let sourceField = valueRef ? p[valueRef] : null;\n    if (sourceField && sourceField.source) {\n      let ff = `${sourceField.source.key || ''}/${sourceField.source.field}`;\n      if (!valueFields[ff]) {\n        valueFields[ff] = sourceField.source;\n      }\n    }\n    let sid = stackFn(p);\n    stackIds[sid] = stackIds[sid] || { items: [] };\n    stackIds[sid].items.push(p);\n\n    maxStackCount = Math.max(maxStackCount, stackIds[sid].items.length);\n  }\n\n  const keys = Array.apply(null, { length: maxStackCount }).map(Number.call, Number); // eslint-disable-line\n  const matrix = Object.keys(stackIds).map((sid) => stackIds[sid].items);\n\n  const d3Stack = stack()\n    .keys(keys)\n    .value((s, key) => (s[key] ? valueFn(s[key]) : 0))\n    .order(ORDERS[order])\n    .offset(OFFSETS[offset]);\n\n  let series = d3Stack(matrix);\n  let values = [];\n\n  for (let i = 0; i < series.length; i++) {\n    let serie = series[i];\n    for (let s = 0; s < serie.length; s++) {\n      let range = serie[s];\n      let item = serie[s].data[serie.key];\n      if (!item) {\n        continue;\n      }\n      item[startProp] = { value: range[0] };\n      item[endProp] = { value: range[1] };\n      values.push(range[0], range[1]);\n    }\n  }\n\n  let stackedFields = Object.keys(valueFields)\n    .map((f) => {\n      let dSource = ds(valueFields[f].key);\n      return dSource ? dSource.field(valueFields[f].field) : null;\n    })\n    .filter((f) => !!f);\n\n  const field = fieldFn({\n    title: stackedFields.map((f) => f.title()).join(', '),\n    min: Math.min(...values),\n    max: Math.max(...values),\n    type: 'measure',\n    formatter: stackedFields[0] ? stackedFields[0].formatter : undefined,\n  });\n  data.fields.push(field);\n}\n\nexport { stacked as default };\n","import stack from './stack';\n\nexport default function extract(dataConfig, data = {}, opts = {}) {\n  let extracted = {\n    // items: [],\n    // fields: [],\n    // source: null,\n    // value: null,\n    // label: null,\n    // children: null,\n    // root: null,\n    // graph: null\n  };\n\n  const logger = opts.logger;\n\n  if (Array.isArray(dataConfig)) {\n    // if data is an array, assume it's manual data input -> normalize\n    extracted.items = dataConfig.map((v) => ({ value: v, label: String(v) }));\n  } else if (dataConfig) {\n    if ('collection' in dataConfig) {\n      extracted = { ...data.collection(dataConfig.collection) };\n    } else {\n      const source = data.dataset ? data.dataset(dataConfig.source) : null;\n      let valueFn = dataConfig.value || ((d) => d);\n      let labelFn = dataConfig.label || ((d) => d);\n      if (dataConfig.groupBy || dataConfig.mapTo) {\n        // DEPRECATION\n        logger.warn('Deprecated \"data\" configuration', dataConfig);\n        extracted.items = [];\n      } else if (dataConfig.hierarchy) {\n        extracted.root = source.hierarchy ? source.hierarchy(dataConfig.hierarchy) : null;\n        extracted.fields = source.fields();\n      } else if (dataConfig.items) {\n        extracted.items = dataConfig.items.map((v) => ({ value: valueFn(v), label: String(labelFn(v)) }));\n      } else if (dataConfig.extract) {\n        const extractionsConfigs = Array.isArray(dataConfig.extract) ? dataConfig.extract : [dataConfig.extract];\n        extracted.items = [];\n        const sourceFields = [];\n        extractionsConfigs.forEach((cfg) => {\n          const s = cfg.source ? data.dataset(cfg.source) : source;\n          if (!s) {\n            return;\n          }\n          extracted.items.push(...s.extract(cfg));\n          if (typeof cfg.field !== 'undefined') {\n            sourceFields.push(s.field(cfg.field));\n          }\n        });\n        if (sourceFields.length) {\n          extracted.fields = sourceFields;\n        }\n        if (dataConfig.amend && Array.isArray(dataConfig.amend)) {\n          extracted.items.push(...dataConfig.amend);\n        }\n      } else if (typeof dataConfig.field !== 'undefined' && source) {\n        const f = source.field(dataConfig.field);\n        if (f) {\n          if (!extracted.fields) {\n            extracted.fields = [];\n          }\n          extracted.fields.push(f);\n          if (!('value' in dataConfig)) {\n            valueFn = f.value || ((v) => v);\n            labelFn = f.label || ((v) => v);\n            extracted.value = valueFn;\n          }\n          extracted.items = f\n            .items()\n            .map((v) => ({ value: valueFn(v), label: String(labelFn(v)), source: { field: dataConfig.field } }));\n          // TODO - add source: { key: dataConfig.source, field: dataConfig.field, data: v }\n        }\n      } else if (dataConfig.fields) {\n        dataConfig.fields.forEach((obj) => {\n          const s = typeof obj === 'object' && obj.source ? data.dataset(obj.source) : source;\n          if (!s) {\n            return;\n          }\n          let f;\n          if (typeof obj === 'object' && typeof obj.field !== 'undefined') {\n            f = s.field(obj.field);\n          } else {\n            f = s.field(obj);\n          }\n          if (f) {\n            if (!extracted.fields) {\n              extracted.fields = [];\n            }\n            extracted.fields.push(f);\n          }\n        });\n      }\n\n      if (extracted.items && dataConfig.map) {\n        extracted.items = extracted.items.map(dataConfig.map);\n      }\n    }\n\n    if (dataConfig && dataConfig.stack) {\n      stack(extracted, dataConfig.stack, data.dataset);\n    }\n  }\n  if (dataConfig && !Array.isArray(dataConfig) && typeof dataConfig.filter === 'function' && extracted.items) {\n    extracted.items = extracted.items.filter(dataConfig.filter);\n  }\n  if (dataConfig && !Array.isArray(dataConfig) && typeof dataConfig.sort === 'function' && extracted.items) {\n    extracted.items = extracted.items.sort(dataConfig.sort);\n  }\n  return extracted;\n}\n","import extend from 'extend';\nimport extract from './extractor';\n\n/**\n * @interface CollectionSettings\n * @property {string} key Unique key for the collection\n * @property {DataExtraction} data Data configuration\n * @example\n * {\n    key: 'my-collection',\n    data: {\n      extract: [{\n        source: 'Products',\n        field: 'Product',\n        value: d => d.name,\n        label: d => `<${d.name}>`\n        props: {\n          year: { field: 'Year' }\n          num: { field: 'Sales' }\n        }\n      }],\n      filter: d => d.label !== 'Sneakers', // extract everything except Sneakers\n      sort: (a, b) => a.label > b.label ? -1 : 1, // sort descending\n    }\n * }\n */\n\nfunction create(config, d, opts, extractor = extract) {\n  const collections = {};\n\n  (config || []).forEach((cfg) => {\n    if (!cfg.key) {\n      throw new Error('Data collection is missing \"key\" property');\n    }\n    if (typeof cfg.data === 'object' && 'collection' in cfg.data) {\n      throw new Error('Data config for collections may not reference other collections');\n    }\n    collections[cfg.key] = () => extractor(cfg.data, d, opts);\n  });\n\n  const fn = (key) => {\n    let k;\n    let cfg;\n    if (typeof key === 'string') {\n      k = key;\n    } else if (typeof key === 'object') {\n      k = key.key;\n      cfg = key;\n    }\n    if (!(k in collections)) {\n      throw new Error(`Unknown data collection: ${k}`);\n    }\n    if (typeof collections[k] === 'function') {\n      collections[k] = collections[k]();\n    }\n    let coll = collections[k];\n    if (cfg) {\n      if (cfg.fields && cfg.fields.filter) {\n        let filtered = coll.fields.filter(cfg.fields.filter);\n        if (coll.fields.length !== filtered.length) {\n          coll = extend(coll, { fields: filtered });\n        }\n      }\n    }\n\n    return coll;\n  };\n\n  return fn;\n}\n\nexport { create as default };\n","import extractData from '../../data/extractor';\n\nexport function create(options, data, deps, extractor = extractData) {\n  if (options.data) {\n    const d = extractor(options.data, data, deps);\n    if (d && d.fields && d.fields[0]) {\n      // TODO Have some magic to handle and merge formatters from multiple sources\n      return d.fields[0].formatter();\n    }\n  }\n\n  let formatterType;\n  if (options.formatter) {\n    formatterType = `${options.formatter}-${options.type || 'number'}`;\n  } else {\n    formatterType = options.type || 'd3-number';\n  }\n\n  if (deps.formatter.has(formatterType)) {\n    const f = deps.formatter.get(formatterType)(options.format || '');\n    return f;\n  }\n\n  throw new Error(`Formatter of type '${formatterType}' was not found`);\n}\n\nexport function collection(formattersConfig, data, deps, fn = create) {\n  const formatters = {};\n  return {\n    get(def) {\n      let key;\n      if (typeof def === 'string' && formattersConfig[def]) {\n        key = def;\n      } else if (typeof def === 'object' && 'formatter' in def && formattersConfig[def.formatter]) {\n        key = def.formatter;\n      } else if (typeof def === 'object' && 'type' in def && formattersConfig[def.type]) {\n        key = def.type;\n      }\n\n      if (key) {\n        formatters[key] = formatters[key] || fn(formattersConfig[key], data, deps);\n        return formatters[key];\n      }\n\n      return fn(def || {}, data, deps);\n    },\n    all() {\n      Object.keys(formattersConfig).forEach(this.get);\n      return formatters;\n    },\n  };\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal() {\n  var index = map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import { notNumber } from '../../utils/is-number';\n\nfunction applyFormat(formatter) {\n  return typeof formatter === 'undefined' ? (t) => t : (t) => formatter(t);\n}\n\nfunction clamp(val) {\n  return Math.max(0, Math.min(1, val));\n}\n\nfunction isObject(obj) {\n  return typeof obj === 'object';\n}\n\nfunction minorTicksGenerator(count, start, end) {\n  const r = Math.abs(start - end);\n  const interval = r / (count + 1);\n  const ticks = [];\n  for (let i = 1; i <= count; i++) {\n    const v = i * interval;\n    ticks.push(start < end ? start + v : start - v);\n  }\n  return ticks;\n}\n\nfunction appendMinorTicks(majorTicks, minorCount, scale) {\n  if (majorTicks.length === 1) {\n    return majorTicks;\n  }\n\n  const ticks = majorTicks.concat([]);\n\n  for (let i = 0; i < majorTicks.length; i++) {\n    let start = majorTicks[i];\n    let end = majorTicks[i + 1];\n\n    if (i === 0 && start !== scale.start()) {\n      // Before and after first major tick\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n      start -= end - start;\n      end = majorTicks[i];\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    } else if (i === majorTicks.length - 1 && end !== scale.end()) {\n      // After last major tick\n      end = start + (start - majorTicks[i - 1]);\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    } else {\n      ticks.push(...minorTicksGenerator(minorCount, start, end));\n    }\n  }\n\n  return ticks.filter((t) => t >= scale.min() && t <= scale.max());\n}\n\n/**\n * Generate ticks based on a distance, for each 100th unit, one additional tick may be added\n * @private\n * @param  {Number} distance       Distance between each tick\n * @param  {Number} scale         The scale instance\n * @param  {Number} [minorCount=0]     Number of tick added between each distance\n * @param  {Number} [unitDivider=100]   Number to divide distance with\n * @return {Array}               Array of ticks\n */\nexport function looseDistanceBasedGenerator({\n  distance,\n  scale,\n  minorCount = 0,\n  unitDivider = 100,\n  formatter = undefined,\n}) {\n  const step = !notNumber(unitDivider) && !notNumber(distance) ? Math.max(distance / unitDivider, 2) : 2;\n  const count = Math.min(1000, Math.round(step)); // safe guard against huge numbers\n  let majorTicks = scale.ticks(count);\n  if (majorTicks.length <= 1) {\n    majorTicks = scale.ticks(count + 1);\n  }\n\n  const ticks = minorCount > 0 ? appendMinorTicks(majorTicks, minorCount, scale) : majorTicks;\n  ticks.sort((a, b) => a - b);\n\n  const ticksFormatted = ticks.map(applyFormat(formatter));\n\n  return ticks.map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: ticksFormatted[i],\n      value: tick,\n      isMinor: majorTicks.indexOf(tick) === -1,\n    };\n  });\n}\n\n/**\n * Generate ticks based on a distance, for each 100th unit, one additional tick may be added.\n * Will attempt to round the bounds of domain to even values and generate ticks hitting the domain bounds.\n * @private\n * @param  {Number} distance       Distance between each tick\n * @param  {Number} scale         The scale instance\n * @param  {Number} [minorCount=0]     Number of tick added between each distance\n * @param  {Number} [unitDivider=100]   Number to divide distance with\n * @return {Array}               Array of ticks\n */\nexport function tightDistanceBasedGenerator({\n  distance,\n  scale,\n  minorCount = 0,\n  unitDivider = 100,\n  formatter = undefined,\n}) {\n  const step = !notNumber(unitDivider) && !notNumber(distance) ? Math.max(distance / unitDivider, 2) : 2;\n  const count = Math.min(1000, Math.round(step)); // safe guard against huge numbers\n  const n = count > 10 ? 10 : count;\n  scale.nice(n);\n\n  const majorTicks = scale.ticks(count);\n  const ticks = minorCount > 0 ? appendMinorTicks(majorTicks, minorCount, scale) : majorTicks;\n  ticks.sort((a, b) => a - b);\n\n  const ticksFormatted = ticks.map(applyFormat(formatter));\n\n  return ticks.map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: ticksFormatted[i],\n      value: tick,\n      isMinor: majorTicks.indexOf(tick) === -1,\n    };\n  });\n}\n\nfunction ticksByCount({ count, minorCount, scale, formatter }) {\n  return scale.ticks((count - 1) * minorCount + count).map((tick, i) => {\n    const position = scale(tick);\n    return {\n      position,\n      start: position,\n      end: position,\n      label: formatter(tick),\n      isMinor: i % (minorCount + 1) !== 0,\n      value: tick,\n    };\n  });\n}\n\nfunction ticksByValue({ values, scale, formatter = (v) => v }) {\n  return values\n    .sort((a, b) => (isObject(a) ? a.value : a) - (isObject(b) ? b.value : b))\n    .filter((v, i, ary) => {\n      const val = isObject(v) ? v.value : v;\n      return val <= scale.max() && val >= scale.min() && ary.indexOf(v) === i;\n    })\n    .map((v) => {\n      const isObj = isObject(v);\n      const value = isObj ? v.value : v;\n      const position = scale(value);\n      return {\n        position,\n        value,\n        label: isObj && typeof v.label !== 'undefined' ? v.label : formatter(value),\n        isMinor: isObj ? !!v.isMinor : false,\n        start: isObj && !isNaN(v.start) ? clamp(scale(v.start)) : position, // TODOHandle end < start?\n        end: isObj && !isNaN(v.end) ? clamp(scale(v.end)) : position, // TODO Handle start > end?\n      };\n    });\n}\n\nfunction forceTicksAtBounds(ticks, scale, formatter) {\n  const ticksP = ticks.map((t) => t.position);\n  const range = scale.range();\n\n  if (ticksP.indexOf(range[0]) === -1) {\n    ticks.splice(0, 0, {\n      position: range[0],\n      start: range[0],\n      end: range[0],\n      label: formatter(scale.start()),\n      isMinor: false,\n      value: scale.start(),\n    });\n  } else if (ticks[0] && ticks[0].isMinor) {\n    ticks[0].isMinor = false; // Convert to major tick\n  }\n\n  const lastTick = ticks[ticks.length - 1];\n  if (ticksP.indexOf(range[1]) === -1) {\n    ticks.push({\n      position: range[1],\n      start: range[1],\n      end: range[1],\n      label: formatter(scale.end()),\n      isMinor: false,\n      value: scale.end(),\n    });\n  } else if (lastTick && lastTick.isMinor) {\n    lastTick.isMinor = false; // Convert to major tick\n  }\n}\n\nexport function generateContinuousTicks({ settings, scale, distance, formatter = (val) => val }) {\n  let ticks;\n  const minorCount =\n    settings.minorTicks && !notNumber(settings.minorTicks.count) ? Math.min(100, settings.minorTicks.count) : 0;\n\n  if (Array.isArray(settings.ticks.values)) {\n    const values = settings.ticks.values.filter((v) => (typeof v === 'object' ? !notNumber(v.value) : !notNumber(v)));\n    ticks = ticksByValue({ values, scale: scale.copy(), formatter });\n  } else if (!notNumber(settings.ticks.count)) {\n    const count = Math.min(1000, settings.ticks.count);\n    ticks = ticksByCount({\n      count,\n      minorCount,\n      scale: scale.copy(),\n      formatter,\n    });\n  } else {\n    const tickGen = settings.ticks.tight ? tightDistanceBasedGenerator : looseDistanceBasedGenerator;\n    ticks = tickGen({\n      distance,\n      minorCount,\n      unitDivider: settings.ticks.distance,\n      scale,\n      formatter,\n    });\n\n    if (settings.ticks.forceBounds) {\n      forceTicksAtBounds(ticks, scale, formatter);\n    }\n  }\n\n  return ticks;\n}\n\nexport function generateDiscreteTicks({ scale }) {\n  const domain = scale.domain();\n  const values = domain;\n  const dataItems = scale.data().items;\n  const labels = scale.labels ? scale.labels() : values;\n  const bandwidth = scale.bandwidth();\n\n  return values.map((d, i) => {\n    const start = scale(d);\n    return {\n      position: start + bandwidth / 2,\n      label: `${labels[i]}`,\n      data: dataItems ? dataItems[i] : undefined,\n      start,\n      end: start + bandwidth,\n    };\n  });\n}\n","export default function resolveSettings(settings = {}, defaultSettings = {}, context = {}) {\n  const stngs = {};\n\n  Object.keys(defaultSettings).forEach((key) => {\n    const type = typeof settings[key];\n\n    if (type === 'function') {\n      stngs[key] = settings[key](context);\n    } else if (type === 'undefined') {\n      stngs[key] = defaultSettings[key];\n    } else {\n      stngs[key] = settings[key];\n    }\n  });\n\n  return stngs;\n}\n","import { scaleLinear as d3ScaleLinear } from 'd3-scale';\nimport extend from 'extend';\n\nimport { notNumber } from '../utils/is-number';\nimport { generateContinuousTicks } from './ticks/tick-generators';\nimport resolveSettings from './settings-resolver';\n\nexport const DEFAULT_SETTINGS = {\n  min: NaN,\n  max: NaN,\n  expand: NaN,\n  include: [],\n  invert: false,\n};\n\nexport const DEFAULT_TICKS_SETTINGS = {\n  tight: false,\n  forceBounds: false,\n  values: undefined,\n  count: NaN,\n  distance: 100,\n};\n\nexport const DEFAULT_MINORTICKS_SETTINGS = {\n  count: NaN,\n};\n\n/**\n * @typedef {object} ScaleLinear\n * @property {string} [type='linear']\n * @property {number} [expand] - Expand the output range\n * @property {boolean} [invert=false] - Invert the output range\n * @property {number[]} [include] - Include specified numbers in the output range\n * @property {object} [ticks]\n * @property {boolean} [ticks.tight = false]\n * @property {boolean} [ticks.forceBounds = false]\n * @property {number} [ticks.distance = 100]  - Approximate distance between each tick\n * @property {number[]|object[]} [ticks.values] - If set, ticks are no longer generated but instead equal to this set\n * @property {number} [ticks.count]\n * @property {object} [minorTicks]\n * @property {number} [minorTicks.count = 3]\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n */\n\nfunction getMinMax(settings, fields) {\n  const min = +settings.min;\n  const max = +settings.max;\n  let fieldMin = 0;\n  let fieldMax = 1;\n  if (fields && fields[0]) {\n    const minValues = fields.map((m) => m.min()).filter((v) => !isNaN(v));\n    const maxValues = fields.map((m) => m.max()).filter((v) => !isNaN(v));\n    fieldMin = minValues.length ? Math.min(...minValues) : Number.NaN;\n    fieldMax = maxValues.length ? Math.max(...maxValues) : Number.NaN;\n\n    if (isNaN(fieldMin) || isNaN(fieldMax)) {\n      fieldMin = -1;\n      fieldMax = 1;\n    } else if (fieldMin === fieldMax && fieldMin === 0) {\n      fieldMin = -1;\n      fieldMax = 1;\n    } else if (fieldMin === fieldMax && fieldMin) {\n      fieldMin -= Math.abs(fieldMin * 0.1);\n      fieldMax += Math.abs(fieldMax * 0.1);\n    } else if (!isNaN(settings.expand)) {\n      const range = fieldMax - fieldMin;\n      fieldMin -= range * settings.expand;\n      fieldMax += range * settings.expand;\n    }\n\n    if (Array.isArray(settings.include)) {\n      const i = settings.include.filter((n) => !isNaN(n));\n      fieldMin = Math.min(...i, fieldMin);\n      fieldMax = Math.max(...i, fieldMax);\n    }\n  }\n\n  return {\n    mini: !isNaN(min) ? min : fieldMin,\n    maxi: !isNaN(max) ? max : fieldMax,\n  };\n}\n\nfunction initNormScale(normScale, scale) {\n  if (normScale.instance) {\n    return;\n  }\n  normScale.instance = scale.copy();\n  normScale.instance.domain([scale.start(), scale.end()]);\n  normScale.instance.clamp(true);\n  normScale.instance.range(normScale.invert ? [1, 0] : [0, 1]);\n}\n/**\n * @alias scaleLinear\n * @private\n * @param { object } settings\n * @param { field[] } [fields]\n * @return { linear }\n */\n\nexport default function scaleLinear(settings = {}, data = {}, resources = {}) {\n  const d3Scale = d3ScaleLinear();\n  const normScale = { instance: null, invert: false };\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  stgns.ticks = resolveSettings(settings.ticks, DEFAULT_TICKS_SETTINGS, ctx);\n  stgns.minorTicks = resolveSettings(settings.minorTicks, DEFAULT_MINORTICKS_SETTINGS, ctx);\n  let tickCache;\n\n  /**\n   * @alias linear\n   * @private\n   * @param { Object } value\n   * @return { number }\n   */\n  function fn(v) {\n    if (notNumber(v)) {\n      return NaN;\n    }\n    return d3Scale(v);\n  }\n\n  fn.data = () => data;\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_invert }\n   * @param { number } value The inverted value\n   * @return { number } The inverted scaled value\n   */\n  fn.invert = function invert(value) {\n    return d3Scale.invert(value);\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_rangeRound }\n   * @param { number[] } values Range values\n   * @return { linear } The instance this method was called on\n   */\n  fn.rangeRound = function rangeRound(values) {\n    d3Scale.rangeRound(values);\n    return fn;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_clamp }\n   * @param { boolean } [ value=true ] TRUE if clamping should be enabled\n   * @return { linear } The instance this method was called on\n   */\n  fn.clamp = function clamp(value = true) {\n    d3Scale.clamp(value);\n    return fn;\n  };\n\n  /**\n   * Get cached ticks (if any)\n   * @return { number | undefined }\n   */\n  fn.cachedTicks = function fnCachedTicks() {\n    return tickCache;\n  };\n\n  /**\n   * Clear the tick cache\n   * @return {number | undefined}\n   */\n  fn.clearTicksCache = function fnClearTicks() {\n    tickCache = undefined;\n    return this;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_ticks }\n   * @param { Object } input Number of ticks to generate or an object passed to tick generator\n   * @return { number[] | Object } Array of ticks or any type the custom tick generator returns\n   */\n  fn.ticks = function ticks(input) {\n    if (input !== null && typeof input === 'object') {\n      input.settings = input.settings || {};\n      // TODO Discontinue support for custom ticks settings as argument\n      input.settings = extend(true, {}, stgns, input.settings);\n      input.scale = fn;\n      tickCache = generateContinuousTicks(input);\n      return tickCache;\n    }\n\n    tickCache = d3Scale.ticks(input);\n    return tickCache;\n  };\n\n  /**\n   * {@link https://github.com/d3/d3-scale#continuous_nice }\n   * @param { number } count\n   * @return { linear } The instance this method was called on\n   */\n  fn.nice = function nice(count) {\n    d3Scale.nice(count);\n\n    return fn;\n  };\n\n  // TODO Support this?\n  fn.tickFormat = function tickFormat(count, format) {\n    return d3Scale.tickFormat(count, format);\n  };\n\n  // TODO Support this?\n  fn.interpolate = function interpolate(func) {\n    d3Scale.interpolate(func);\n    return fn;\n  };\n\n  /**\n   * @param { number[] } [values] Set or Get domain values\n   * @return { linear | Number[] } The instance this method was called on if a parameter is provided, otherwise the current domain is returned\n   */\n  fn.domain = function domain(values) {\n    if (arguments.length) {\n      d3Scale.domain(values);\n      if (normScale.instance) {\n        normScale.instance.domain([fn.start(), fn.end()]);\n      }\n      return fn;\n    }\n    return d3Scale.domain();\n  };\n\n  /**\n   * @param { number[] } [values] Set or Get range values\n   * @return { linear | number[] } The instance this method was called on if a parameter is provided, otherwise the current range is returned\n   */\n  fn.range = function range(values) {\n    if (arguments.length) {\n      d3Scale.range(values);\n\n      return fn;\n    }\n    return d3Scale.range();\n  };\n\n  /**\n   * Get the first value of the domain\n   * @return { number }\n   */\n  fn.start = function start() {\n    return fn.domain()[0];\n  };\n\n  /**\n   * Get the last value of the domain\n   * @return { number }\n   */\n  fn.end = function end() {\n    return fn.domain()[this.domain().length - 1];\n  };\n\n  /**\n   * Get the minimum value of the domain\n   * @return { number }\n   */\n  fn.min = function min() {\n    return Math.min(this.start(), this.end());\n  };\n\n  /**\n   * Get the maximum value of the domain\n   * @return { number }\n   */\n  fn.max = function max() {\n    return Math.max(this.start(), this.end());\n  };\n\n  /**\n   * Divides the domain and range into uniform segments, based on start and end value\n   * @param  { number } segments The number of segments\n   * @return { function } The instance this method was called on\n   * @example\n   * let s = linear();\n   * s.domain([0, 10]);\n   * s.range([0, 1]);\n   * s.classify( 2 );\n   * s.domain(); // [10, 5, 5, 0]\n   * s.range(); // [0.75, 0.75, 0.25, 0.25]\n   */\n  fn.classify = function classify(segments) {\n    let valueRange = (fn.start() - fn.end()) / segments,\n      domain = [fn.end()],\n      range = [],\n      samplePos = valueRange / 2;\n\n    for (let i = 0; i < segments; i++) {\n      let lastVal = domain[domain.length - 1] || 0,\n        calIntervalPos = lastVal + valueRange,\n        calSamplePos = lastVal + samplePos,\n        sampleColValue = fn(calSamplePos);\n\n      domain.push(...[calIntervalPos, calIntervalPos]);\n      range.push(...[sampleColValue, sampleColValue]);\n    }\n    domain.pop();\n    fn.domain(domain);\n    fn.range(range);\n\n    return fn;\n  };\n\n  fn.copy = function copy() {\n    const cop = scaleLinear(settings, data, resources);\n    cop.domain(fn.domain());\n    cop.range(fn.range());\n    cop.clamp(d3Scale.clamp());\n    return cop;\n  };\n\n  /**\n   * @param {number} d - A domain value\n   * @return {number} A normalized range output given in range 0-1\n   * @example\n   * const scale = scaleLinear().domain([0, 10]).range([0, 10000]);\n   * scale.norm(5); // Returns 0.5\n   * scale(5); // Returns 5000\n   *\n   * scale.domain([0, 2, 10]);\n   * scale.norm(5); // Returns 0.5\n   */\n  fn.norm = function norm(d) {\n    initNormScale(normScale, fn);\n\n    return normScale.instance(d);\n  };\n\n  /**\n   * @param {number} d - A normalized value in range 0-1\n   * @return {number} A corresponding domain value\n   * @example\n   * const scale = scaleLinear().domain([0, 10]).range([0, 10000]);\n   * scale.normInvert(0.5); // Returns 5\n   * scale.invert(5000); // Returns 5\n   */\n  fn.normInvert = function norm(t) {\n    initNormScale(normScale, fn);\n\n    return normScale.instance.invert(t);\n  };\n\n  const { mini, maxi } = getMinMax(stgns, data ? data.fields : []);\n\n  fn.domain([mini, maxi]);\n  fn.range(stgns.invert ? [1, 0] : [0, 1]);\n  normScale.invert = stgns.invert;\n\n  return fn;\n}\n","import extend from 'extend';\nimport { scaleBand as d3ScaleBand } from 'd3-scale';\nimport { generateDiscreteTicks } from './ticks/tick-generators';\nimport resolveSettings from './settings-resolver';\n\nexport const DEFAULT_SETTINGS = {\n  padding: 0,\n  paddingInner: NaN,\n  paddingOuter: NaN,\n  align: 0.5,\n  invert: false,\n  maxPxStep: NaN,\n  range: [0, 1],\n};\n\n/**\n * @typedef {object} ScaleBand\n * @property {string} [type='band']\n * @property {number} [padding=0] - Sets both inner and outer padding to the same value\n * @property {number} [paddingInner=0] - Inner padding\n * @property {number} [paddingOuter=0] - Outer padding\n * @property {number} [align=0.5] -  Control how the outer padding should be distributed, where 0.5 would distribute the padding equally on both sides\n * @property {boolean} [invert=false] - Invert the output range\n * @property {number} [maxPxStep] - Explicitly limit the bandwidth to a pixel value\n * @property {function} [label] - Callback label function, applied on each datum\n * @property {function} [value] - Callback value function, applied on each datum\n * @property {array<number>|function} [range=[0, 1]] - Set range explicitly (ignored when maxPxStep takes effect)\n */\n\n/**\n * @alias scaleBand\n * @memberof picasso\n * @private\n * @param { Object } settings\n * @param { fields[] } [fields]\n * @param { dataset } [dataset]\n * @return { band }\n */\n\nexport default function scaleBand(settings = {}, data = {}, resources = {}) {\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  const items = data.items || [];\n  const domainToDataMapping = {};\n  const values = [];\n  const labels = [];\n\n  // I would like to define this outside of scaleBand but it cause the documentation to be in the wrong order\n  function augmentScaleBand(band, fsettings) {\n    band.data = () => data;\n\n    band.datum = (domainValue) => items[domainToDataMapping[domainValue]];\n\n    /**\n     * Get the first value of the domain\n     * @return { number }\n     */\n    band.start = function start() {\n      return band.domain()[0];\n    };\n\n    /**\n     * Get the last value of the domain\n     * @return { number }\n     */\n    band.end = function end() {\n      return band.domain()[band.domain().length - 1];\n    };\n\n    band.labels = () => labels;\n\n    /**\n     * Generate discrete ticks\n     * @return {Object[]} Array of ticks\n     */\n    band.ticks = function ticks(input = {}) {\n      input.scale = band;\n      return generateDiscreteTicks(input, fsettings.trackBy || 'label');\n    };\n  }\n  /**\n   * An augmented {@link https://github.com/d3/d3-scale#_band|d3 band scale}\n   * @alias band\n   * @private\n   * @kind function\n   * @param { Object } value\n   * @return { number }\n   */\n  const band = d3ScaleBand();\n  augmentScaleBand(band, settings);\n\n  /**\n   * if required creates a new scale with a restricted range\n   * so that step size is at most maxPxStep\n   * otherwise it returns itself\n   * @param { number } size\n   * @return { band }\n   */\n  band.pxScale = function pxScale(size) {\n    const max = stgns.maxPxStep;\n    if (isNaN(max)) {\n      return band;\n    }\n    const n = band.domain().length;\n    const sizeRelativeToStep = Math.max(1, n - band.paddingInner() + 2 * band.paddingOuter());\n\n    if (sizeRelativeToStep * max >= size) {\n      return band;\n    }\n\n    const newBand = band.copy();\n    newBand.type = band.type;\n    augmentScaleBand(newBand, settings);\n    const t = (sizeRelativeToStep * max) / size;\n    const offset = (1 - t) * band.align();\n    newBand.range(stgns.invert ? [t + offset, offset] : [offset, t + offset]);\n\n    return newBand;\n  };\n\n  const valueFn = typeof settings.value === 'function' ? settings.value : (d) => d.datum.value;\n  const labelFn = typeof settings.label === 'function' ? settings.label : (d) => d.datum.label;\n\n  for (let i = 0; i < items.length; i++) {\n    const arg = extend({ datum: items[i] }, ctx);\n    const v = valueFn(arg, i);\n    if (values.indexOf(v) === -1) {\n      values.push(v);\n      labels.push(labelFn(arg, i));\n      domainToDataMapping[v] = i;\n    }\n  }\n\n  band.domain(values);\n  band.range(stgns.invert ? stgns.range.slice().reverse() : stgns.range);\n  band.padding(isNaN(stgns.padding) ? 0 : stgns.padding);\n  if (!isNaN(stgns.paddingInner)) {\n    band.paddingInner(stgns.paddingInner);\n  }\n  if (!isNaN(stgns.paddingOuter)) {\n    band.paddingOuter(stgns.paddingOuter);\n  }\n  band.align(isNaN(stgns.align) ? 0.5 : stgns.align);\n\n  return band;\n}\n","import extend from 'extend';\nimport bandScale, { DEFAULT_SETTINGS } from './band';\nimport resolveSettings from './settings-resolver';\n\nconst DEFAULT_TICKS_SETTINGS = {\n  depth: 0,\n};\n\nfunction keyGen(node, valueFn, ctx) {\n  return node\n    .ancestors()\n    .map((a) => valueFn(extend({ datum: a.data }, ctx)))\n    .reverse()\n    .slice(1) // Delete root node\n    .toString();\n}\n\nfunction flattenTree(rootNode, settings, ctx) {\n  const ticksDepth = settings.ticks.depth;\n  const valueFn = settings.value;\n  const labelFn = settings.label;\n  const values = [];\n  const labels = [];\n  const items = {};\n  const ticks = [];\n  let expando = 0;\n  if (!rootNode) {\n    return {\n      values,\n      labels,\n      items,\n      ticks,\n    };\n  }\n\n  rootNode.eachAfter((node) => {\n    if (node.depth > 0) {\n      const key = keyGen(node, valueFn, ctx);\n      const leaves = node.leaves() || [node]; // If leaf node returns itself\n      const value = valueFn(extend({ datum: node.data }, ctx));\n      const label = labelFn(extend({ datum: node.data }, ctx));\n      const isBranch = Array.isArray(node.children);\n\n      const item = {\n        key,\n        count: leaves.length,\n        value,\n        label,\n        leftEdge: keyGen(leaves[0], valueFn, ctx),\n        rightEdge: keyGen(leaves[Math.max(leaves.length - 1, 0)], valueFn, ctx),\n        node,\n        // isTick: ticksDepth === null ? !isBranch : node.depth === ticksDepth\n      };\n\n      if (isBranch) {\n        values.push(`SPACER_${expando}_SPACER`);\n        expando++;\n      } else {\n        values.push(key);\n        labels.push(label);\n      }\n\n      if ((ticksDepth <= 0 && !isBranch) || node.depth === ticksDepth) {\n        ticks.push(item);\n      }\n\n      items[key] = item;\n    }\n  });\n\n  const spill = rootNode.height - 1;\n  if (spill > 0) {\n    values.splice(-spill);\n  }\n\n  return {\n    values,\n    labels,\n    items,\n    ticks,\n  };\n}\n\n/**\n * @typedef {object} scale-hBand.settings\n * @private\n * @property {number} [padding=0] - Exposes {@link https://github.com/d3/d3-scale#band_padding}\n * @property {boolean} [paddingOuter=0] - Exposes {@link https://github.com/d3/d3-scale#band_paddingOuter}\n * @property {number[]} [paddingInner=0] - Exposes {@link https://github.com/d3/d3-scale#band_paddingInner}\n * @property {object} [align=0.5] - Exposes {@link https://github.com/d3/d3-scale#band_align}\n * @property {boolean} [invert=false] - Invert the output range\n */\n\n/**\n * Hierarchical band scale, that is an augmented band scale, that takes hierarchical data as input\n * @alias scaleHierarchicalBand\n * @private\n * @param { Object } settings\n * @param { fields[] } [fields]\n * @param { dataset } [dataset] - With a root property that is an instance of D3.js Hierarchy\n * @return { h-band }\n */\n\nexport default function scaleHierarchicalBand(settings = {}, data = {}, resources = {}) {\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n  stgns.ticks = resolveSettings(settings.ticks, DEFAULT_TICKS_SETTINGS, ctx);\n  stgns.value = typeof settings.value === 'function' ? settings.value : (d) => d.datum.value;\n  stgns.label = typeof settings.label === 'function' ? settings.label : (d) => d.datum.value;\n\n  let bandInstance = bandScale(stgns);\n\n  const { values, labels, items, ticks } = flattenTree(data.root, stgns, ctx);\n\n  /**\n   * @alias h-band\n   * @private\n   * @kind function\n   * @param { Object[] } value - Array where each value is a reference to a node, going from depth 1 to n.\n   * @return { number }\n   */\n  const hBand = function fn(val) {\n    const strVal = String(val);\n    const item = items[strVal];\n    if (item) {\n      return bandInstance(stgns.invert ? item.rightEdge : item.leftEdge);\n    }\n\n    return bandInstance(strVal);\n  };\n\n  extend(true, hBand, bandInstance);\n\n  /**\n   * Wrapped {@link https://github.com/d3/d3-scale#band_bandwidth}\n   * @param { Object[] } [val] - Array where each value is a reference to a node, going from depth 1 to n. If omitted, bandwidth for the leaf nodes is return.\n   * @return { number }\n   */\n\n  hBand.bandwidth = function bandwidth(val) {\n    const item = items[String(val)];\n    const bw = bandInstance.bandwidth();\n    if (item && !item.isLeaf) {\n      const left = hBand(item.leftEdge);\n      const right = hBand(item.rightEdge);\n      return Math.abs(left - right) + bw;\n    }\n    return bw;\n  };\n\n  /**\n   * Wrapped {@link https://github.com/d3/d3-scale#band_step}\n   * @param { Object[] } [val] - Array where each value is a reference to a node, going from depth 1 to n. If omitted, step size for the leaf nodes is return.\n   * @return { number }\n   */\n  hBand.step = function step(val) {\n    const item = items[String(val)];\n    const leafCount = item ? item.count : 1;\n    let stepSize = bandInstance.step();\n    stepSize *= leafCount;\n    return stepSize;\n  };\n\n  /**\n   * @return { dataset }\n   */\n  hBand.data = () => data;\n\n  /**\n   * Return datum for a given node\n   * @param { Object[] } val - Array where each value is a reference to a node, going from depth 1 to n.\n   * @return { Object } The datum\n   */\n  hBand.datum = (val) => {\n    const item = items[String(val)];\n    if (item) {\n      return item.node.data;\n    }\n    return null;\n  };\n\n  hBand.copy = () => scaleHierarchicalBand(settings, data, resources);\n\n  /**\n   * @return { Object[] } Labels for each leaf node\n   */\n  hBand.labels = () => labels;\n\n  /**\n   * Generate discrete ticks\n   * @return { Object[] } Ticks for each leaf node\n   */\n  hBand.ticks = () => {\n    // eslint-disable-line arrow-body-style\n    return ticks.map((item) => {\n      const start = hBand(item.key);\n      const bandwidth = hBand.bandwidth(item.key);\n      return {\n        position: start + bandwidth / 2,\n        label: item.label,\n        data: item.node.data,\n        start,\n        end: start + bandwidth,\n      };\n    });\n  };\n\n  const orgPxScale = bandInstance.pxScale;\n  hBand.pxScale = function pxScale(size) {\n    bandInstance = orgPxScale(size);\n    return hBand;\n  };\n\n  hBand.domain(values);\n\n  return hBand;\n}\n","import { isNumber as numericFilter } from './is-number';\n\nconst minAccessor = (v) => v.min();\nconst maxAccessor = (v) => v.max();\n\n/**\n * Calculate the min/max value based on various inputs.\n *\n * Provided min/max setting takes presedence over all other inputs. If not provided, the respective values are calculated\n * from the given arr input, where each item in the array is expected to have a min/max accessor.\n *\n * @private\n * @param {object} [settings]\n * @param {number} [settings.min] The minimum value. Defaults to 0 if not provided.\n * @param {number} [settings.max] The maximum value. Defaults to 1 if not provided.\n * @param {object} [arr]\n * @returns { object[] } An array containing the min and max values.\n *\n * @example\n * minmax(); // [0, 1]\n *\n * minmax({}, [\n * { min: () => 13, max: () => 15 },\n * { min: () => NaN, max: () => 17 },\n * ]); // [13, 17]\n *\n * minmax({ min: -5, max: 4 }, [\n * { min: () => -20, max: () => 15 },\n * ]); // [-5, 4]\n */\nexport default function minmax(settings, arr) {\n  // const definedMin = settings && typeof settings.min !== 'undefined';\n  // const definedMax = settings && typeof settings.max !== 'undefined';\n  const definedMin = settings && !isNaN(settings.min);\n  const definedMax = settings && !isNaN(settings.max);\n\n  let min = definedMin ? +settings.min : 0;\n  let max = definedMax ? +settings.max : 1;\n\n  if (arr && arr.length) {\n    if (!definedMin) {\n      const arrMin = arr.map(minAccessor).filter(numericFilter);\n      min = arrMin.length ? Math.min(...arrMin) : min;\n    }\n\n    if (!definedMax) {\n      const arrMax = arr.map(maxAccessor).filter(numericFilter);\n      max = arrMax.length ? Math.max(...arrMax) : max;\n    }\n  }\n\n  return [min, max];\n}\n","import { interpolateRgb } from 'd3-interpolate';\nimport extend from 'extend';\nimport minmax from '../../utils/min-max';\nimport linear from '../linear';\nimport resolveSettings from '../settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  invert: false,\n  min: NaN,\n  max: NaN,\n};\n\nfunction generateDomain(range, min, max) {\n  const len = range.length;\n  if (len === 2) {\n    return [min, max];\n  }\n  const domain = [];\n  const part = (max - min) / (len - 1);\n\n  domain.push(min);\n  for (let i = 1; i < len - 1; i++) {\n    domain.push(min + part * i);\n  }\n  domain.push(max);\n\n  return domain;\n}\n\n/**\n * @typedef {object} ScaleSequentialColor\n * @property {string} [type='sequential-color']\n * @property {string[]} [range] - CSS color values of the output range\n * @property {boolean} [invert=false] - Invert range\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n */\n\n/**\n * @alias scaleSequentialColor\n * @private\n * @param { Object } [settings] Settings for this scale. If both range and domain are specified, they have to fulfill range.length === domain.length, otherwise they will be overriden.\n * @param { number[] } [settings.domain] Numeric values indicating stop limits between start and end values.\n * @param { color[] } [settings.range] CSS color values indicating stop colors between start and end values.\n * @param { field[] } [fields] Fields to dynamically calculate the domain extent.\n * @return { sequentialColor }\n *\n * @example\n * picasso.scaleSequentialColor({\n *  range: ['red', '#fc6', 'green'],\n *  domain: [-40, 0, 100]\n * });\n */\n\nexport default function scaleSequentialColor(settings = {}, data = {}, resources = {}) {\n  const s = linear(settings, data, resources).clamp(true).interpolate(interpolateRgb);\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  const isDomain = Array.isArray(stgns.domain) && stgns.domain.length;\n  const isRange = Array.isArray(stgns.range) && stgns.range.length;\n\n  /**\n   * @alias sequentialColor\n   * @private\n   * @kind function\n   * @param { Object } v Object containing a 'value' property\n   * @return { string } The blended color\n   */\n  const fn = s;\n\n  extend(true, fn, s);\n  const [min, max] = minmax(stgns, data ? data.fields : []);\n  const num = isDomain ? stgns.domain.length : -1;\n  const DEFAULT_COLORS = resources.theme ? resources.theme.palette('sequential', num > 0 ? num : 2) : [];\n\n  const range = isRange ? stgns.range : DEFAULT_COLORS;\n  fn.range(stgns.invert ? range.slice().reverse() : range.slice());\n  fn.domain(isDomain ? stgns.domain : generateDomain(fn.range(), min, max));\n\n  return fn;\n}\n","import { scaleThreshold, scaleLinear } from 'd3-scale';\nimport { notNumber } from '../../utils/is-number';\nimport minmax from '../../utils/min-max';\nimport sequential from './sequential';\nimport resolveSettings from '../settings-resolver';\n\n// const DEFAULT_COLORS = ['rgb(180,221,212)', 'rgb(34, 83, 90)'];\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  invert: false,\n  min: NaN,\n  max: NaN,\n  nice: false,\n};\n\nfunction generateDomain(range, min, max) {\n  const len = range.length;\n  if (len === 2) {\n    return [min + (max - min) / 2];\n  }\n  const domain = [];\n  const part = (max - min) / len;\n\n  for (let i = 1; i < len; i++) {\n    domain.push(min + part * i);\n  }\n  return domain;\n}\n\nfunction getBreaks(domain) {\n  const ret = [];\n  for (let i = 0; i < domain.length - 1; i++) {\n    ret.push((domain[i] + domain[i + 1]) / 2);\n  }\n  return ret;\n}\n\nfunction generateRange(domain, colors, min, max) {\n  min = domain[0];\n  max = domain && domain.length >= 2 ? domain[domain.length - 1] : max;\n  const seq = sequential().domain([min, max]).range(colors);\n  const values = [min, ...getBreaks(domain), max];\n  return values.map((v) => seq(v));\n}\n\nfunction generateNiceDomain(range, min, max) {\n  const numPoints = range.length === 2 ? 10 : Math.max(1, range.length);\n  const lin = scaleLinear().domain([min, max]).nice(numPoints);\n  const domain = lin.ticks(numPoints);\n\n  if (!range || !range.length) {\n    return domain;\n  }\n\n  // remove values from endpoints\n  const num = Math.max(0, range.length - 1);\n  while (domain.length > num) {\n    if (domain[0] - min <= max - domain[domain.length - 1]) {\n      domain.shift();\n    } else {\n      domain.pop();\n    }\n  }\n\n  return domain;\n}\n\n/**\n * @typedef {object} ScaleThresholdColor\n * @property {string} [type='threshold-color']\n * @property {number[]} [domain] Values defining the thresholds\n * @property {string[]} [range] - CSS color values of the output range\n * @property {boolean} [invert=false] - Invert range\n * @property {number} [min] - Set an explicit minimum value\n * @property {number} [max] - Set an explicit maximum value\n * @property {boolean} [nice=false] If set to true, will generate 'nice' domain values. Ignored if domain is set.\n */\n\n/**\n * @alias scaleThresholdColor\n * @private\n * @param { object } [settings] Settings for this scale. If both domain and range are specified, they have to fulfill domain.length === range.length + 1,  otherwise they will be overriden.\n * @param { number[] } [settings.domain] Values defining the thresholds.\n * @param { color[] } [settings.range] CSS color values of the output range.\n * @param { boolean } [settings.nice=false] If set to true, will generate 'nice' domain values. Ignored if domain is set.\n * @param { number } [settings.min] Minimum value to generate domain extent from. Ignored if domain is set.\n * @param { number } [settings.max] Maximum value to generate domain extend from. Ignored if domain is set.\n * @param { field[] } [fields] Fields to dynamically calculate the domain extent from. Ignored if min/max are set.\n * @return { thresholdColor }\n *\n * @example\n * let t = threshold({\n *   range: ['black', 'white'],\n *   domain: [25,50,75],\n *   max: 100,\n *   min: 0\n * });\n * t.domain(); // [25,50,75]\n * t.range(); // Generates from colors and domain: ['rgb(0,0,0)','rgb(85,85,85)','rgb(170,170,170)','rgb(255,255,255)']\n */\n\nexport default function scaleThresholdColor(settings = {}, data = {}, resources = {}) {\n  const d3Scale = scaleThreshold();\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  const isDomain = Array.isArray(stgns.domain) && stgns.domain.length;\n  const isRange = Array.isArray(stgns.range) && stgns.range.length;\n\n  /**\n   * @alias thresholdColor\n   * @private\n   * @param { object } v Object literal containing a 'value' property.\n   * @return { string } A CSS color from the scale's range.\n   */\n  function fn(v) {\n    if (notNumber(v)) {\n      return NaN;\n    }\n    return d3Scale(v);\n  }\n\n  Object.keys(d3Scale).forEach((key) => (fn[key] = d3Scale[key]));\n\n  const fields = data.fields;\n\n  const [min, max] = minmax(stgns, fields);\n  const num = isDomain ? stgns.domain.length : -1;\n  const DEFAULT_COLORS = resources.theme ? resources.theme.palette('sequential', num > 0 ? num : 2) : [];\n\n  let range = isRange ? stgns.range : DEFAULT_COLORS;\n  let domain = [];\n\n  if (isDomain) {\n    domain = stgns.domain;\n  } else if (stgns.nice) {\n    domain = generateNiceDomain(range, min, max);\n  } else {\n    domain = [min + (max - min) / 2];\n  }\n\n  if (range.length > domain.length + 1) {\n    // Generate limits from range\n    domain = generateDomain(range, min, max);\n  } else if (range.length < domain.length + 1) {\n    // Generate additional colors\n    range = generateRange(domain, range, min, max);\n  }\n\n  fn.data = () => data;\n\n  fn.range(stgns.invert ? range.slice().reverse() : range);\n  fn.domain(domain);\n\n  return fn;\n}\n","import { scaleOrdinal } from 'd3-scale';\nimport extend from 'extend';\nimport resolveSettings from './settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n};\n\n/**\n * @alias scaleOrdinal\n * @private\n * @param { Object } settings\n * @param { field[] } [fields]\n * @param { dataset } data\n * @return { ordinal }\n */\nexport default function ordinal(settings = {}, data = {}, resources = {}) {\n  /**\n   * An augmented {@link https://github.com/d3/d3-scale#_ordinal|d3 ordinal scale}\n   * @private\n   * @alias ordinal\n   * @param { Object }\n   * @return { number }\n   */\n  const fn = scaleOrdinal();\n\n  const ctx = { data, resources };\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, ctx);\n\n  const valueFn = typeof settings.value === 'function' ? settings.value : (d) => d.datum.value;\n  const labelFn = typeof settings.label === 'function' ? settings.label : (d) => d.datum.label;\n  const items = data.items || [];\n  const domainToDataMapping = {};\n  const values = [];\n  const labels = [];\n\n  for (let i = 0; i < items.length; i++) {\n    const arg = extend({ datum: items[i] }, ctx);\n    const v = valueFn(arg, i);\n    if (values.indexOf(v) === -1) {\n      values.push(v);\n      labels.push(labelFn(arg, i));\n      domainToDataMapping[v] = i;\n    }\n  }\n\n  fn.data = () => data;\n\n  fn.labels = () => labels;\n\n  fn.label = (domainValue) => labels[values.indexOf(domainValue)];\n\n  fn.datum = (domainValue) => items[domainToDataMapping[domainValue]];\n\n  fn.range(stgns.range);\n\n  if (Array.isArray(stgns.domain) && stgns.domain.length) {\n    fn.domain(stgns.domain);\n  } else {\n    fn.domain(values);\n  }\n  return fn;\n}\n","import ordinal from '../ordinal';\nimport resolveSettings from '../settings-resolver';\n\nconst DEFAULT_SETTINGS = {\n  domain: [],\n  range: [],\n  unknown: undefined,\n};\n\nconst DEFAULT_EXPLICIT_SETTINGS = {\n  domain: [],\n  range: [],\n  override: false,\n};\n\n/**\n * @typedef {object} ScaleCategoricalColor\n * @property {string} [type='categorical-color']\n * @property {string[]} [range=false] - CSS color values of the output range\n * @property {string} [unknown] - Value to return when input value is unknown\n * @property {object} [explicit] - Explicitly bind values to an output\n * @property {object[]} [explicit.domain[]] - Values to bind\n * @property {string[]} [explicit.range[]] - Output range\n */\n\n/**\n * An ordinal scale with the output range set to default colors, as defined by *scaleCategorical.range*\n * @alias scaleCategorical\n * @private\n * @param { Object } settings\n * @param { field[] } [fields]\n * @param { dataset } [dataset]\n * @return { ordinal }\n */\nexport default function scaleCategorical(settings = {}, data = {}, resources = {}) {\n  const s = ordinal(settings, data, resources);\n  const theme = resources.theme;\n  const stgns = resolveSettings(settings, DEFAULT_SETTINGS, { data, resources });\n  stgns.explicit = resolveSettings(settings.explicit, DEFAULT_EXPLICIT_SETTINGS, { data, resources });\n\n  let range;\n  if (!Array.isArray(stgns.range) || stgns.range.length === 0) {\n    range = theme ? theme.palette('categorical', s.domain().length).slice() : [];\n  } else {\n    range = stgns.range.slice();\n  }\n\n  if (stgns.unknown) {\n    s.unknown(stgns.unknown);\n  } else if (theme && theme.palette('unknown')) {\n    let un = theme.palette('unknown');\n    s.unknown(un[0]);\n  }\n\n  if (Array.isArray(stgns.explicit.domain) && stgns.explicit.domain.length) {\n    const domain = s.domain().slice();\n    const explicitDomain = stgns.explicit.domain;\n    const explicitRange = Array.isArray(stgns.explicit.range) ? stgns.explicit.range : [];\n\n    // duplicate range values to cover entire domain\n    const numCopies = Math.floor(domain.length / range.length);\n    for (let i = 1; i < numCopies + 1; i *= 2) {\n      range = range.concat(range);\n    }\n\n    if (stgns.explicit.override) {\n      for (let i = 0; i < explicitDomain.length; i++) {\n        const index = domain.indexOf(explicitDomain[i]);\n        if (index > -1) {\n          range[index] = explicitRange[i];\n        }\n      }\n    } else {\n      // inject explicit colors\n      const order = explicitDomain.map((d, i) => [domain.indexOf(d), d, explicitRange[i]]).sort((a, b) => a[0] - b[0]);\n      order.forEach((v) => {\n        const idx = domain.indexOf(v[1]);\n        if (idx !== -1) {\n          range.splice(idx, 0, v[2]);\n        }\n      });\n    }\n\n    // cutoff excess range values\n    range.length = domain.length;\n  }\n\n  s.range(range);\n  return s;\n}\n","import registry from '../../utils/registry';\nimport linear from '../../scales/linear';\nimport band from '../../scales/band';\nimport hBand from '../../scales/h-band';\nimport sequential from '../../scales/color/sequential';\nimport threshold from '../../scales/color/threshold';\nimport categorical from '../../scales/color/categorical';\nimport extractData from '../../data/extractor';\n\n/**\n * Definition for creating a scale. Additional properties, specific for a type of scale, can be added as key/value pairs\n * @typedef {object} ScaleDefinition\n * @property {string} [type] Type of scale\n * @property {DataExtraction|DataFieldExtraction} [data] Data configuration\n */\n\n/**\n * Scale instance\n * @typedef {object} Scale\n * @interface\n * @property {string} type Type of scale\n */\n\nconst scaleRegistry = registry();\n\nscaleRegistry('linear', linear);\nscaleRegistry('band', band);\nscaleRegistry('h-band', hBand);\nscaleRegistry('sequential-color', sequential);\nscaleRegistry('threshold-color', threshold);\nscaleRegistry('categorical-color', categorical);\n\nexport { scaleRegistry as default };\n\nfunction getTypeFromMeta(fields) {\n  const types = fields.map((field) => (field.type() === 'dimension' ? 'band' : 'linear'));\n  return types.indexOf('linear') !== -1 ? 'linear' : 'band';\n}\n\nfunction deduceScaleTypeFromData(data) {\n  if (data.root) {\n    return 'h-band';\n  }\n\n  if (data.fields && data.fields[0]) {\n    return getTypeFromMeta(data.fields);\n  }\n  return 'linear';\n}\n\nexport function create(options, d, deps) {\n  let dataSourceConfig = options.data;\n  if (options.source) {\n    // DEPRECATION\n    deps.logger.warn('Deprecated: Scale data source configuration');\n    dataSourceConfig = {\n      extract: [],\n    };\n    (Array.isArray(options.source) ? options.source : [options.source]).forEach((source) => {\n      dataSourceConfig.extract.push({\n        field: source,\n      });\n    });\n  }\n\n  const data = extractData(dataSourceConfig, d, deps);\n  let type = options.type || deduceScaleTypeFromData(data);\n  let s;\n\n  if (type === 'color') {\n    if (data.fields && data.fields[0] && data.fields[0].type() === 'dimension') {\n      type = 'categorical-color';\n    } else {\n      type = 'sequential-color';\n    }\n  }\n\n  if (deps.scale.has(type)) {\n    s = deps.scale.get(type);\n    s = s(options, data, { theme: deps.theme, logger: deps.logger });\n    s.type = type;\n  }\n  return s;\n}\n\nexport function collection(scalesConfig, data, deps, fn = create) {\n  const scales = {};\n\n  return {\n    get(def) {\n      let key;\n      if (typeof def === 'string' && scalesConfig[def]) {\n        key = def;\n      } else if (typeof def === 'object' && 'scale' in def && scalesConfig[def.scale]) {\n        key = def.scale;\n      }\n\n      if (key) {\n        scales[key] = scales[key] || fn(scalesConfig[key], data, deps);\n        return scales[key];\n      }\n\n      return fn(def, data, deps);\n    },\n    all() {\n      Object.keys(scalesConfig).forEach(this.get);\n      return scales;\n    },\n  };\n}\n","/**\n * Utility functions\n */\n\nvar util = {};\n\nutil.isObject = function isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nutil.isNumber = function isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nutil.isUndefined = function isUndefined(arg) {\n  return arg === void 0;\n}\n\nutil.isFunction = function isFunction(arg){\n  return typeof arg === 'function';\n}\n\n\n/**\n * EventEmitter class\n */\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!util.isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error' && !this._events.error) {\n    er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      throw Error('Uncaught, unspecified \"error\" event.');\n    }\n    return false;\n  }\n\n  handler = this._events[type];\n\n  if (util.isUndefined(handler))\n    return false;\n\n  if (util.isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (util.isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              util.isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (util.isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (util.isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!util.isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n\n      if (util.isFunction(console.error)) {\n        console.error('(node) warning: possible EventEmitter memory ' +\n                      'leak detected. %d listeners added. ' +\n                      'Use emitter.setMaxListeners() to increase limit.',\n                      this._events[type].length);\n      }\n      if (util.isFunction(console.trace))\n        console.trace();\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (util.isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (util.isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (util.isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (Array.isArray(listeners)) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (util.isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (util.isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n","import EventEmitter from 'node-event-emitter';\n\nexport default {\n  /**\n   * Function used to add event handling to objects passed in.\n   * @private\n   * @param {Object} obj Object instance that will get event handling.\n   */\n  mixin(obj) {\n    Object.keys(EventEmitter.prototype).forEach((key) => {\n      obj[key] = EventEmitter.prototype[key];\n    });\n    EventEmitter.init(obj);\n    return obj;\n  },\n};\n","import EventEmitter from '../utils/event-emitter';\n\nexport default function scrollApi() {\n  let min = 0;\n  let max = 0;\n  let start = 0;\n  let viewSize = 0;\n  start = start || min;\n\n  /**\n   * The scroll api\n   * @private\n   * @alias scroll\n   */\n  const s = {\n    /**\n     * Move the current scroll\n     * @param {number} value\n     * @emits update\n     */\n    move(value) {\n      this.moveTo(start + value);\n    },\n\n    /**\n     * Change the current scroll to a specific value\n     * @param {number} value\n     * @emits update\n     */\n    moveTo(value) {\n      const newStart = Math.max(min, Math.min(max - viewSize, value));\n      if (start !== newStart) {\n        start = newStart;\n        s.emit('update');\n      }\n    },\n\n    /**\n     * Update scroll settings\n     * @param {number} [settings.min]\n     * @param {number} [settings.max]\n     * @param {number} [settings.viewSize]\n     * @emits update\n     */\n    update(settings) {\n      let triggerUpdate = false;\n      ({ min = min, max = max } = settings);\n      if (settings.viewSize !== undefined && settings.viewSize !== viewSize) {\n        viewSize = settings.viewSize;\n        triggerUpdate = true;\n      }\n\n      // update scroll to be within the new bounds\n      const newStart = Math.max(min, Math.min(max - viewSize, start));\n      if (start !== newStart) {\n        start = newStart;\n        triggerUpdate = true;\n      }\n\n      if (triggerUpdate) {\n        s.emit('update');\n      }\n    },\n\n    /**\n     * Get the current scroll state\n     * @return {object} with min, max, start & viewSize\n     */\n    getState() {\n      return {\n        min,\n        max,\n        start,\n        viewSize,\n      };\n    },\n  };\n\n  EventEmitter.mixin(s);\n\n  return s;\n}\n","import scrollApi from '../../scroll-api';\n\nexport function createOrUpdate(options, oldApi) {\n  const min = options.min || 0;\n  const max = options.max || 0;\n  const viewSize = options.viewSize || 0;\n\n  const s = oldApi || scrollApi();\n  s.update({ min, max, viewSize });\n\n  return s;\n}\n\nexport default function builder(obj, oldScrollApis) {\n  const scrollApis = {};\n  for (const n in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, n)) {\n      scrollApis[n] = createOrUpdate(obj[n], oldScrollApis ? oldScrollApis[n] : null);\n    }\n  }\n  return scrollApis;\n}\n\nexport function getOrCreateScrollApi(v, scrollApis) {\n  if (!scrollApis[v]) {\n    scrollApis[v] = scrollApi();\n  }\n  return scrollApis[v];\n}\n","function lessThanOrEqual(value, limit) {\n  return value <= limit;\n}\n\nfunction lessThan(value, limit) {\n  return value < limit;\n}\n\nfunction index(boundaries, point, after) {\n  let i = 0;\n  while (i < boundaries.length && point > boundaries[i]) {\n    ++i;\n  }\n  if (boundaries[i] === point && after) {\n    ++i;\n  }\n  return i;\n}\n\nfunction contains(boundaries, point, minCondition, maxCondition) {\n  const len = boundaries.length;\n\n  for (let i = 1; i < len; i += 2) {\n    if (minCondition(boundaries[i - 1], point) && maxCondition(point, boundaries[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default function rangeCollection(config = {}) {\n  let maxCondition;\n  let minCondition;\n  let boundaries = [];\n\n  function fn() {}\n\n  fn.configure = (c = {}) => {\n    const { includeMax = true, includeMin = true } = c;\n    maxCondition = includeMax ? lessThanOrEqual : lessThan;\n    minCondition = includeMin ? lessThanOrEqual : lessThan;\n  };\n\n  fn.add = ({ min, max }) => {\n    const i0 = index(boundaries, min);\n    const i1 = index(boundaries, max, true);\n\n    const args = [i0, i1 - i0];\n    if (i0 % 2 === 0) {\n      args.push(min);\n    }\n    if (i1 % 2 === 0) {\n      args.push(max);\n    }\n\n    const before = boundaries.join(',');\n    boundaries.splice(...args);\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.remove = ({ min, max }) => {\n    const i0 = index(boundaries, min);\n    const i1 = index(boundaries, max, true);\n\n    const args = [i0, i1 - i0];\n    if (i0 % 2 === 1) {\n      args.push(min);\n    }\n    if (i1 % 2 === 1) {\n      args.push(max);\n    }\n    const before = boundaries.join(',');\n    boundaries.splice(...args);\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.set = (range) => {\n    const before = boundaries.join(',');\n    boundaries = [];\n    if (Array.isArray(range)) {\n      range.forEach(fn.add);\n    } else {\n      fn.add(range);\n    }\n    const after = boundaries.join(',');\n    return before !== after;\n  };\n\n  fn.clear = () => {\n    const before = boundaries.length > 0;\n    boundaries = [];\n    return before;\n  };\n\n  fn.containsValue = (value) => contains(boundaries, value, minCondition, maxCondition);\n\n  fn.containsRange = ({ min, max }) => {\n    const i0 = index(boundaries, min, true);\n    const i1 = index(boundaries, max);\n\n    return i0 === i1 && i1 % 2 === 1;\n  };\n\n  fn.toggle = (range) => {\n    if (fn.containsRange(range)) {\n      return fn.remove(range);\n    }\n    return fn.add(range);\n  };\n\n  fn.ranges = () => {\n    const collection = [];\n    for (let i = 1; i < boundaries.length; i += 2) {\n      collection.push({\n        min: boundaries[i - 1],\n        max: boundaries[i],\n      });\n    }\n    return collection;\n  };\n\n  fn.configure(config);\n\n  return fn;\n}\n","export default function valueCollection() {\n  let values = [];\n  function vc() {}\n\n  vc.add = (value) => {\n    if (values.indexOf(value) === -1) {\n      values.push(value);\n      return true;\n    }\n    return false;\n  };\n\n  vc.remove = (value) => {\n    const idx = values.indexOf(value);\n    if (idx !== -1) {\n      values.splice(idx, 1);\n      return true;\n    }\n    return false;\n  };\n\n  vc.contains = (value) => values.indexOf(value) !== -1;\n\n  vc.values = () => values.slice();\n\n  vc.clear = () => (values = []);\n\n  vc.toString = () => values.join(';');\n\n  return vc;\n}\n","import extend from 'extend';\n\nimport EventEmitter from '../utils/event-emitter';\n\nimport rangeCollection from './range-collection';\nimport valueCollection from './value-collection';\n\n/**\n * @typedef {object} BrushConfig\n * @property {Array<BrushConfig~Ranges>} [ranges] - Range configurations\n */\n\n/**\n * @typedef {object}\n * @alias BrushConfig~Ranges\n */\nconst DEFAULT_RANGE_CONFIG = {\n  /**\n   * An identifier that represents the data source of the value\n   * @type {string=}\n   */\n  key: undefined,\n  /**\n   * Whether or not the minimum value of a range should be included when determining if a value is brushed.\n   * @type {boolean=} */\n  includeMin: true,\n  /**\n   * Whether or not the maximum value of a range should be included when determining if a value is brushed.\n   * @type {boolean=} */\n  includeMax: true,\n};\n\nfunction add({ items, collection, vc }) {\n  const changedMap = {};\n  const changed = [];\n  let key;\n  let values;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    if (!collection[key]) {\n      collection[key] = vc();\n    }\n    values = items[i].values || [items[i].value];\n    for (let vi = 0; vi < values.length; vi++) {\n      if (collection[key].add(values[vi])) {\n        changedMap[key] = changedMap[key] || [];\n        changedMap[key].push(values[vi]);\n      }\n    }\n  }\n\n  const keys = Object.keys(changedMap);\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    changed.push({ id: key, values: changedMap[key] });\n  }\n\n  return changed;\n}\n\nfunction remove({ items, collection }) {\n  const changedMap = {};\n  const changed = [];\n  let key;\n  let values;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    if (!collection[key]) {\n      continue;\n    }\n    values = items[i].values || [items[i].value];\n    for (let vi = 0; vi < values.length; vi++) {\n      if (collection[key].remove(values[vi])) {\n        changedMap[key] = changedMap[key] || [];\n        changedMap[key].push(values[vi]);\n      }\n    }\n  }\n\n  const keys = Object.keys(changedMap);\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    changed.push({ id: key, values: changedMap[key] });\n  }\n\n  return changed;\n}\n\nfunction collectUnique(items) {\n  const filteredSet = {};\n  let key;\n  let values;\n\n  for (let i = 0, num = items.length; i < num; i++) {\n    key = items[i].key;\n    values = items[i].values || [items[i].value];\n    if (!filteredSet[key]) {\n      filteredSet[key] = [];\n    }\n    for (let vi = 0; vi < values.length; vi++) {\n      const idx = filteredSet[key].indexOf(values[vi]);\n      if (idx === -1) {\n        filteredSet[key].push(values[vi]);\n      }\n    }\n  }\n\n  return filteredSet;\n}\n\nfunction createValueCollection({ key, collection, obj, fn, value }) {\n  if (!collection[key]) {\n    collection[key] = fn();\n  }\n  obj[key] = obj[key] || [];\n  obj[key].push(value);\n  collection[key].add(value);\n}\n\nexport function toggle({ items, values, vc }) {\n  const addedMap = {};\n  const removedMap = {};\n  const added = [];\n  const removed = [];\n  const filteredSet = collectUnique(items);\n  let key;\n  let value;\n  let fs;\n\n  const setKeys = Object.keys(filteredSet);\n  for (let i = 0, num = setKeys.length; i < num; i++) {\n    key = setKeys[i];\n    fs = filteredSet[key];\n\n    for (let k = 0, len = fs.length; k < len; k++) {\n      value = fs[k];\n      if (!values[key] || !values[key].contains(value)) {\n        createValueCollection({\n          key,\n          value,\n          collection: values,\n          obj: addedMap,\n          fn: vc,\n        });\n      } else if (values[key] && values[key].contains(value)) {\n        removedMap[key] = removedMap[key] || [];\n        removedMap[key].push(value);\n        values[key].remove(value);\n      }\n    }\n  }\n\n  const addedKeys = Object.keys(addedMap);\n  for (let i = 0, num = addedKeys.length; i < num; i++) {\n    key = addedKeys[i];\n    added.push({ id: key, values: addedMap[key] });\n  }\n\n  const removedKeys = Object.keys(removedMap);\n  for (let i = 0, num = removedKeys.length; i < num; i++) {\n    key = removedKeys[i];\n    removed.push({ id: key, values: removedMap[key] });\n  }\n\n  return [added, removed];\n}\n\nfunction diff(old, current) {\n  const changed = [];\n  const keys = Object.keys(old);\n  let key;\n  let changedValues;\n  const filterFn = (v) => current[key].indexOf(v) === -1;\n\n  for (let i = 0, num = keys.length; i < num; i++) {\n    key = keys[i];\n    if (!current[key]) {\n      changed.push({ id: key, values: old[key] });\n    } else {\n      changedValues = old[key].filter(filterFn);\n      if (changedValues.length) {\n        changed.push({ id: key, values: changedValues });\n      }\n    }\n  }\n\n  return changed;\n}\n\nexport function set({ items, vCollection, vc }) {\n  const addedMap = {};\n  const filteredSet = collectUnique(items);\n  let added = [];\n  let removed = [];\n  let key;\n\n  const oldMap = {};\n  const vcKeys = Object.keys(vCollection);\n  for (let i = 0, num = vcKeys.length; i < num; i++) {\n    key = vcKeys[i];\n    oldMap[key] = vCollection[key].values().slice();\n    delete vCollection[key];\n  }\n\n  const createValueCollectionFn = (value) => {\n    if (!vCollection[key] || !vCollection[key].contains(value)) {\n      createValueCollection({\n        key,\n        value,\n        collection: vCollection,\n        obj: addedMap,\n        fn: vc,\n      });\n    }\n  };\n\n  const fsKeys = Object.keys(filteredSet);\n  for (let i = 0, num = fsKeys.length; i < num; i++) {\n    key = fsKeys[i];\n    filteredSet[key].forEach(createValueCollectionFn);\n  }\n\n  removed = diff(oldMap, addedMap);\n  added = diff(addedMap, oldMap);\n\n  return [added, removed];\n}\n\nfunction applyAliases(items, aliases) {\n  if (!Object.keys(aliases).length) {\n    return items;\n  }\n  const len = items.length;\n  const its = Array(len);\n  for (let i = 0; i < len; i++) {\n    its[i] = items[i].key in aliases ? extend({}, items[i], { key: aliases[items[i].key] }) : items[i];\n  }\n  return its;\n}\n\nfunction intercept(handlers, items, aliases) {\n  const its = applyAliases(items, aliases);\n  return handlers && handlers.length ? handlers.reduce((value, interceptor) => interceptor(value), its) : its;\n}\n\nfunction toCamelCase(s) {\n  return s.replace(/(-[a-z])/g, ($1) => $1.toUpperCase().replace('-', ''));\n}\n\nfunction toSnakeCase(s) {\n  return s.replace(/([A-Z])/g, ($1) => `-${$1.toLowerCase()}`);\n}\n\nfunction updateRange(items, action, { ranges, interceptors, rc, aliases, rangeConfig }) {\n  const inter = `${action}Ranges`;\n  const its = intercept(interceptors[inter], items, aliases);\n  let changed = false;\n  its.forEach((item) => {\n    const key = item.key;\n    if (!ranges[key]) {\n      ranges[key] = rc(rangeConfig.sources[key] || rangeConfig.default);\n    }\n    if (action === 'set') {\n      changed = ranges[key][action](item.ranges || item.range) || changed;\n    } else {\n      const rangeValues = item.ranges || [item.range];\n      for (let i = 0; i < rangeValues.length; i++) {\n        changed = ranges[key][action](rangeValues[i]) || changed;\n      }\n    }\n  });\n\n  return changed;\n}\n\nexport default function brush({ vc = valueCollection, rc = rangeCollection } = {}) {\n  let activated = false;\n  let ranges = {};\n  let values = {};\n  let aliases = {};\n  let rangeConfig = {\n    sources: {},\n    default: extend({}, DEFAULT_RANGE_CONFIG),\n  };\n  const interceptors = {\n    addValues: [],\n    removeValues: [],\n    toggleValues: [],\n    setValues: [],\n    addRanges: [],\n    setRanges: [],\n    removeRanges: [],\n    toggleRanges: [],\n  };\n\n  const getState = () => {\n    const state = {\n      values: {},\n      ranges: {},\n    };\n    Object.keys(values).forEach((key) => {\n      state.values[key] = values[key].values();\n    });\n    Object.keys(ranges).forEach((key) => {\n      state.ranges[key] = ranges[key].ranges();\n    });\n    return state;\n  };\n\n  const links = {\n    ls: [],\n    clear() {\n      this.ls.forEach((b) => b.clear());\n    },\n    start() {\n      this.ls.forEach((b) => b.start());\n    },\n    end() {\n      this.ls.forEach((b) => b.end());\n    },\n    update() {\n      const s = getState();\n      this.ls.forEach((b) => b._state(s));\n    },\n    updateValues() {\n      const s = getState();\n      this.ls.forEach((b) =>\n        b._state({\n          values: s.values,\n        })\n      );\n    },\n    updateRanges() {\n      const s = getState();\n      this.ls.forEach((b) =>\n        b._state({\n          ranges: s.ranges,\n        })\n      );\n    },\n  };\n\n  /**\n   * A brush context\n   * @alias Brush\n   * @interface\n   */\n  const fn = {};\n\n  /**\n   * Triggered when this brush is activated\n   * @event Brush#start\n   * @type {string}\n   */\n\n  /**\n   * Triggered when this brush is updated\n   * @event Brush#update\n   * @type {string}\n   * @param {Array<object>} added - The added items\n   * @param {Array<object>} removed - The removed items\n   */\n\n  /**\n   * Triggered when this brush is deactivated\n   * @event Brush#end\n   * @type {string}\n   */\n\n  /**\n   * Configure the brush instance.\n   *\n   * @param {BrushConfig} config\n   * @example\n   * brushInstance.configure({\n   *   ranges: [\n   *     { key: 'some key', includeMax: false },\n   *     { includeMax: true, includeMin: true },\n   *   ]\n   * })\n   */\n  fn.configure = (config = {}) => {\n    if (Array.isArray(config.ranges) && config.ranges.length) {\n      rangeConfig = {\n        sources: {},\n        default: extend({}, DEFAULT_RANGE_CONFIG),\n      };\n\n      config.ranges.forEach((cfg) => {\n        const c = {};\n        Object.keys(DEFAULT_RANGE_CONFIG)\n          .filter((attr) => attr !== 'key')\n          .forEach((attr) => {\n            c[attr] = typeof cfg[attr] !== 'undefined' ? cfg[attr] : DEFAULT_RANGE_CONFIG[attr];\n          });\n\n        if (typeof cfg.key !== 'undefined') {\n          rangeConfig.sources[cfg.key] = c;\n        } else {\n          rangeConfig.default = c;\n        }\n      });\n\n      Object.keys(ranges).forEach((key) => ranges[key].configure(rangeConfig.sources[key] || rangeConfig.default));\n\n      // TODO only emit update if config has changed\n      fn.emit('update', [], []);\n    }\n  };\n\n  /**\n   * Link this brush to another brush instance.\n   *\n   * When linked, the `target` will receive updates whenever this brush changes.\n   * @param {Brush} target - The brush instance to link to\n   */\n  fn.link = (target) => {\n    if (fn === target) {\n      throw new Error(\"Can't link to self\");\n    }\n    links.ls.push(target);\n    target._state(getState());\n  };\n\n  fn._state = (s) => {\n    if (!s) {\n      return getState();\n    }\n    if (s.values) {\n      const arr = [];\n      Object.keys(s.values).forEach((key) => {\n        if (!values[key] || s.values[key].join(';') !== values[key].toString()) {\n          arr.push({\n            key,\n            values: s.values[key],\n          });\n        }\n      });\n      Object.keys(values).forEach((key) => {\n        if (!s.values[key]) {\n          arr.push({\n            key,\n            values: [],\n          });\n        }\n      });\n      if (arr.length) {\n        fn.setValues(arr);\n      }\n    }\n    if (s.ranges) {\n      const arr = [];\n      Object.keys(s.ranges).forEach((key) => {\n        if (!ranges[key] || s.ranges[key].join(';') !== ranges[key].toString()) {\n          arr.push({\n            key,\n            ranges: s.ranges[key],\n          });\n        }\n      });\n      Object.keys(ranges).forEach((key) => {\n        if (!s.ranges[key]) {\n          arr.push({\n            key,\n            ranges: [],\n          });\n        }\n      });\n      if (arr.length) {\n        fn.setRanges(arr);\n      }\n    }\n    return undefined;\n  };\n\n  /**\n   * Starts this brush context\n   *\n   * Starts this brush context and emits a 'start' event if it is not already started.\n   * @param {...any} args - arguments to be passed to 'start' listeners\n   * @emits Brush#start\n   */\n  fn.start = (...args) => {\n    if (!activated) {\n      activated = true;\n      fn.emit('start', ...args);\n      links.start();\n    }\n  };\n\n  /**\n   * Ends this brush context\n   *\n   * Ends this brush context and emits an 'end' event if it is not already ended.\n   * @param {...any} args - arguments to be passed to 'end' listeners\n   * @emits Brush#end\n   */\n  fn.end = (...args) => {\n    if (!activated) {\n      return;\n    }\n    activated = false;\n    ranges = {};\n    values = {};\n    fn.emit('end', ...args);\n    links.end();\n  };\n\n  /**\n   * Checks if this brush is activated\n   *\n   * Returns true if started, false otherwise\n   * @return {boolean}\n   */\n  fn.isActive = () => activated;\n\n  /**\n   * Clears this brush context\n   */\n  fn.clear = () => {\n    const removed = fn\n      .brushes()\n      .filter((b) => b.type === 'value' && b.brush.values().length)\n      .map((b) => ({ id: b.id, values: b.brush.values() }));\n    const hasChanged = Object.keys(ranges).length > 0 || removed.length;\n    ranges = {};\n    values = {};\n    if (hasChanged) {\n      fn.emit('update', [], removed); // TODO - do not emit update if state hasn't changed\n      links.clear();\n    }\n  };\n\n  /**\n   * Returns all brushes within this context\n   * @return {object}\n   */\n  fn.brushes = () => {\n    let result = [];\n    result = result.concat(\n      Object.keys(ranges).map((key) => ({\n        type: 'range',\n        id: key,\n        brush: ranges[key],\n      }))\n    );\n\n    result = result.concat(\n      Object.keys(values).map((key) => ({\n        type: 'value',\n        id: key,\n        brush: values[key],\n      }))\n    );\n\n    return result;\n  };\n\n  /**\n   * Adds a primitive value to this brush context\n   *\n   * If this brush context is not started, a 'start' event is emitted.\n   * If the state of the brush changes, ie. if the added value does not already exist, an 'update' event is emitted.\n   *\n   * @param {string} key  An identifier that represents the data source of the value\n   * @param {string|number} value The value to add\n   * @emits Brush#start\n   * @emits Brush#update\n   * @example\n   * brush.addValue('countries', 'Sweden');\n   * brush.addValue('/qHyperCube/qDimensionInfo/0', 3);\n   */\n  fn.addValue = (key, value) => {\n    fn.addValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to add\n   */\n  fn.addValues = (items) => {\n    const its = intercept(interceptors.addValues, items, aliases);\n    const added = add({\n      vc,\n      collection: values,\n      items: its,\n    });\n\n    fn.emit('add-values', its);\n\n    if (added.length) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', added, []);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * @param {object[]} items Items to set\n   */\n  fn.setValues = (items) => {\n    const its = intercept(interceptors.setValues, items, aliases);\n    const changed = set({\n      items: its,\n      vCollection: values,\n      vc,\n    });\n\n    fn.emit('set-values', its);\n\n    if (changed[0].length > 0 || changed[1].length > 0) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', changed[0], changed[1]);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * Removes a primitive values from this brush context\n   *\n   * If the state of the brush changes, ie. if the removed value does exist, an 'update' event is emitted.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to remove\n   * @example\n   * brush.removeValue('countries', 'Sweden');\n   */\n  fn.removeValue = (key, value) => {\n    fn.removeValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to remove\n   */\n  fn.removeValues = (items) => {\n    const its = intercept(interceptors.removeValues, items, aliases);\n    const removed = remove({\n      collection: values,\n      items: its,\n    });\n\n    fn.emit('remove-values', its);\n\n    if (removed.length) {\n      fn.emit('update', [], removed);\n      links.updateValues();\n      // TODO - emit 'end' event if there are no remaining active brushes\n    }\n  };\n\n  /**\n   * Add and remove values in a single operation\n   * almost the same as calling addValues and removeValues but only triggers one 'update' event\n   *\n   * If the state of the brush changes, an 'update' event is emitted.\n   *\n   * @param {object[]} addItems Items to add\n   * @param {object[]} removeItems Items to remove\n   */\n  fn.addAndRemoveValues = (addItems, removeItems) => {\n    const addIts = intercept(interceptors.addValues, addItems, aliases);\n    const removeIts = intercept(interceptors.removeValues, removeItems, aliases);\n    const added = add({\n      vc,\n      collection: values,\n      items: addIts,\n    });\n    const removed = remove({\n      collection: values,\n      items: removeIts,\n    });\n\n    fn.emit('add-values', addIts);\n    fn.emit('remove-values', removeIts);\n\n    if (added.length || removed.length) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', added, removed);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * Toggles a primitive value in this brush context\n   *\n   * If the given value exists in this brush context, it will be removed. If it does not exist it will be added.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to toggle\n   * @example\n   * brush.toggleValue('countries', 'Sweden');\n   */\n  fn.toggleValue = (key, value) => {\n    fn.toggleValues([{ key, value }]);\n  };\n\n  /**\n   * @param {object[]} items Items to toggle\n   */\n  fn.toggleValues = (items) => {\n    const its = intercept(interceptors.toggleValues, items, aliases);\n    const toggled = toggle({\n      items: its,\n      values,\n      vc,\n    });\n\n    fn.emit('toggle-values', its);\n\n    if (toggled[0].length > 0 || toggled[1].length > 0) {\n      if (!activated) {\n        activated = true;\n        fn.emit('start');\n      }\n      fn.emit('update', toggled[0], toggled[1]);\n      links.updateValues();\n    }\n  };\n\n  /**\n   * Checks if a certain value exists in this brush context\n   *\n   * Returns true if the values exists for the provided key, returns false otherwise.\n   *\n   * @param  {string} key  An identifier that represents the data source of the value\n   * @param  {string|number} value The value to check for\n   * @return {boolean}\n   * @example\n   * brush.addValue('countries', 'Sweden');\n   * brush.containsValue('countries', 'Sweden'); // true\n   * brush.toggleValue('countries', 'Sweden'); // remove 'Sweden'\n   * brush.containsValue('countries', 'Sweden'); // false\n   */\n  fn.containsValue = (key, value) => {\n    let k = aliases[key] || key;\n    if (!values[k]) {\n      return false;\n    }\n    return values[k].contains(value);\n  };\n\n  /**\n   * Adds a numeric range to this brush context\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to add to this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   * @example\n   * brush.addRange('Sales', { min: 20, max: 50 });\n   */\n  fn.addRange = (key, range) => {\n    fn.addRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.addRange}\n   * @param {object[]} items - Items containing the ranges to remove\n   * @param {string} items[].key\n   * @param {object} items[].range\n   */\n  fn.addRanges = (items) => {\n    const changed = updateRange(items, 'add', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Removes a numeric range from this brush context\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to remove from this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.removeRange = (key, range) => {\n    fn.removeRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.removeRange}\n   * @param {object[]} items - Items containing the ranges to remove\n   */\n  fn.removeRanges = (items) => {\n    const changed = updateRange(items, 'remove', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Sets a numeric range to this brush context\n   *\n   * Overwrites any active ranges identified by `key`\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to set on this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.setRange = (key, range) => {\n    fn.setRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.setRange}\n   * @param {object[]} items - Items containing the ranges to set\n   */\n  fn.setRanges = (items) => {\n    const changed = updateRange(items, 'set', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Toggles a numeric range in this brush context\n   *\n   * Removes the range if it's already contained within the given identifier,\n   * otherwise the given range is added to the brush.\n   *\n   * @param {string} key - An identifier that represents the data source of the range\n   * @param {object} range - The range to toggle in this brush\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   */\n  fn.toggleRange = (key, range) => {\n    fn.toggleRanges([{ key, range }]);\n  };\n\n  /**\n   * @see {brush.toggleRange}\n   * @param {object[]} items - Items containing the ranges to toggle\n   */\n  fn.toggleRanges = (items) => {\n    const changed = updateRange(items, 'toggle', {\n      ranges,\n      rc,\n      interceptors,\n      aliases,\n      rangeConfig,\n    });\n\n    if (!changed) {\n      return;\n    }\n\n    if (!activated) {\n      activated = true;\n      fn.emit('start');\n    }\n    fn.emit('update', [], []);\n    links.updateRanges();\n  };\n\n  /**\n   * Checks if a value is contained within a range in this brush context\n   *\n   * Returns true if the values exists for the provided key, returns false otherwise.\n   *\n   * @param  {string} key - An identifier that represents the data source of the value\n   * @param  {number} value - The value to check for\n   * @return {boolean}\n   * @example\n   * brush.addRange('Sales', { min: 10, max: 50 });\n   * brush.containsRangeValue('Sales', 30); // true\n   * brush.containsRangeValue('Sales', 5); // false\n   */\n  fn.containsRangeValue = (key, value) => {\n    let k = aliases[key] || key;\n    if (!ranges[k]) {\n      return false;\n    }\n    return ranges[k].containsValue(value);\n  };\n\n  /**\n   * Checks if a range segment is contained within this brush context\n   *\n   * Returns true if the range segment exists for the provided key, returns false otherwise.\n   *\n   * @param {string} key - An identifier that represents the data source of the value\n   * @param {object} range - The range to check for\n   * @param {number} range.min - Min value of the range\n   * @param {number} range.max - Max value of the range\n   * @return {boolean}\n   * @example\n   * brush.addRange('Sales', { min: 10, max: 50 });\n   * brush.containsRange('Sales', { min: 15, max: 20 }); // true - the range segment is fully contained within [10, 50]\n   * brush.containsRange('Sales', { min: 5, max: 20 }); // false - part of the range segment is outside [10, 50]\n   * brush.containsRange('Sales', { min: 30, max: 80 }); // false - part of the range segment is outside [10, 50]\n   */\n  fn.containsRange = (key, range) => {\n    let k = aliases[key] || key;\n    if (!ranges[k]) {\n      return false;\n    }\n    return ranges[k].containsRange(range);\n  };\n\n  fn.containsMappedData = (d, props, mode) => {\n    let status = [];\n    const keys = Object.keys(d);\n    let key;\n    let item;\n    let source;\n    let value;\n\n    for (let i = 0, num = keys.length; i < num; i++) {\n      key = keys[i];\n      if (key === 'value') {\n        item = d;\n        status[i] = { key: '', i, bool: false };\n      } else if (key === 'source') {\n        continue;\n      } else {\n        item = d[key];\n        status[i] = { key, i, bool: false };\n      }\n      source = item.source && item.source.field;\n      if (typeof source === 'undefined') {\n        continue;\n      }\n      if (typeof item.source.key !== 'undefined') {\n        source = `${item.source.key}/${source}`;\n      }\n\n      if (source in aliases) {\n        source = aliases[source];\n      }\n\n      value = item.value;\n      if (ranges[source]) {\n        status[i].bool = Array.isArray(value)\n          ? ranges[source].containsRange({ min: value[0], max: value[1] })\n          : ranges[source].containsValue(value);\n      } else if (values[source] && values[source].contains(value)) {\n        status[i].bool = true;\n      }\n    }\n\n    if (props) {\n      status = status.filter((b) => props.indexOf(b.key) !== -1);\n      if (mode === 'and') {\n        return !!status.length && !status.some((s) => s.bool === false);\n      }\n      if (mode === 'xor') {\n        return !!status.length && status.some((s) => s.bool) && status.some((s) => s.bool === false);\n      }\n      // !mode || mode === 'or'\n      return status.some((s) => s.bool);\n    }\n    return status.some((s) => s.bool);\n  };\n\n  /**\n   * Adds an event interceptor\n   *\n   * @param {string} name Name of the event to intercept\n   * @param {function} ic Handler to call before event is triggered\n   * @example\n   * brush.intercept('add-values', items => {\n   *  console.log('about to add the following items', items);\n   *  return items;\n   * });\n   */\n  fn.intercept = (name, ic) => {\n    const s = toCamelCase(name);\n    if (!interceptors[s]) {\n      return;\n    }\n    interceptors[s].push(ic);\n  };\n\n  /**\n   * Removes an interceptor\n   *\n   * @param {string} name Name of the event to intercept\n   * @param {function} ic Handler to remove\n   */\n  fn.removeInterceptor = (name, ic) => {\n    const s = toCamelCase(name);\n    if (!interceptors[s]) {\n      return;\n    }\n    const idx = interceptors[s].indexOf(ic);\n    if (idx !== -1) {\n      interceptors[s].splice(idx, 1);\n    }\n  };\n\n  /**\n   * Removes all interceptors\n   *\n   * @param {string} [name] Name of the event to remove interceptors for. If not provided, removes all interceptors.\n   */\n  fn.removeAllInterceptors = (name) => {\n    const toRemove = [];\n    if (name) {\n      const s = toCamelCase(name);\n      if (interceptors[s] && interceptors[s].length) {\n        toRemove.push({ name, handlers: interceptors[s] });\n      }\n    } else {\n      Object.keys(interceptors).forEach((n) => {\n        if (interceptors[n].length) {\n          toRemove.push({ name: toSnakeCase(n), handlers: interceptors[n] });\n        }\n      });\n    }\n\n    toRemove.forEach((ic) => {\n      const interceptorHandlers = ic.handlers.slice();\n      interceptorHandlers.forEach((handler) => fn.removeInterceptor(ic.name, handler));\n    });\n  };\n\n  /**\n   * Adds an alias to the given key\n   *\n   * @param {string} key - Value to be replaced\n   * @param {string} alias - Value to replace key with\n   * @example\n   * brush.addKeyAlias('BadFieldName', 'Region');\n   * brush.addValue('BadFieldName', 'Sweden'); // 'BadFieldName' will be stored as 'Region'\n   * brush.containsValue('Region', 'Sweden'); // true\n   * brush.containsValue('BadFieldName', 'Sweden'); // true\n   */\n  fn.addKeyAlias = (key, alias) => {\n    aliases[key] = alias;\n  };\n\n  /**\n   * Removes an alias\n   *\n   * This will only remove the key to alias mapping for new manipulations of the brush,\n   * no changes will be made to the current state of this brush.\n   *\n   * @param {string} key - Value to remove as alias\n   * @example\n   * brush.removeKeyAlias('BadFieldName');\n   */\n  fn.removeKeyAlias = (key) => {\n    delete aliases[key];\n  };\n\n  EventEmitter.mixin(fn);\n\n  return fn;\n}\n","import brush from './brush';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nexport function register(type, b) {\n  if (b) {\n    reg.add(type, b);\n  }\n  return reg.get(type);\n}\n\nexport default brush;\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","// tpmt is two power minus ten times t scaled to [0,1]\nexport function tpmt(x) {\n  return (Math.pow(2, -10 * x) - 0.0009765625) * 1.0009775171065494;\n}\n","import {tpmt} from \"./math.js\";\n\nvar tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * tpmt(-(--t)) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * tpmt(t = +t) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * tpmt(-t) * Math.sin((s - t) / p)\n        : 2 - a * tpmt(t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","import extend from 'extend';\nimport { interpolateObject } from 'd3-interpolate';\nimport { easeCubic, easeElasticOut } from 'd3-ease';\n\n/* globals window */\n\nfunction nodeId(node, i) {\n  if (node.data) {\n    return node.data.value;\n  }\n  if (node.type === 'text') {\n    return node.text;\n  }\n  return i;\n}\n\nfunction tween({ old, current }, { renderer }, config) {\n  let ticker;\n  // let staticNodes = [];\n  let toBeUpdated = [];\n  let entered = { nodes: [], ips: [] };\n  let exited = { nodes: [], ips: [] };\n  let updated = { nodes: [], ips: [] };\n  let stages = [];\n  const trackBy = config.trackBy || nodeId;\n\n  const tweener = {\n    start() {\n      let ids = {};\n      old.forEach((node, i) => {\n        let id = trackBy(node, i);\n        ids[id] = node;\n      });\n      current.forEach((node, i) => {\n        let id = trackBy(node, i);\n        if (ids[id]) {\n          updated.ips.push(interpolateObject(ids[id], node));\n          updated.nodes.push(node);\n          toBeUpdated.push(ids[id]);\n          ids[id] = false;\n        } else {\n          entered.nodes.push(node);\n          entered.ips.push(\n            interpolateObject(\n              {\n                r: 0.001,\n                opacity: 0,\n              },\n              node\n            )\n          );\n        }\n      });\n      Object.keys(ids).forEach((key) => {\n        if (ids[key]) {\n          exited.nodes.push(ids[key]);\n          exited.ips.push(interpolateObject(ids[key], extend({}, ids[key], { r: 0.0001, opacity: 0 })));\n        }\n      });\n      if (exited.ips.length) {\n        stages.push({\n          easing: easeCubic,\n          duration: 200,\n          tweens: exited.ips,\n          nodes: [...toBeUpdated],\n        });\n      }\n      if (updated.ips.length) {\n        stages.push({\n          easing: easeCubic,\n          duration: 400,\n          tweens: updated.ips,\n          nodes: [],\n        });\n      }\n      if (entered.ips.length) {\n        stages.push({\n          easing: easeElasticOut,\n          duration: 1200,\n          tweens: entered.ips,\n          nodes: [...updated.nodes],\n        });\n      }\n      // console.log(stages);\n      if (stages.length) {\n        stages[0].started = Date.now();\n        if (typeof window !== 'undefined') {\n          ticker = window.requestAnimationFrame(tweener.tick);\n        }\n      }\n    },\n    tick() {\n      let currentStage = stages[0];\n      if (!currentStage) {\n        tweener.stop();\n      }\n      if (!currentStage.started) {\n        currentStage.started = Date.now();\n      }\n      let t = (Date.now() - currentStage.started) / currentStage.duration;\n      let currentNodes = [];\n      let tweenedNodes = currentStage.tweens.map((ip) => ip(currentStage.easing(Math.min(1, t))));\n      currentNodes.push(...tweenedNodes);\n      currentNodes.push(...currentStage.nodes);\n      // currentNodes.push(...staticNodes);\n      // stages.slice(1).forEach(stage => currentNodes.push(...stage.nodes));\n      renderer.render(currentNodes);\n      if (t >= 1) {\n        // staticNodes.push(...currentStage.nodes);\n        stages.shift();\n        if (!stages.length) {\n          tweener.stop();\n        }\n      }\n      if (ticker) {\n        ticker = window.requestAnimationFrame(tweener.tick);\n      }\n    },\n    stop() {\n      if (ticker) {\n        window.cancelAnimationFrame(ticker);\n        ticker = false;\n      }\n    },\n  };\n\n  return tweener;\n}\n\nexport { tween as default };\n","import extend from 'extend';\n\nconst GLOBAL_DEFAULTS = {\n  fontFamily: 'Arial',\n  fontSize: '13px',\n  color: '#595959',\n  backgroundColor: '#ffffff',\n  stroke: '#000000',\n  strokeWidth: 0,\n  $fill: '#333333',\n};\n\nconst REF_RX = /^\\$/;\n\nfunction isPrimitive(x) {\n  const type = typeof x;\n  return type !== 'object' && type !== 'function' && type !== 'undefined';\n}\n\n/**\n * Callback function\n * @callback datumAccessor\n * @param {DatumExtract} d datum\n * @example\n * (d) => Math.min(0, d.value);\n */\n\n/**\n * @typedef {object} DatumConfig\n * @property {string} [scale] - Name of a scale\n * @property {datumAccessor} [fn]\n * @property {string} [ref] - A reference to a DatumExtract property\n * @example\n * // Implicitly resolve the datum by passing a referenced data through the scale\n * {\n *  scale: '<name-of-scale>',\n *  ref: '<data-property>'\n * }\n *\n * // or explicitly resolve the datum using callback function\n * {\n *  fn: (d) => Math.min(0, d.datum.x.value);\n * }\n */\n\n/**\n * Custom type that is either a string, DatumConfig or a datumAccessor\n * @typedef {string|DatumConfig|datumAccessor} DatumString\n */\n\n/**\n * Custom type that is either a number, DatumConfig or a datumAccessor\n * @typedef {number|DatumConfig|datumAccessor} DatumNumber\n */\n\n/**\n * Custom type that is either a boolean, DatumConfig or a datumAccessor\n * @typedef {boolean|DatumConfig|datumAccessor} DatumBoolean\n */\n\n/**\n * Normalizes property settings\n *\n * @ignore\n * @export\n * @param {any} settings\n * @param {any} defaults\n * @param {any} chart\n * @returns {any}\n */\nexport function normalizeSettings(settings, defaults, chart) {\n  const composition = extend({}, settings);\n  const defs = extend({}, defaults);\n  Object.keys(composition).forEach((key) => {\n    defs[key] = {};\n    const v = composition[key];\n    const vType = typeof v;\n    if (typeof v === 'function') {\n      defs[key].fn = v;\n    } else if (isPrimitive(v)) {\n      let defaultValue = defaults[key];\n      if (typeof defaultValue === 'string' && REF_RX.test(defaultValue)) {\n        defaultValue = GLOBAL_DEFAULTS[defaultValue];\n      }\n      const defaultType = typeof defaultValue;\n      if (defaultType === 'undefined') {\n        // if property has no default, assign provided value\n        defs[key] = v;\n      } else {\n        // assign provided value if it's of same type as default, otherwise use default\n        defs[key] = defaultType === vType ? v : defaultValue;\n      }\n    } else if (v && typeof v === 'object') {\n      if (typeof v.fn === 'function') {\n        defs[key].fn = v.fn;\n      }\n      if (typeof v.scale !== 'undefined') {\n        defs[key].scale = chart.scale(v.scale);\n      }\n      if (typeof v.ref === 'string') {\n        defs[key].ref = v.ref;\n      }\n    }\n  });\n\n  Object.keys(defaults).forEach((key) => {\n    if (key in composition) {\n      // don't process same props again\n      return;\n    }\n    const v = defaults[key];\n    const defaultType = typeof v;\n    if (defaultType === 'string' && REF_RX.test(v)) {\n      defs[key] = GLOBAL_DEFAULTS[v];\n    } else {\n      defs[key] = v;\n    }\n  });\n\n  return defs;\n}\n\nexport function resolveForItem(context, normalized, idx) {\n  const ret = {};\n  const keys = Object.keys(normalized);\n  const len = keys.length;\n  const fallbackData = context.datum;\n  const datum = context.datum;\n  for (let i = 0; i < len; i++) {\n    const key = keys[i];\n    const normalizedProp = normalized[key];\n    const exists = typeof datum === 'object' && typeof normalizedProp !== 'undefined';\n    const hasExplicitDataProp = exists && typeof normalizedProp.ref === 'string';\n    const hasImplicitDataProp = exists && key in datum;\n    const propData = hasExplicitDataProp ? datum[normalizedProp.ref] : hasImplicitDataProp ? datum[key] : fallbackData; // eslint-disable-line\n    if (isPrimitive(normalizedProp)) {\n      ret[key] = normalizedProp;\n    } else if (exists && normalizedProp.fn) {\n      // callback function\n      if (normalizedProp.scale) {\n        context.scale = normalizedProp.scale;\n      }\n      ret[key] = normalizedProp.fn.call(null, context, idx);\n    } else if (exists && normalizedProp.scale && propData) {\n      ret[key] = normalizedProp.scale(propData.value);\n      if (normalizedProp.scale.bandwidth) {\n        ret[key] += normalizedProp.scale.bandwidth() / 2;\n      }\n    } else if (hasExplicitDataProp && propData) {\n      ret[key] = propData.value;\n    } else if (normalizedProp.fn) {\n      ret[key] = normalizedProp.fn.call(null, context, idx);\n    } else {\n      ret[key] = normalizedProp;\n    }\n  }\n  return ret;\n}\n","export function updateScaleSize(object, path, size) {\n  const o = object[path];\n  if (o && o.scale && o.scale.pxScale) {\n    o.scale = o.scale.pxScale(size);\n  } else if (o && o.pxScale) {\n    object[path] = o.pxScale(size);\n  }\n}\n\nexport function scaleWithSize(scale, size) {\n  return scale.pxScale ? scale.pxScale(size) : scale;\n}\n","import { normalizeSettings, resolveForItem } from '../chart-components/property-resolver';\nimport { updateScaleSize } from '../scales';\n\nconst externals = {\n  normalizeSettings,\n  resolveForItem,\n  updateScaleSize,\n};\n\nexport default function (resources, deps = externals) {\n  let cache = {};\n\n  function resolve({ data, settings, defaults = {}, scaled }) {\n    const norm = (cache.norm = deps.normalizeSettings(settings, defaults, resources.chart));\n\n    const res = {\n      scale: resources.chart.scale,\n      formatter: resources.chart.formatter,\n    };\n\n    if (scaled) {\n      Object.keys(scaled).forEach((key) => {\n        if (norm[key]) {\n          deps.updateScaleSize(norm, key, scaled[key]);\n        }\n      });\n    }\n\n    const resolved = [];\n    if (data && Array.isArray(data.items)) {\n      let context;\n      for (let i = 0, len = data.items.length; i < len; i++) {\n        context = {\n          datum: data.items[i],\n          data,\n          resources: res,\n        };\n        let obj = deps.resolveForItem(context, cache.norm, i);\n        obj.data = data.items[i];\n        resolved.push(obj);\n      }\n    } else {\n      const context = {\n        data,\n        resources: res,\n      };\n      let obj = deps.resolveForItem(context, cache.norm, -1);\n      return {\n        settings: cache.norm,\n        item: obj,\n      };\n    }\n    return {\n      settings: cache.norm,\n      items: resolved,\n    };\n  }\n\n  return {\n    resolve,\n  };\n}\n","import extend from 'extend';\nimport { isTouchEvent } from '../utils/event-type';\n\n/**\n * Flatten the array of nodes by removing any containers as they do not support styling, thus unable to brush them.\n * @param {array} nodes\n * @ignore\n */\nexport function reduceToLeafNodes(nodes = []) {\n  return nodes.reduce((ary, node) => {\n    if (Array.isArray(node.children)) {\n      ary.push(...reduceToLeafNodes(node.children));\n      return ary;\n    }\n    ary.push(node);\n    return ary;\n  }, []);\n}\n\nexport function styler(obj, { context, data, style, filter, mode }) {\n  const brusher = obj.chart.brush(context);\n  const dataProps = data;\n  const active = style.active || {};\n  const inactive = style.inactive || {};\n  const styleProps = [];\n  Object.keys(active).forEach((key) => {\n    styleProps.push(key);\n  });\n\n  Object.keys(inactive).forEach((key) => {\n    if (styleProps.indexOf(key) === -1) {\n      styleProps.push(key);\n    }\n  });\n\n  const activeNodes = [];\n  let globalActivation = false; // track when we need to loop through all nodes, not just the active ones\n\n  const getNodes = () => {\n    let nodes = reduceToLeafNodes(obj.nodes);\n    if (typeof filter === 'function') {\n      nodes = nodes.filter(filter);\n    }\n    return nodes;\n  };\n\n  const update = () => {\n    // TODO - render nodes only once, i.e. don't render for each brush, update nodes for all brushes and then render\n    const nodes = getNodes();\n    const len = nodes.length;\n    let nodeData;\n    let globalChanged = false;\n    const evaluatedDataProps = typeof dataProps === 'function' ? dataProps({ brush: brusher }) : dataProps;\n\n    for (let i = 0; i < len; i++) {\n      // TODO - update only added and removed nodes\n      nodeData = nodes[i].data;\n      if (!nodeData) {\n        continue;\n      }\n\n      if (!nodes[i].__style) {\n        nodes[i].__style = {};\n        styleProps.forEach((s) => {\n          nodes[i].__style[s] = nodes[i][s]; // store original value\n        });\n      }\n\n      const isActive = brusher.containsMappedData(nodeData, evaluatedDataProps, mode);\n      const activeIdx = activeNodes.indexOf(nodes[i]);\n      let changed = false;\n      if (isActive && activeIdx === -1) {\n        // activated\n        activeNodes.push(nodes[i]);\n        changed = true;\n      } else if (!isActive && activeIdx !== -1) {\n        // was active\n        activeNodes.splice(activeIdx, 1);\n        changed = true;\n      }\n      if (changed || globalActivation) {\n        const original = extend({}, nodes[i], nodes[i].__style);\n        styleProps.forEach((s) => {\n          if (isActive && s in active) {\n            nodes[i][s] = typeof active[s] === 'function' ? active[s].call(null, original) : active[s];\n          } else if (!isActive && s in inactive) {\n            nodes[i][s] = typeof inactive[s] === 'function' ? inactive[s].call(null, original) : inactive[s];\n          } else {\n            nodes[i][s] = nodes[i].__style[s];\n          }\n        });\n        globalChanged = true;\n      }\n    }\n    globalActivation = false;\n    return globalChanged;\n  };\n\n  const onStart = (opts = { suppressRender: false }) => {\n    const { suppressRender } = opts;\n    const nodes = getNodes();\n    const len = nodes.length;\n    for (let i = 0; i < len; i++) {\n      if (!nodes[i].data) {\n        continue;\n      }\n\n      nodes[i].__style = nodes[i].__style || {};\n      styleProps.forEach((s) => {\n        nodes[i].__style[s] = nodes[i][s]; // store original value\n        if (s in inactive) {\n          nodes[i][s] = typeof inactive[s] === 'function' ? inactive[s].call(null, nodes[i]) : inactive[s];\n        }\n      });\n    }\n    globalActivation = true;\n    activeNodes.length = 0;\n    if (!suppressRender) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n\n  const onEnd = (opts = { suppressRender: false }) => {\n    const { suppressRender } = opts;\n    const nodes = getNodes();\n    const len = nodes.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodes[i].__style) {\n        Object.keys(nodes[i].__style).forEach((s) => {\n          nodes[i][s] = nodes[i].__style[s];\n        });\n        nodes[i].__style = undefined;\n      }\n    }\n    activeNodes.length = 0;\n    if (!suppressRender) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n  const onUpdate = () => {\n    const changed = update();\n    if (changed) {\n      obj.renderer.render(obj.nodes);\n    }\n  };\n\n  const externalUpdate = () => {\n    activeNodes.length = 0;\n    globalActivation = true;\n    update();\n  };\n\n  brusher.on('start', onStart);\n  brusher.on('end', onEnd);\n  brusher.on('update', onUpdate);\n\n  function cleanUp() {\n    brusher.removeListener('start', onStart);\n    brusher.removeListener('end', onEnd);\n    brusher.removeListener('update', onUpdate);\n  }\n\n  return {\n    isActive() {\n      return brusher.isActive();\n    },\n    update: externalUpdate,\n    cleanUp,\n  };\n}\n\nexport function brushDataPoints({ dataPoints, action, chart, trigger }) {\n  if (!trigger) {\n    return;\n  }\n\n  const dataProps = trigger.data || [''];\n\n  let rangeBrush = {\n    items: [],\n    actionFn: 'toggleRanges',\n  };\n  let valueBrush = {\n    items: [],\n    actionFn: 'toggleValues',\n  };\n\n  if (['add', 'remove', 'set', 'toggle'].indexOf(action) !== -1) {\n    rangeBrush.actionFn = `${action}Ranges`;\n    valueBrush.actionFn = `${action}Values`;\n  }\n\n  for (let i = 0; i < dataPoints.length; i++) {\n    const dataPoint = dataPoints[i];\n    if (!dataPoint) {\n      continue;\n    }\n    dataProps.forEach((p) => {\n      let d = dataPoint && !p ? dataPoint : dataPoint[p];\n      if (d) {\n        let it = { key: d.source.field };\n        if (typeof d.source.key !== 'undefined') {\n          it.key = `${d.source.key}/${d.source.field}`;\n        }\n        if (Array.isArray(d.value)) {\n          it.range = { min: d.value[0], max: d.value[1] };\n          rangeBrush.items.push(it);\n        } else {\n          it.value = d.value;\n          valueBrush.items.push(it);\n        }\n      }\n    });\n  }\n\n  trigger.contexts.forEach((c) => {\n    if (rangeBrush.items.length) {\n      chart.brush(c)[rangeBrush.actionFn](rangeBrush.items);\n    } else {\n      chart.brush(c)[valueBrush.actionFn](valueBrush.items); // call action even if there are items to potentially clear what is currently in the brush\n    }\n  });\n}\n\nexport function brushFromSceneNodes({ nodes, action, chart, trigger }) {\n  const dataPoints = [];\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    let nodeData = node.data;\n    if (nodeData !== null) {\n      dataPoints.push(nodeData);\n    }\n  }\n\n  brushDataPoints({\n    dataPoints,\n    action,\n    chart,\n    trigger,\n  });\n}\n\nexport function resolveEvent({ collisions, t, config, action }) {\n  let brushCollisions = [];\n  let resolved = false;\n\n  if (collisions.length > 0) {\n    brushCollisions = collisions;\n    resolved = true;\n\n    if (t.propagation === 'stop') {\n      brushCollisions = [collisions[collisions.length - 1]];\n    }\n  }\n\n  const nodes = brushCollisions.map((c) => c.node);\n  brushFromSceneNodes({\n    nodes,\n    action,\n    chart: config.chart,\n    data: config.data,\n    trigger: t,\n  });\n\n  return resolved;\n}\n\nfunction touchSingleContactPoint(e, rect) {\n  if (e.changedTouches.length !== 1) {\n    return null;\n  }\n\n  return {\n    x: e.changedTouches[0].clientX - rect.left,\n    y: e.changedTouches[0].clientY - rect.top,\n  };\n}\n\nfunction singleContactPoint(e, rect) {\n  return {\n    x: e.clientX - rect.left,\n    y: e.clientY - rect.top,\n  };\n}\n\nfunction resolveCollisions(e, t, renderer) {\n  const rect = renderer.element().getBoundingClientRect();\n  let p = isTouchEvent(e) ? touchSingleContactPoint(e, rect) : singleContactPoint(e, rect);\n\n  if (p === null || p.x < 0 || p.y < 0 || p.x > rect.width || p.y > rect.height) {\n    // TODO include radius in this check?\n    return [];\n  }\n\n  if (t.touchRadius > 0 && isTouchEvent(e)) {\n    p = {\n      cx: p.x,\n      cy: p.y,\n      r: t.touchRadius, // TODO Use touch event radius/width value (Need to handle dpi scaling as well)\n    };\n  } else if (t.mouseRadius > 0 && !isTouchEvent(e)) {\n    p = {\n      cx: p.x,\n      cy: p.y,\n      r: t.mouseRadius,\n    };\n  }\n\n  return renderer.itemsAt(p);\n}\n\nfunction resolveAction(action, e, def) {\n  if (action) {\n    if (typeof action === 'function') {\n      return action(e);\n    }\n    return action;\n  }\n  return def;\n}\n\nexport function resolveTapEvent({ e, t, config }) {\n  const collisions = resolveCollisions(e, t, config.renderer);\n\n  return resolveEvent({\n    collisions,\n    t,\n    config,\n    action: resolveAction(t.action, e, 'toggle'),\n  });\n}\n\nexport function resolveOverEvent({ e, t, config }) {\n  const collisions = resolveCollisions(e, t, config.renderer);\n\n  return resolveEvent({\n    collisions,\n    t,\n    config,\n    action: resolveAction(t.action, e, 'set'),\n  });\n}\n","/**\n * A list of supported attributes in lower camelCase notation mapped to corresponding kebab-case notation.\n * The kebab-case notations are a sub-set of SVG attributes (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute).\n * @ignore\n * @private\n */\nconst mappedAttributes = {\n  fill: 'fill',\n  stroke: 'stroke',\n  opacity: 'opacity',\n  strokeWidth: 'stroke-width',\n  strokeLinejoin: 'stroke-linejoin',\n  fontFamily: 'font-family',\n  fontSize: 'font-size',\n  baseline: 'dominant-baseline', // Special case where we have defined our own attribute name\n  dominantBaseline: 'dominant-baseline',\n  anchor: 'text-anchor', // Special case where we have defined our own attribute name\n  textAnchor: 'text-anchor',\n  maxWidth: 'maxWidth',\n  transform: 'transform',\n  strokeDasharray: 'stroke-dasharray',\n  id: 'id',\n};\n\n/**\n * Takes a target object and assign each supported attribute from a source object to that target.\n * Each supported attributes is converted to a mapped kebab-case notation.\n * @ignore\n * @private\n * @param {object} target - Target object on which to assign mapped attribute values\n * @param {object} source - Source object\n */\nfunction assignMappedAttribute(target, source) {\n  Object.keys(mappedAttributes).forEach((key) => {\n    const sourceValue = source[key];\n    if (typeof sourceValue !== 'undefined') {\n      const mappedKey = mappedAttributes[key];\n      target[mappedKey] = sourceValue;\n    }\n  });\n}\n\nexport { mappedAttributes, assignMappedAttribute };\n","/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolCircle\n */\nfunction circle(options) {\n  return {\n    type: 'circle',\n    fill: 'black',\n    cx: options.x,\n    cy: options.y,\n    r: options.size / 2,\n  };\n}\n\nexport { circle as default };\n","export default function pointsToPath(points, close = true) {\n  let d = '';\n\n  for (let i = 0; i < points.length; i++) {\n    const p = points[i];\n    if (i === 0) {\n      d += `M${p.x} ${p.y}`;\n    } else {\n      d += `L${p.x} ${p.y}`;\n    }\n\n    d += ' ';\n  }\n\n  if (close) {\n    d += 'Z';\n  }\n\n  return d;\n}\n","import pointsToPath from '../utils/points-to-path';\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolDiamond\n */\nfunction diamond(options) {\n  const size = options.size;\n  const left = options.x - size / 2;\n  const top = options.y - size / 2;\n  const points = [\n    { x: left, y: top + size / 2 },\n    { x: left + size / 2, y: top },\n    { x: left + size, y: top + size / 2 },\n    { x: left + size / 2, y: top + size },\n    { x: left, y: top + size / 2 },\n  ];\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { diamond as default };\n","import pointsToPath from '../utils/points-to-path';\n\nexport function generateCrossPoints(x, y, size, barWidth) {\n  const r = size / 2;\n  const innerLeft = x - barWidth / 2;\n  const innerTop = y - barWidth / 2;\n  const left = x - r;\n  const top = y - r;\n\n  return [\n    { x: innerLeft, y: innerTop }, // Top\n    { x: innerLeft, y: top },\n    { x: innerLeft + barWidth, y: top },\n    { x: innerLeft + barWidth, y: innerTop }, // Right\n    { x: left + size, y: innerTop },\n    { x: left + size, y: innerTop + barWidth },\n    { x: innerLeft + barWidth, y: innerTop + barWidth }, // Bottom\n    { x: innerLeft + barWidth, y: top + size },\n    { x: innerLeft, y: top + size },\n    { x: innerLeft, y: innerTop + barWidth }, // Left\n    { x: left, y: innerTop + barWidth },\n    { x: left, y: innerTop },\n  ];\n}\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolCross\n * @property {number} [width] - Width of the diagonals\n */\nfunction cross(options) {\n  const x = options.x;\n  const y = options.y;\n  const r = options.size / 2;\n  const width = isNaN(options.width) ? r / 2 : options.width;\n  const barWidth = Math.min(width, r);\n\n  const points = generateCrossPoints(x, y, options.size, barWidth);\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { cross as default };\n","/**\n * Get x1, y1, x2, y2 point from angle\n * Source: {@link https://codepen.io/NV/pen/jcnmK}\n * @private\n *\n * @param  {number} angle Radians\n * @return {object}       Point with x1, y2, x2, y2.\n */\nexport function angleToPoints(angle) {\n  let segment = Math.floor((angle / Math.PI) * 2) + 2;\n  let diagonal = (0.5 * segment + 0.25) * Math.PI;\n  let op = Math.cos(Math.abs(diagonal - angle)) * Math.sqrt(2);\n  let x = op * Math.cos(angle);\n  let y = op * Math.sin(angle);\n\n  return {\n    x1: x < 0 ? 1 : 0,\n    y1: y < 0 ? 1 : 0,\n    x2: x >= 0 ? x : x + 1,\n    y2: y >= 0 ? y : y + 1,\n  };\n}\n\n/**\n * Turns degrees into radians\n * @private\n *\n * @param  {number} degrees Degrees\n * @return {number}         Radians\n */\nexport function toRadians(d) {\n  return (-d / 180) * Math.PI;\n}\n\n/**\n * Turns radians into degrees\n * @private\n *\n * @param  {number} degrees Degrees\n * @return {number}         Radians\n */\nexport function toDegrees(r) {\n  return r * (180 / Math.PI);\n}\n\n/**\n * Get x1, y1, x2, y2 point from degree\n * @private\n *\n * @param  {number} d Degree\n * @return {object}   Point with x1, y2, x2, y2.\n */\nexport function degreesToPoints(d) {\n  return angleToPoints(toRadians(d));\n}\n","export function add(v1, v2) {\n  return {\n    x: v1.x + v2.x,\n    y: v1.y + v2.y,\n  };\n}\n\nexport function sub(v1, v2) {\n  return {\n    x: v1.x - v2.x,\n    y: v1.y - v2.y,\n  };\n}\n\nexport function scalarMultiply(v, s) {\n  return {\n    x: v.x * s,\n    y: v.y * s,\n  };\n}\n\nexport function sqrMagnitude(v) {\n  return Math.pow(v.x, 2) + Math.pow(v.y, 2);\n}\n\nexport function magnitude(v) {\n  return Math.sqrt(sqrMagnitude(v));\n}\n\nexport function distanceX(v1, v2) {\n  return v1.x - v2.x;\n}\n\nexport function distanceY(v1, v2) {\n  return v1.y - v2.y;\n}\n\nexport function sqrDistance(v1, v2) {\n  return Math.pow(distanceX(v1, v2), 2) + Math.pow(distanceY(v1, v2), 2);\n}\n\nexport function distance(v1, v2) {\n  return Math.sqrt(sqrDistance(v1, v2));\n}\n\nexport function determinant(v1, v2) {\n  return v1.x * v2.y - v2.x * v1.y;\n}\n\nexport function dot(v1, v2) {\n  return v1.x * v2.x + v1.y * v2.y;\n}\n\nexport function projectOnto(v1, v2) {\n  const m = dot(v1, v2) / dot(v2, v2) || 1;\n  return {\n    x: v2.x * m,\n    y: v2.y * m,\n  };\n}\n\nexport function rotate(v, radians, origin = { x: 0, y: 0 }) {\n  const cos = Math.cos(radians);\n  const sin = Math.sin(radians);\n\n  const t1 = sub(v, origin);\n\n  const t2 = {\n    x: cos * t1.x - sin * t1.y,\n    y: sin * t1.x + cos * t1.y,\n  };\n\n  return add(t2, origin);\n}\n\nexport function unit(v) {\n  const m = magnitude(v);\n  return { x: v.x / m, y: v.y / m };\n}\n\nexport function cross(u, v, a) {\n  return (v.x - u.x) * (a.y - u.y) - (v.y - u.y) * (v.x - u.x);\n}\n","import { generateCrossPoints } from './cross';\nimport { toRadians } from '../math/angles';\nimport { rotate } from '../math/vector';\nimport pointsToPath from '../utils/points-to-path';\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolSaltire\n * @property {number} [width] - Width of the diagonals\n */\nfunction saltire(options) {\n  const radians = toRadians(45);\n  const r = options.size / 2;\n  const width = isNaN(options.width) ? r / 2 : options.width;\n  const barWidth = Math.min(width, r);\n  let adjustedSize = options.size;\n\n  // Adjust for the barwidth and rotation angle, so that the visual part is always inside the symbol area\n  const h = Math.sin(Math.asin(-radians)) * (barWidth / 2);\n  const c = r / Math.sin(-radians);\n  adjustedSize += (c - r) * 2;\n  adjustedSize -= h * 2;\n\n  const centroid = { x: options.x, y: options.y };\n  const points = generateCrossPoints(options.x, options.y, adjustedSize, barWidth).map((p) =>\n    rotate(p, radians, centroid)\n  );\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { saltire as default };\n","/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolSquare\n */\nfunction square(options) {\n  const size = options.size;\n\n  return {\n    type: 'rect',\n    fill: 'black',\n    x: options.x - size / 2,\n    y: options.y - size / 2,\n    width: size,\n    height: size,\n  };\n}\n\nexport { square as default };\n","import pointsToPath from '../utils/points-to-path';\nimport { rotate } from '../math/vector';\nimport { toRadians } from '../math/angles';\n\nconst DIRECTION_TO_ANGLE = {\n  up: 0,\n  down: 180,\n  left: 90,\n  right: -90,\n};\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolTriangle\n * @property {string} [direction='up'] - Direction of the triangle ('up'|'down'|'left'|'right')\n */\nfunction triangle(options) {\n  const size = options.size;\n  const p = { x: options.x, y: options.y };\n  const directionAngle = DIRECTION_TO_ANGLE[options.direction] || 0;\n  const halfSize = size / 2;\n  const left = options.x - halfSize;\n  const top = options.y - halfSize;\n  let points = [\n    { x: left, y: top + size },\n    { x: left + halfSize, y: top },\n    { x: left + size, y: top + size },\n    { x: left, y: top + size },\n  ];\n\n  const radians = toRadians(directionAngle);\n  points = points.map((pp) => rotate(pp, radians, p));\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { triangle as default };\n","function createRectCollider({ x, y, size }) {\n  const r = size / 2;\n  return {\n    type: 'rect',\n    x: x - r,\n    y: y - r,\n    width: size,\n    height: size,\n  };\n}\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolLine\n * @property {string} [direction='horizontal'] - Direction of line ('horizontal'|'vertical').\n */\nfunction line(options) {\n  const isVertical = options.direction === 'vertical';\n  const r = options.size / 2;\n  const x = options.x;\n  const y = options.y;\n\n  return {\n    type: 'line',\n    stroke: 'black',\n    strokeWidth: 1,\n    x1: x - (isVertical ? 0 : r),\n    y1: y - (isVertical ? r : 0),\n    x2: x + (isVertical ? 0 : r),\n    y2: y + (isVertical ? r : 0),\n    collider: createRectCollider(options), // TODO Use visual collider?\n  };\n}\n\nexport { line as default };\n","import pointsToPath from '../utils/points-to-path';\nimport { toRadians } from '../math/angles';\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolStar\n * @property {number} [points=5] - Number of points on the star\n * @property {number} [startAngle=90] - Start drawing angle\n * @property {number} [innerRadius=size/2] - Size of the star core. My not exceed size of symbol.\n */\nfunction star(options) {\n  const size = options.size;\n  const points = [];\n  const outerRadius = size / 2;\n  const drawPoints = options.points || 5;\n  const innerRadius = Math.min(options.innerRadius || size / 2, size) / 2;\n  const startAngle = isNaN(options.startAngle) ? 90 : options.startAngle;\n  const angle = 360 / drawPoints;\n\n  for (let i = 1; i <= drawPoints; i++) {\n    const pAngle = angle * i + startAngle;\n    const radians = toRadians(pAngle);\n    const innerRadians = toRadians(pAngle + angle / 2);\n    const y = Math.sin(radians);\n    const x = Math.cos(radians);\n    const iy = Math.sin(innerRadians);\n    const ix = Math.cos(innerRadians);\n\n    points.push({\n      x: options.x + x * outerRadius,\n      y: options.y + y * outerRadius,\n    });\n\n    points.push({\n      x: options.x + ix * innerRadius,\n      y: options.y + iy * innerRadius,\n    });\n  }\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { star as default };\n","import pointsToPath from '../utils/points-to-path';\nimport { toRadians } from '../math/angles';\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolPolygon\n * @property {object} [sides=6] - Number of sides on the regular polygon\n * @property {object} [startAngle=0] - Start drawing angle\n */\nfunction nPolygon(options) {\n  const points = [];\n  const radius = options.size / 2;\n  const drawPoints = Math.max(isNaN(options.sides) ? 6 : options.sides, 3);\n  const angle = 360 / drawPoints;\n  const startAngle = isNaN(options.startAngle) ? 0 : options.startAngle;\n\n  for (let i = 1; i <= drawPoints; i++) {\n    const radians = toRadians(angle * i + startAngle);\n    const y = Math.sin(radians);\n    const x = Math.cos(radians);\n    points.push({\n      x: options.x + x * radius,\n      y: options.y + y * radius,\n    });\n  }\n\n  return {\n    type: 'path',\n    fill: 'black',\n    d: pointsToPath(points),\n  };\n}\n\nexport { nPolygon as default };\n","import { rotate } from '../math/vector';\nimport { pointsToRect } from '../geometry/util';\nimport { toRadians } from '../math/angles';\n\n/**\n * @private\n * @extends Symbol\n * @typedef {object} SymbolBar\n * @property {string} [direction='horizontal'] - Direction of bar ('horizontal'|'vertical').\n */\nfunction bar(options) {\n  const p = { x: options.x, y: options.y };\n  const isVertical = options.direction === 'vertical';\n  const r = options.size / 2;\n  const width = r / 2;\n  const halfWidth = width / 2;\n\n  let points = [\n    { x: p.x - r, y: p.y + halfWidth },\n    { x: p.x - r, y: p.y - halfWidth },\n    { x: p.x + r, y: p.y - halfWidth },\n    { x: p.x + r, y: p.y + halfWidth },\n  ];\n\n  if (isVertical) {\n    const radians = toRadians(90);\n    points = points.map((pp) => rotate(pp, radians, p));\n  }\n\n  const rect = pointsToRect(points);\n  rect.type = 'rect';\n  rect.fill = 'black';\n\n  return rect;\n}\n\nexport { bar as default };\n","import { mappedAttributes } from '../scene-graph/attributes';\nimport circle from './circle';\nimport diamond from './diamond';\nimport saltire from './saltire';\nimport square from './square';\nimport triangle from './triangle';\nimport line from './line';\nimport star from './star';\nimport nPolygon from './n-polygon';\nimport cross from './cross';\nimport bar from './bar';\nimport registry from '../utils/registry';\n\nconst parentReg = registry();\n\nparentReg.add('circle', circle);\nparentReg.add('diamond', diamond);\nparentReg.add('saltire', saltire);\nparentReg.add('square', square);\nparentReg.add('triangle', triangle);\nparentReg.add('line', line);\nparentReg.add('star', star);\nparentReg.add('n-polygon', nPolygon);\nparentReg.add('cross', cross);\nparentReg.add('bar', bar);\n\nfunction applyOpts(obj, opts = {}) {\n  Object.keys(opts).forEach((key) => {\n    if (typeof mappedAttributes[key] !== 'undefined' && key !== 'transform') {\n      obj[key] = opts[key];\n    }\n  });\n}\n\n/**\n * Factory function for symbols.\n * Options object is passed to symbols function.\n * @private\n * @param {SymbolBar|SymbolCircle|SymbolCross|SymbolDiamond|SymbolLine|SymbolPolygon|SymbolSaltire|SymbolSquare|SymbolStar|SymbolTriangle} options - Options definition may contain any of the supported display-object attributes\n * @returns {object} A node definition\n */\nconst create = (reg = parentReg) => (options = {}) => {\n  // TODO handle reserverd properties x, y, size, data, etc..\n  const fn = reg.get(options.type);\n  if (fn) {\n    const s = fn(options);\n    applyOpts(s, options);\n\n    if (typeof options.data !== 'undefined') {\n      s.data = options.data;\n    }\n\n    return s;\n  }\n  return fn;\n};\n\nexport { create as default, parentReg as symbolRegistry };\n\n/**\n * Mandatory symbol config\n * @private\n * @typedef {object} Symbol\n * @property {object} options - Options definition may contain any of the supported display-object attributes\n * @property {string} options.type - Type of symbol\n * @property {number} options.x - x-coordinate\n * @property {number} options.y - y-coordinate\n * @property {number} options.size\n * @property {object} [options.data]\n */\n","/**\n * Initilize a new dock configuration\n * @private\n * @param {object} [settings] - Settings object\n * @returns {object} A dock configuration instance\n * @example\n * let instance = create({\n *  dock: 'left',\n *  displayOrder: 2,\n *  prioOrder: 1,\n *  preferredSize: 33,\n *  minimumLayoutMode: 'L',\n *  show: true\n * });\n */\nfunction create(settings = {}, callbackContext = {}) {\n  let {\n    dock = 'center',\n    displayOrder = 0,\n    prioOrder = 0,\n    preferredSize = 0,\n    minimumLayoutMode,\n    show = true,\n  } = settings;\n\n  // avoid empty string dock\n  dock = dock || 'center';\n\n  /**\n   * @private\n   * @alias dockConfig\n   * @interface\n   */\n  const dockConfig = {\n    /**\n     * Returns the preferred size of a component.\n     * The return value of the function can either be a number representing the required size in the dock direction\n     * or an object with a `size` and `edgeBleed` property.\n     * @param {object} [inner]\n     * @param {object} [outer]\n     * @returns {number|object} Returns the computed preferred size\n     * @example\n     * dockConfig.computePreferredSize(() => 150); // Require a size of 150 in the dock direction\n     *\n     * dockConfig.computePreferredSize(() => ({\n     *  size: 150,\n     *  edgeBleed: {\n     *    left: 50,\n     *    right: 50\n     *  }\n     * })); // Require a size of 150 in the dock direction and a bleed size of 50 to the left and right dock direction\n     */\n    computePreferredSize({ inner, outer, children }) {\n      if (typeof preferredSize === 'function') {\n        return preferredSize({ inner, outer, children, dock: this.dock() }, callbackContext);\n      }\n      return preferredSize;\n    },\n\n    /**\n     * Set the dock direction, supported values are left | right | top | bottom. Any other value will be interpreted as center dock.\n     * @param {string} [val=''] - Dock direction\n     * @returns {this} The current context\n     * @example\n     * dockConfig.dock('left');\n     */\n    dock(val) {\n      if (typeof val !== 'undefined') {\n        dock = val;\n        return this;\n      }\n      return typeof dock === 'function' ? dock(callbackContext) : dock;\n    },\n\n    /**\n     * The `displayOrder` property is used by the layout engine to lay out components.\n     * Components are interpreted in the ascending order of the `displayOrder` value. The layout engine apply the value in two ways,\n     * the first is the order in which components are rendererd. The second is the area components are laid out in\n     * when they have a direction, i.e. docked to either top, bottom, left or right.\n     *\n     * If docked at the same area, the component with a higher `displayOrder` will be rendered\n     * on top of the component with a lower `displayOrder`. It can be seen as defining a z-index.\n     * A lower `displayOrder` also means that a component will be laid out first in a given direction,\n     * i.e. laid out closer to the central area (non-directional area) then a component with a higher `displayOrder`.\n     * It can in this case be seen as the x-index or y-index.\n     * @param {number} [val=0] - The display order\n     * @returns {this|number} The current context or display order\n     * @example\n     * dockConfig.displayOrder(99);\n     */\n    displayOrder(val) {\n      if (typeof val !== 'undefined') {\n        displayOrder = val;\n        return this;\n      }\n      return typeof displayOrder === 'function' ? displayOrder(callbackContext) : displayOrder;\n    },\n\n    /**\n     * The `prioOrder` property is used to define the order in which components are added to the layout engine,\n     * this is done before any components are laid out. When there is not enough space to add any more components\n     * to a given area, all components not all ready added, are then discarded. The `prioOrder` is interpreted\n     * in the ascending order. Such that a lower value is added to the layout engine first.\n     * @param {number} [val=0] - The prio order\n     * @returns {this|number} The current context or prio order\n     * @example\n     * dockConfig.prioOrder(-1);\n     */\n    prioOrder(val) {\n      if (typeof val !== 'undefined') {\n        prioOrder = val;\n        return this;\n      }\n      return typeof prioOrder === 'function' ? prioOrder(callbackContext) : prioOrder;\n    },\n\n    /**\n     * Ger or set the minimumLayoutMode\n     * @param {string|object} [val] - The minimum layout mode\n     * @returns {string|object|this} If no parameter is passed the current context is returned, else the current layout mode.\n     * @example\n     * dockConfig.minimumLayoutMode('L');\n     * dockConfig.minimumLayoutMode({ width: 'S', height: 'L' });\n     */\n    minimumLayoutMode(val) {\n      if (typeof val !== 'undefined') {\n        minimumLayoutMode = val;\n        return this;\n      }\n      return typeof minimumLayoutMode === 'function' ? minimumLayoutMode(callbackContext) : minimumLayoutMode;\n    },\n\n    /**\n     * Set the component visibility. If false the component is not added to the layout engine.\n     * @param {boolean} [val=true] - Toggle visibility\n     * @returns {this|boolean} The current context or show\n     */\n    show(val) {\n      if (typeof val !== 'undefined') {\n        show = val;\n        return this;\n      }\n      return typeof show === 'function' ? show(callbackContext) : show;\n    },\n  };\n\n  return dockConfig;\n}\n\nexport default create;\n","/* eslint camelcase: 1 */\nimport extend from 'extend';\nimport EventEmitter from '../utils/event-emitter';\nimport extractData from '../data/extractor';\nimport tween from './tween';\nimport settingsResolver from './settings-resolver';\nimport { styler as brushStyler, resolveTapEvent, resolveOverEvent, brushFromSceneNodes } from './brushing';\nimport createSymbolFactory from '../symbols';\nimport createDockConfig from '../layout/dock/config';\n\nconst isReservedProperty = (prop) =>\n  [\n    'on',\n    'preferredSize',\n    'created',\n    'beforeMount',\n    'mounted',\n    'resize',\n    'beforeUpdate',\n    'updated',\n    'beforeRender',\n    'render',\n    'beforeUnmount',\n    'beforeDestroy',\n    'destroyed',\n    'defaultSettings',\n    'data',\n    'settings',\n    'formatter',\n    'scale',\n    'chart',\n    'dockConfig',\n    'mediator',\n    'style',\n    'resolver',\n    'registries',\n    '_DO_NOT_USE_getInfo',\n    'symbol',\n    'isVisible',\n  ].some((name) => name === prop);\n\nfunction prepareContext(ctx, definition, opts) {\n  const { require = [] } = definition;\n  const mediatorSettings = definition.mediator || {};\n  const {\n    settings,\n    formatter,\n    scale,\n    data,\n    renderer,\n    chart,\n    dockConfig,\n    mediator,\n    instance,\n    rect,\n    style,\n    registries,\n    resolver,\n    update,\n    _DO_NOT_USE_getInfo,\n    symbol,\n    isVisible,\n  } = opts;\n\n  ctx.emit = () => {};\n\n  if (isVisible) {\n    ctx.isVisible = isVisible;\n  }\n\n  // TODO add setters and log warnings / errors to console\n  Object.defineProperty(ctx, 'settings', {\n    get: settings,\n  });\n  Object.defineProperty(ctx, 'data', {\n    get: data,\n  });\n  Object.defineProperty(ctx, 'formatter', {\n    get: formatter,\n  });\n  Object.defineProperty(ctx, 'scale', {\n    get: scale,\n  });\n  Object.defineProperty(ctx, 'mediator', {\n    get: mediator,\n  });\n  Object.defineProperty(ctx, 'style', {\n    get: style,\n  });\n  Object.defineProperty(ctx, 'registries', {\n    get: registries,\n  });\n  if (rect) {\n    Object.defineProperty(ctx, 'rect', {\n      get: rect,\n    });\n  }\n\n  // TODO _DO_NOT_USE_getInfo is a temporary solution to expose info from a component\n  // It should replace ASAP with a proper solution.\n  // The only component activaly in need of it is the legend-cat\n  if (_DO_NOT_USE_getInfo) {\n    ctx._DO_NOT_USE_getInfo = _DO_NOT_USE_getInfo;\n  }\n\n  Object.keys(definition).forEach((key) => {\n    if (!isReservedProperty(key)) {\n      // Add non-lifecycle methods to the context\n      if (typeof definition[key] === 'function') {\n        ctx[key] = definition[key].bind(ctx);\n      } else {\n        ctx[key] = definition[key];\n      }\n    }\n  });\n\n  // Add properties to context\n  require.forEach((req) => {\n    if (req === 'renderer') {\n      Object.defineProperty(ctx, 'renderer', {\n        get: renderer,\n      });\n    } else if (req === 'chart') {\n      Object.defineProperty(ctx, 'chart', {\n        get: chart,\n      });\n    } else if (req === 'dockConfig') {\n      Object.defineProperty(ctx, 'dockConfig', {\n        get: dockConfig,\n      });\n    } else if (req === 'instance') {\n      Object.defineProperty(ctx, 'instance', {\n        get: instance,\n      });\n    } else if (req === 'update' && update) {\n      Object.defineProperty(ctx, 'update', {\n        get: update,\n      });\n    } else if (req === 'resolver') {\n      Object.defineProperty(ctx, 'resolver', {\n        get: resolver,\n      });\n    } else if (req === 'symbol') {\n      Object.defineProperty(ctx, 'symbol', {\n        get: symbol,\n      });\n    }\n  });\n\n  Object.keys(mediatorSettings).forEach((eventName) => {\n    ctx.mediator.on(eventName, mediatorSettings[eventName].bind(ctx));\n  });\n}\n\nfunction createDockDefinition(settings, preferredSize, logger) {\n  const getLayoutProperty = (propName) => {\n    if (settings[propName]) {\n      logger.warn(`Deprecation Warning the ${propName} property should be moved into layout: {} property`); // eslint-disable-line no-console\n      return settings[propName];\n    }\n    return settings.layout ? settings.layout[propName] : undefined;\n  };\n\n  const def = {};\n  def.displayOrder = getLayoutProperty('displayOrder');\n  def.dock = getLayoutProperty('dock');\n  def.prioOrder = getLayoutProperty('prioOrder');\n  def.minimumLayoutMode = getLayoutProperty('minimumLayoutMode');\n\n  // move layout properties to layout object\n  settings.layout = settings.layout || {};\n  settings.layout.displayOrder =\n    typeof def.displayOrder !== 'undefined' ? def.displayOrder : settings.layout.displayOrder;\n  settings.layout.prioOrder = typeof def.prioOrder !== 'undefined' ? def.prioOrder : settings.layout.prioOrder;\n  settings.layout.dock = def.dock || settings.layout.dock;\n  settings.layout.minimumLayoutMode = def.minimumLayoutMode || settings.layout.minimumLayoutMode;\n\n  // not directly a dock layout property\n  def.show = settings.show;\n  def.preferredSize = preferredSize;\n  return def;\n}\n\nfunction setUpEmitter(ctx, emitter, settings) {\n  // Object.defineProperty(ctx, 'emitter', )\n  Object.keys(settings.on || {}).forEach((event) => {\n    ctx.eventListeners = ctx.eventListeners || [];\n    const listener = settings.on[event].bind(ctx);\n    ctx.eventListeners.push({ event, listener });\n    emitter.on(event, listener);\n  });\n  ctx.emit = (name, ...event) => emitter.emit(name, ...event);\n}\n\nfunction tearDownEmitter(ctx, emitter) {\n  if (ctx.eventListeners) {\n    ctx.eventListeners.forEach(({ event, listener }) => {\n      emitter.removeListener(event, listener);\n    });\n    ctx.eventListeners.length = 0;\n  }\n  ctx.emit = () => {};\n}\n\n// First render\n// preferredSize -> resize -> beforeRender -> render -> mounted\n\n// Normal update\n// beforeUpdate -> preferredSize -> resize -> beforeRender -> render -> updated\n\n// Update without relayout\n// beforeUpdate -> beforeRender -> render -> updated\n\n// TODO support es6 classes\nfunction componentFactory(definition, context = {}) {\n  const { defaultSettings = {}, _DO_NOT_USE_getInfo = () => ({}) } = definition;\n  const {\n    chart,\n    container,\n    mediator,\n    registries,\n    theme,\n    renderer, // Used by tests\n  } = context;\n  const emitter = EventEmitter.mixin({});\n  let config = context.settings || {};\n  let settings = extend(true, {}, defaultSettings, config);\n  let data = [];\n  let scale;\n  let formatter;\n  let element;\n  let size;\n  let style;\n  let resolver = settingsResolver({\n    chart,\n  });\n  let isVisible = false;\n\n  const brushArgs = {\n    nodes: [],\n    chart,\n    config: settings.brush || {},\n    renderer: null,\n  };\n  const brushTriggers = {\n    tap: [],\n    over: [],\n  };\n  const brushStylers = [];\n  const definitionContext = {};\n  const instanceContext = extend({}, config);\n\n  // Create a callback that calls lifecycle functions in the definition and config (if they exist).\n  function createCallback(method, defaultMethod = () => {}, canBeValue = false) {\n    return function cb(...args) {\n      const inDefinition = typeof definition[method] !== 'undefined';\n      const inConfig = typeof config[method] !== 'undefined';\n\n      let returnValue;\n      if (inDefinition) {\n        if (typeof definition[method] === 'function') {\n          returnValue = definition[method].call(definitionContext, ...args);\n        } else if (canBeValue) {\n          returnValue = definition[method];\n        }\n      }\n\n      if (inConfig) {\n        if (typeof config[method] === 'function') {\n          returnValue = config[method].call(instanceContext, ...args);\n        } else if (canBeValue) {\n          returnValue = config[method];\n        }\n      }\n\n      if (!inDefinition && !inConfig) {\n        returnValue = defaultMethod.call(definitionContext, ...args);\n      }\n\n      return returnValue;\n    };\n  }\n\n  const preferredSize = createCallback('preferredSize', () => 0, true);\n  const resize = createCallback('resize', ({ inner }) => inner);\n  const created = createCallback('created');\n  const beforeMount = createCallback('beforeMount');\n  const mounted = createCallback('mounted');\n  const beforeUnmount = createCallback('beforeUnmount');\n  const beforeUpdate = createCallback('beforeUpdate');\n  const updated = createCallback('updated');\n  const beforeRender = createCallback('beforeRender');\n  const beforeDestroy = createCallback('beforeDestroy');\n  const destroyed = createCallback('destroyed');\n  const render = definition.render; // Do not allow overriding of this function\n\n  const addBrushStylers = () => {\n    if (settings.brush) {\n      (settings.brush.consume || []).forEach((b) => {\n        if (b.context && b.style) {\n          brushStylers.push(brushStyler(brushArgs, b));\n        }\n      });\n    }\n  };\n\n  const addBrushTriggers = () => {\n    if (settings.brush) {\n      (settings.brush.trigger || []).forEach((t) => {\n        if (t.on === 'over') {\n          brushTriggers.over.push(t);\n        } else {\n          brushTriggers.tap.push(t);\n        }\n      });\n    }\n  };\n\n  Object.defineProperty(brushArgs, 'data', {\n    get: () => data,\n  });\n\n  const rendString = settings.renderer || definition.renderer;\n  const rend = rendString ? renderer || registries.renderer(rendString)() : renderer || registries.renderer()();\n  brushArgs.renderer = rend;\n\n  const dockConfigCallbackContext = { resources: chart.logger ? { logger: chart.logger() } : {} };\n  let dockConfig = createDockConfig(\n    createDockDefinition(settings, preferredSize, chart.logger()),\n    dockConfigCallbackContext\n  );\n\n  const appendComponentMeta = (node) => {\n    node.key = settings.key;\n    node.element = rend.element();\n  };\n\n  const fn = () => {};\n\n  fn.dockConfig = () => dockConfig;\n\n  // Set new settings - will trigger mapping of data and creation of scale / formatter.\n  fn.set = (opts = {}) => {\n    if (opts.settings) {\n      config = opts.settings;\n      settings = extend(true, {}, defaultSettings, opts.settings);\n      dockConfig = createDockConfig(\n        createDockDefinition(settings, preferredSize, chart.logger()),\n        dockConfigCallbackContext\n      );\n    }\n\n    if (settings.scale) {\n      scale = chart.scale(settings.scale);\n    }\n\n    if (settings.data) {\n      data = extractData(\n        settings.data,\n        { dataset: chart.dataset, collection: chart.dataCollection },\n        { logger: chart.logger() },\n        chart.dataCollection\n      );\n    } else if (scale) {\n      data = scale.data();\n    } else {\n      data = [];\n    }\n\n    if (typeof settings.formatter === 'string') {\n      formatter = chart.formatter(settings.formatter);\n    } else if (typeof settings.formatter === 'object') {\n      formatter = chart.formatter(settings.formatter);\n    } else if (scale && scale.data().fields) {\n      formatter = scale.data().fields[0].formatter();\n    }\n\n    style = theme.style(settings.style || {});\n  };\n\n  fn.resize = (inner = {}, outer = {}) => {\n    const newSize = resize({\n      inner,\n      outer,\n    });\n    if (newSize) {\n      size = rend.size(newSize);\n    } else {\n      size = rend.size(inner);\n    }\n    instanceContext.rect = extend(\n      true,\n      {\n        computedPhysical: size.computedPhysical,\n        computedOuter: outer.computed || outer,\n        computedInner: inner.computed || inner,\n      },\n      inner\n    );\n    size = extend(\n      true,\n      {\n        computedOuter: outer.computed || outer,\n        computedInner: inner.computed || inner,\n      },\n      size\n    );\n  };\n\n  fn.getRect = () => instanceContext.rect;\n\n  const getRenderArgs = () => {\n    const renderArgs = rend.renderArgs ? rend.renderArgs.slice(0) : [];\n    renderArgs.push({\n      data,\n    });\n    return renderArgs;\n  };\n\n  fn.beforeMount = beforeMount;\n\n  fn.beforeRender = () => {\n    beforeRender({\n      size,\n    });\n  };\n\n  let currentNodes;\n\n  fn.render = () => {\n    const nodes = (brushArgs.nodes = render.call(definitionContext, ...getRenderArgs()));\n    rend.render(nodes);\n    currentNodes = nodes;\n  };\n\n  fn.hide = () => {\n    fn.unmount();\n    rend.size({\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n    });\n    rend.clear();\n  };\n\n  fn.beforeUpdate = () => {\n    beforeUpdate({\n      settings,\n      data,\n    });\n  };\n\n  let currentTween;\n  fn.update = () => {\n    if (currentTween) {\n      currentTween.stop();\n    }\n    const nodes = (brushArgs.nodes = render.call(definitionContext, ...getRenderArgs()));\n\n    // Reset brush stylers and triggers\n    brushStylers.forEach((b) => b.cleanUp());\n    brushStylers.length = 0;\n    brushTriggers.tap = [];\n    brushTriggers.over = [];\n\n    if (settings.brush) {\n      addBrushStylers();\n      addBrushTriggers();\n    }\n\n    brushStylers.forEach((bs) => {\n      if (bs.isActive()) {\n        bs.update();\n      }\n    });\n\n    if (currentNodes && settings.animations && settings.animations.enabled) {\n      currentTween = tween(\n        {\n          old: currentNodes,\n          current: nodes,\n        },\n        { renderer: rend },\n        settings.animations\n      );\n      currentTween.start();\n    } else {\n      rend.render(nodes);\n    }\n    currentNodes = nodes;\n\n    if (rend.setKey && typeof config.key === 'string') {\n      rend.setKey(config.key);\n    }\n  };\n\n  fn.updated = updated;\n\n  fn.destroy = () => {\n    fn.unmount();\n    beforeDestroy(element);\n    rend.destroy();\n    destroyed();\n    element = null;\n  };\n\n  /**\n   * Update active nodes. For now this can be used as a way update and apply brushing on nodes.\n   * Ex: if a component have changed the nodes since its initial render.\n   * @param {Nodes[]} nodes\n   * @deprecated\n   * @ignore\n   */\n  const updateNodes = (nodes) => {\n    brushArgs.nodes = nodes;\n    brushStylers.forEach((bs) => {\n      if (bs.isActive()) {\n        bs.update();\n      }\n    });\n    rend.render(nodes);\n  };\n\n  // Set contexts, note that the definition and instance need different contexts (for example if they have different 'require' props)\n  prepareContext(definitionContext, definition, {\n    settings: () => settings,\n    data: () => data,\n    scale: () => scale,\n    formatter: () => formatter,\n    renderer: () => rend,\n    chart: () => chart,\n    dockConfig: () => dockConfig,\n    mediator: () => mediator,\n    instance: () => instanceContext,\n    rect: () => instanceContext.rect,\n    style: () => style,\n    update: () => updateNodes,\n    registries: () => registries,\n    resolver: () => resolver,\n    symbol: () => createSymbolFactory(registries.symbol),\n  });\n\n  /**\n   * Component instance\n   * @typedef {object} Component\n   * @property {string} type Type of component\n   * @property {string} key Key of the component\n   */\n  prepareContext(instanceContext, config, {\n    settings: () => settings,\n    data: () => data,\n    scale: () => scale,\n    formatter: () => formatter,\n    renderer: () => rend,\n    chart: () => chart,\n    dockConfig: () => dockConfig,\n    mediator: () => mediator,\n    style: () => style,\n    _DO_NOT_USE_getInfo: _DO_NOT_USE_getInfo.bind(definitionContext),\n    isVisible: () => isVisible,\n  });\n\n  fn.getBrushedShapes = function getBrushedShapes(brushCtx, mode, props) {\n    const shapes = [];\n    if (settings.brush && settings.brush.consume) {\n      const brusher = chart.brush(brushCtx);\n      const sceneNodes = rend.findShapes('*');\n      settings.brush.consume\n        .filter((t) => t.context === brushCtx)\n        .forEach((consume) => {\n          for (let i = 0; i < sceneNodes.length; i++) {\n            const node = sceneNodes[i];\n            if (node.data && brusher.containsMappedData(node.data, props || consume.data, mode)) {\n              appendComponentMeta(node);\n              shapes.push(node);\n              sceneNodes.splice(i, 1);\n              i--;\n            }\n          }\n        });\n    }\n    return shapes;\n  };\n\n  fn.findShapes = (selector) => {\n    const shapes = rend.findShapes(selector);\n    for (let i = 0, num = shapes.length; i < num; i++) {\n      appendComponentMeta(shapes[i]);\n    }\n\n    return shapes;\n  };\n\n  fn.shapesAt = (shape, opts = {}) => {\n    const items = rend.itemsAt(shape);\n    let shapes;\n\n    if (opts && opts.propagation === 'stop' && items.length > 0) {\n      shapes = [items.pop().node];\n    } else {\n      shapes = items.map((i) => i.node);\n    }\n\n    for (let i = 0, num = shapes.length; i < num; i++) {\n      appendComponentMeta(shapes[i]);\n    }\n\n    return shapes;\n  };\n\n  fn.brushFromShapes = (shapes, trigger = {}) => {\n    trigger.contexts = Array.isArray(trigger.contexts) ? trigger.contexts : [];\n    const action = trigger.action || 'toggle';\n\n    brushFromSceneNodes({\n      nodes: shapes,\n      action,\n      trigger,\n      chart,\n      data: brushArgs.data,\n    });\n  };\n\n  fn.mount = () => {\n    element = rend.element && rend.element() ? element : rend.appendTo(container);\n    if (rend.setKey && typeof config.key === 'string') {\n      rend.setKey(config.key);\n    }\n\n    if (settings.brush) {\n      addBrushStylers();\n      addBrushTriggers();\n    }\n\n    setUpEmitter(instanceContext, emitter, config);\n    setUpEmitter(definitionContext, emitter, definition);\n\n    isVisible = true;\n  };\n\n  fn.mounted = () => mounted(element);\n\n  fn.unmount = () => {\n    [instanceContext, definitionContext].forEach((ctx) => {\n      tearDownEmitter(ctx, emitter);\n    });\n    brushTriggers.tap = [];\n    brushTriggers.over = [];\n    brushStylers.forEach((bs) => {\n      bs.cleanUp();\n    });\n    brushStylers.length = 0;\n    beforeUnmount();\n\n    isVisible = false;\n  };\n\n  fn.onBrushTap = (e) => {\n    brushTriggers.tap.forEach((t) => {\n      if (resolveTapEvent({ e, t, config: brushArgs }) && t.globalPropagation === 'stop') {\n        chart.toggleBrushing(true);\n      }\n    });\n  };\n\n  fn.onBrushOver = (e) => {\n    brushTriggers.over.forEach((t) => {\n      if (resolveOverEvent({ e, t, config: brushArgs }) && t.globalPropagation === 'stop') {\n        chart.toggleBrushing(true);\n      }\n    });\n  };\n\n  /**\n   * Expose definition on instance\n   * @private\n   * @experimental\n   */\n  fn.def = definitionContext;\n\n  /**\n   * Expose instanceCtx on \"instance\"\n   * @private\n   * @experimental\n   */\n  fn.ctx = instanceContext;\n\n  fn.renderer = () => rend;\n\n  fn.set({ settings: config });\n  created();\n\n  return fn;\n}\n\nexport default componentFactory;\n","import EventEmitter from '../utils/event-emitter';\n\nexport default function mediator() {\n  const instance = {};\n  EventEmitter.mixin(instance);\n  return instance;\n}\n","import { add, sub, projectOnto, distance } from './vector';\n\nconst EPSILON = 1e-12;\n\nexport function closestPointToLine(start, end, p) {\n  const startToPoint = sub(p, start);\n  const startToEnd = sub(end, start);\n  const pointOnLine = add(projectOnto(startToPoint, startToEnd), start);\n  return pointOnLine;\n}\n\nexport function isPointOnLine(start, end, p) {\n  return distance(start, p) + distance(end, p) - distance(start, end) < EPSILON;\n}\n\nexport function isCollinear(p1, p2, p3, e = EPSILON) {\n  const t = Math.abs(p1.x * (p2.y - p3.y) + p2.x * (p3.y - p1.y) + p3.x * (p1.y - p2.y));\n  return t < e;\n}\n\n/**\n * Check if rectangle a is located inside rectangle b or if they are the same rectangle.\n * @param {Rect} a - An rect containing (x,y) coordinates, width and height. The origin is assumed to be top left.\n * @param {Rect} b - An rect containing (x,y) coordinates, width and height. The origin is assumed to be top left.\n * @ignore\n */\nexport function rectContainsRect(a, b) {\n  return a.x >= b.x && a.x + a.width <= b.x + b.width && a.y >= b.y && a.y + a.height <= b.y + b.height;\n}\n","/* eslint no-use-before-define: [\"error\", { \"functions\": false }] */\n\nimport { sqrDistance, distanceX, distanceY } from './vector';\nimport { closestPointToLine, isPointOnLine } from './intersection';\nimport { lineToPoints, rectToPoints, pointsToLine } from '../geometry/util';\n\nfunction lineHasNoLength(line) {\n  return line.x1 === line.x2 && line.y1 === line.y2;\n}\n\nfunction rectHasNoSize(rect) {\n  return rect.width <= 0 || rect.height <= 0;\n}\n\nfunction circleHasNoSize(circle) {\n  return circle.r <= 0;\n}\n\nfunction toFewEdges(polygon) {\n  return polygon.edges.length <= 2;\n}\n\n// Only when the polygon1's bounds is not inside the polygon2's bounds\nfunction testPolygonPolygonSubCase(polygon1, polygon2) {\n  let intersects = false;\n  for (let i = 0, len = polygon2.edges.length; i < len; i++) {\n    intersects = testPolygonLine(polygon1, pointsToLine(polygon2.edges[i]));\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Only when the geopolygon's bounds is not inside the polygon's bounds\nfunction testGeoPolygonPolygonCase1(geopolygon, polygon) {\n  let intersects = false;\n  for (let i = 0, len = polygon.edges.length; i < len; i++) {\n    intersects = testGeoPolygonLine(geopolygon, pointsToLine(polygon.edges[i]));\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Only when the geopolygon's bounds is inside the polygon's bounds\nfunction testGeoPolygonPolygonCase2(geopolygon, polygon) {\n  let intersects = false;\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    intersects = testPolygonPolygon(polygon, polygons[n]);\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Only when the geopolygon1's bounds is not inside the geopolygon2's bounds\nfunction testGeoPolygonGeoPolygonSubCase(geopolygon1, geopolygon2) {\n  let intersects = false;\n  const { numPolygons, polygons } = geopolygon2;\n  for (let n = 0; n < numPolygons; n++) {\n    let polygon = polygons[n];\n    intersects = testGeoPolygonPolygon(geopolygon1, polygon);\n    if (intersects === true) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a Circle contains a point. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if circle contains point\n */\nexport function testCirclePoint(circle, point) {\n  if (circleHasNoSize(circle)) {\n    return false;\n  }\n\n  const center = { x: circle.cx, y: circle.cy };\n  const sqrDist = sqrDistance(center, point);\n\n  if (sqrDist <= Math.pow(circle.r, 2)) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Test if a Circle collide with a rectangle. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * Rectangle must have a width and height greather then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if circle collide with rectangle\n */\nexport function testCircleRect(circle, rect) {\n  if (rectHasNoSize(rect) || circleHasNoSize(circle)) {\n    return false;\n  }\n  const rX = rect.width / 2;\n  const rY = rect.height / 2;\n  const rcX = rect.x + rX;\n  const rcY = rect.y + rY;\n  const r = circle.r;\n  const cx = circle.cx;\n  const cy = circle.cy;\n  const dX = Math.abs(cx - rcX);\n  const dY = Math.abs(cy - rcY);\n\n  if (dX > rX + r || dY > rY + r) {\n    return false;\n  }\n\n  if (dX <= rX || dY <= rY) {\n    return true;\n  }\n\n  const sqrDist = Math.pow(dX - rX, 2) + Math.pow(dY - rY, 2);\n\n  return sqrDist <= Math.pow(r, 2);\n}\n\n/**\n * Test if a Circle collide with a line segment. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * Line must have a length greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if circle collide with line\n */\nexport function testCircleLine(circle, line) {\n  if (circleHasNoSize(circle) || lineHasNoLength(line)) {\n    return false;\n  }\n\n  const [p1, p2] = lineToPoints(line);\n  if (testCirclePoint(circle, p1) || testCirclePoint(circle, p2)) {\n    return true;\n  }\n\n  const center = { x: circle.cx, y: circle.cy };\n  const pointOnLine = closestPointToLine(p1, p2, center);\n  const dist = sqrDistance(pointOnLine, center);\n\n  return dist <= Math.pow(circle.r, 2) && isPointOnLine(p1, p2, pointOnLine);\n}\n\n/**\n * Test if a Circle collide with another Circle. If so, returns true and false otherwise.\n * Both circles muse have a radius greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @return {boolean} true if circle collide with circle\n */\nexport function testCircleCircle(circle1, circle2) {\n  if (circleHasNoSize(circle1) || circleHasNoSize(circle2)) {\n    return false;\n  }\n\n  const dx = circle1.cx - circle2.cx;\n  const dy = circle1.cy - circle2.cy;\n  const sqrDist = Math.pow(dx, 2) + Math.pow(dy, 2);\n\n  if (sqrDist <= Math.pow(circle1.r + circle2.r, 2)) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Test if a Circle collide with Polygon. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * Polygon must contain at least 2 vertices\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @return {boolean} true if circle collide with polygon\n */\nexport function testCirclePolygon(circle, polygon) {\n  // TODO handle polygon that is a straight line, current impl will interrept it is a true, if radius is extended onto any of the edges\n  if (toFewEdges(polygon) || circleHasNoSize(circle)) {\n    return false;\n  }\n\n  const center = { x: circle.cx, y: circle.cy };\n  if (testPolygonPoint(polygon, center)) {\n    return true;\n  }\n\n  const num = polygon.edges.length;\n\n  for (let i = 0; i < num; i++) {\n    const edge = pointsToLine(polygon.edges[i]);\n    if (testCircleLine(circle, edge)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Test if a Polygon contains a Point. If so, returns true and false otherwise.\n * Polygon must contain at least 2 vertices\n * @private\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if polygon conatins point\n */\nexport function testPolygonPoint(polygon, point) {\n  // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n  if (toFewEdges(polygon) || !testRectPoint(polygon.boundingRect(), point)) {\n    return false;\n  }\n  const { x, y } = point;\n  const vertices = polygon.vertices;\n  let inside;\n  let l;\n  let j;\n  let i;\n  let tx;\n  for (inside = false, i = -1, l = vertices.length, j = l - 1; ++i < l; j = i) {\n    if (vertices[i].x === x && vertices[i].y === y) {\n      // polygon vertice\n      return true;\n    }\n    if (vertices[i].y === vertices[j].y && vertices[i].y === y && (x - vertices[i].x) * (x - vertices[j].x) <= 0) {\n      // on horizontal edge of polygon\n      return true;\n    }\n    if ((vertices[i].y < y && y <= vertices[j].y) || (vertices[j].y < y && y <= vertices[i].y)) {\n      tx = ((vertices[j].x - vertices[i].x) * (y - vertices[i].y)) / (vertices[j].y - vertices[i].y) + vertices[i].x;\n      if (x === tx) {\n        // on polygon edge\n        return true;\n      }\n      if (x < tx) {\n        inside = !inside;\n      }\n    }\n  }\n  return inside;\n}\n\n/**\n * Test if a Polygon collider with a line. If so, returns true and false otherwise.\n * Polygon must contain at least 3 edges.\n * Line must have length greater then 0.\n * @private\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if polygon collider with line\n */\nexport function testPolygonLine(polygon, line) {\n  // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n  if (toFewEdges(polygon)) {\n    return false;\n  }\n\n  for (let i = 0, num = polygon.edges.length; i < num; i++) {\n    const edge = pointsToLine(polygon.edges[i]);\n    if (testLineLine(line, edge)) {\n      return true;\n    }\n  }\n\n  const [p1, p2] = lineToPoints(line);\n\n  return testPolygonPoint(polygon, p1) || testPolygonPoint(polygon, p2);\n}\n\n/**\n * Test if a Polygon collider with a rectangle. If so, returns true and false otherwise.\n * Polygon must contain at least 3 edges.\n * Rectangle must width and height greater then 0.\n * @private\n * @param {object} polygon\n * @param {Array} polygon.vertices - Array of vertices\n * @param {object} polygon.vertices.vertex\n * @param {number} polygon.vertices.vertex.x - x-coordinate\n * @param {number} polygon.vertices.vertex.y - y-coordinate\n * @param {Array} polygon.edges - Array of edges\n * @param {Array} polygon.edges.edge - Array of points\n * @param {object} polygon.edges.edge.point\n * @param {number} polygon.edges.edge.point.x - x-coordinate\n * @param {number} polygon.edges.edge.point.y - y-coordinate\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if polygon collider with rect\n */\nexport function testPolygonRect(polygon, rect) {\n  // TODO handle polygon that is a straight line, current impl gives a non-deterministic output, that is depending on number of vertices\n  if (toFewEdges(polygon)) {\n    return false;\n  }\n\n  for (let i = 0, num = polygon.edges.length; i < num; i++) {\n    const edge = pointsToLine(polygon.edges[i]);\n    if (testRectLine(rect, edge)) {\n      return true;\n    }\n  }\n\n  const [p1, p2, p3, p4] = rectToPoints(rect);\n  return (\n    testPolygonPoint(polygon, p1) ||\n    testPolygonPoint(polygon, p2) ||\n    testPolygonPoint(polygon, p3) ||\n    testPolygonPoint(polygon, p4)\n  );\n}\n\n/**\n * Test if a Rectangle collide with another rectangle. If so, returns true and false otherwise.\n * Both rectangles must have a width and height greather then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if rectangle collide with rectangle\n */\nexport function testRectRect(rect1, rect2) {\n  if (rectHasNoSize(rect1) || rectHasNoSize(rect2)) {\n    return false;\n  }\n\n  return (\n    rect1.x <= rect2.x + rect2.width &&\n    rect2.x <= rect1.x + rect1.width &&\n    rect1.y <= rect2.y + rect2.height &&\n    rect2.y <= rect1.y + rect1.height\n  );\n}\n\n/**\n * Test if a rectangle contains  another rectangle. If so, returns true and false otherwise.\n * Both rectangles must have a width and height greather then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if rectangle collide with rectangle\n */\nexport function testRectContainsRect(rect1, rect2) {\n  if (rectHasNoSize(rect1) || rectHasNoSize(rect2)) {\n    return false;\n  }\n  const points = [\n    { x: rect2.x, y: rect2.y },\n    { x: rect2.x + rect2.width, y: rect2.y },\n    { x: rect2.x + rect2.width, y: rect2.y + rect2.height },\n    { x: rect2.x, y: rect2.y + rect2.height },\n  ];\n  return points.every((p) => testRectPoint(rect1, p));\n}\n\n/**\n * Test if a Rectangle contains a Point. If so, returns true and false otherwise.\n * Rectangle must have a width and height greather then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if rectangle contains point\n */\nexport function testRectPoint(rect, point) {\n  if (rectHasNoSize(rect)) {\n    return false;\n  }\n\n  return point.x >= rect.x && point.x <= rect.x + rect.width && point.y >= rect.y && point.y <= rect.y + rect.height;\n}\n\n/**\n * Test if a Rectangle collider with a line. If so, returns true and false otherwise.\n * Rectangle must have a width and height greather then 0.\n * Line must have length greater then 0.\n * @private\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if rectangle collide with line\n */\nexport function testRectLine(rect, line) {\n  if (lineHasNoLength(line) || rectHasNoSize(rect)) {\n    return false;\n  }\n\n  const [p1, p2] = lineToPoints(line);\n\n  if (testRectPoint(rect, p1) || testRectPoint(rect, p2)) {\n    return true;\n  }\n\n  const rectEdges = rectToPoints(rect);\n  let num = rectEdges.length;\n  for (let i = 0; i < num; i++) {\n    const edge = pointsToLine([rectEdges[i], rectEdges[i !== 3 ? i + 1 : 0]]);\n    if (testLineLine(edge, line)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a Line collider with another line. If so, returns true and false otherwise.\n * Both lines must have length greater then 0.\n * @private\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if line collide with line\n */\nexport function testLineLine(line1, line2) {\n  const [p1, p2] = lineToPoints(line1);\n  const [p3, p4] = lineToPoints(line2);\n  const dx1 = distanceX(p2, p1);\n  const dy1 = distanceY(p2, p1);\n  const dx2 = distanceX(p4, p3);\n  const dy2 = distanceY(p4, p3);\n  const dx3 = distanceX(p1, p3);\n  const dy3 = distanceY(p1, p3);\n  let ub = dy2 * dx1 - dx2 * dy1;\n  const uat = dx2 * dy3 - dy2 * dx3;\n  const ubt = dx1 * dy3 - dy1 * dx3;\n  let t1;\n  let t2;\n\n  if (dx1 === 0 && dy1 === 0) {\n    // Line segment has no length\n    return false;\n  }\n\n  if (dx2 === 0 && dy2 === 0) {\n    // Line segment has no length\n    return false;\n  }\n\n  if (ub === 0) {\n    if (uat === 0 && ubt === 0) {\n      // COINCIDENT;\n      if (dx1 === 0) {\n        if (dy1 === 0) {\n          // p1 = p2\n          return p1.x === p2.x && p1.y === p2.y;\n        }\n        t1 = distanceY(p3, p1) / dy1;\n        t2 = distanceY(p4, p1) / dy1;\n      } else {\n        t1 = (p3.x - p1.x) / dx1;\n        t2 = (p4.x - p1.x) / dx1;\n      }\n      if ((t1 < 0 && t2 < 0) || (t1 > 1 && t2 > 1)) {\n        return false;\n      }\n      return true;\n    }\n    return false; // PARALLEL;\n  }\n  const ua = uat / ub;\n  ub = ubt / ub;\n  if (ua >= 0.0 && ua <= 1.0 && ub >= 0.0 && ub <= 1.0) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Test if a Line contains a Point. If so, returns true and false otherwise.\n * Line must have length greater then 0.\n * @private\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if line contains point\n */\nexport function testLinePoint(line, point) {\n  if (lineHasNoLength(line)) {\n    return false;\n  }\n\n  const [p1, p2] = lineToPoints(line);\n  return isPointOnLine(p1, p2, point);\n}\n\n/**\n * Test if a polygon intersects another polygon.\n * Supports convex, concave and self-intersecting polygons (filled area).\n * @private\n * @param {object} polygon\n * @param {object} polygon\n * @returns {boolean} True if there is an intersection, false otherwise\n */\nexport function testPolygonPolygon(polygon1, polygon2) {\n  const rect1 = polygon1.boundingRect();\n  const rect2 = polygon2.boundingRect();\n  if (!testRectRect(rect1, rect2)) {\n    return false;\n  }\n  if (testRectContainsRect(rect1, rect2)) {\n    return testPolygonPolygonSubCase(polygon1, polygon2);\n  }\n  return testPolygonPolygonSubCase(polygon2, polygon1);\n}\n\n/**\n * Test if a geopolygon intersects a polygon.\n * @private\n * @param {object} geopolygon\n * @param {object} polygon\n * @returns {boolean} True if there is an intersection, false otherwise\n */\nexport function testGeoPolygonPolygon(geopolygon, polygon) {\n  const rect1 = geopolygon.boundingRect();\n  const rect2 = polygon.boundingRect();\n  if (!testRectRect(rect1, rect2)) {\n    return false;\n  }\n  if (testRectContainsRect(rect2, rect1)) {\n    return testGeoPolygonPolygonCase2(geopolygon, polygon);\n  }\n  return testGeoPolygonPolygonCase1(geopolygon, polygon);\n}\n\n/**\n * Test if a geopolygon intersects another geopolygon.\n * @private\n * @param {object} geopolygon\n * @param {object} geopolygon\n * @returns {boolean} True if there is an intersection, false otherwise\n */\nexport function testGeoPolygonGeoPolygon(geopolygon1, geopolygon2) {\n  const rect1 = geopolygon1.boundingRect();\n  const rect2 = geopolygon2.boundingRect();\n  if (!testRectRect(rect1, rect2)) {\n    return false;\n  }\n  if (testRectContainsRect(rect2, rect1)) {\n    return testGeoPolygonGeoPolygonSubCase(geopolygon2, geopolygon1);\n  }\n  return testGeoPolygonGeoPolygonSubCase(geopolygon1, geopolygon2);\n}\n\n/**\n * Test if a Circle collide with GeoPolygon. If so, returns true and false otherwise.\n * Circle muse have a radius greater then 0.\n * @private\n * @param {object} circle\n * @param {number} circle.cx - center x-coordinate\n * @param {number} circle.cy - center y-coordinate\n * @param {number} circle.r - circle radius\n * @param {object} geopolygon\n * @param {Array} geopolygon.polygons - Array of polygons\n * @return {boolean} true if circle collide with polygon\n */\nexport function testCircleGeoPolygon(circle, geopolygon) {\n  if (circleHasNoSize(circle)) {\n    return false;\n  }\n  const center = { x: circle.cx, y: circle.cy };\n  if (testGeoPolygonPoint(geopolygon, center)) {\n    return true;\n  }\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    const polygon = polygons[n];\n    const num = polygon.edges.length;\n    for (let i = 0; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (testCircleLine(circle, edge)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a GeoPolygon contains a Point. If so, returns true and false otherwise.\n * @private\n * @param {object} geopolygon\n * @param {Array} geopolygon.vertices - Array of of arrays of vertices\n * @param {object} point\n * @param {number} point.x - x-coordinate\n * @param {number} point.y - y-coordinate\n * @return {boolean} true if polygon conatins point\n */\nexport function testGeoPolygonPoint(geopolygon, point) {\n  if (!testRectPoint(geopolygon.boundingRect(), point)) {\n    return false;\n  }\n  const { x, y } = point;\n  const numPolygons = geopolygon.numPolygons;\n  let inside = false;\n  let vertices;\n  let n;\n  let l;\n  let j;\n  let i;\n  let tx;\n  for (n = 0; n < numPolygons; n++) {\n    vertices = geopolygon.vertices[n];\n    for (i = -1, l = vertices.length, j = l - 1; ++i < l; j = i) {\n      if (vertices[i].x === x && vertices[i].y === y) {\n        // polygon vertice\n        return true;\n      }\n      if (vertices[i].y === vertices[j].y && vertices[i].y === y && (x - vertices[i].x) * (x - vertices[j].x) <= 0) {\n        // on horizontal edge of polygon\n        return true;\n      }\n      if ((vertices[i].y < y && y <= vertices[j].y) || (vertices[j].y < y && y <= vertices[i].y)) {\n        tx = ((vertices[j].x - vertices[i].x) * (y - vertices[i].y)) / (vertices[j].y - vertices[i].y) + vertices[i].x;\n        if (x === tx) {\n          // on polygon edge\n          return true;\n        }\n        if (x < tx) {\n          inside = !inside;\n        }\n      }\n    }\n  }\n  return inside;\n}\n\n/**\n * Test if a GeoPolygon collider with a line. If so, returns true and false otherwise.\n * Line must have length greater then 0.\n * @private\n * @param {object} geopolygon\n * @param {Array} geopolygon.polygons - Array of polygons\n * @param {object} line\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @param {number} line.x1 - x-coordinate\n * @param {number} line.y1 - y-coordinate\n * @return {boolean} true if polygon collider with line\n */\nexport function testGeoPolygonLine(geopolygon, line) {\n  const [p1, p2] = lineToPoints(line);\n  if (testGeoPolygonPoint(geopolygon, p1) || testGeoPolygonPoint(geopolygon, p2)) {\n    return true;\n  }\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    const polygon = polygons[n];\n    for (let i = 0, num = polygon.edges.length; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (testLineLine(line, edge)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Test if a GeoPolygon collider with a rectangle. If so, returns true and false otherwise.\n * Rectangle must have width and height greater than 0.\n * @private\n * @param {object} geopolygon\n * @param {Array} geopolygon.polygons - Array of polygons\n * @param {object} rect\n * @param {number} rect.x - x-coordinate\n * @param {number} rect.y - y-coordinate\n * @param {number} rect.width - width\n * @param {number} rect.height - height\n * @return {boolean} true if polygon collider with rect\n */\nexport function testGeoPolygonRect(geopolygon, rect) {\n  const [p1, p2, p3, p4] = rectToPoints(rect);\n  if (\n    testGeoPolygonPoint(geopolygon, p1) ||\n    testGeoPolygonPoint(geopolygon, p2) ||\n    testGeoPolygonPoint(geopolygon, p3) ||\n    testGeoPolygonPoint(geopolygon, p4)\n  ) {\n    return true;\n  }\n  const { numPolygons, polygons } = geopolygon;\n  for (let n = 0; n < numPolygons; n++) {\n    const polygon = polygons[n];\n    for (let i = 0, num = polygon.edges.length; i < num; i++) {\n      const edge = pointsToLine(polygon.edges[i]);\n      if (testRectLine(rect, edge)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n","import extend from 'extend';\n\nconst VARIABLE_RX = /^\\$/;\nconst EXTEND = '@extend';\n\nfunction throwCyclical(s) {\n  throw new Error(`Cyclical reference for \"${s}\"`);\n}\n\nfunction res(style, references, path) {\n  if (typeof style === 'string') {\n    let value = references[style];\n    if (path.indexOf(style) !== -1) {\n      throwCyclical(style);\n    }\n    if (VARIABLE_RX.test(value)) {\n      path.push(style);\n      return res(value, references, path);\n    }\n    return value;\n  }\n  let computed = style;\n  const refs = extend(true, {}, references, style);\n  const s = {};\n\n  if (style[EXTEND]) {\n    const extendFrom = style[EXTEND];\n    if (path.indexOf(extendFrom) !== -1) {\n      throwCyclical(extendFrom);\n    }\n    let pext = path.slice();\n    pext.push(extendFrom);\n    computed = extend(true, {}, res(refs[extendFrom], references, pext), style);\n  }\n\n  Object.keys(computed).forEach((key) => {\n    let p = path.slice();\n    if (key === EXTEND || VARIABLE_RX.test(key)) {\n      return;\n    }\n    s[key] = computed[key];\n    let value = s[key];\n    if (VARIABLE_RX.test(value) && value in refs) {\n      if (path.indexOf(value) !== -1) {\n        throwCyclical(value);\n      }\n      p.push(value);\n      value = refs[value];\n      if (typeof value === 'object') {\n        s[key] = res(value, refs, p);\n      } else if (VARIABLE_RX.test(value) && value in refs) {\n        s[key] = res(value, refs, p);\n      } else {\n        s[key] = value;\n      }\n    } else if (typeof value === 'object') {\n      s[key] = res(value, refs, p);\n    }\n  });\n  return s;\n}\n\n/**\n * Resolve style references\n * @private\n * @param {style-object} style\n * @param {style-object} references\n * @returns {object} The resolved style\n * @example\n * resolve({\n *   label: '$label--big'\n * }, {\n *   '$size--m': '12px',\n *   '$label--big': {\n *     fontFamily: 'Arial',\n *     fontSize: '$size--m'\n *   }\n * }); // { label: { fontFamily: 'Arial', fontSize: '12px' } }\n */\nfunction resolve(style, references) {\n  return res(style, references, []);\n}\n\nexport { resolve as default };\n","import extend from 'extend';\nimport styleResolver from '../style/resolver';\n\nfunction themeFn(style = {}, palettes = []) {\n  let pals = {};\n  let internalStyle = style;\n  const setPalettes = (p) => {\n    p.forEach((palette) => {\n      const pal = Array.isArray(palette.colors[0]) ? palette.colors : [palette.colors];\n      pals[palette.key] = {\n        colors: pal,\n        sizes: pal.map((colors) => (colors ? colors.length : 0)),\n      };\n    });\n  };\n\n  const getPalette = (key, num) => {\n    const palette = pals[key];\n    if (!palette) {\n      return [];\n    }\n    const sizes = palette.sizes;\n    // find the first color set containing at least 'num' colors\n    for (let i = 0; i < sizes.length; i++) {\n      if (num <= sizes[i]) {\n        return palette.colors[i];\n      }\n    }\n    return palette.colors[sizes.length - 1];\n  };\n\n  /**\n   * Theme API\n   * @private\n   * @experimental\n   */\n  const theme = {\n    /**\n     * Get an array of colors\n     * @param {string} name - Name of the color palette\n     * @param {number} [num] - The minimum number of colors to get from the palette\n     */\n    palette: (name, num) => getPalette(name, num),\n\n    setPalettes,\n\n    /**\n     * Resolve style references\n     * @param {style-object} s - Object containing style\n     */\n    style: (s) => styleResolver(s, internalStyle),\n\n    /**\n     * Set custom style\n     * @param {style-object} s - Object containing style\n     */\n    setStyle: (s) => {\n      internalStyle = extend({}, style, s);\n    },\n  };\n\n  setPalettes(palettes);\n\n  return theme;\n}\n\nexport { themeFn as default };\n","import extend from 'extend';\n\nfunction roundRect(rect) {\n  rect.x = Math.floor(rect.x);\n  rect.y = Math.floor(rect.y);\n  rect.width = Math.floor(rect.width);\n  rect.height = Math.floor(rect.height);\n}\n\nexport function resolveContainerRects(rect, settings) {\n  const containerRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n  const logicalContainerRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n\n  // Check input object for size\n  containerRect.width = rect.width || 0;\n  containerRect.height = rect.height || 0;\n  if (typeof settings.size !== 'undefined') {\n    containerRect.width = isNaN(settings.size.width) ? containerRect.width : settings.size.width;\n    containerRect.height = isNaN(settings.size.height) ? containerRect.height : settings.size.height;\n  }\n\n  if (typeof settings.logicalSize !== 'undefined') {\n    logicalContainerRect.width = isNaN(settings.logicalSize.width) ? containerRect.width : settings.logicalSize.width;\n    logicalContainerRect.height = isNaN(settings.logicalSize.height)\n      ? containerRect.height\n      : settings.logicalSize.height;\n    logicalContainerRect.align = isNaN(settings.logicalSize.align)\n      ? 0.5\n      : Math.min(Math.max(settings.logicalSize.align, 0), 1);\n    logicalContainerRect.preserveAspectRatio = settings.logicalSize.preserveAspectRatio;\n  } else {\n    logicalContainerRect.width = containerRect.width;\n    logicalContainerRect.height = containerRect.height;\n    logicalContainerRect.preserveAspectRatio = false;\n  }\n\n  roundRect(logicalContainerRect);\n  roundRect(containerRect);\n\n  return { logicalContainerRect, containerRect };\n}\n\nexport function resolveSettings(s) {\n  const settings = {\n    center: {\n      minWidthRatio: 0.5,\n      minHeightRatio: 0.5,\n      minWidth: 0,\n      minHeight: 0,\n    },\n  };\n\n  extend(true, settings, s);\n\n  settings.center.minWidthRatio = Math.min(Math.max(settings.center.minWidthRatio, 0), 1); // Only accept value between 0-1\n  settings.center.minHeightRatio = Math.min(Math.max(settings.center.minHeightRatio, 0), 1); // Only accept value between 0-1\n  settings.center.minWidth = Math.max(settings.center.minWidth, 0); // Consider <= 0 to be falsy and fallback to ratio\n  settings.center.minHeight = Math.max(settings.center.minHeight, 0); // Consider <= 0 to be falsy and fallback to ratio\n\n  return settings;\n}\n","export default function createRect(x, y, width, height, margin) {\n  return {\n    x: isNaN(x) ? 0 : x,\n    y: isNaN(x) ? 0 : y,\n    width: isNaN(x) ? 0 : width,\n    height: isNaN(x) ? 0 : height,\n    margin: isNaN(margin) ? 0 : margin,\n  };\n}\n","import extend from 'extend';\nimport { resolveContainerRects, resolveSettings } from './settings-resolver';\nimport { rectToPoints, pointsToRect } from '../../geometry/util';\nimport createRect from './create-rect';\n\nfunction cacheSize(c, reducedRect, layoutRect) {\n  if (typeof c.cachedSize === 'undefined') {\n    const dock = c.config.dock();\n    let size = c.comp.preferredSize({ inner: reducedRect, outer: layoutRect, dock });\n    // backwards compatibility\n    if (!isNaN(size)) {\n      size = { width: size, height: size };\n    } else if (size && !isNaN(size.size)) {\n      size.width = size.size;\n      size.height = size.size;\n    }\n\n    let relevantSize;\n    if (dock === 'top' || dock === 'bottom') {\n      relevantSize = size.height;\n    } else if (dock === 'right' || dock === 'left') {\n      relevantSize = size.width;\n    } else {\n      relevantSize = Math.max(size.width, size.height);\n    }\n    c.cachedSize = Math.ceil(relevantSize);\n    c.edgeBleed = size.edgeBleed || 0;\n  }\n  return c.cachedSize;\n}\n\nfunction validateReduceRect(rect, reducedRect, settings) {\n  // Absolute value for width/height should have predence over relative value\n  const minReduceWidth =\n    Math.min(settings.center.minWidth, rect.width) || Math.max(rect.width * settings.center.minWidthRatio, 1);\n  const minReduceHeight =\n    Math.min(settings.center.minHeight, rect.height) || Math.max(rect.height * settings.center.minHeightRatio, 1);\n  return reducedRect.width >= minReduceWidth && reducedRect.height >= minReduceHeight;\n}\n\nfunction reduceDocRect(reducedRect, c) {\n  switch (c.config.dock()) {\n    case 'top':\n      reducedRect.y += c.cachedSize;\n      reducedRect.height -= c.cachedSize;\n      break;\n    case 'bottom':\n      reducedRect.height -= c.cachedSize;\n      break;\n    case 'left':\n      reducedRect.x += c.cachedSize;\n      reducedRect.width -= c.cachedSize;\n      break;\n    case 'right':\n      reducedRect.width -= c.cachedSize;\n      break;\n    default:\n  }\n}\n\nfunction addEdgeBleed(currentEdgeBleed, c) {\n  const edgeBleed = c.edgeBleed;\n  if (!edgeBleed) {\n    return;\n  }\n  currentEdgeBleed.left = Math.max(currentEdgeBleed.left, edgeBleed.left || 0);\n  currentEdgeBleed.right = Math.max(currentEdgeBleed.right, edgeBleed.right || 0);\n  currentEdgeBleed.top = Math.max(currentEdgeBleed.top, edgeBleed.top || 0);\n  currentEdgeBleed.bottom = Math.max(currentEdgeBleed.bottom, edgeBleed.bottom || 0);\n}\n\nfunction reduceEdgeBleed(layoutRect, reducedRect, edgeBleed) {\n  if (reducedRect.x < edgeBleed.left) {\n    reducedRect.width -= edgeBleed.left - reducedRect.x;\n    reducedRect.x = edgeBleed.left;\n  }\n  const reducedRectRightBoundary = layoutRect.width - (reducedRect.x + reducedRect.width);\n  if (reducedRectRightBoundary < edgeBleed.right) {\n    reducedRect.width -= edgeBleed.right - reducedRectRightBoundary;\n  }\n  if (reducedRect.y < edgeBleed.top) {\n    reducedRect.height -= edgeBleed.top - reducedRect.y;\n    reducedRect.y = edgeBleed.top;\n  }\n  const reducedRectBottomBoundary = layoutRect.height - (reducedRect.y + reducedRect.height);\n  if (reducedRectBottomBoundary < edgeBleed.bottom) {\n    reducedRect.height -= edgeBleed.bottom - reducedRectBottomBoundary;\n  }\n}\n\nfunction reduceSingleLayoutRect(layoutRect, reducedRect, edgeBleed, c, settings) {\n  const newReduceRect = extend({}, reducedRect);\n  const newEdgeBleed = extend({}, edgeBleed);\n  reduceDocRect(newReduceRect, c);\n  addEdgeBleed(newEdgeBleed, c);\n  reduceEdgeBleed(layoutRect, newReduceRect, newEdgeBleed);\n\n  const isValid = validateReduceRect(layoutRect, newReduceRect, settings);\n  if (!isValid) {\n    return false;\n  }\n\n  reduceDocRect(reducedRect, c);\n  addEdgeBleed(edgeBleed, c);\n  return true;\n}\n\n/**\n * Updates the visible and hidden components based on components that are docked to other components.\n * For example, assume a component called myRect:\n * {\n *  key: 'myRect',\n *  type: 'rect',\n *  dock: 'bottom'\n * }\n * and a component called myLine:\n * {\n *  key: 'myLine',\n *  type: 'line',\n *  dock: '@myRect'\n * }\n * if the layout engine decides to hide myRect, then myLine should be hidden as well.\n * @param {Array} visible - Components to be decided if they should be hidden or not.\n * @param {Array} hidden - Components that are already hidden.\n * @returns {Object} containing the new visible components and additional components to be hidden.\n * @ignore\n */\nfunction filterReferencedDocks(visible, hidden) {\n  if (hidden.length === 0) {\n    return;\n  }\n\n  for (let i = 0; i < visible.length; ++i) {\n    let v = visible[i];\n    if (v.referencedDocks.length) {\n      const isAllHidden = v.referencedDocks.every((refDock) => hidden.some((h) => h.key === refDock));\n      if (isAllHidden) {\n        hidden.push(visible.splice(i, 1)[0]);\n      }\n    }\n  }\n}\n\nfunction reduceLayoutRect({ layoutRect, visible, hidden, settings }) {\n  const reducedRect = createRect(layoutRect.x, layoutRect.y, layoutRect.width, layoutRect.height);\n  const edgeBleed = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n  };\n\n  const sortedComponents = visible.slice();\n  sortedComponents.sort((a, b) => a.config.prioOrder() - b.config.prioOrder()); // lower prioOrder will have higher prio\n\n  for (let i = 0; i < sortedComponents.length; ++i) {\n    const c = sortedComponents[i];\n    cacheSize(c, reducedRect, layoutRect);\n\n    if (!reduceSingleLayoutRect(layoutRect, reducedRect, edgeBleed, c, settings)) {\n      hidden.push(sortedComponents.splice(i, 1)[0]);\n      --i;\n    }\n  }\n\n  filterReferencedDocks(visible, hidden);\n\n  const filteredUnsortedComps = visible.filter((c) => sortedComponents.indexOf(c) !== -1);\n  visible.length = 0;\n  visible.push(...filteredUnsortedComps);\n  reduceEdgeBleed(layoutRect, reducedRect, edgeBleed);\n  return reducedRect;\n}\n\nfunction computeRect(rect) {\n  return {\n    x: rect.margin.left + rect.x * rect.scaleRatio.x,\n    y: rect.margin.top + rect.y * rect.scaleRatio.y,\n    width: rect.width * rect.scaleRatio.x,\n    height: rect.height * rect.scaleRatio.y,\n  };\n}\n\nfunction appendScaleRatio(rect, outerRect, layoutRect, containerRect) {\n  const scaleRatio = {\n    x: containerRect.width / layoutRect.width,\n    y: containerRect.height / layoutRect.height,\n  };\n  const margin = {\n    left: 0,\n    top: 0,\n  };\n\n  if (layoutRect.preserveAspectRatio) {\n    const xLessThenY = scaleRatio.x < scaleRatio.y;\n    // To preserve the aspect ratio, take the smallest ratio and apply in both directions to \"meet\" the size of the container\n    const minRatio = Math.min(scaleRatio.x, scaleRatio.y);\n    scaleRatio.x = minRatio;\n    scaleRatio.y = minRatio;\n    const area = xLessThenY ? 'height' : 'width';\n    const spread = (containerRect[area] - layoutRect[area] * scaleRatio.x) * layoutRect.align;\n    margin.left = xLessThenY ? 0 : spread;\n    margin.top = xLessThenY ? spread : 0;\n  }\n\n  rect.scaleRatio = scaleRatio;\n  rect.margin = margin;\n  outerRect.scaleRatio = scaleRatio;\n  outerRect.margin = margin;\n  layoutRect.scaleRatio = scaleRatio;\n  layoutRect.margin = margin;\n}\n\nfunction boundingBox(rects) {\n  const points = [].concat(...rects.map(rectToPoints));\n  return pointsToRect(points);\n}\n\nfunction positionComponents({ visible, layoutRect, reducedRect, containerRect, translation }) {\n  const vRect = createRect(reducedRect.x, reducedRect.y, reducedRect.width, reducedRect.height);\n  const hRect = createRect(reducedRect.x, reducedRect.y, reducedRect.width, reducedRect.height);\n\n  const referencedComponents = {};\n  const referenceArray = visible.slice();\n  const elementOrder = referenceArray.slice().sort((a, b) => a.config.displayOrder() - b.config.displayOrder());\n  visible\n    .sort((a, b) => {\n      if (b.referencedDocks.length > 0) {\n        return -1;\n      }\n      if (a.referencedDocks.length > 0) {\n        return 1;\n      }\n      const diff = a.config.displayOrder() - b.config.displayOrder();\n      if (diff === 0) {\n        return referenceArray.indexOf(a) - referenceArray.indexOf(b);\n      }\n      return diff;\n    })\n    .forEach((c) => {\n      let outerRect = {};\n      let rect = {};\n      const d = c.config.dock();\n      switch (d) {\n        case 'top':\n          outerRect.height = rect.height = c.cachedSize;\n          outerRect.width = layoutRect.width;\n          rect.width = vRect.width;\n          outerRect.x = layoutRect.x;\n          rect.x = vRect.x;\n          outerRect.y = rect.y = vRect.y - c.cachedSize;\n\n          vRect.y -= c.cachedSize;\n          vRect.height += c.cachedSize;\n          break;\n        case 'bottom':\n          outerRect.x = layoutRect.x;\n          rect.x = vRect.x;\n          outerRect.y = rect.y = vRect.y + vRect.height;\n          outerRect.width = layoutRect.width;\n          rect.width = vRect.width;\n          outerRect.height = rect.height = c.cachedSize;\n\n          vRect.height += c.cachedSize;\n          break;\n        case 'left':\n          outerRect.x = rect.x = hRect.x - c.cachedSize;\n          outerRect.y = layoutRect.y;\n          rect.y = hRect.y;\n          outerRect.width = rect.width = c.cachedSize;\n          outerRect.height = layoutRect.height;\n          rect.height = hRect.height;\n\n          hRect.x -= c.cachedSize;\n          hRect.width += c.cachedSize;\n          break;\n        case 'right':\n          outerRect.x = rect.x = hRect.x + hRect.width;\n          outerRect.y = layoutRect.y;\n          rect.y = hRect.y;\n          outerRect.width = rect.width = c.cachedSize;\n          outerRect.height = layoutRect.height;\n          rect.height = hRect.height;\n\n          hRect.width += c.cachedSize;\n          break;\n        case 'center':\n          outerRect.x = rect.x = reducedRect.x;\n          outerRect.y = rect.y = reducedRect.y;\n          outerRect.width = rect.width = reducedRect.width;\n          outerRect.height = rect.height = reducedRect.height;\n          break;\n        default:\n          if (c.referencedDocks.length > 0) {\n            const refs = c.referencedDocks.map((ref) => referencedComponents[ref]).filter((ref) => !!ref);\n            if (refs.length > 0) {\n              outerRect = boundingBox(refs.map((ref) => ref.outerRect));\n              rect = boundingBox(refs.map((ref) => ref.r));\n            }\n          }\n          break;\n      }\n      if (c.key) {\n        referencedComponents[c.key] = {\n          // store the size of this component\n          r: rect,\n          outerRect,\n        };\n      }\n      appendScaleRatio(rect, outerRect, layoutRect, containerRect);\n      rect.edgeBleed = c.edgeBleed;\n      rect.computed = computeRect(rect);\n      outerRect.edgeBleed = c.edgeBleed;\n      outerRect.computed = computeRect(outerRect);\n      rect.x += translation.x;\n      rect.y += translation.y;\n      outerRect.x += translation.x;\n      outerRect.y += translation.y;\n      c.comp.resize(rect, outerRect);\n      c.cachedSize = undefined;\n      c.edgeBleed = undefined;\n    });\n  return elementOrder;\n}\n\nfunction checkShowSettings(strategySettings, dockSettings, logicalContainerRect) {\n  const layoutModes = strategySettings.layoutModes || {};\n  const minimumLayoutMode = dockSettings.minimumLayoutMode();\n  let show = dockSettings.show();\n  if (show && typeof minimumLayoutMode === 'object') {\n    show =\n      layoutModes[minimumLayoutMode.width] &&\n      layoutModes[minimumLayoutMode.height] &&\n      logicalContainerRect.width >= layoutModes[minimumLayoutMode.width].width &&\n      logicalContainerRect.height >= layoutModes[minimumLayoutMode.height].height;\n  } else if (show && minimumLayoutMode !== undefined) {\n    show =\n      layoutModes[minimumLayoutMode] &&\n      logicalContainerRect.width >= layoutModes[minimumLayoutMode].width &&\n      logicalContainerRect.height >= layoutModes[minimumLayoutMode].height;\n  }\n  return show;\n}\n\nfunction validateComponent(component) {\n  if (!component.resize || typeof component.resize !== 'function') {\n    throw new Error('Component is missing resize function');\n  }\n  if (!component.dockConfig && !component.preferredSize) {\n    throw new Error('Component is missing preferredSize function');\n  }\n}\n\nfunction filterComponents(components, settings, rect) {\n  const visible = [];\n  const hidden = [];\n  // check show settings\n  for (let i = 0; i < components.length; ++i) {\n    const comp = components[i];\n    validateComponent(comp);\n    // backwards compatibility\n    let config = comp.dockConfig;\n    const key = comp.key;\n    const d = config.dock();\n    const referencedDocks = /@/.test(d) ? d.split(',').map((s) => s.replace(/^\\s*@/, '')) : [];\n    if (checkShowSettings(settings, config, rect)) {\n      visible.push({\n        comp,\n        key,\n        config,\n        referencedDocks,\n      });\n    } else {\n      hidden.push({\n        comp,\n        key,\n        config,\n        referencedDocks,\n      });\n    }\n  }\n  return [visible, hidden];\n}\n\n/**\n * Dock layout settings\n * @typedef {object} DockLayoutSettings\n * @property {object} [logicalSize] - Logical size\n * @property {number} [logicalSize.width] - Width in pixels\n * @property {number} [logicalSize.height] - Height in pixels\n * @property {boolean} [logicalSize.preserveAspectRatio=false] - If true, takes the smallest ratio of width/height between logical and physical size ( physical / logical )\n * @property {number} [logicalSize.align=0.5] - Normalized value between 0-1. Defines how the space around the scaled axis is spread in the container, with 0.5 meaning the spread is equal on both sides. Only applicable if preserveAspectRatio is set to true\n * @property {object} [center] - Define how much space the center dock area requires\n * @property {number} [center.minWidthRatio=0.5] - Value between 0 and 1\n * @property {number} [center.minHeightRatio=0.5] - Value between 0 and 1\n * @property {number} [center.minWidth] - Width in pixels\n * @property {number} [center.minHeight] - Height in pixels\n * @property {object<string, DockLayoutSettings~LayoutMode>} [layoutModes] Dictionary with named sizes\n * @property {object} [size] - Size is equal to that of the container (element) of the chart by default. It's possible to overwrite it by explicitly setting width or height\n * @property {number} [size.width] - Width in pixels\n * @property {number} [size.height] - Height in pixels\n */\n\n/**\n * @typedef {object} DockLayoutSettings~LayoutMode\n * @property {number} width\n * @property {number} height\n */\n\nfunction dockLayout(initialSettings) {\n  let settings = resolveSettings(initialSettings);\n\n  const docker = {};\n\n  docker.layout = function layout(rect, components = []) {\n    if (!rect || isNaN(rect.x) || isNaN(rect.y) || isNaN(rect.width) || isNaN(rect.height)) {\n      throw new Error('Invalid rect');\n    }\n    if (!components.length) {\n      return { visible: [], hidden: [], ordered: [] };\n    }\n\n    const { logicalContainerRect, containerRect } = resolveContainerRects(rect, settings);\n\n    const [visible, hidden] = filterComponents(components, settings, logicalContainerRect);\n\n    const reducedRect = reduceLayoutRect({\n      layoutRect: logicalContainerRect,\n      visible,\n      hidden,\n      settings,\n    });\n\n    const translation = { x: rect.x, y: rect.y };\n\n    const ordered = positionComponents({\n      visible,\n      layoutRect: logicalContainerRect,\n      reducedRect,\n      containerRect,\n      translation,\n    });\n    hidden.forEach((c) => {\n      c.comp.visible = false;\n      // set empty rects on hidden components\n      const r = createRect();\n      c.comp.resize(r, r);\n    });\n    return {\n      visible: visible.map((v) => v.comp),\n      hidden: hidden.map((h) => h.comp),\n      ordered: ordered.map((h) => h.comp),\n    };\n  };\n\n  docker.settings = function settingsFn(s) {\n    settings = resolveSettings(s);\n  };\n\n  return docker;\n}\n\nexport default dockLayout;\n","import createDockLayout from '../layout/dock/docker';\n\nconst findComponentByKeyInList = (list, key) => {\n  for (let i = 0; i < list.length; i++) {\n    const currComp = list[i];\n    if (currComp.hasKey && currComp.key === key) {\n      return list[i];\n    }\n  }\n  return null;\n};\n\nconst wrapChildren = (children) =>\n  children?.map((c) => {\n    const dockConfig = c.instance.dockConfig();\n    return {\n      preferredSize(opts) {\n        return dockConfig.computePreferredSize({ ...opts, children: wrapChildren(c.children) });\n      },\n    };\n  });\nconst hideAll = (rect, components) => ({ visible: [], hidden: components, ordered: [] });\nconst customLayout = (fn) => (rect, components) => {\n  const vcomponents = components.map((c, i) => {\n    const dockConfig = c.instance.dockConfig();\n    return {\n      index: i,\n      key: c.key,\n      dockConfig,\n      resize: c.instance.resize,\n      preferredSize(opts) {\n        return dockConfig.computePreferredSize({ ...opts, children: wrapChildren(c.children) });\n      },\n    };\n  });\n  const mapBack = (c) => components[c.index];\n  const { visible = vcomponents, hidden = [], ordered = visible } = fn(rect, vcomponents) ?? {};\n  return {\n    visible: visible.map(mapBack),\n    hidden: hidden.map(mapBack),\n    ordered: ordered.map(mapBack),\n  };\n};\nconst normalLayout = (layoutSettings) => {\n  const dockLayout = createDockLayout(layoutSettings);\n  return customLayout((rect, vcomponents) => dockLayout.layout(rect, vcomponents));\n};\n\nconst getLayoutFn = (strategy) => {\n  return typeof strategy === 'function' ? customLayout(strategy) : normalLayout(strategy);\n};\n\nfunction collectionFn({ createComponent }) {\n  const instance = {};\n  let allComponents = [];\n  let topComponents = [];\n\n  const createComp = (compSettings) => {\n    const component = createComponent(compSettings);\n    if (component) {\n      allComponents.push(component);\n      if (compSettings.components) {\n        component.children = compSettings.components\n          .map((childSettings) => createComp(childSettings))\n          .filter((c) => !!c);\n      }\n    }\n    return component;\n  };\n  const removeFromAllComponents = (component) => {\n    const index = allComponents.indexOf(component);\n    if (index !== -1) {\n      allComponents.splice(index, 1);\n    }\n  };\n  const removeDeleted = (compList, settingsList) => {\n    for (let i = compList.length - 1; i >= 0; i--) {\n      const currComp = compList[i];\n      // TODO warn when there is no key\n      const currSettings = settingsList.find((c) => currComp.hasKey && currComp.key === c.key);\n      if (!currSettings) {\n        // Component is removed\n        compList.splice(i, 1);\n        removeFromAllComponents(currComp);\n        if (currComp.children) {\n          removeDeleted(currComp.children, []);\n        }\n        currComp.instance.destroy();\n      } else if (currComp.children && currSettings.components) {\n        removeDeleted(currComp.children, currSettings.components);\n      }\n    }\n  };\n  const addAndUpdate = ({ compList, data, excludeFromUpdate, formatters, scales, settingsList }) => {\n    // Let the \"components\" array determine order of components\n    return settingsList\n      .map((comp) => {\n        const component = findComponentByKeyInList(compList, comp.key);\n\n        // Component should not be updated\n        if (excludeFromUpdate.indexOf(comp.key) > -1) {\n          // TODO: decide if to skip children\n          return component;\n        }\n\n        if (!component) {\n          // Component is added\n          return createComp(comp);\n        }\n        // Component is (potentially) updated\n        component.updateWith = {\n          formatters,\n          scales,\n          data,\n          settings: comp,\n        };\n\n        if (comp.components) {\n          component.children = addAndUpdate({\n            compList: component.children || [],\n            data,\n            excludeFromUpdate,\n            formatters,\n            scales,\n            settingsList: comp.components,\n          });\n        }\n\n        return component;\n      })\n      .filter((c) => !!c);\n  };\n  const recLayout = ({ components, hidden, layoutFn, ordered, rect, visible }) => {\n    const { visible: v, hidden: h, ordered: o } = layoutFn(rect, components);\n    visible.push(...v);\n    hidden.push(...h);\n    ordered.push(...o);\n    v.forEach((c) => {\n      if (c.children) {\n        const lFn = getLayoutFn(c.settings?.strategy ?? {});\n        recLayout({ components: c.children, hidden, layoutFn: lFn, ordered, rect: c.instance.getRect(), visible });\n      }\n    });\n    h.forEach((c) => {\n      if (c.children) {\n        recLayout({ components: c.children, hidden, layoutFn: hideAll, ordered, rect: null, visible });\n      }\n    });\n  };\n\n  instance.destroy = () => {\n    allComponents.forEach((comp) => comp.instance.destroy());\n    allComponents = [];\n    topComponents = [];\n  };\n\n  instance.findComponentByKey = (key) => findComponentByKeyInList(allComponents, key);\n\n  instance.forEach = (fn) => {\n    allComponents.forEach(fn);\n  };\n\n  instance.layout = ({ layoutSettings, rect }) => {\n    const visible = [];\n    const hidden = [];\n    const ordered = [];\n    const layoutFn = getLayoutFn(layoutSettings);\n    recLayout({ components: topComponents, hidden, layoutFn, ordered, rect, visible });\n    return { visible, hidden, ordered };\n  };\n\n  instance.set = ({ components }) => {\n    topComponents = components.map((compSettings) => createComp(compSettings)).filter((c) => !!c);\n  };\n\n  instance.update = ({ components, data, excludeFromUpdate, formatters, scales }) => {\n    // remove deleted\n    removeDeleted(topComponents, components);\n\n    // Update and add new\n    topComponents = addAndUpdate({\n      compList: topComponents,\n      data,\n      excludeFromUpdate,\n      formatters,\n      scales,\n      settingsList: components,\n    });\n  };\n\n  return instance;\n}\n\nexport default collectionFn;\n","import extend from 'extend';\n\nimport { detectTouchSupport, isValidTapEvent } from '../utils/event-type';\nimport { getShapeType } from '../geometry/util';\nimport datasources from '../data/data';\nimport dataCollections from '../data/collections';\nimport { collection as formatterCollection } from './formatter';\nimport { collection as scaleCollection } from './scales';\nimport buildScroll, { getOrCreateScrollApi } from './scroll-api';\nimport brush from '../brush';\nimport componentFactory from '../component/component-factory';\nimport mediatorFactory from '../mediator';\nimport { testRectPoint } from '../math/narrow-phase-collision';\nimport themeFn from '../theme';\nimport componentCollectionFn from './component-collection';\n\n/**\n * @callback customLayoutFunction\n * @param {Rect} rect\n * @param {object[]} components\n * @param {string} components[].key\n * @param {object} components[].dockConfig\n * @param {function} components[].resize\n * @param {function} components[].preferredSize\n */\n\n/**\n * Called when the chart has been created\n * @callback created\n * @memberof ChartDefinition\n */\n\n/**\n * Called before the chart has been mounted\n * @callback beforeMount\n * @memberof ChartDefinition\n */\n\n/**\n * Called after the chart has been mounted\n * @callback mounted\n * @memberof ChartDefinition\n * @param {HTMLElement} element The element the chart been mounted to\n */\n\n/**\n * Called before the chart has been rendered\n * @callback beforeRender\n * @memberof ChartDefinition\n */\n\n/**\n * Called before the chart has been updated\n * @callback beforeUpdate\n * @memberof ChartDefinition\n */\n\n/**\n * Called after the chart has been updated\n * @callback updated\n * @memberof ChartDefinition\n */\n\n/**\n * Called before the chart has been destroyed\n * @callback beforeDestroy\n * @memberof ChartDefinition\n */\n\n/**\n * Called after the chart has been destroyed\n * @callback destroyed\n * @memberof ChartDefinition\n */\n\n/**\n * @typedef {object} ChartSettings\n * @property {ComponentSettings[]} [components] Components\n * @property {object.<string, ScaleDefinition>} [scales] Dictionary with scale definitions\n * @property {object.<string, FormatterDefinition>} [formatters] Dictionary with formatter definitions\n * @property {DockLayoutSettings} [strategy] Dock layout strategy\n * @property {InteractionSettings[]} [interactions] Interaction handlers\n * @property {CollectionSettings[]} [collections] Collections\n */\n\n/**\n * Generic settings available to all components\n * @interface ComponentSettings\n * @property {string} type - Component type (ex: axis, point, ...)\n * @property {function} [preferredSize] - Function returning the preferred size\n * @property {function} [created] Called when the component has been created\n * @property {function} [beforeMount] Called before the component has been mounted\n * @property {function} [mounted] Called after the component has been mounted\n * @property {function} [beforeUpdate] Called before the component has been updated\n * @property {function} [updated] Called after the component has been updated\n * @property {function} [beforeRender] Called before the component has been rendered\n * @property {function} [beforeDestroy] Called before the component has been destroyed\n * @property {function} [destroyed] Called after the component has been destroyed\n * @property {object} [brush] Brush settings\n * @property {BrushTriggerSettings[]} [brush.trigger] Trigger settings\n * @property {BrushConsumeSettings[]} [brush.consume] Consume settings\n * @property {object} [layout] Layout settings\n * @property {number} [layout.displayOrder = 0]\n * @property {number} [layout.prioOrder = 0]\n * @property {string | {width: string, height: string}} [layout.minimumLayoutMode] Refer to layout sizes defined by layoutModes in `strategy`\n * @property {string} [layout.dock] left, right, top or bottom\n * @property {boolean} [show = true] If the component should be rendered\n * @property {string} [scale] Named scale. Will be provided to the component if it asks for it.\n * @property {string} [formatter] Named formatter. Fallback to create formatter from scale. Will be provided to the component if it asks for it.\n * @property {ComponentSettings[]} [components] Optional list of child components\n * @property {DockLayoutSettings|customLayoutFunction} [strategy] Layout strategy used for child components.\n * @property {DataExtraction|DataFieldExtraction} [data] Extracted data that should be available to the component\n */\n\n// mark strategy as experimental\n/**\n * @type {DockLayoutSettings|customLayoutFunction}\n * @name strategy\n * @memberof ComponentSettings\n * @experimental\n */\n\n// mark components as experimental\n/**\n * @type {ComponentSettings[]}\n * @name components\n * @memberof ComponentSettings\n * @experimental\n */\n\n/**\n * @typedef {object} BrushTriggerSettings\n * @property {string} [on] Type of interaction to trigger brush on\n * @property {string} [action] Type of interaction to respond with\n * @property {string[]} [contexts] Name of the brushing contexts to affect\n * @property {string[]} [data] The mapped data properties to add to the brush\n * @property {string} [propagation] Control the event propagation when multiple shapes are tapped. Disabled by default\n * @property {string} [globalPropagation] Control the event propagation between components. Disabled by default\n * @property {number} [touchRadius] Extend contact area for touch events. Disabled by default\n * @property {number} [mouseRadius] Extend contact area for regular mouse events. Disabled by default\n * @example\n * {\n *    on: 'tap',\n *    action: 'toggle',\n *    contexts: ['selection', 'tooltip'],\n *    data: ['x'],\n *    propagation: 'stop', // 'stop' => prevent trigger from propagating further than the first shape\n *    globalPropagation: 'stop', // 'stop' => prevent trigger of same type to be triggered on other components\n *    touchRadius: 24,\n *    mouseRadius: 10\n *  }\n */\n\n/**\n * @typedef {object} BrushConsumeSettings\n * @property {string} [context] Name of the brush context to observe\n * @property {string[]} [data] The mapped data properties to observe\n * @property {string} [mode] Data properties operator: and, or, xor.\n * @property {function} [filter] Filtering function\n * @property {object} [style] The style to apply to the shapes of the component\n * @property {object.<string, any>} [style.active] The style of active data points\n * @property {object.<string, any>} [style.inactive] The style of inactive data points\n * @example\n * {\n *    context: 'selection',\n *    data: ['x'],\n *    filter: (shape) => shape.type === 'circle',\n *    style: {\n *      active: {\n *        fill: 'red',\n *        stroke: '#333',\n *        strokeWidth: (shape) => shape.strokeWidth * 2,\n *      },\n *      inactive: {},\n *    },\n * }\n */\n\n/**\n * @typedef {object} BrushTargetConfig\n * @property {string} key - Component key\n * @property {string[]} [contexts] - Name of the brushing contexts to affect\n * @property {string[]} [data] - The mapped data properties to add to the brush\n * @property {string} [action='set'] - Type of action to respond with\n */\n\nfunction addComponentDelta(shape, containerBounds, componentBounds) {\n  const dx = containerBounds.left - componentBounds.left;\n  const dy = containerBounds.top - componentBounds.top;\n  const type = getShapeType(shape);\n  const deltaShape = extend(true, {}, shape);\n\n  switch (type) {\n    case 'circle':\n      deltaShape.cx += dx;\n      deltaShape.cy += dy;\n      break;\n    case 'polygon':\n      for (let i = 0, num = deltaShape.vertices.length; i < num; i++) {\n        const v = deltaShape.vertices[i];\n        v.x += dx;\n        v.y += dy;\n      }\n      break;\n    case 'geopolygon': // vertices is 2D array\n      for (let n = 0; n < deltaShape.vertices.length; n++) {\n        const vertices = deltaShape.vertices[n];\n        for (let i = 0, num = vertices.length; i < num; i++) {\n          const v = vertices[i];\n          v.x += dx;\n          v.y += dy;\n        }\n      }\n      break;\n    case 'line':\n      deltaShape.x1 += dx;\n      deltaShape.y1 += dy;\n      deltaShape.x2 += dx;\n      deltaShape.y2 += dy;\n      break;\n    case 'point':\n    case 'rect':\n      deltaShape.x += dx;\n      deltaShape.y += dy;\n      break;\n    default:\n      break;\n  }\n\n  return deltaShape;\n}\n\nconst moveToPosition = (element, comp, index) => {\n  const el = comp.instance.renderer().element();\n  if (isNaN(index) || !el || !element || !element.children) {\n    return;\n  }\n  const nodes = element.children;\n  const i = Math.max(0, index);\n  const node = nodes[i];\n  if (el === node) {\n    return;\n  }\n  const additionalEl = comp.instance.def.additionalElements && comp.instance.def.additionalElements().filter(Boolean);\n  if (element.insertBefore && typeof node !== 'undefined') {\n    element.insertBefore(el, node);\n    if (additionalEl) {\n      additionalEl.forEach((ae) => {\n        element.insertBefore(ae, el);\n      });\n    }\n  } else {\n    if (additionalEl) {\n      additionalEl.forEach((ae) => {\n        element.appendChild(ae, el);\n      });\n    }\n    element.appendChild(el);\n  }\n};\n\nexport function orderComponents(element, ordered) {\n  const elToIdx = [];\n  let numElements = 0;\n  ordered.forEach((comp) => {\n    elToIdx.push(numElements);\n\n    // assume each component has at least one element\n    numElements++;\n\n    // check additional elements\n    const additionalEl = comp.instance.def.additionalElements && comp.instance.def.additionalElements();\n    if (additionalEl) {\n      numElements += additionalEl.length;\n    }\n  });\n\n  ordered.forEach((comp, i) => moveToPosition(element, comp, elToIdx[i]));\n}\n\nfunction chartFn(definition, context) {\n  /**\n   * @typedef {object} ChartDefinition\n   */\n  let {\n    /**\n     * Element to attach chart to\n     * @type {HTMLElement}\n     * @memberof ChartDefinition\n     */\n    element,\n    /**\n     * Chart data\n     * @type {Array<DataSource>|DataSource}\n     * @memberof ChartDefinition\n     */\n    data = [],\n    /**\n     * Chart settings\n     * @type {ChartSettings}\n     * @memberof ChartDefinition\n     */\n    settings = {},\n    on = {},\n  } = definition;\n\n  const registries = context.registries;\n  const logger = context.logger;\n  const theme = themeFn(context.style, context.palettes);\n\n  const listeners = [];\n  /**\n   * Chart instance\n   * @alias Chart\n   * @interface\n   */\n  const instance = extend({}, definition);\n  const mediator = mediatorFactory();\n  let visibleComponents = [];\n\n  let currentScales = null; // Built scales\n  let currentFormatters = null; // Built formatters\n  let currentScrollApis = null; // Build scroll apis\n  let currentInteractions = [];\n\n  let dataset = () => {};\n  let dataCollection = () => {};\n  const brushes = {};\n  let stopBrushing = false;\n\n  const createComponent = (compSettings) => {\n    if (!registries.component.has(compSettings.type)) {\n      logger.warn(`Unknown component: ${compSettings.type}`);\n      return false;\n    }\n    const componentDefinition = registries.component(compSettings.type);\n    const compInstance = componentFactory(componentDefinition, {\n      settings: compSettings,\n      chart: instance,\n      mediator,\n      registries,\n      theme,\n      container: element,\n    });\n    return {\n      instance: compInstance,\n      settings: extend(true, {}, compSettings),\n      key: compSettings.key,\n      hasKey: typeof compSettings.key !== 'undefined',\n    };\n  };\n\n  const componentsC = componentCollectionFn({ createComponent });\n\n  // Create a callback that calls lifecycle functions in the definition and config (if they exist).\n  function createCallback(method, defaultMethod = () => {}) {\n    return function cb(...args) {\n      const inDefinition = typeof definition[method] === 'function';\n\n      let returnValue;\n      if (inDefinition) {\n        returnValue = definition[method].call(instance, ...args);\n      } else {\n        returnValue = defaultMethod.call(instance, ...args);\n      }\n      return returnValue;\n    };\n  }\n\n  function getElementRect(el) {\n    if (typeof el.getBoundingClientRect === 'function') {\n      const { width, height } = el.getBoundingClientRect();\n      return {\n        x: 0,\n        y: 0,\n        width,\n        height,\n      };\n    }\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n    };\n  }\n\n  const layout = () => {\n    let layoutSettings;\n    if (settings.dockLayout) {\n      logger.warn('Deprecation Warning: \"dockLayout\" property should be renamed to \"strategy\"');\n      layoutSettings = settings.dockLayout;\n    } else {\n      layoutSettings = settings.strategy;\n    }\n    const rect = getElementRect(element);\n\n    return componentsC.layout({ layoutSettings, rect });\n  };\n\n  const created = createCallback('created');\n  const beforeMount = createCallback('beforeMount');\n  const mounted = createCallback('mounted');\n  const beforeUpdate = createCallback('beforeUpdate');\n  const updated = createCallback('updated');\n  const beforeRender = createCallback('beforeRender');\n  const beforeDestroy = createCallback('beforeDestroy');\n  const destroyed = createCallback('destroyed');\n\n  const set = (_data, _settings, { partialData } = {}) => {\n    const { formatters = {}, scales = {}, scroll = {} } = _settings;\n\n    dataset = datasources(_data, { logger, types: registries.data });\n    if (!partialData) {\n      Object.keys(brushes).forEach((b) => brushes[b].clear());\n    }\n    if (_settings.palettes) {\n      theme.setPalettes(_settings.palettes);\n    }\n    if (_settings.style) {\n      theme.setStyle(_settings.style);\n    }\n    dataCollection = dataCollections(_settings.collections, { dataset }, { logger });\n\n    const deps = {\n      theme,\n      logger,\n    };\n    currentScales = scaleCollection(\n      scales,\n      { dataset, collection: dataCollection },\n      { ...deps, scale: registries.scale }\n    );\n    currentFormatters = formatterCollection(\n      formatters,\n      { dataset, collection: dataCollection },\n      { ...deps, formatter: registries.formatter }\n    );\n    currentScrollApis = buildScroll(scroll, currentScrollApis);\n  };\n\n  const render = () => {\n    const { components = [] } = settings;\n\n    beforeRender();\n\n    set(data, settings);\n\n    componentsC.set({ components });\n\n    const { visible, hidden, ordered } = layout();\n    visibleComponents = visible;\n\n    hidden.forEach((comp) => {\n      comp.instance.hide();\n      comp.visible = false;\n    });\n\n    visible.forEach((comp) => comp.instance.beforeMount());\n    visible.forEach((comp) => comp.instance.mount());\n    visible.forEach((comp) => comp.instance.beforeRender());\n\n    visible.forEach((comp) => comp.instance.render());\n    visible.forEach((comp) => comp.instance.mounted());\n    visible.forEach((comp) => {\n      comp.visible = true;\n    });\n    orderComponents(element, ordered);\n  };\n\n  function setInteractions(interactions = []) {\n    const current = {};\n    const newKeys = interactions.filter((it) => !!it.key).map((it) => it.key);\n    currentInteractions.forEach((cit) => {\n      if (cit.key && newKeys.indexOf(cit.key) !== -1) {\n        // keep old instance\n        current[cit.key] = cit;\n      } else {\n        cit.destroy();\n      }\n    });\n    currentInteractions = interactions.map((intSettings) => {\n      const intDefinition =\n        intSettings.key && current[intSettings.key]\n          ? current[intSettings.key]\n          : registries.interaction(intSettings.type)(instance, mediator, element);\n      intDefinition.set(intSettings);\n      return intDefinition;\n    });\n  }\n\n  const componentsFromPoint = (p) => {\n    const br = element.getBoundingClientRect();\n    const x = 'clientX' in p ? p.clientX : p.x;\n    const y = 'clientY' in p ? p.clientY : p.y;\n    const tp = { x: x - br.left, y: y - br.top };\n    const ret = [];\n    visibleComponents.forEach((c) => {\n      const r = c.instance.getRect();\n      // Do test on physical rect and use computed rect if available, otherwise fallback to computing a new rect for legacy support\n      if (\n        testRectPoint(\n          r.computedPhysical\n            ? r.computedPhysical\n            : {\n                x: r.margin.left + r.x * r.scaleRatio.x,\n                y: r.margin.top + r.y * r.scaleRatio.y,\n                width: r.width * r.scaleRatio.x,\n                height: r.height * r.scaleRatio.y,\n              },\n          tp\n        )\n      ) {\n        ret.push(c);\n      }\n    });\n    return ret;\n  };\n\n  const addDefaultEventListeners = () => {\n    if (listeners.length || !element) {\n      return;\n    }\n    Object.keys(on).forEach((key) => {\n      const listener = on[key].bind(instance);\n      element.addEventListener(key, listener);\n      listeners.push({\n        key,\n        listener,\n      });\n    });\n\n    const eventInfo = {};\n    const onTapDown = (e) => {\n      if (e.touches) {\n        eventInfo.x = e.touches[0].clientX;\n        eventInfo.y = e.touches[0].clientY;\n        eventInfo.multiTouch = e.touches.length > 1;\n      } else {\n        eventInfo.x = e.clientX;\n        eventInfo.y = e.clientY;\n        eventInfo.multiTouch = false;\n      }\n      eventInfo.time = Date.now();\n      eventInfo.comps = componentsFromPoint(eventInfo);\n    };\n\n    const onBrushTap = (e) => {\n      const comps = eventInfo.comps || componentsFromPoint(e);\n      if (comps.every((c) => c.instance.def.disableTriggers)) {\n        return;\n      }\n\n      if (e.type === 'touchend') {\n        e.preventDefault();\n      }\n      if (!isValidTapEvent(e, eventInfo)) {\n        return;\n      }\n\n      for (let i = comps.length - 1; i >= 0; i--) {\n        const comp = comps[i];\n        comp.instance.onBrushTap(e);\n        if (stopBrushing) {\n          stopBrushing = false;\n          break;\n        }\n      }\n    };\n\n    const onBrushOver = (e) => {\n      const comps = componentsFromPoint(e);\n      for (let i = comps.length - 1; i >= 0; i--) {\n        const comp = comps[i];\n        comp.instance.onBrushOver(e);\n        if (stopBrushing) {\n          stopBrushing = false;\n          break;\n        }\n      }\n    };\n\n    const brushEventList = [];\n\n    brushEventList.push({ key: 'mousedown', listener: onTapDown });\n    brushEventList.push({ key: 'mouseup', listener: onBrushTap });\n\n    if (detectTouchSupport(element)) {\n      brushEventList.push({ key: 'touchstart', listener: onTapDown });\n      brushEventList.push({ key: 'touchend', listener: onBrushTap });\n    }\n\n    brushEventList.push({ key: 'mousemove', listener: onBrushOver });\n\n    brushEventList.forEach((event) => {\n      element.addEventListener(event.key, event.listener);\n      listeners.push(event);\n    });\n  };\n\n  const removeDefaultEventListeners = () => {\n    listeners.forEach(({ key, listener }) => element.removeEventListener(key, listener));\n    listeners.length = 0;\n  };\n\n  // Browser only\n  const mount = () => {\n    element.innerHTML = '';\n\n    render();\n\n    addDefaultEventListeners();\n    setInteractions(settings.interactions);\n  };\n\n  const unmount = () => {\n    removeDefaultEventListeners();\n    setInteractions();\n  };\n\n  /**\n   * Update the chart with new settings and / or data\n   * @param {object} [def] - New chart definition\n   * @param {Array<DataSource>|DataSource} [def.data] Chart data\n   * @param {ChartSettings} [def.settings] Chart settings\n   * @param {boolean} [def.partialData=false] If set to true, will trigger a data update only. Meaning the layout will not be updated\n   * @param {string[]} [def.excludeFromUpdate=[]] Keys of components to not include in the update\n   */\n  instance.update = (newProps = {}) => {\n    const { partialData, excludeFromUpdate = [] } = newProps;\n    let visibleOrdered;\n    if (newProps.data) {\n      data = newProps.data;\n    }\n    if (newProps.settings) {\n      settings = newProps.settings;\n      setInteractions(newProps.settings.interactions);\n    }\n\n    beforeUpdate();\n\n    set(data, settings, { partialData });\n\n    const { formatters, scales, components = [] } = settings;\n\n    componentsC.update({ components, data, excludeFromUpdate, formatters, scales });\n\n    componentsC.forEach((comp) => {\n      if (comp.updateWith) {\n        comp.instance.set(comp.updateWith);\n      }\n    });\n    componentsC.forEach((comp) => {\n      if (comp.updateWith) {\n        comp.instance.beforeUpdate();\n      }\n    });\n\n    const toUpdate = [];\n    const toRender = [];\n    let toRenderOrUpdate;\n    if (partialData) {\n      componentsC.forEach((comp) => {\n        if (comp.updateWith && comp.visible) {\n          toUpdate.push(comp);\n        }\n      });\n      toRenderOrUpdate = toUpdate;\n    } else {\n      const { visible, hidden, ordered } = layout(); // Relayout\n      visibleComponents = visible;\n      toRenderOrUpdate = visible;\n      visibleOrdered = ordered;\n\n      visible.forEach((comp) => {\n        if (comp.updateWith && comp.visible) {\n          toUpdate.push(comp);\n        } else {\n          toRender.push(comp);\n        }\n      });\n\n      hidden.forEach((comp) => {\n        comp.instance.hide();\n        comp.visible = false;\n        delete comp.updateWith;\n      });\n    }\n\n    toRender.forEach((comp) => comp.instance.beforeMount());\n    toRender.forEach((comp) => comp.instance.mount());\n\n    toRenderOrUpdate.forEach((comp) => comp.instance.beforeRender());\n\n    toRenderOrUpdate.forEach((comp) => {\n      if (comp.updateWith && comp.visible) {\n        comp.instance.update();\n      } else {\n        comp.instance.render();\n      }\n    });\n\n    // Ensure that displayOrder is keept, only do so on re-layout update.\n    // Which is only the case if partialData is false.\n    if (!partialData) {\n      orderComponents(element, visibleOrdered);\n    }\n\n    toRender.forEach((comp) => comp.instance.mounted());\n    toUpdate.forEach((comp) => comp.instance.updated());\n\n    visibleComponents.forEach((comp) => {\n      delete comp.updateWith;\n      comp.visible = true;\n    });\n\n    updated();\n  };\n\n  /**\n   * Destroy the chart instance.\n   */\n  instance.destroy = () => {\n    beforeDestroy();\n    componentsC.destroy();\n    unmount();\n    delete instance.update;\n    delete instance.destroy;\n    destroyed();\n  };\n\n  /**\n   * Get all shapes associated with the provided context\n   * @param {string} context The brush context\n   * @param {string} mode Property comparison mode.\n   * @param {Array<string>} props Which specific data properties to compare\n   * @param {string} key Which component to get shapes from. Default gives shapes from all components.\n   * @return {Array<object>} Array of objects containing shape and parent element\n   */\n  instance.getAffectedShapes = (ctx, mode = 'and', props, key) => {\n    const shapes = [];\n    visibleComponents\n      .filter((comp) => key === undefined || key === null || comp.key === key)\n      .forEach((comp) => {\n        shapes.push(...comp.instance.getBrushedShapes(ctx, mode, props));\n      });\n    return shapes;\n  };\n\n  /**\n   * Get all nodes matching the provided selector\n   * @param {string} selector CSS selector [type, attribute, universal, class]\n   * @returns {Array<SceneNode>} Array of objects containing matching nodes\n   *\n   * @example\n   * chart.findShapes('Circle') // [<CircleNode>, <CircleNode>]\n   * chart.findShapes('Circle[fill=\"red\"][stroke!=\"black\"]') // [CircleNode, CircleNode]\n   * chart.findShapes('Container Rect') // [Rect, Rect]\n   */\n  instance.findShapes = (selector) => {\n    const shapes = [];\n    visibleComponents.forEach((c) => {\n      shapes.push(...c.instance.findShapes(selector));\n    });\n    return shapes;\n  };\n\n  /**\n   * Get components overlapping a point.\n   * @param {Point} p - Point with x- and y-coordinate. The coordinate is relative to the browser viewport.\n   * @returns {Array<Component>} Array of component contexts\n   */\n  instance.componentsFromPoint = (p) => componentsFromPoint(p).map((comp) => comp.instance.ctx);\n\n  /**\n   * Get all nodes colliding with a geometrical shape (circle, line, rectangle, point, polygon, geopolygon).\n   *\n   * The input shape is identified based on the geometrical attributes in the following order: circle => line => rectangle => point => polygon => geopolygon.\n   * Note that not all nodes on a scene have collision detection enabled.\n   * @param {Line|Rect|Point|Circle} shape - A geometrical shape. Coordinates are relative to the top-left corner of the chart instance container.\n   * @param {object} opts - Options\n   * @param {object[]} [opts.components] - Array of components to include in the lookup. If no components are specified, all components will be included.\n   * @param {string} [opts.components[].component.key] - Component key\n   * @param {string} [opts.components[].component.propagation] - if set to `stop`, will start lookup on top visible shape and propagate downwards until a shape is found.\n   * @param {string} [opts.propagation] - if set to `stop`, will start lookup on top visible component and propagate downwards until a component has at least a match.\n   * @returns {Array<SceneNode>} Array of objects containing colliding nodes\n   *\n   * @example\n   * chart.shapesAt(\n   *  {\n   *    x: 0,\n   *    y: 0,\n   *    width: 100,\n   *    height: 100\n   *  },\n   *  {\n   *    components: [\n   *      { key: 'key1', propagation: 'stop' },\n   *      { key: 'key2' }\n   *    ],\n   *    propagation: 'stop'\n   *  }\n   * );\n   */\n  instance.shapesAt = (shape, opts = {}) => {\n    const result = [];\n    const containerBounds = element.getBoundingClientRect();\n    let comps = visibleComponents; // Assume that visibleComponents is ordererd according to displayOrder\n\n    if (Array.isArray(opts.components) && opts.components.length > 0) {\n      const compKeys = opts.components.map((c) => c.key);\n      comps = visibleComponents\n        .filter((c) => compKeys.indexOf(c.key) !== -1)\n        .map((c) => ({\n          instance: c.instance,\n          opts: opts.components[compKeys.indexOf(c.key)],\n        }));\n    }\n\n    for (let i = comps.length - 1; i >= 0; i--) {\n      const c = comps[i];\n      const componentBounds = c.instance.renderer().element().getBoundingClientRect();\n      const deltaShape = addComponentDelta(shape, containerBounds, componentBounds);\n      const shapes = c.instance.shapesAt(deltaShape, c.opts);\n      const stopPropagation = shapes.length > 0 && opts.propagation === 'stop';\n\n      result.push(...shapes);\n\n      if (result.length > 0 && stopPropagation) {\n        return result;\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Brush data by providing a collection of data bound shapes.\n   * @param {SceneNode[]} shapes - An array of data bound shapes.\n   * @param {object} config - Options\n   * @param {BrushTargetConfig[]} config.components - Array of components to include in the lookup\n   *\n   * @example\n   * const shapes = chartInstance.shapesAt(...);\n   * const config = {\n   *  components:[\n   *    {\n   *      key: 'key1',\n   *      contexts: ['myContext'],\n   *      data: [''],\n   *      action: 'add'\n   *    }\n   *  ]\n   * };\n   * chartInstance.brushFromShapes(shapes, config);\n   */\n  instance.brushFromShapes = (shapes, config = { components: [] }) => {\n    for (let i = 0; i < config.components.length; i++) {\n      const iKey = config.components[i].key;\n      visibleComponents\n        .filter((c) => iKey === c.key)\n        .forEach((c) => {\n          let compShapes = shapes.filter((shape) => shape.key === c.key);\n          c.instance.brushFromShapes(compShapes, config.components[i]);\n        });\n    }\n  };\n\n  /**\n   * @private\n   * @param {string} name - Name of scroll api\n   * @returns {object}\n   */\n  instance.scroll = function scroll(name = 'default') {\n    return getOrCreateScrollApi(name, currentScrollApis);\n  };\n\n  /**\n   * Get\n   * @param {string} key - Get the dataset identified by `key`\n   * @returns {Dataset}\n   */\n  instance.dataset = (key) => dataset(key);\n\n  instance.dataCollection = (key) => dataCollection(key);\n\n  /**\n   * Get all registered scales\n   * @returns {Object<string,Scale>}\n   */\n  instance.scales = function scales() {\n    return currentScales.all();\n  };\n\n  /**\n   * Get all registered formatters\n   * @returns {Object<string,formatter>}\n   */\n  instance.formatters = function formatters() {\n    return currentFormatters.all();\n  };\n\n  /**\n   * Get or create brush context for this chart\n   * @param {string} name - Name of the brush context. If no match is found, a new brush context is created and returned.\n   * @returns {Brush}\n   */\n  instance.brush = function brushFn(name = 'default') {\n    if (!brushes[name]) {\n      brushes[name] = brush();\n    }\n    return brushes[name];\n  };\n\n  /**\n   * Get or create a scale for this chart\n   * @param {string|object} v - Scale reference or scale options\n   * @returns {Scale}\n   * @example\n   * instance.scale('nameOfMyScale'); // Fetch an existing scale by name\n   * instance.scale({ scale: 'nameOfMyScale' }); // Fetch an existing scale by name\n   * instance.scale({ source: '0/1', type: 'linear' }); // Create a new scale\n   */\n  instance.scale = function scale(v) {\n    return currentScales.get(v);\n  };\n\n  /**\n   * Get or create a formatter for this chart\n   * @param {string|object} v - Formatter reference or formatter options\n   * @returns {formatter}\n   * @example\n   * instance.formatter('nameOfMyFormatter'); // Fetch an existing formatter by name\n   * instance.formatter({ formatter: 'nameOfMyFormatter' }); // Fetch an existing formatter by name\n   * instance.formatter({ type: 'q' }); // Fetch an existing formatter by type\n   * instance.formatter({\n   *  formatter: 'd3',\n   *  type: 'number',\n   *  format: '1.0.%'\n   * }); // Create a new formatter\n   */\n  instance.formatter = function formatter(v) {\n    return currentFormatters.get(v);\n  };\n\n  /**\n   * @param {boolean} [val] - Toggle brushing on or off. If value is omitted, a toggle action is applied to the current state.\n   */\n  instance.toggleBrushing = function toggleBrushing(val) {\n    if (typeof val !== 'undefined') {\n      stopBrushing = val;\n    } else {\n      stopBrushing = !stopBrushing;\n    }\n  };\n\n  /**\n   * Get a component context\n   * @param {string} key - Component key\n   * @returns {Component} Component context\n   */\n  instance.component = (key) => {\n    const component = componentsC.findComponentByKey(key);\n    return component?.instance.ctx;\n  };\n\n  instance.logger = () => logger;\n\n  instance.theme = () => theme;\n\n  /**\n   * Interaction instance\n   * @typedef {object} Interaction\n   * @property {function} on Enable interaction\n   * @property {function} off Disable interaction\n   * @property {function} destroy Destroy interaction\n   * @property {string} key Interaction identifier\n   */\n\n  /**\n   * Get all interaction instances\n   * @name Chart.interactions\n   * @type {object}\n   * @example\n   * chart.interactions.instances; // Array of all interaction instances\n   * chart.interactions.on(); // Toggle on all interactions instances\n   * chart.interactions.off(); // Toggle off all interactions instances\n   */\n  Object.defineProperty(instance, 'interactions', {\n    get() {\n      return /** @lends Chart.interactions */ {\n        /** @type Array<Interaction> */\n        instances: currentInteractions,\n        /** Enable all interaction instances */\n        on() {\n          addDefaultEventListeners();\n          currentInteractions.forEach((i) => i.on());\n        },\n        /** Disable all interaction instances */\n        off() {\n          removeDefaultEventListeners();\n          currentInteractions.forEach((i) => i.off());\n        },\n      };\n    },\n  });\n\n  created();\n\n  if (element) {\n    beforeMount();\n    mount(element);\n    mounted(element);\n    instance.element = element;\n  }\n\n  return instance;\n}\n\nexport default chartFn;\n","import registry from '../utils/registry';\n\nconst rendererRegistry = (reg) => {\n  let f = registry(reg);\n  f.prio = (p) => (p ? f.default(p[0]) : [f.default()]);\n  f.types = () => f.getKeys();\n  return f;\n};\n\nexport { rendererRegistry as default };\n","import registry from '../utils/registry';\n\nconst componentRegistry = registry();\nexport { componentRegistry as default };\n","export function findField(query, { cache }) {\n  if (typeof query === 'number') {\n    return cache.fields[query];\n  }\n\n  // Find by key first\n  for (let i = 0; i < cache.fields.length; i++) {\n    if (cache.fields[i].key() === query) {\n      return cache.fields[i];\n    }\n  }\n  // find by title\n  for (let i = 0; i < cache.fields.length; i++) {\n    if (cache.fields[i].title() === query) {\n      return cache.fields[i];\n    }\n  }\n  return null;\n}\n\nconst filters = {\n  numeric: (values) => values.filter((v) => typeof v === 'number' && !isNaN(v)),\n};\n\nconst unfilteredReducers = {\n  sum: (values) => values.reduce((a, b) => a + b, 0),\n};\n\n// function isPrimitive(x) {\n//   const type = typeof x;\n//   return (type !== 'object' && type !== 'function');\n// }\n\n/**\n * [reducers description]\n * @type {Object}\n * @private\n */\nexport const reducers = {\n  first: (values) => values[0],\n  last: (values) => values[values.length - 1],\n  min: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : Math.min.apply(null, filtered);\n  },\n  max: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : Math.max.apply(null, filtered);\n  },\n  sum: (values) => {\n    const filtered = filters.numeric(values);\n    return !filtered.length ? NaN : filtered.reduce((a, b) => a + b, 0);\n  },\n  avg: (values) => {\n    const filtered = filters.numeric(values);\n    const len = filtered.length;\n    return !len ? NaN : unfilteredReducers.sum(filtered) / len;\n  },\n};\n\nfunction normalizeProperties(cfg, dataset, dataProperties, main) {\n  // console.log('======', cfg, main, dataset);\n  const props = {};\n  const mainField = main.field || (typeof cfg.field !== 'undefined' ? dataset.field(cfg.field) : null);\n  Object.keys(dataProperties).forEach((key) => {\n    const pConfig = dataProperties[key];\n    const prop = (props[key] = {});\n    if (['number', 'string', 'boolean'].indexOf(typeof pConfig) !== -1) {\n      prop.type = 'primitive';\n      prop.value = pConfig;\n    } else if (typeof pConfig === 'function') {\n      prop.type = 'function';\n      prop.value = pConfig;\n      prop.label = pConfig;\n      prop.field = mainField;\n    } else if (typeof pConfig === 'object') {\n      if (pConfig.fields) {\n        prop.fields = pConfig.fields.map((ff) => normalizeProperties(cfg, dataset, { main: ff }, main).main);\n      } else if (typeof pConfig.field !== 'undefined') {\n        prop.type = 'field';\n        prop.field = dataset.field(pConfig.field);\n        prop.value = prop.field.value;\n        prop.label = prop.field.label;\n      } else if (mainField) {\n        prop.value = mainField.value;\n        prop.label = mainField.label;\n        prop.field = mainField;\n      }\n\n      if (typeof pConfig.filter === 'function') {\n        prop.filter = pConfig.filter;\n      }\n      if (typeof pConfig.value !== 'undefined') {\n        prop.value = pConfig.value;\n      }\n      if (typeof pConfig.label !== 'undefined') {\n        prop.label = pConfig.label;\n      }\n      if (typeof pConfig.reduce === 'function') {\n        prop.reduce = pConfig.reduce;\n      } else if (pConfig.reduce) {\n        prop.reduce = reducers[pConfig.reduce];\n      } else if (prop.field && prop.field.reduce) {\n        prop.reduce = typeof prop.field.reduce === 'string' ? reducers[prop.field.reduce] : prop.field.reduce;\n      }\n\n      if (typeof pConfig.reduceLabel === 'function') {\n        prop.reduceLabel = pConfig.reduceLabel;\n      } else if (pConfig.reduceLabel) {\n        prop.reduceLabel = reducers[pConfig.reduceLabel];\n      } else if (prop.field && prop.field.reduceLabel) {\n        prop.reduceLabel =\n          typeof prop.field.reduceLabel === 'string' ? reducers[prop.field.reduceLabel] : prop.field.reduceLabel;\n      }\n    }\n  });\n\n  return props;\n}\n\n/*\nexample of configuration input\ncfg = {\n  field: 'State', // the 'top level' values are extracted from field state\n  value: d => d.qText, // the value of the output\n  props: { // additional data properties ammended to each item\n    a: 3, // constant value\n    b: d => d.qElemNumber, // function will receive the original field value\n    c: {\n      field: 'Country', // reference to another field\n      value: d => d.qText // extract the qText value from the referenced field\n    },\n    d: {\n      value: d => d.qRow //  extract qRow from field 'State'\n    }\n  }\n}\n\n// output\n[{\n  value: 'CA', source: { field: 'State' },\n  a: { value: 3 },\n  b: { value: 26, source: 'State' },\n  c: { value: 'USA', source: 'Country' },\n  d: { value: 131, source: 'State' }\n},\n...]\n*/\nexport function getPropsInfo(cfg, dataset) {\n  // console.log('222', cfg);\n  const { main } = normalizeProperties(\n    cfg,\n    dataset,\n    {\n      main: {\n        value: cfg.value,\n        label: cfg.label,\n        reduce: cfg.reduce,\n        filter: cfg.filter,\n      },\n    },\n    {}\n  );\n  const props = normalizeProperties(cfg, dataset, cfg.props || {}, main);\n  return { props, main };\n}\n\nfunction collectItems(items, cfg, formatter, prop) {\n  const values = Array(items.length);\n  const labels = Array(items.length);\n  let it;\n  for (let i = 0; i < items.length; i++) {\n    it = prop ? items[i][prop] : items[i];\n    values[i] = it.value;\n    labels[i] = it.label;\n  }\n\n  const reduce = cfg.reduce;\n  const reduceLabel = cfg.reduceLabel;\n  const v = reduce ? reduce(values) : values;\n  const b = reduceLabel ? reduceLabel(labels, v) : formatter ? formatter(v) : String(v); // eslint-disable-line no-nested-ternary\n\n  // // ret[prop].label = String(propsFormatters[prop](ret[prop].value));\n\n  const ret = {\n    value: v,\n    label: b,\n  };\n  if (prop && items[0][prop].source) {\n    ret.source = items[0][prop].source;\n    return ret;\n  }\n  if (!prop && items[0].source) {\n    ret.source = items[0].source;\n    return ret;\n  }\n\n  return ret;\n}\n\n// collect items that have been grouped and reduce per group and property\nexport function collect(trackedItems, { main, propsArr, props }) {\n  let dataItems = [];\n  const mainFormatter = main.field.formatter(); // || (v => v);\n  const propsFormatters = {};\n  propsArr.forEach((prop) => {\n    propsFormatters[prop] = props[prop].field ? props[prop].field.formatter() : (v) => v;\n  });\n  dataItems.push(\n    ...trackedItems.map((t) => {\n      const ret = collectItems(t.items, main, mainFormatter);\n\n      propsArr.forEach((prop) => {\n        ret[prop] = collectItems(t.items, props[prop], propsFormatters[prop], prop);\n      });\n      return ret;\n    })\n  );\n\n  return dataItems;\n}\n\nexport function track({ cfg, itemData, obj, target, tracker, trackType }) {\n  const trackId = trackType === 'function' ? cfg.trackBy(itemData) : itemData[cfg.trackBy];\n  let trackedItem = tracker[trackId];\n  if (!trackedItem) {\n    trackedItem = tracker[trackId] = {\n      items: [],\n      id: trackId,\n    };\n    target.push(trackedItem);\n  }\n  trackedItem.items.push(obj);\n}\n","import { getPropsInfo, collect, track as storeTracked } from './util';\n\nfunction datumExtract(propCfg, cell, { key }) {\n  const datum = {\n    value:\n      typeof propCfg.value === 'function' // eslint-disable-line no-nested-ternary\n        ? propCfg.value(cell)\n        : typeof propCfg.value !== 'undefined'\n        ? propCfg.value\n        : cell,\n  };\n\n  datum.label =\n    typeof propCfg.label === 'function' // eslint-disable-line no-nested-ternary\n      ? propCfg.label(cell)\n      : typeof propCfg.label !== 'undefined'\n      ? String(propCfg.label)\n      : String(datum.value);\n\n  if (propCfg.field) {\n    datum.source = {\n      key,\n      field: propCfg.field.key(),\n    };\n  }\n\n  return datum;\n}\n\nexport default function extract(config, dataset) {\n  const cfgs = Array.isArray(config) ? config : [config];\n  let dataItems = [];\n  cfgs.forEach((cfg) => {\n    if (typeof cfg.field !== 'undefined') {\n      const f = dataset.field(cfg.field);\n      const sourceKey = dataset.key();\n      if (!f) {\n        throw Error(`Field '${cfg.field}' not found`);\n      }\n      const { props, main } = getPropsInfo(cfg, dataset);\n      const propsArr = Object.keys(props);\n\n      const track = !!cfg.trackBy;\n      const trackType = typeof cfg.trackBy;\n      const tracker = {};\n      const trackedItems = [];\n\n      const items = f.items();\n      const mapped = [];\n      for (let idx = 0; idx < items.length; idx++) {\n        const mainCell = items[idx];\n        const exclude = main.filter && !main.filter(mainCell);\n        if (exclude) {\n          continue;\n        }\n        const ret = datumExtract(main, mainCell, { key: sourceKey });\n\n        // loop through all props that need to be mapped and\n        // assign 'value' and 'source' to each property\n        propsArr.forEach((prop) => {\n          const p = props[prop];\n          let propCell = p.field ? p.field.items()[idx] : mainCell;\n          ret[prop] = datumExtract(p, propCell, { key: sourceKey });\n        });\n\n        // collect items based on the trackBy value\n        // items with the same trackBy value are placed in an array and reduced later\n        if (track) {\n          storeTracked({\n            cfg,\n            itemData: mainCell,\n            obj: ret,\n            target: trackedItems,\n            tracker,\n            trackType,\n          });\n        }\n\n        mapped.push(ret);\n      }\n\n      // reduce if items have been grouped\n      if (track) {\n        dataItems.push(\n          ...collect(trackedItems, {\n            main,\n            propsArr,\n            props,\n          })\n        );\n      } else {\n        dataItems.push(...mapped);\n      }\n    }\n  });\n  return dataItems;\n}\n","import extend from 'extend';\nimport field from './field';\nimport extract from './extractor-matrix';\n\nimport { findField, getPropsInfo, collect, track } from './util';\n\nconst filters = {\n  numeric: (values) => values.filter((v) => typeof v === 'number' && !isNaN(v)),\n};\n\nfunction createFields({ source, data, cache, config }) {\n  let headers;\n  let content = data;\n  const parse = config && config.parse;\n  if (Array.isArray(data[0])) {\n    // assume 2d matrix of data\n    if (parse && parse.headers === false) {\n      headers = data[0].map((v, i) => i);\n    } else {\n      headers = data[0];\n      content = data.slice(1);\n    }\n  } else {\n    headers = Object.keys(data[0]);\n  }\n\n  const rowFn = !!parse && typeof parse.row === 'function' && parse.row;\n  let flds = headers;\n\n  if (parse && typeof parse.fields === 'function') {\n    flds = parse.fields(flds.slice());\n  } else {\n    flds = headers.map((h) => ({\n      key: h,\n      title: h,\n    }));\n  }\n\n  let fieldValues;\n  if (Array.isArray(data[0])) {\n    fieldValues = flds.map(() => []);\n  } else {\n    fieldValues = {};\n    flds.forEach((f) => {\n      fieldValues[f.key] = [];\n    });\n  }\n\n  for (let r = 0; r < content.length; r++) {\n    const row = rowFn ? rowFn(content[r], r, flds) : content[r];\n    if (!row) {\n      continue;\n    }\n    if (Array.isArray(row)) {\n      for (let c = 0; c < flds.length; c++) {\n        fieldValues[c].push(row[c]);\n      }\n    } else {\n      for (let c = 0; c < flds.length; c++) {\n        fieldValues[flds[c].key].push(row[flds[c].key]);\n      }\n    }\n  }\n  const fv = Array.isArray(fieldValues) ? (i) => fieldValues[i] : (i) => fieldValues[flds[i].key];\n  for (let c = 0; c < flds.length; c++) {\n    const values = fv(c);\n    const numericValues = filters.numeric(values);\n    const isMeasure = numericValues.length > 0;\n    const type = isMeasure ? 'measure' : 'dimension';\n    const min = isMeasure ? Math.min(...numericValues) : NaN;\n    const max = isMeasure ? Math.max(...numericValues) : NaN;\n\n    cache.fields.push(\n      field(\n        extend(\n          {\n            source,\n            key: c,\n            title: flds[c].title,\n            values,\n            min,\n            max,\n            type,\n          },\n          flds[c]\n        ),\n        {\n          value: flds[c].value,\n          label: flds[c].label,\n        }\n      )\n    );\n  }\n}\n\nconst dsv = ({ data, config }) => {\n  const rows = data.split('\\n');\n  const row0 = rows[0];\n  const row1 = rows[1];\n  let delimiter = ',';\n  if (config && config.parse && config.parse.delimiter) {\n    delimiter = config.parse.delimiter;\n  } else if (row0) {\n    // guess delimiter\n    const guesses = [/,/, /\\t/, /;/];\n    for (let i = 0; i < guesses.length; i++) {\n      const d = guesses[i];\n      if (row0 && row1) {\n        if (d.test(row0) && d.test(row1) && row0.split(d).length === row1.split(d).length) {\n          delimiter = d;\n          break;\n        }\n      } else if (d.test(row0)) {\n        delimiter = d;\n      }\n    }\n  }\n  return rows.map((row) => row.split(delimiter));\n};\n\nconst parseData = ({ key, data, cache, config }) => {\n  if (!data) {\n    return;\n  }\n  let dd = data;\n\n  if (typeof dd === 'string') {\n    // assume dsv\n    dd = dsv({ data, config });\n  }\n\n  if (!Array.isArray(dd)) {\n    return; // warn?\n  }\n\n  createFields({\n    data: dd,\n    cache,\n    source: key,\n    config,\n  });\n};\n\n/**\n * Create a new dataset with default settings\n * @private\n * @return {Dataset}\n */\nfunction ds({ key, data, config } = {}) {\n  const cache = {\n    fields: [],\n  };\n\n  /**\n   * @alias Dataset\n   * @interface\n   */\n  const dataset = {\n    /**\n     * Get the key identifying this dataset\n     * @returns {string}\n     */\n    key: () => key,\n\n    /**\n     * Get the raw data\n     * @returns {any}\n     */\n    raw: () => data,\n\n    /**\n     * Find a field within this dataset\n     * @param {string} query - The field to find\n     * @returns {Field}\n     */\n    field: (query) =>\n      findField(query, {\n        cache,\n        matrix: data,\n      }),\n\n    /**\n     * Get all fields within this dataset\n     * @returns {Array<Field>}\n     */\n    fields: () => cache.fields.slice(),\n\n    /**\n     * Extract data items from this dataset\n     * @param {DataExtraction~Extract|DataFieldExtraction} config\n     * @returns {Array<DatumExtract>}\n     */\n    extract: (cfg) => extract(cfg, dataset, cache),\n\n    /**\n     * @returns {null}\n     */\n    hierarchy: () => null,\n  };\n\n  parseData({\n    key,\n    data,\n    config,\n    cache,\n  });\n\n  return dataset;\n}\n\nds.util = {\n  normalizeConfig: getPropsInfo,\n  collect,\n  track,\n};\n\nexport { ds as default };\n\n/**\n * Callback function. Should return the key to stack by\n * @callback\n * @typedef {function} DataExtraction~StackKeyCallback\n * @param {DatumExtract} datum The extracted datum\n * @returns {any} The data value to stack by\n */\n\n/**\n * Callback function. Should return the data value to stack with\n * @callback\n * @typedef {function} DataExtraction~StackValueCallback\n * @param {DatumExtract} datum The extracted datum\n * @returns {any} The data value to stack with\n */\n\n/**\n * Callback function to filter the extracted data items\n * @callback\n * @typedef {function} DataExtraction~FilterCallback\n * @param {DatumExtract} datum The extracted datum\n * @returns {boolean} Return true if the datum should be included in the final data set\n */\n\n/**\n * Callback function to sort the extracted data items\n * @callback\n * @typedef {function} DataExtraction~SortCallback\n * @param {DatumExtract} a The extracted datum\n * @param {DatumExtract} b The extracted datum\n * @returns {number} If less than 0, sort a before b. If greater than 0, sort b before a\n */\n\n/**\n * Used to extract data from a `DataSource`\n * @typedef {object} DataExtraction\n * @property {DataExtraction~Extract} extract Extract definition\n * @property {object} [stack] If provided, defines how the data should be stacked\n * @property {DataExtraction~StackKeyCallback} stack.stackKey Callback function. Should return the key to stack by\n * @property {DataExtraction~StackValueCallback} stack.value Callback function. Should return the data value to stack with\n * @property {DataExtraction~FilterCallback} [filter] Callback function to filter the extracted data items\n * @property {DataExtraction~SortCallback} [sort] Callback function to sort the extracted data items\n * @example\n{\n  extract: [{\n    source: 'Products',\n    field: 'Product',\n    value: d => d.name,\n    label: d => `<${d.name}>`\n    props: {\n      year: { field: 'Year' }\n      num: { field: 'Sales' }\n    }\n  }],\n  filter: d => d.label !== 'Sneakers', // extract everything except Sneakers\n  sort: (a, b) => a.label > b.label ? -1 : 1, // sort descending\n}\n */\n\n/**\n * @typedef {object} DataFieldExtraction\n * @property {string} source - Which data source to extract from\n * @property {string} field - The field to extract data from\n * @property {DataExtraction~Extract~ValueFn|string|number|boolean} [value] - The field value accessor\n * @property {DataExtraction~Extract~LabelFn|string|number|boolean} [label] - The field label accessor\n * @example\n * {\n *  source: 'Products',\n *  field: 'Sales',\n *  value: (val) => Math.round(val),\n *  label: (val) => `<${val}>`\n * }\n */\n\n/**\n * Data extraction definition. Define how and what kind of data should be extracted from a `DataSource`.\n * @typedef {object} DataExtraction~Extract\n * @property {string} source - Which data source to extract from\n * @property {string} field - The field to extract data from\n * @property {DataExtraction~Extract~ValueFn|string|number|boolean} [value] - The field value accessor\n * @property {DataExtraction~Extract~LabelFn|string|number|boolean} [label] - The field label accessor\n * @property {DataExtraction~Extract~TrackByFn} [trackBy] - Track by value accessor\n * @property {DataExtraction~Extract~ReduceFn|string} [reduce] - Reducer function\n * @property {DataExtraction~Extract~ReduceLabelFn|string} [reduceLabel] - Label reducer function\n * @property {DataExtraction~Extract~FilterFn} [filter] - Filter function\n * @property {object.<string, DataExtraction~Extract~Props>} [props] - Additional properties to add to the extracted item\n * @example\n * {\n    source: 'Products',\n    field: 'Product',\n    value: (val) => val,\n    label: (val) => `<${val}>`\n    props: {\n      year: { field: 'Year' }\n      num: { field: 'Sales' }\n    }\n  }\n */\n\n/**\n * @typedef {object} DataExtraction~Extract~Props\n * @property {string} field - The field to extract data from\n * @property {DataExtraction~Extract~ValueFn|string|number|boolean} [value] - The field value accessor\n * @property {DataExtraction~Extract~LabelFn|string|number|boolean} [label] - The field label accessor\n * @example\n * {\n *  field: 'Sales',\n *  value: (val) => Math.round(val),\n *  label: (val) => `<${val}>`\n * }\n */\n\n/**\n * Value callback function\n * @callback DataExtraction~Extract~ValueFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * Label callback function\n * @callback DataExtraction~Extract~LabelFn\n * @param {any} cell The field cell\n * @returns {string}\n */\n\n/**\n * Filter callback function\n * @callback DataExtraction~Extract~FilterFn\n * @param {any} cell The field cell\n * @returns {boolean}\n */\n\n/**\n * TrackBy callback function\n * @callback DataExtraction~Extract~TrackByFn\n * @param {any} cell The field cell\n * @returns {any}\n */\n\n/**\n * Reduce callback function\n * @callback DataExtraction~Extract~ReduceFn\n * @param {any[]} values The collected values to reduce\n * @returns {any}\n */\n\n/**\n * ReduceLabel callback function\n * @callback DataExtraction~Extract~ReduceLabelFn\n * @param {any[]} labels The collected labels to reduce\n * @param {any} value Reduced value\n * @returns {string}\n */\n\n/**\n * @typedef {object} DatumExtract\n * @property {any} value - The extracted value\n * @property {string} label - The extracted value as a string\n * @property {object} source - The data source of the extracted data\n * @property {string} source.key - The data-source key\n * @property {string} source.field - The source field\n */\n","import registry from '../utils/registry';\nimport dataset from './dataset';\n\nconst dataRegistry = registry();\n\ndataRegistry.default('matrix');\n\ndataRegistry('matrix', dataset);\n\ndataRegistry('default', dataset); // deprecated\n\nexport { dataRegistry as default };\n","/**\n * Manages event handlers for native events\n * @private\n */\nfunction native(chart, mediator, element) {\n  let instance = { chart, mediator, element };\n  let nativeEvents = [];\n  let settings;\n  let itKey;\n  let isOn = true;\n\n  /**\n   * Set default settings\n   * @private\n   */\n  function setDefaultSettings(newSettings) {\n    itKey = newSettings.key;\n    settings = newSettings;\n    settings.events = settings.events || [];\n    if (settings.enable === undefined) {\n      settings.enable = true;\n    }\n  }\n\n  /**\n   * Add native events based on settings\n   * @private\n   */\n  function addEvents() {\n    if (typeof settings.enable === 'function') {\n      settings.enable = settings.enable.bind(instance)();\n    }\n    if (!settings.enable) {\n      return; // interaction is disabled\n    }\n    Object.keys(settings.events).forEach((key) => {\n      const listener = settings.events[key].bind(instance);\n      element.addEventListener(key, listener);\n      nativeEvents.push({ key, listener });\n    });\n  }\n\n  /**\n   * Removes all added native events\n   * @private\n   */\n  function removeAddedEvents() {\n    // remove added native events\n    nativeEvents.forEach(({ key, listener }) => {\n      element.removeEventListener(key, listener);\n    });\n    nativeEvents = [];\n  }\n\n  return {\n    /**\n     * Getter for the key.\n     * @private\n     */\n    get key() {\n      return itKey;\n    },\n    /**\n     * Updates this with new settings\n     * @private\n     * @param {object} newSettings\n     * @param {string} [newSettings.type] - The interaction type. Is 'native' for this component\n     * @param {boolean|function} [newSettings.enable=true] - Should the interactions defined here be enabled or not.\n     * This is only run when adding event handlers. In effect at startup, update or during on/off.\n     * It does not run during every event loop.\n     * @param {array} [newSettings.gestures] - The keys in this object is the names of native events\n     * that should be added to the chart element and they should all point to function which\n     * will be the corresponding event handler.\n     */\n    set(newSettings) {\n      setDefaultSettings(newSettings);\n      removeAddedEvents();\n      if (isOn) {\n        addEvents();\n      }\n    },\n    /**\n     * Turns off interactions\n     * @private\n     */\n    off() {\n      isOn = false;\n      removeAddedEvents();\n    },\n    /**\n     * Turns off interactions\n     * @private\n     */\n    on() {\n      isOn = true;\n      if (nativeEvents.length === 0) {\n        addEvents();\n      }\n    },\n    /**\n     * Destroys and unbinds all event handlers\n     * @private\n     */\n    destroy() {\n      removeAddedEvents();\n      instance = null;\n      settings = null;\n    },\n  };\n}\n\nexport { native as default };\n","import registry from '../utils/registry';\nimport native from '../../web/interactions/native';\n\n/**\n * @interface InteractionSettings\n * @property {string} type Type of interaction handler\n * @property {string} [key] Unique key identifying the handler\n * @property {function|boolean} enable Enable or disable the interaction handler. If a callback function is provided, it must return either true or false\n * @example\n * {\n *  type: 'native',\n *  key: 'nativeHandler',\n *  enable: () => true,\n *  events: { // \"events\" is a property specific to the native handler\n *    mousemove: (e) => console.log('mousemove', e),\n *  }\n * }\n */\n\nconst reg = registry();\n\nreg('native', native);\n\nexport default reg;\n","/**\n * Short-hand for max(min())\n *\n * @param {number} min Minimum allowed value\n * @param {number} max Maximum allowed value\n * @param {number} value The actual value to cap\n * @ignore\n */\nexport function cap(min, max, value) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Resolve a diff, i.e. resolveDiff(0.2, 0.6, 1, 100) = 20\n *\n * @param {object} params parameters\n * @param {number} params.start Normalized start value\n * @param {number} params.end Normalized end value\n * @param {number} params.minPx The minimum number of pixels\n * @param {number} params.maxPx Maximum number of pixels, i.e. the width or height\n * @ignore\n */\nexport function resolveDiff({ start, end, minPx = 0.1, maxPx = 1 }) {\n  const high = Math.max(start, end);\n  const low = Math.min(start, end);\n  const highModified = cap(-0.1, 1.2, high);\n  const lowModified = cap(-0.1, 1.2, low);\n\n  const wantedDiff = highModified * maxPx - lowModified * maxPx;\n  const actualDiff = Math.max(minPx, wantedDiff);\n  const startModifier = (actualDiff - wantedDiff) / 2;\n  const actualLow = lowModified * maxPx - startModifier;\n\n  return {\n    actualDiff,\n    startModifier,\n    actualLow,\n  };\n}\n","import extend from 'extend';\nimport { resolveDiff } from './box-math';\n\n/**\n * Out of bounds shape\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {number} params.value 0 or 1 depending on where to render the oob shape\n * @param {number} params.boxWidth Un-calculated box width in relative/normalized format\n * @param {number} params.boxPadding Un-calculated box padding in relative/normalized format\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY Wether or not to flip X and Y coordinates together with Width and Height\n * @param {function} params.symbol Symbol library function from component\n * @ignore\n */\nexport function oob({ item, value, boxCenter, rendWidth, rendHeight, flipXY, symbol }) {\n  let x = 'x';\n  let y = 'y';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n  let startAngle = value < 0.5 ? 90 : -90;\n\n  if (flipXY) {\n    x = 'y';\n    y = 'x';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n    startAngle = value < 0.5 ? 180 : 0;\n  }\n\n  return symbol(\n    extend({}, item.oob, {\n      [x]: boxCenter * calcwidth,\n      [y]: Math.max(item.oob.size / 2, Math.min(value * calcheight, calcheight - item.oob.size / 2)),\n      startAngle,\n    })\n  );\n}\n\n/**\n * Box shape calculation function\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {number} params.boxWidth Un-calculated box width in relative/normalized format\n * @param {number} params.boxPadding Un-calculated box padding in relative/normalized format\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY wether or not to flip X and Y coordinates together with Width and Height\n * @ignore\n */\nexport function box({ item, boxWidth, boxPadding, rendWidth, rendHeight, flipXY }) {\n  let x = 'x';\n  let y = 'y';\n  let width = 'width';\n  let height = 'height';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n\n  if (flipXY) {\n    x = 'y';\n    y = 'x';\n    width = 'height';\n    height = 'width';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n  }\n\n  const { actualDiff, actualLow } = resolveDiff({\n    start: item.start,\n    end: item.end,\n    minPx: item.box.minHeightPx,\n    maxPx: calcheight,\n  });\n\n  return extend({}, item.box, {\n    type: 'rect',\n    [x]: (boxPadding + item.major) * calcwidth,\n    [y]: actualLow,\n    [height]: actualDiff,\n    [width]: boxWidth * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null,\n    },\n  });\n}\n\n/**\n * A vertical line shape (for start - min, end - max values)\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {number} params.from Normalized from value\n * @param {number} params.to Normalized to value\n * @param {number} params.boxCenter Center coordinate for the box\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY wether or not to flip X and Y coordinates together with Width and Height\n * @ignore\n */\nexport function verticalLine({ item, from, to, boxCenter, rendWidth, rendHeight, flipXY }) {\n  let x1 = 'x1';\n  let y1 = 'y1';\n  let x2 = 'x2';\n  let y2 = 'y2';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n\n  if (flipXY) {\n    x1 = 'y1';\n    y1 = 'x1';\n    x2 = 'y2';\n    y2 = 'x2';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n  }\n\n  return extend({}, item.line, {\n    type: 'line',\n    [y2]: Math.floor(from * calcheight),\n    [x1]: boxCenter * calcwidth,\n    [y1]: Math.floor(to * calcheight),\n    [x2]: boxCenter * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null,\n    },\n  });\n}\n\n/**\n * A horizontal line shape (for median and whiskers)\n * @param {object} params parameters\n * @param {object} params.item Resolved styling item from box component with item.major\n * @param {string} params.key Which key to use as style base in the item object\n * @param {number} params.position At which \"height\" (X) to position the horizontal line\n * @param {number} params.width Width of the horizontal line (i.e. box width or a multiple of it)\n * @param {number} params.boxCenter Center coordinate for the box\n * @param {number} params.rendWidth The pixel width of the area to render upon\n * @param {number} params.rendHeight The pixel height of the area to render upon\n * @param {boolean} params.flipXY wether or not to flip X and Y coordinates together with Width and Height\n * @ignore\n */\nexport function horizontalLine({ item, key, position, width, boxCenter, rendWidth, rendHeight, flipXY }) {\n  let x1 = 'x1';\n  let y1 = 'y1';\n  let x2 = 'x2';\n  let y2 = 'y2';\n  let calcwidth = rendWidth;\n  let calcheight = rendHeight;\n\n  if (flipXY) {\n    x1 = 'y1';\n    y1 = 'x1';\n    x2 = 'y2';\n    y2 = 'x2';\n    calcwidth = rendHeight;\n    calcheight = rendWidth;\n  }\n\n  const halfWidth = width / 2;\n\n  return extend({ type: 'line' }, item[key], {\n    [y1]: Math.floor(position * calcheight),\n    [x1]: (boxCenter - halfWidth) * calcwidth,\n    [y2]: Math.floor(position * calcheight),\n    [x2]: (boxCenter + halfWidth) * calcwidth,\n    r: halfWidth * calcwidth,\n    cx: boxCenter * calcwidth,\n    cy: position * calcheight,\n    width: width * calcwidth,\n    data: item.data || {},\n    collider: {\n      type: null,\n    },\n  });\n}\n\n/**\n * A horizontal line shape (for median and whiskers)\n * @param {number} bandwidth The current bandwidth for this item\n * @param {object} item A resolved style item to render with major and box width variables, minWidthPx and maxWidthPx\n * @param {number} maxMajorWidth The actual maximum major width\n * @ignore\n */\nexport function getBoxWidth(bandwidth, item, maxMajorWidth) {\n  const { width, maxWidthPx, minWidthPx } = item.box;\n  const sign = bandwidth >= 0 ? 1 : -1;\n  let boxWidth = Math.min(sign * bandwidth * width, isNaN(maxWidthPx) ? maxMajorWidth : maxWidthPx / maxMajorWidth);\n  boxWidth = isNaN(minWidthPx) ? boxWidth : Math.max(minWidthPx / maxMajorWidth, boxWidth);\n  return boxWidth * sign;\n}\n","import extend from 'extend';\nimport * as boxShapesHelper from './box-shapes-helper';\n\nimport { isNumber } from '../../utils/is-number';\n\nexport default function buildShapes({ width, height, flipXY, resolved, keys, symbol }) {\n  // if (!settings || !settings.major || !settings.major.scale || !settings.minor || !settings.minor.scale) {\n  //   return [];\n  // }\n\n  const output = [];\n  const majorItems = resolved.major.items;\n\n  if (!majorItems.length) {\n    return output;\n  }\n\n  const rendWidth = width;\n  const rendHeight = height;\n  const maxMajorWidth = flipXY ? height : width;\n  const majorSettings = resolved.major.settings;\n  const minorProps = ['start', 'end', 'min', 'max', 'med'].filter(\n    (prop) => typeof resolved.minor.settings[prop] !== 'undefined'\n  );\n  const numMinorProps = minorProps.length;\n  const nonOobKeys = keys.filter((key) => key !== 'oob');\n\n  let children;\n  let major;\n  let minorItem;\n  let boxWidth;\n  let boxPadding;\n  let boxCenter;\n  let isLowerOutOfBounds;\n  let isHigherOutOfBounds;\n  let isOutOfBounds;\n  const numKeys = keys ? keys.length : 0;\n  const numNonOobKeys = nonOobKeys ? nonOobKeys.length : 0;\n\n  function addBox() {\n    /* THE BOX */\n    if (minorItem.box && isNumber(minorItem.start) && isNumber(minorItem.end)) {\n      children.push(\n        boxShapesHelper.box({\n          item: minorItem,\n          boxWidth,\n          boxPadding,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n  }\n\n  function addLine() {\n    /* LINES MIN - START, END - MAX */\n    if (isNumber(minorItem.min) && isNumber(minorItem.start)) {\n      children.push(\n        boxShapesHelper.verticalLine({\n          item: minorItem,\n          from: minorItem.min,\n          to: minorItem.start,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n\n    if (isNumber(minorItem.max) && isNumber(minorItem.end)) {\n      children.push(\n        boxShapesHelper.verticalLine({\n          item: minorItem,\n          from: minorItem.max,\n          to: minorItem.end,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n  }\n\n  function addMedian() {\n    /* MEDIAN */\n    if (minorItem.median && isNumber(minorItem.med)) {\n      children.push(\n        boxShapesHelper.horizontalLine({\n          item: minorItem,\n          key: 'median',\n          position: minorItem.med,\n          width: boxWidth,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n        })\n      );\n    }\n  }\n\n  function addWhisker() {\n    /* WHISKERS */\n    if (minorItem.whisker) {\n      const whiskerWidth = boxWidth * minorItem.whisker.width;\n\n      if (isNumber(minorItem.min)) {\n        children.push(\n          boxShapesHelper.horizontalLine({\n            item: minorItem,\n            key: 'whisker',\n            position: minorItem.min,\n            width: whiskerWidth,\n            boxCenter,\n            rendWidth,\n            rendHeight,\n            flipXY,\n          })\n        );\n      }\n\n      if (isNumber(minorItem.max)) {\n        children.push(\n          boxShapesHelper.horizontalLine({\n            item: minorItem,\n            key: 'whisker',\n            position: minorItem.max,\n            width: whiskerWidth,\n            boxCenter,\n            rendWidth,\n            rendHeight,\n            flipXY,\n          })\n        );\n      }\n    }\n  }\n\n  function addOutOfBounds() {\n    /* OUT OF BOUNDS */\n    if (isLowerOutOfBounds) {\n      children.push(\n        boxShapesHelper.oob({\n          item: minorItem,\n          value: 0,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n          symbol,\n        })\n      );\n    } else if (isHigherOutOfBounds) {\n      children.push(\n        boxShapesHelper.oob({\n          item: minorItem,\n          value: 1,\n          boxCenter,\n          rendWidth,\n          rendHeight,\n          flipXY,\n          symbol,\n        })\n      );\n    }\n  }\n\n  const addMarkerList = {\n    box: addBox,\n    line: addLine,\n    median: addMedian,\n    whisker: addWhisker,\n  };\n\n  function checkOutOfBounds() {\n    let value;\n    let max = -Number.MAX_VALUE;\n    let min = Number.MAX_VALUE;\n    for (let n = 0; n < numMinorProps; n++) {\n      value = minorItem[minorProps[n]];\n      if (isNumber(value)) {\n        if (max < value) {\n          max = value;\n        }\n        if (min > value) {\n          min = value;\n        }\n      }\n    }\n    isLowerOutOfBounds = max < 0 && max !== -Number.MAX_VALUE;\n    isHigherOutOfBounds = min > 1 && min !== Number.MAX_VALUE;\n    isOutOfBounds = isLowerOutOfBounds || isHigherOutOfBounds;\n  }\n\n  for (let i = 0, len = majorItems.length; i < len; i++) {\n    children = [];\n    major = null;\n    const majorItem = majorItems[i];\n    const d = majorItem.data;\n\n    let majorVal = null;\n    let majorEndVal = null;\n\n    if (typeof majorSettings.binStart !== 'undefined') {\n      // if start and end is defined\n      majorVal = majorItem.binStart;\n      majorEndVal = majorItem.binEnd;\n      major = majorSettings.binStart.scale;\n    } else {\n      major = majorSettings.major.scale;\n      majorVal = major ? majorItem.major : 0;\n    }\n\n    let bandwidth = 0;\n    if (!major) {\n      bandwidth = 1;\n    } else if (major.bandwidth) {\n      bandwidth = major.bandwidth();\n      majorVal -= bandwidth / 2;\n    } else {\n      bandwidth = majorEndVal - majorVal;\n    }\n\n    minorItem = extend(\n      {},\n      {\n        major: majorVal,\n        majorEnd: majorEndVal,\n      },\n      resolved.minor.items[i]\n    );\n\n    for (let j = 0; j < numKeys; j++) {\n      minorItem[keys[j]] = resolved[keys[j]].items[i];\n    }\n\n    boxWidth = boxShapesHelper.getBoxWidth(bandwidth, minorItem, maxMajorWidth);\n    boxPadding = (bandwidth - boxWidth) / 2;\n    boxCenter = boxPadding + minorItem.major + boxWidth / 2;\n\n    checkOutOfBounds();\n\n    if (!isOutOfBounds) {\n      for (let k = 0; k < numNonOobKeys; k++) {\n        if (minorItem[nonOobKeys[k]] && minorItem[nonOobKeys[k]].show === false) {\n          continue;\n        }\n        addMarkerList[nonOobKeys[k]]();\n      }\n    } else if (minorItem.oob) {\n      addOutOfBounds();\n    }\n\n    const container = {\n      type: 'container',\n      data: d,\n      collider: { type: 'bounds' },\n      children,\n    };\n\n    output.push(container);\n  }\n\n  return output;\n}\n","import extend from 'extend';\n\n/**\n * Resolve a complex object using the built-in resolver from this.resolver in component\n * @ignore\n */\nexport default function complexResolver({ keys, data, defaultSettings, style, settings, width, height, resolver }) {\n  const defaults = extend(true, {}, defaultSettings || {}, style || {});\n  const scaled = {\n    major: settings.orientation === 'horizontal' ? height : width,\n    minor: settings.orientation === 'horizontal' ? width : height,\n  };\n\n  const majorSettings = settings.major;\n\n  let majorResolved;\n\n  if (\n    typeof majorSettings === 'object' &&\n    typeof majorSettings.ref === 'object' &&\n    typeof majorSettings.ref.start !== 'undefined' &&\n    typeof majorSettings.ref.end !== 'undefined'\n  ) {\n    // temporary backwards compatibility\n    majorResolved = resolver.resolve({\n      data,\n      defaults: {\n        start: 0,\n        end: 1,\n      },\n      scaled,\n      settings: extend(\n        true,\n        {},\n        {\n          binStart: { scale: settings.major.scale, ref: settings.major.ref.start },\n          binEnd: { scale: settings.major.scale, ref: settings.major.ref.end },\n        }\n      ),\n    });\n  } else if (\n    typeof majorSettings === 'object' &&\n    typeof majorSettings.binStart !== 'undefined' &&\n    typeof majorSettings.binEnd !== 'undefined'\n  ) {\n    majorResolved = resolver.resolve({\n      data,\n      defaults: {\n        start: 0,\n        end: 1,\n      },\n      scaled,\n      settings: extend(\n        true,\n        {},\n        {\n          binStart: { scale: settings.major.scale, ref: 'binStart' },\n          binEnd: { scale: settings.major.scale, ref: 'binEnd' },\n        },\n        settings.major\n      ),\n    });\n  } else {\n    majorResolved = resolver.resolve({\n      data,\n      scaled,\n      defaults: {\n        major: 0.5,\n      },\n      settings: {\n        major: settings.major,\n      },\n    });\n  }\n\n  const minorSettings = settings.minor || {};\n  const defaultMinorSettings = {};\n  ['start', 'end', 'min', 'max', 'med'].forEach((prop) => {\n    if (minorSettings[prop] || (data.items && data.items.length && data.items[0][prop])) {\n      defaultMinorSettings[prop] = { scale: minorSettings.scale, ref: prop };\n    }\n  });\n\n  const minorResolved = resolver.resolve({\n    data,\n    defaults: {\n      start: 0,\n      end: 1,\n    },\n    scaled,\n    settings: extend(true, {}, defaultMinorSettings, minorSettings),\n  });\n\n  let key;\n  let ext = {\n    major: majorResolved,\n    minor: minorResolved,\n  };\n\n  for (let ki = 0, len = keys.length; ki < len; ki++) {\n    if (!settings[key] || settings[key].show !== false) {\n      key = keys[ki];\n      ext[key] = resolver.resolve({\n        data,\n        defaults: defaults[key],\n        settings: settings[key],\n        scaled,\n      });\n    }\n  }\n\n  return ext;\n}\n","import buildShapes from './box-shapes';\nimport complexResolver from './box-resolver';\n\nconst DEFAULT_DATA_SETTINGS = {\n  oob: {\n    show: true,\n    type: 'n-polygon',\n    fill: '#999',\n    stroke: '#000',\n    strokeWidth: 0,\n    size: 10,\n    sides: 3,\n    startAngle: -90,\n  },\n  box: {\n    show: true,\n    fill: '#fff',\n    stroke: '#000',\n    strokeWidth: 1,\n    strokeLinejoin: 'miter',\n    width: 1,\n    maxWidthPx: undefined,\n    minWidthPx: 1,\n    minHeightPx: 1,\n  },\n  line: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n  },\n  median: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n  },\n  whisker: {\n    show: true,\n    stroke: '#000',\n    strokeWidth: 1,\n    fill: '',\n    type: 'line',\n    width: 1,\n  },\n};\n\nconst dataKeys = Object.keys(DEFAULT_DATA_SETTINGS);\n\nconst component = {\n  require: ['chart', 'resolver', 'symbol'],\n  defaultSettings: {\n    settings: {},\n    data: {},\n    style: {\n      box: '$shape',\n      line: '$shape-guide',\n      whisker: '$shape-guide',\n      median: '$shape-guide--inverted',\n    },\n  },\n  created() {\n    this.state = {};\n  },\n  render({ data }) {\n    const { width, height } = this.rect;\n\n    const flipXY = this.settings.settings.orientation === 'horizontal';\n\n    const { style, resolver, symbol } = this;\n\n    const keys = dataKeys.filter((key) => !this.settings.settings[key] || this.settings.settings[key].show !== false);\n    const defaultSettings = {};\n\n    keys.forEach((key) => (defaultSettings[key] = DEFAULT_DATA_SETTINGS[key]));\n\n    const resolved = complexResolver({\n      keys,\n      data,\n      defaultSettings,\n      style,\n      settings: this.settings.settings,\n      width,\n      height,\n      resolver,\n    });\n\n    const { settings, items } = resolved;\n\n    const shapes = buildShapes({\n      items,\n      settings,\n      width,\n      height,\n      flipXY,\n      resolved,\n      keys,\n      symbol,\n    });\n\n    return shapes;\n  },\n};\n\nexport default component;\n","import component from './box';\n\nexport default function box(picasso) {\n  picasso.component('box', component);\n  picasso.component('box-marker', component); // temporary backwards compatibility - DEPRECATED\n}\n\n/**\n * @typedef {object} ComponentBox\n * @extends ComponentSettings\n * @example\n * {\n *   type: \"box\",\n *   data: {\n *    mapTo: {\n *      min: { source: \"/qHyperCube/qMeasureInfo/0\" },\n *      start: { source: \"/qHyperCube/qMeasureInfo/1\" },\n *      med: { source: \"/qHyperCube/qMeasureInfo/2\" },\n *      end: { source: \"/qHyperCube/qMeasureInfo/3\" },\n *      max: { source: \"/qHyperCube/qMeasureInfo/4\" },\n *    },\n *    groupBy: {\n *      source: \"/qHyperCube/qDimensionInfo/0\"\n *    }\n *  },\n *  settings: {\n *    major: {\n *      scale: { source: \"/qHyperCube/qDimensionInfo/0\" }\n *    },\n *    minor: {\n *      scale: { source: [\"/qHyperCube/qMeasureInfo/0\",\n *               \"/qHyperCube/qMeasureInfo/1\",\n *               \"/qHyperCube/qMeasureInfo/2\",\n *               \"/qHyperCube/qMeasureInfo/3\",\n *               \"/qHyperCube/qMeasureInfo/4\"] }\n *    }\n *  }\n * }\n */\n\n/**\n * @typedef {object} ComponentBox.settings\n * @property {object} major\n * @property {string} major.scale The scale to use along the major (dimension) axis\n * @property {string|ComponentBox~MajorReference} [major.ref='self'] Reference to the data property along the major axis\n * @property {object} minor\n * @property {string} minor.scale The scale to use along the minor (measure) axis\n * @property {string} [orientation='vertical'] Which orientation to use (vertical or horizontal)\n * @property {object} [box] Visual properties for the box shape in the box marker\n * @property {boolean} [box.show=true] Boolean for showing the box shape\n * @property {string} [box.fill='#fff']\n * @property {string} [box.stroke='#000']\n * @property {number} [box.strokeWidth=1]\n * @property {string} [box.strokeLinejoin='miter']\n * @property {number} [box.width=1]\n * @property {number} [box.maxWidthPx=100] Maximum width of the box in pixels (not applicable when using major start and end)\n * @property {number} [box.minWidthPx=1] Minimum width of the box in pixels (not applicable when using major start and end)\n * @property {number} [box.minHeightPx=1] Minimum height of the box shape\n * @property {object} [line] Visual properties for lines between min-start, end-max.\n * @property {boolean} [line.show=true]\n * @property {string} [line.stroke='#000']\n * @property {number} [line.strokeWidth=1]\n * @property {object} [whisker] All the visual properties for whiskers at min and max.\n * @property {boolean} [whisker.show=true]\n * @property {string} [whisker.stroke='#000']\n * @property {number} [whisker.strokeWidth=1]\n * @property {number} [whisker.width=1]\n * @property {object} [median] Visual properties for the median\n * @property {boolean} [median.show=true]\n * @property {string} [median.stroke='#000']\n * @property {number} [median.strokeWidth=1]\n * @property {object} [oob] EXPERIMENTAL: Out of bounds symbol utilizing the symbol API\n * @property {boolean} [oob.show=true]\n * @property {string} [oob.type='n-polygon'] Type of the symbol to be used\n * @property {string} [oob.fill='#999'] Fill color of the symbol\n * @property {string} [oob.stroke='#000'] Stroke color\n * @property {number} [oob.strokeWidth=0] Stroke width\n * @property {number} [oob.size=10] Size/width of the symbol in pixels\n * @property {number} [oob.sides=3] Number of sides for a n-polygon (3 for triangle)\n */\n\n/**\n * @typedef {object} ComponentBox~MajorReference\n * @property {string} start Reference to the data property of the start value along the major axis\n * @property {string} end Reference to the data property of the end value along the major axis\n */\n\n/**\n * @typedef {object} ComponentBox.data\n * @property {number} [min] Min\n * @property {number} [max] Max\n * @property {number} [start] Start of box\n * @property {number} [end] End of box\n * @property {number} [med] Median\n */\n","import extend from 'extend';\nimport { notNumber } from '../../utils/is-number';\n\nconst DEFAULT_ERROR_SETTINGS = {\n  errorShape: {\n    shape: 'saltire',\n    width: 2,\n    size: 0.5,\n    fill: '#333',\n    stroke: '#333',\n    strokeWidth: 0,\n  },\n};\n\nconst PX_RX = /px$/;\n\n/**\n * Component settings\n * @typedef {object}\n * @alias ComponentPoint.settings\n */\nconst DEFAULT_DATA_SETTINGS = {\n  /** Type of shape\n   * @type {DatumString=} */\n  shape: 'circle',\n  /** Label\n   * @type {DatumString=} */\n  label: '',\n  /** Fill color\n   * @type {DatumString=} */\n  fill: '#333',\n  /** Stroke color\n   * @type {DatumString=} */\n  stroke: '#ccc',\n  /** Stroke dash array\n   * @type {DatumString=} */\n  strokeDasharray: '',\n  /** Stroke width\n   * @type {DatumNumber=} */\n  strokeWidth: 0,\n  /** Stroke line join\n   * @type {DatumString=} */\n  strokeLinejoin: 'miter',\n  /** Opacity of shape\n   * @type {DatumNumber=} */\n  opacity: 1,\n  /** Normalized x coordinate\n   * @type {DatumNumber=} */\n  x: 0.5,\n  /** Normalized y coordinate\n   * @type {DatumNumber=} */\n  y: 0.5,\n  /** Normalized size of shape\n   * @type {DatumNumber=} */\n  size: 1,\n  /** Whether or not to show the point\n   * @type {DatumBoolean=} */\n  show: true,\n};\n\n/**\n * @typedef {object}\n * @alias ComponentPoint.settings.sizeLimits\n */\nconst SIZE_LIMITS = {\n  /** Maximum size of shape, in pixels\n   * @type {number=} */\n  maxPx: 10000,\n  /** Minimum size of shape, in pixels\n   * @type {number=} */\n  minPx: 1,\n  /** Maximum size relative linear scale extent\n   * @type {number=} */\n  maxRelExtent: 0.1,\n  /** Minimum size relative linear scale extent\n   * @type {number=} */\n  minRelExtent: 0.01,\n  /** Maximum size relative discrete scale banwidth\n   * @type {number=} */\n  maxRelDiscrete: 1,\n  /** Minimum size relative discrete scale banwidth\n   * @type {number=} */\n  minRelDiscrete: 0.1,\n};\n\nfunction getPxSpaceFromScale(s, space) {\n  if (s && typeof s.bandwidth === 'function') {\n    // some kind of ordinal scale\n    return {\n      isBandwidth: true,\n      value: Math.max(1, s.bandwidth() * space),\n    };\n  }\n  return {\n    isBandwidth: false,\n    value: Math.max(1, space),\n  };\n}\n\nfunction getPointSizeLimits(x, y, width, height, limits) {\n  const xSpacePx = getPxSpaceFromScale(x ? x.scale : undefined, width, limits);\n  const ySpacePx = getPxSpaceFromScale(y ? y.scale : undefined, height, limits);\n  let maxSizePx = Math.min(\n    xSpacePx.value * limits[xSpacePx.isBandwidth ? 'maxRelDiscrete' : 'maxRelExtent'],\n    ySpacePx.value * limits[ySpacePx.isBandwidth ? 'maxRelDiscrete' : 'maxRelExtent']\n  );\n  let minSizePx = Math.min(\n    xSpacePx.value * limits[xSpacePx.isBandwidth ? 'minRelDiscrete' : 'minRelExtent'],\n    ySpacePx.value * limits[ySpacePx.isBandwidth ? 'minRelDiscrete' : 'minRelExtent']\n  );\n  const min = Math.max(1, Math.floor(minSizePx));\n  const max = Math.max(1, Math.floor(maxSizePx));\n  return {\n    min,\n    max,\n    maxGlobal: limits.maxPx,\n    minGlobal: limits.minPx,\n  };\n}\n\nfunction getType(s) {\n  let type = DEFAULT_DATA_SETTINGS.shape;\n  let props = {};\n  if (typeof s.shape === 'object' && typeof s.shape.type === 'string') {\n    type = s.shape.type;\n    props = s.shape;\n  } else if (typeof s.shape === 'string') {\n    type = s.shape;\n  }\n  type = type === 'rect' ? 'square' : type;\n\n  return [type, props];\n}\n\nfunction createDisplayPoints(dataPoints, { width, height }, pointSize, shapeFn) {\n  return dataPoints\n    .filter((p) => p.show !== false && !isNaN(p.x + p.y))\n    .map((p) => {\n      let s = p;\n      let size = PX_RX.test(p.size) ? parseInt(p.size, 10) : pointSize.min + s.size * (pointSize.max - pointSize.min);\n      if (notNumber(size)) {\n        s = DEFAULT_ERROR_SETTINGS.errorShape;\n        size = pointSize.min + s.size * (pointSize.max - pointSize.min);\n      }\n\n      const [type, typeProps] = getType(s);\n      const shapeSpec = {\n        ...typeProps,\n        type,\n        label: p.label,\n        x: p.x * width,\n        y: p.y * height,\n        fill: s.fill,\n        size: Math.min(pointSize.maxGlobal, Math.max(pointSize.minGlobal, size)),\n        stroke: s.stroke,\n        strokeWidth: s.strokeWidth,\n        strokeDasharray: s.strokeDasharray,\n        opacity: s.opacity,\n      };\n      if (s === p.errorShape) {\n        shapeSpec.width = s.width;\n      }\n      const shape = shapeFn(shapeSpec);\n\n      shape.data = p.data;\n      return shape;\n    });\n}\n\nconst component = {\n  require: ['chart', 'resolver', 'symbol'],\n  defaultSettings: {\n    settings: {},\n    data: {},\n    animations: {\n      enabled: false,\n      trackBy: (node) => node.data.value,\n    },\n    style: {\n      item: '$shape',\n    },\n  },\n  render({ data }) {\n    const resolved = this.resolver.resolve({\n      data,\n      defaults: extend({}, DEFAULT_DATA_SETTINGS, this.style.item),\n      settings: this.settings.settings,\n      scaled: {\n        x: this.rect.width,\n        y: this.rect.height,\n      },\n    });\n    const { width, height } = this.rect;\n    const limits = extend({}, SIZE_LIMITS, this.settings.settings.sizeLimits);\n    const points = resolved.items;\n    const pointSize = getPointSizeLimits(resolved.settings.x, resolved.settings.y, width, height, limits);\n    return createDisplayPoints(points, this.rect, pointSize, this.settings.shapeFn || this.symbol);\n  },\n};\n\nexport default component;\n","import pointMarkerComponent from './point';\n\n/**\n * @typedef {object} ComponentPoint\n * @extends ComponentSettings\n * @example\n{\n  type: 'point',\n  data: {\n    extract: {\n      field: 'Month',\n      props: {\n        x: { field: 'Margin' },\n        y: { field: 'Year' }\n      }\n    }\n  },\n  settings: {\n    x: { scale: 'm' },\n    y: { scale: 'y' },\n  }\n}\n */\n\nconst type = 'point';\n\nexport default function pointMarker(picasso) {\n  picasso.component(type, pointMarkerComponent);\n\n  picasso.component('point-marker', pointMarkerComponent); // temporary backwards compatibility - DEPRECATED\n}\n","import extend from 'extend';\nimport { pie, arc } from 'd3-shape';\n\n/**\n * Component settings\n * @typedef {object}\n * @alias ComponentPie.settings\n */\nconst DEFAULT_DATA_SETTINGS = {\n  /** Start angle of the pie, in radians\n   * @type {number=} */\n  startAngle: 0,\n  /** End angle of the pie, in radians\n   * @type {number=} */\n  endAngle: 2 * Math.PI,\n  /**\n   * @typedef {object}\n   */\n  slice: {\n    label: '',\n    /** Absolute value of the slice's arc length\n     * @type {number=} */\n    arc: 1,\n    /** Visibility of the slice\n     * @type {boolean=} */\n    show: true,\n    /** Fill color of the slice\n     * @type {string=} */\n    fill: '#333',\n    /** Stroke color of the slice\n     * @type {string=} */\n    stroke: '#ccc',\n    /** Stroke width of the slice\n     * @type {number=} */\n    strokeWidth: 1,\n    /** Stroke line join\n     * @type {string=} */\n    strokeLinejoin: 'round',\n    /** Opacity of the slice\n     * @type {number=} */\n    opacity: 1,\n    /** Inner radius of the slice\n     * @type {number=} */\n    innerRadius: 0,\n    /** Outer radius of the slice\n     * @type {number=} */\n    outerRadius: 0.8,\n    /** Corner radius of the slice, in pixels\n     * @type {number=} */\n    cornerRadius: 0,\n    /** Radial offset of the slice\n     * @type {number=} */\n    offset: 0,\n  },\n};\n\n/**\n * @typedef {object} ComponentPie\n * @extends ComponentSettings\n * @example\n * {\n *   type: 'pie',\n *   data: {\n *     extract: {\n *       field: 'Region',\n *       props: {\n *         num: { field: 'Population' }\n *       }\n *     }\n *   },\n *   settings: {\n *     startAngle: Math.PI / 2,\n *     endAngle: -Math.PI / 2,\n *     slice: {\n *       arc: { ref: 'num' },\n *       fill: 'green',\n *       stroke: 'red',\n *       strokeWidth: 2,\n *       strokeLinejoin: 'round',\n *       innerRadius: 0.6,\n *       outerRadius 0.8,\n *       opacity: 0.8,\n *       offset: 0.2\n *     }\n *   }\n * }\n */\n\nfunction offsetSlice(centroid, offset, outerRadius, innerRadius) {\n  let [vx, vy] = centroid;\n  const vlen = Math.sqrt(vx * vx + vy * vy);\n  vx /= vlen;\n  vy /= vlen;\n  const diff = outerRadius - innerRadius;\n  return { x: vx * offset * diff, y: vy * offset * diff };\n}\n\nfunction createDisplayPies(arcData, { x, y, width, height }, slices, sum) {\n  const arcGen = arc();\n  const center = { x: x + width / 2, y: y + height / 2 };\n  const innerRadius = Math.min(width, height) / 2;\n  const outerRadius = Math.min(width, height) / 2;\n  const cornerRadius = outerRadius / 100;\n  return arcData.map((a, i) => {\n    const slice = slices[i];\n    slice.type = 'path';\n    const or = outerRadius * slice.outerRadius;\n    const ir = innerRadius * slice.innerRadius;\n    arcGen.innerRadius(ir);\n    arcGen.outerRadius(or);\n    arcGen.cornerRadius(cornerRadius * slice.cornerRadius);\n    slice.d = arcGen(a);\n    const centroid = arcGen.centroid(a);\n    const offset = slice.offset ? offsetSlice(centroid, slice.offset, or, ir) : { x: 0, y: 0 };\n    slice.transform = `translate(${offset.x}, ${offset.y}) translate(${center.x}, ${center.y})`;\n    slice.desc = {\n      share: a.value / sum,\n      slice: {\n        start: a.startAngle,\n        end: a.endAngle,\n        innerRadius: ir,\n        outerRadius: or,\n        offset: { x: center.x + offset.x, y: center.y + offset.y },\n      },\n    };\n\n    return slice;\n  });\n}\n\nexport function arcValue(stngs, item) {\n  if (stngs.slice && 'arc' in stngs.slice) {\n    return item.arc;\n  }\n  return item.data.value;\n}\n\nconst pieComponent = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    settings: {\n      startAngle: 0,\n      endAngle: 2 * Math.PI,\n      padAngle: 0,\n      slice: {},\n    },\n    style: {\n      slice: '$shape',\n    },\n    data: {},\n  },\n  render({ data }) {\n    const arcValues = [];\n    const slices = [];\n    const stngs = this.settings.settings;\n    const { items } = this.resolver.resolve({\n      data,\n      defaults: extend({}, DEFAULT_DATA_SETTINGS.slice, this.style.slice),\n      settings: stngs.slice,\n    });\n\n    let sum = 0;\n    for (let i = 0, len = items.length; i < len; i++) {\n      const val = arcValue(stngs, items[i]);\n      if (val > 0 && items[i].outerRadius >= items[i].innerRadius) {\n        arcValues.push(val);\n        slices.push(items[i]);\n        sum += val;\n      }\n    }\n\n    const pieGen = pie().sortValues(null);\n    pieGen.startAngle(stngs.startAngle);\n    pieGen.endAngle(stngs.endAngle);\n    pieGen.padAngle(stngs.padAngle);\n    const arcData = pieGen(arcValues);\n\n    return createDisplayPies(arcData, extend({}, this.rect, { x: 0, y: 0 }), slices, sum);\n  },\n};\n\nexport default pieComponent;\n","import pieComponent from './pie';\n\nexport default function pie(picasso) {\n  picasso.component('pie', pieComponent);\n}\n","/**\n * Create a crispifier\n * @ignore\n *\n * @param  {Object} [crispMap] Optional crispmap if you need custom crisping.\n * @return {Function}          crispItem function\n *\n * @example\n * import { crispifierFactory } from \"core/crispifier\";\n *\n * let crispify = crispifierFactory(customCrispMap);\n *\n * // For a single item\n * crispify(myItem);\n *\n * // For multiple items\n * crispify.multiple(myArrayOfItems);\n */\nexport function crispifierFactory(crispMap) {\n  // Define the crispMap\n  if (crispMap === undefined) {\n    crispMap = {};\n\n    crispMap.line = {\n      append: ['x1', 'x2', 'y1', 'y2'],\n      round: [],\n      condition: (item) => item.x1 === item.x2 || item.y1 === item.y2,\n      conditionAppend: (item) => item.strokeWidth % 2 !== 0,\n    };\n\n    crispMap.rect = {\n      append: ['x', 'y'],\n      round: ['width', 'height'],\n      condition: () => true,\n      conditionAppend: (item) => item.strokeWidth % 2 !== 0,\n    };\n  }\n\n  // Re-map the crispmap\n  Object.keys(crispMap).forEach((type) => {\n    const self = crispMap[type];\n\n    self.items = [];\n\n    self.append.forEach((toAppend) => {\n      self.items.push({\n        key: toAppend,\n        type: 'append',\n      });\n    });\n\n    self.round.forEach((toAppend) => {\n      self.items.push({\n        key: toAppend,\n        type: 'round',\n      });\n    });\n  });\n\n  /**\n   * Crispify a single item\n   * @ignore\n   * @param  {Object} item  Item with renderer variables such as X, Y, and type.\n   * @return {Undefined}    Returns nothing, modifies the original item instead\n   */\n  function crispItem(item) {\n    if (crispMap[item.type] && crispMap[item.type].condition(item)) {\n      const self = crispMap[item.type];\n      const doAppend = self.conditionAppend === undefined || self.conditionAppend(item);\n\n      self.items.forEach((i) => {\n        const rounded = Math.round(item[i.key]);\n        const diff = item[i.key] - rounded;\n        item[i.key] = rounded;\n\n        if (doAppend && i.type === 'append') {\n          if (diff > 0) {\n            item[i.key] += 0.5;\n          } else {\n            item[i.key] -= 0.5;\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Crispify multiple items\n   * @ignore\n   *\n   * @param  {Array} items  Array of objects to crispify\n   * @return {Undefined}    Returns nothing, modifies the original item instead\n   */\n  crispItem.multiple = (items) => items.forEach((item) => crispItem(item));\n\n  return crispItem;\n}\n\nconst crispifier = crispifierFactory();\n\nexport default crispifier;\n","import crispify from './crispifier';\n\nclass Transposer {\n  /**\n   * @private\n   */\n  constructor(...items) {\n    this.reset();\n\n    this.push(...items);\n  }\n\n  /**\n   * Evaluate a key for a transposed coordinate\n   *\n   * @param  {String} key   Key\n   * @return {String}         Actual key\n   */\n  static evaluateKey(key, flipXY) {\n    if (flipXY) {\n      const firstChar = key.substring(0, 1);\n      const rest = key.substring(1);\n\n      if (firstChar === 'x') {\n        return `y${rest}`;\n      }\n      if (firstChar === 'y') {\n        return `x${rest}`;\n      }\n      if (key === 'cx') {\n        return 'cy';\n      }\n      if (key === 'cy') {\n        return 'cx';\n      }\n      if (key === 'width') {\n        return 'height';\n      }\n      if (key === 'height') {\n        return 'width';\n      }\n    }\n\n    return key;\n  }\n\n  /**\n   * Transpose a coordinate according to this.flipXY and\n   * the available rendering area\n   *\n   * @param  {String} key        The key of the coordinate to transpose\n   * @param  {Number} coordinate The coordinate\n   * @return {Number}            The actual location of the coordinate\n   */\n  transposeCoordinate(key, coordinate, flipXY) {\n    if (typeof coordinate === 'number' && isFinite(coordinate)) {\n      const firstChar = key.substring(0, 1);\n\n      if (firstChar === 'x' || key === 'cx') {\n        return coordinate * this.width;\n      }\n      if (key === 'width') {\n        return coordinate * this.width;\n      }\n      if (key === 'r') {\n        return coordinate * (!flipXY ? this.width : this.height);\n      }\n      if (firstChar === 'y' || key === 'cy') {\n        return coordinate * this.height;\n      }\n      if (key === 'height') {\n        return coordinate * this.height;\n      }\n    }\n\n    return coordinate;\n  }\n\n  /**\n   * Push an item into the storage of the transposer\n   *\n   * @param  {Object} items An item to be drawed\n   * @return {Object}       Can be chained\n   */\n  push(...items) {\n    this.storage.push(...items);\n    return this;\n  }\n\n  processItem(item) {\n    let newItem = {};\n    const flipXY = typeof item.flipXY !== 'undefined' ? item.flipXY : this.flipXY;\n    const crisp = typeof item.crisp !== 'undefined' ? item.crisp : this.crisp;\n\n    if (item.fn && typeof item.fn === 'function') {\n      let width = flipXY ? this.height : this.width;\n      let height = flipXY ? this.width : this.height;\n\n      item = item.fn({ width, height, flipXY });\n\n      const objectKeys = Object.keys(item);\n\n      for (let ki = 0, kl = objectKeys.length; ki < kl; ki++) {\n        let key = objectKeys[ki];\n        const nkey = Transposer.evaluateKey(key, flipXY);\n        newItem[nkey] = item[key];\n      }\n    } else {\n      const objectKeys = Object.keys(item);\n\n      for (let ki = 0, kl = objectKeys.length; ki < kl; ki++) {\n        let key = objectKeys[ki];\n        const nkey = Transposer.evaluateKey(key, flipXY);\n        const nval = this.transposeCoordinate(nkey, item[key], flipXY);\n        newItem[nkey] = nval;\n      }\n    }\n\n    if (crisp) {\n      crispify(newItem);\n    }\n\n    return newItem;\n  }\n\n  /**\n   * Get the output of the transposer\n   *\n   * @return {Array}   Array of objects\n   */\n  output() {\n    let items = [];\n\n    for (let i = 0, l = this.storage.length; i < l; i++) {\n      let newItem = this.processItem(this.storage[i]);\n\n      items.push(newItem);\n    }\n\n    return items;\n  }\n\n  /**\n   * Reset the transposer\n   *\n   * @return {Undefined}  Does not return anything\n   */\n  reset() {\n    this.storage = [];\n    this.flipXY = false;\n    this.crisp = false;\n\n    this.width = 0;\n    this.height = 0;\n  }\n}\n\nexport function transposer(...items) {\n  return new Transposer(...items);\n}\n\nexport default Transposer;\n","import extend from 'extend';\nimport { transposer } from '../../transposer/transposer';\nimport { updateScaleSize } from '../../scales';\n\n/**\n * Generate array of lines (ticks) from scale\n *\n * @param {object} scale - A scale supplied by the chart\n * @param {object} settings - The settings object from the grid line component\n * @param {object} rect - The rect containing width and height to renderer in\n * @returns {array} - Returns an array of ticks\n * @ignore\n */\nfunction lineGen(scale, distance) {\n  if (!scale || !distance) {\n    return [];\n  }\n  return (scale.cachedTicks && scale.cachedTicks()) || scale.ticks({ distance });\n}\n\nconst gridLineComponent = {\n  created() {},\n\n  require: ['chart', 'renderer', 'resolver'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n    },\n    style: {\n      // Theming style\n      ticks: '$guide-line',\n      minorTicks: '$guide-line--minor',\n    },\n  },\n\n  beforeRender() {\n    this.blueprint = transposer();\n\n    this.blueprint.width = this.rect.width;\n    this.blueprint.height = this.rect.height;\n    this.blueprint.x = this.rect.x;\n    this.blueprint.y = this.rect.y;\n    this.blueprint.crisp = true;\n  },\n\n  render() {\n    // Setup scales\n    this.x = this.settings.x ? this.chart.scale(this.settings.x) : null;\n    this.y = this.settings.y ? this.chart.scale(this.settings.y) : null;\n    updateScaleSize(this, 'x', this.rect.width);\n    updateScaleSize(this, 'y', this.rect.height);\n\n    // Return an empty array to abort rendering when no scales are available to renderer\n    if (!this.x && !this.y) {\n      return [];\n    }\n\n    this.settings.ticks = extend({ show: true }, this.style.ticks, this.settings.ticks || {});\n    this.settings.minorTicks = extend({ show: false }, this.style.minorTicks, this.settings.minorTicks || {});\n\n    // Setup lines for X and Y\n    this.lines = {\n      x: [],\n      y: [],\n    };\n\n    // Use the lineGen function to generate appropriate ticks\n    this.lines.x = lineGen(this.x, this.rect.width);\n    this.lines.y = lineGen(this.y, this.rect.height);\n\n    // Set all Y lines to flipXY by default\n    // This makes the transposer flip them individually\n    this.lines.y = this.lines.y.map((i) => extend(i, { flipXY: true }));\n\n    let addTicks = ({ dir, isMinor }) => {\n      let items = this.lines[dir].filter((tick) => !!tick.isMinor === isMinor);\n      let settings = isMinor ? this.settings.minorTicks : this.settings.ticks;\n      let ticks = this.resolver.resolve({\n        settings,\n        data: {\n          items,\n          dir,\n        },\n      }).items;\n\n      ticks.forEach((style) => {\n        let p = style.data;\n\n        // If the style's show is falsy, don't renderer this item (to respect axis settings).\n        if (style.show) {\n          // Use the transposer to handle actual positioning\n          this.blueprint.push({\n            type: 'line',\n            x1: p.position,\n            y1: 0,\n            x2: p.position,\n            y2: 1,\n            stroke: style.stroke || 'black',\n            strokeWidth: typeof style.strokeWidth !== 'undefined' ? style.strokeWidth : 1,\n            strokeDasharray: typeof style.strokeDasharray !== 'undefined' ? style.strokeDasharray : undefined,\n            flipXY: p.flipXY || false, // This flips individual points (Y-lines)\n          });\n        }\n      });\n    };\n\n    addTicks({ dir: 'x', isMinor: false });\n    addTicks({ dir: 'x', isMinor: true });\n    addTicks({ dir: 'y', isMinor: false });\n    addTicks({ dir: 'y', isMinor: true });\n\n    return this.blueprint.output();\n  },\n};\n\nexport default gridLineComponent;\n","import gridLineComponent from './line';\n\n/**\n * @typedef {object} ComponentGridLine\n * @extends ComponentSettings\n * @example\n * {\n *  type: 'grid-line',\n *  settings: {\n *    x: {\n *      scale: '<name-of-scale>',\n *    },\n *    y: {\n *      scale: '<name-of-scale>',\n *    },\n *  },\n * }\n */\n\n/**\n * Component settings\n * @typedef {object} ComponentGridLine.settings\n * @property {object} x\n * @property {string} x.scale - The scale to use along x\n * @property {object} y\n * @property {string} y.scale - The scale to use along y\n * @property {object} [ticks]\n * @property {boolean} [ticks.show=true]\n * @property {string} [ticks.stroke='black']\n * @property {number} [ticks.strokeWidth='1']\n * @property {string} [ticks.strokeDasharray]\n * @property {object} [minorTicks]\n * @property {boolean} [minorTicks.show=true]\n * @property {string} [minorTicks.stroke='black']\n * @property {number} [minorTicks.strokeWidth='1']\n * @property {string} [minorTicks.strokeDasharray]\n */\n\nexport default function gridLine(picasso) {\n  picasso.component('grid-line', gridLineComponent);\n}\n","/**\n * Return a D property for a SVG path to get a direction marker\n *\n * @param {number} x - X coordinate\n * @param {number} y - Y coordinate\n * @param {number} r - Radius\n * @param {string} [d='bottom'] - Direction\n * @returns {string} - Finished D property\n * @ignore\n */\nexport function directionMarker(x, y, r, d = 'bottom') {\n  r *= 0.8;\n  if (d === 'left' || d === 'right') {\n    let right = d === 'right';\n    return `\n      M ${x} ${y - r}\n      A ${r * 1.25} ${r * 1.25}, 0, 1, ${right ? 0 : 1}, ${x} ${y + r}\n      L ${right ? x + r : x - r} ${y} Z\n    `;\n  }\n  let bottom = d === 'bottom';\n  return `\n    M ${x - r} ${y}\n    A ${r * 1.25} ${r * 1.25}, 0, 1, ${bottom ? 1 : 0}, ${x + r} ${y}\n    L ${x} ${bottom ? y + r : y - r} Z\n  `;\n}\n\nfunction directionTriangle(x, y, r, d = 'bottom') {\n  r *= 0.75;\n  if (d === 'left' || d === 'right') {\n    let right = d === 'right';\n    x += right ? r * 1.5 : -(r * 1.5);\n    return `\n      M ${x} ${y - r}\n      L ${x} ${y + r}\n      L ${right ? x + r : x - r} ${y} Z\n    `;\n  }\n  let bottom = d === 'bottom';\n  y += bottom ? r * 1.5 : -(r * 1.5);\n  return `\n    M ${x - r} ${y}\n    L ${x + r} ${y}\n    L ${x} ${bottom ? y + r : y - r} Z\n  `;\n}\n\n/**\n * Handle out of bound shapes\n * Does not return anything, modifies \"items\" property instead (should be re-considered)\n *\n * @param {object} oob - Out of bounds object from parent\n * @param {object} settings - Settings object from parent\n * @param {object[]} items - Array of all items (for collision detection)\n * @ignore\n */\nexport function oobManager({ blueprint, oob, settings, items }) {\n  const oobKeys = Object.keys(oob);\n  let style = settings.style.oob || {};\n\n  for (let i = 0, len = oobKeys.length; i < len; i++) {\n    const key = oobKeys[i];\n    const value = oob[key];\n\n    if (value.length > 0) {\n      let position = key.charAt(1);\n      let flipXY = key.charAt(0) === 'y';\n\n      let xPadding = style.padding.x + style.width;\n      let yPadding = style.padding.y + style.width;\n      let direction = 'bottom';\n\n      if (flipXY) {\n        direction = position === '1' ? 'bottom' : 'top';\n      } else {\n        direction = position === '1' ? 'right' : 'left';\n      }\n\n      let indicator = blueprint.processItem({\n        fn: ({ width, height }) => {\n          /* eslint no-loop-func: 0 */\n          let x = position * width + (position === '1' ? -xPadding : xPadding);\n          let y = flipXY ? yPadding : height - yPadding;\n\n          if (style.type === 'arc') {\n            return {\n              type: 'path',\n              d: directionMarker(flipXY ? y : x, flipXY ? x : y, style.width, direction),\n              x,\n              y,\n              stroke: style.stroke,\n              fill: style.fill,\n              strokeWidth: style.strokeWidth || 0,\n            };\n          }\n\n          return {\n            type: 'circle',\n            cx: x,\n            cy: y,\n            r: style.width,\n            stroke: style.stroke,\n            fill: style.fill,\n            strokeWidth: style.strokeWidth || 0,\n            opacity: style.opacity,\n            data: value,\n          };\n        },\n        flipXY,\n      });\n\n      let x = indicator.cx || indicator.x;\n      let y = indicator.cy || indicator.y;\n\n      let text = {\n        type: 'text',\n        text: value.length || '',\n        x: x - style.width * 0.4,\n        y: y + style.width * 0.4,\n        fontFamily: style.text.fontFamily,\n        fontSize: `${style.width * 1.3}px`,\n        stroke: style.text.stroke,\n        fill: style.text.fill,\n        strokeWidth: style.text.strokeWidth || 0,\n        opacity: style.text.opacity,\n      };\n\n      let triangle = {\n        type: 'path',\n        d: directionTriangle(x, y, style.width, direction),\n        x,\n        y,\n        stroke: style.triangle.stroke,\n        fill: style.triangle.fill,\n        strokeWidth: style.triangle.strokeWidth || 0,\n        opacity: style.triangle.opacity,\n      };\n\n      items.push(indicator, text, triangle);\n    }\n  }\n}\n","import extend from 'extend';\nimport { testRectRect, testRectLine } from '../../math/narrow-phase-collision';\n\nexport function refLabelDefaultSettings() {\n  return {\n    fill: '#000',\n    fontFamily: 'Arial',\n    fontSize: '12px',\n    opacity: 1,\n    maxWidth: 1,\n    maxWidthPx: 9999,\n    padding: 5,\n    background: {\n      fill: '#fff',\n      stroke: 'transparent',\n      strokeWidth: 0,\n      opacity: 0.5,\n    },\n  };\n}\n\n/**\n * Converts a numerical OR string value to a normalized value\n *\n * @param {string|number} align -Description how to align (Numerical from 0-1 or 'top', 'left', 'center', 'middle', 'bottom' or 'right')\n * @returns {number} - Normalized value 0...1\n * @ignore\n */\nexport function alignmentToNumber(align) {\n  if (typeof align === 'undefined') {\n    return 0;\n  }\n  if (typeof align === 'number' && isFinite(align)) {\n    return align;\n  }\n  if (typeof align === 'string') {\n    switch (align) {\n      case 'center':\n      case 'middle':\n        return 0.5;\n      case 'bottom':\n      case 'right':\n        return 1;\n      case 'top':\n      case 'left':\n      default:\n        return 0;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * Create line and label (if applicable)\n * Does not return anything, modifies \"items\" property instead (should be re-considered)\n *\n * @param {object} p - Current point\n * @param {object} style - Applicable line styling\n * @param {object} settings - Settings object derived from parent\n * @param {object[]} items - Array of all items (for collision detection)\n * @ignore\n */\nexport function createLineWithLabel({ chart, blueprint, renderer, p, settings, items }) {\n  let doesNotCollide = true;\n  let line = false;\n  let rect = false;\n  let label = false;\n  let value = false;\n  let style = extend(true, {}, settings.style.line, p.line || {});\n\n  // Use the transposer to handle actual positioning\n  line = blueprint.processItem({\n    type: 'line',\n    x1: p.position,\n    y1: 0,\n    x2: p.position,\n    y2: 1,\n    stroke: style.stroke || 'black',\n    strokeWidth: style.strokeWidth || 1,\n    strokeDasharray: style.strokeDasharray,\n    flipXY: p.flipXY || false, // This flips individual points (Y-lines)\n  });\n\n  if (p.label) {\n    const item = extend(true, refLabelDefaultSettings(), settings.style.label || {}, { fill: style.stroke }, p.label);\n    let formatter;\n    let measuredValue = {\n      width: 0,\n      height: 0,\n    };\n    let valueString = '';\n\n    if (typeof p.formatter === 'string') {\n      formatter = chart.formatter(p.formatter);\n    } else if (typeof p.formatter === 'object') {\n      formatter = chart.formatter(p.formatter);\n    } else if (typeof p.scale !== 'undefined' && p.scale.data) {\n      // TODO - Add support for array as source into formatter\n      const scaleData = p.scale.data() && p.scale.data().fields;\n      formatter = scaleData && scaleData[0] ? scaleData[0].formatter() : null;\n    }\n\n    if (p.label.showValue !== false) {\n      if (formatter) {\n        valueString = ` (${formatter(p.value)})`;\n      } else if (p.scale) {\n        valueString = ` (${p.value})`;\n      }\n    }\n\n    if (valueString) {\n      measuredValue = renderer.measureText({\n        text: valueString,\n        fontFamily: item.fontFamily,\n        fontSize: item.fontSize,\n      });\n    }\n\n    // Measure the label text\n    let measuredLabel = renderer.measureText({\n      text: item.text || '',\n      fontFamily: item.fontFamily,\n      fontSize: item.fontSize,\n    });\n\n    let measured = {\n      width: measuredLabel.width + measuredValue.width,\n      height: Math.max(measuredLabel.height, measuredValue.height),\n    };\n\n    let labelPadding = item.padding;\n\n    // let anchor = item.anchor === 'end' ? 'end' : 'start';\n\n    let align = alignmentToNumber(p.flipXY ? item.vAlign : item.align);\n    let vAlign = alignmentToNumber(p.flipXY ? item.align : item.vAlign);\n\n    let calcWidth = Math.min(1 + measured.width + labelPadding * 2, item.maxWidth * blueprint.width, item.maxWidthPx);\n    let calcHeight = measured.height + labelPadding * 2;\n\n    let rectWidth = p.flipXY ? calcHeight : calcWidth;\n    let rectHeight = p.flipXY ? calcWidth : calcHeight;\n\n    rect = blueprint.processItem({\n      fn: ({ width, height }) => {\n        let x = p.position * width - (p.flipXY ? calcHeight : calcWidth) * (1 - align);\n        x = p.flipXY ? x : Math.max(x, 0);\n        const y = Math.max(Math.abs(vAlign * height - rectHeight * vAlign), 0);\n        return {\n          type: 'rect',\n          x,\n          y,\n          width: p.flipXY ? rectWidth : Math.min(rectWidth, blueprint.width - x),\n          height: rectHeight,\n          stroke: item.background.stroke,\n          strokeWidth: item.background.strokeWidth,\n          fill: item.background.fill,\n          opacity: item.background.opacity,\n        };\n      },\n      flipXY: p.flipXY || false, // This flips individual points (Y-lines)\n    });\n\n    if (\n      rect.x < -1 ||\n      rect.x + rect.width > blueprint.width + 1 ||\n      rect.y < -1 ||\n      rect.y + rect.height > blueprint.height + 1\n    ) {\n      // do not create labels if out of bounds\n      rect = undefined;\n    } else {\n      // Labels are just basic objects attached to a corner of a rect,\n      // and this rect needs to already be processed\n      // so there is no blueprint.processItem required here\n      label = {\n        type: 'text',\n        text: item.text || '',\n        fill: item.fill,\n        opacity: item.opacity,\n        fontFamily: item.fontFamily,\n        fontSize: item.fontSize,\n        x: rect.x + labelPadding,\n        y: rect.y + rect.height / 2 + measured.height / 3,\n        maxWidth: rect.width - labelPadding * 2 - measuredValue.width,\n        anchor: 'start',\n      };\n\n      if (valueString) {\n        value = {\n          type: 'text',\n          text: valueString || '',\n          fill: item.fill,\n          opacity: item.opacity,\n          fontFamily: item.fontFamily,\n          fontSize: item.fontSize,\n          x: label.x + 3 + (rect.width - (measuredValue.width + labelPadding * 2)),\n          y: label.y,\n        };\n      }\n\n      // Detect collisions with other labels/rects or lines\n      for (let i = 0, len = items.length; i < len; i++) {\n        let curItem = items[i];\n\n        if (curItem.type === 'rect') {\n          // We only detect rects here, since rects are always behind labels,\n          // and we wouldn't want to measure text one more time\n          if (testRectRect(rect, curItem)) {\n            doesNotCollide = false;\n          }\n        } else if (curItem.type === 'line') {\n          // This will only collide when flipXY are the same for both objects,\n          // So it only collides on objects on the same \"axis\"\n          if (p.flipXY === curItem.flipXY && testRectLine(rect, curItem)) {\n            doesNotCollide = false;\n          }\n        }\n      }\n    }\n  }\n\n  // Always push the line,\n  // but this is done after collision detection,\n  // because otherwise it would collide with it's own line\n  items.push(line);\n\n  // Only push rect & label if we haven't collided and both are defined\n  if (doesNotCollide && rect && label) {\n    items.push(rect, label);\n    if (value) {\n      items.push(value);\n    }\n  }\n}\n","import extend from 'extend';\nimport { transposer } from '../../transposer/transposer';\nimport { oobManager } from './oob';\nimport { createLineWithLabel } from './lines-and-labels';\n\nfunction createOobData(line) {\n  const data = {\n    value: line.value,\n  };\n\n  if (line.label) {\n    data.label = line.label.text;\n  }\n\n  return data;\n}\n\nfunction filterUndefinedValue(line) {\n  const value = typeof line.value === 'function' ? line.value() : line.value;\n  return typeof value !== 'undefined';\n}\n\nfunction isInvert(scale) {\n  const range = scale.range();\n  return range?.length === 2 && range[0] > range[1];\n}\n\nfunction getPosition(scale, value) {\n  const min = scale.min();\n  const max = scale.max();\n  if (min === max) {\n    const invert = isInvert(scale);\n    if (value < min) {\n      return invert ? 2 : -1;\n    }\n    if (value > min) {\n      return invert ? -1 : 2;\n    }\n  }\n  return scale(value);\n}\n\n/**\n * Component settings\n * @typedef {object} ComponentRefLine.settings\n * @property {object} lines - X & Y Lines\n * @property {ComponentRefLine~Line[]} [lines.x=[]] - Reference lines along X axis\n * @property {ComponentRefLine~Line[]} [lines.y=[]] - Reference lines along Y axis\n */\n\n/**\n * @private\n * @typedef {object} ComponentRefLine.style\n * @property {refline-oob-style} [oob=ComponentRefLine.style.oob] - Style for out of bounds object (oob)\n * @property {ComponentRefLine~Line} [line=ComponentRefLine~Line] - Generic style for lines\n * @property {ComponentRefLine~LineLabel} [label=ComponentRefLine~LineLabel] - Generic style for labels\n */\n\n/**\n * @typedef {object} ComponentRefLine.style.oob\n * @property {boolean} [show=true] - Show out of bounds items\n * @property {string} [type=undefined] - EXPERIMENTAL:  Set this to 'arc' for an experimental out of bounds shape (only works with SVG)\n * @property {number} [width=10] - Width of the out of bounds object\n * @property {string} [fill='#1A1A1A'] - Fill color of the OOB object\n * @property {string} [stroke='transparent'] - Stroke of the OOB object\n * @property {number} [strokeWidth=0] - Stroke width of the OOB object\n * @property {number} [opacity=1] - Opacity of the OOB object\n * @property {ComponentRefLine~GenericText} [text=ComponentRefLine~GenericText] - Text configuration for out of bounds\n * @property {ComponentRefLine~GenericObject} [triangle=ComponentRefLine~GenericObject] - The triangle in OOB\n * @property {object} [padding] - Padding on X\n * @property {number} [padding.x=28] - Padding on X\n * @property {number} [padding.y=5] - Padding on X\n */\n\n/**\n * @typedef {object} ComponentRefLine~GenericText\n * @property {string} [text=''] - Text (if applicable)\n * @property {string} [fontSize='12px'] - Font size (if applicable)\n * @property {string} [fontFamily='Arial'] - Font family\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {string} [strokeDasharray] - Stroke dash array\n * @property {number} [opacity=1] - Opacity\n */\n\n/**\n * @typedef {object} ComponentRefLine~Line\n * @property {number|function} value - The value of the reference line. If a scale is specified, it is applied.\n * @property {string} [scale] - Scale to use (if undefined will use normalized value 0-1)\n * @property {ComponentRefLine~GenericObject} [line=ComponentRefLine~GenericObject] - The style of the line\n * @property {ComponentRefLine~LineLabel} [label=ComponentRefLine~LineLabel] - The label style of the line\n */\n\n/**\n * @typedef {object} ComponentRefLine~LineLabel\n * @property {number} padding=5 - Padding inside the label\n * @property {string} [text=''] - Text\n * @property {string} [fontSize='12px'] - Font size\n * @property {string} [fontFamily='Arial'] - Font family\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n * @property {number|string} [align=0] - Alignment property left to right (0 = left, 1 = right). Also supports string ('left', 'center', 'middle', 'right')\n * @property {number|string} [vAlign=0] - Alignment property top to bottom (0 = top, 1 = bottom). Also supports string ('top', 'center', 'middle', 'bottom')\n * @property {number} [maxWidth=1] - The maximum relative width to the width of the rendering area (see maxWidthPx as well)\n * @property {number} [maxWidthPx=9999] - The maximum width in pixels. Labels will be rendered with the maximum size of the smallest value of maxWidth and maxWidthPx size, so you may specify maxWidth 0.8 but maxWidthPx 100 and will never be over 100px and never over 80% of the renderable area\n * @property {ComponentRefLine~LineLabelBackground} [background=ComponentRefLine~LineLabelBackground] - The background style (rect behind text)\n * @property {boolean} [showValue=true] - Show value label\n */\n\n/**\n * @typedef {object} ComponentRefLine~LineLabelBackground\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=0.5] - Opacity\n */\n\n/**\n * @typedef {object} ComponentRefLine~GenericObject\n * @property {string} [fill='#fff'] - Fill color\n * @property {string} [stroke='transparent'] - Stroke\n * @property {number} [strokeWidth=0] - Stroke width\n * @property {number} [opacity=1] - Opacity\n */\n\nconst refLineComponent = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n    },\n    style: {\n      oob: {\n        show: true,\n        width: 10,\n        fill: '#1A1A1A',\n        stroke: 'transparent',\n        strokeWidth: 0,\n        opacity: 1,\n        text: {\n          fontFamily: 'Arial',\n          stroke: 'transparent',\n          fill: '#fff',\n          strokeWidth: 0,\n          opacity: 1,\n        },\n        triangle: {\n          fill: '#4D4D4D',\n          stroke: 'transparent',\n          strokeWidth: 0,\n          opacity: 1,\n        },\n        padding: {\n          x: 28,\n          y: 5,\n        },\n      },\n      line: {\n        stroke: '#000',\n      },\n      label: {\n        strokeWidth: 0,\n      },\n    },\n  },\n\n  preferredSize() {\n    return 30;\n  },\n\n  beforeRender() {\n    this.blueprint = transposer();\n\n    this.blueprint.width = this.rect.width;\n    this.blueprint.height = this.rect.height;\n    this.blueprint.x = this.rect.x;\n    this.blueprint.y = this.rect.y;\n    this.blueprint.crisp = true;\n  },\n\n  render() {\n    let settings = this.settings;\n\n    // Setup lines for X and Y\n    this.lines = {\n      x: [],\n      y: [],\n    };\n\n    this.lines.x = (settings.lines && settings.lines.x) || [];\n    this.lines.y = (settings.lines && settings.lines.y) || [];\n\n    if (this.lines.x.length === 0 && this.lines.y.length === 0) {\n      return [];\n    }\n\n    const oob = {\n      x0: [],\n      x1: [],\n      y0: [],\n      y1: [],\n    };\n\n    // Convert a value to an actual position using the scale\n    this.lines.x = this.lines.x.filter(filterUndefinedValue).map((line) => {\n      if (typeof line.value === 'function') {\n        line.value = line.value();\n      }\n\n      if (line.scale) {\n        let scale = this.chart.scale(line.scale);\n        const position = getPosition(scale, line.value);\n        return extend(line, { scale, position });\n      }\n\n      return extend(line, { position: line.value });\n    });\n    // Set all Y lines to flipXY by default\n    // This makes the transposer flip them individually\n    this.lines.y = this.lines.y.filter(filterUndefinedValue).map((line) => {\n      if (typeof line.value === 'function') {\n        line.value = line.value();\n      }\n\n      if (line.scale) {\n        let scale = this.chart.scale(line.scale);\n        const position = getPosition(scale, line.value);\n        return extend(line, { scale, position, flipXY: true });\n      }\n\n      return extend(line, { position: line.value, flipXY: true });\n    });\n\n    // Move out of bounds lines (OOB) to separate rendering\n    this.lines.x = this.lines.x.filter((line) => {\n      if (line.position < 0 || line.position > 1) {\n        oob[`x${line.position > 1 ? 1 : 0}`].push(createOobData(line));\n        return false;\n      }\n      return true;\n    });\n\n    this.lines.y = this.lines.y.filter((line) => {\n      if (line.position < 0 || line.position > 1) {\n        oob[`y${line.position > 1 ? 1 : 0}`].push(createOobData(line));\n        return false;\n      }\n      return true;\n    });\n\n    let items = [];\n\n    // Loop through all X and Y lines\n    [...this.lines.x, ...this.lines.y].forEach((p) => {\n      let show = p.show === true || typeof p.show === 'undefined';\n\n      if (show) {\n        // Create line with labels\n        createLineWithLabel({\n          chart: this.chart,\n          blueprint: this.blueprint,\n          renderer: this.renderer,\n          p,\n          settings,\n          items,\n        });\n      }\n    });\n\n    // Handle out of bounds\n    if (settings.style.oob.show) {\n      oobManager({\n        blueprint: this.blueprint,\n        oob,\n        settings,\n        items,\n      });\n    }\n\n    return items;\n  },\n};\n\nexport default refLineComponent;\n","import refLineComponent from './refline';\n\n/**\n * @typedef {object} ComponentRefLine\n * @extends ComponentSettings\n * @example\n * {\n *  type: 'ref-line',\n *  lines: {\n *    y: [{\n *      scale: 'y',\n *      value: 5000,\n *      label: {\n *        text: 'value label'\n *      }\n *    }]\n *  }\n * }\n */\n\nexport default function refLine(picasso) {\n  picasso.component('ref-line', refLineComponent);\n}\n","import extend from 'extend';\n\nfunction appendStyle(struct, buildOpts) {\n  extend(struct, buildOpts.style);\n  const halfWidth = struct.strokeWidth / 2;\n\n  if (buildOpts.align === 'top') {\n    struct.y1 -= halfWidth;\n    struct.y2 -= halfWidth;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y1 += halfWidth;\n    struct.y2 += halfWidth;\n  } else if (buildOpts.align === 'left') {\n    struct.x1 -= halfWidth;\n    struct.x2 -= halfWidth;\n  } else if (buildOpts.align === 'right') {\n    struct.x1 += halfWidth;\n    struct.x2 += halfWidth;\n  }\n}\n\nexport default function buildLine(buildOpts) {\n  const struct = {\n    type: 'line',\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    collider: {\n      type: null,\n    },\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x1 = buildOpts.innerRect.x - buildOpts.outerRect.x;\n    struct.x2 = buildOpts.innerRect.width + buildOpts.innerRect.x;\n    struct.y1 = struct.y2 =\n      buildOpts.align === 'top' ? buildOpts.innerRect.height - buildOpts.padding : buildOpts.padding;\n  } else {\n    struct.x1 = struct.x2 =\n      buildOpts.align === 'left' ? buildOpts.innerRect.width - buildOpts.padding : buildOpts.padding;\n    struct.y1 = buildOpts.innerRect.y - buildOpts.outerRect.y;\n    struct.y2 = buildOpts.innerRect.height + buildOpts.innerRect.y;\n  }\n\n  appendStyle(struct, buildOpts);\n\n  return struct;\n}\n","import { rotate as rotateVector } from '../../math/vector';\n\nfunction checkText(text) {\n  return typeof text === 'string' || typeof text === 'number' ? text : '-';\n}\n\nfunction appendStyle(struct, buildOpts) {\n  ['fill', 'fontSize', 'fontFamily'].forEach((style) => {\n    struct[style] = buildOpts.style[style];\n  });\n}\n\nfunction clampEnds(struct, buildOpts) {\n  if (buildOpts.tilted || buildOpts.stepSize) {\n    return;\n  }\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    const leftBoundary = 0;\n    const rightBoundary = buildOpts.outerRect.width;\n    const textWidth = Math.min(buildOpts.maxWidth / 2, buildOpts.textRect.width / 2);\n    const leftTextBoundary = struct.x - textWidth;\n    const rightTextBoundary = struct.x + textWidth;\n    if (leftTextBoundary < leftBoundary) {\n      struct.anchor = 'start';\n      struct.x = buildOpts.innerRect.x - buildOpts.outerRect.x;\n    } else if (rightTextBoundary > rightBoundary) {\n      struct.anchor = 'end';\n      struct.x = buildOpts.innerRect.width + buildOpts.innerRect.x;\n    }\n  } else {\n    const topBoundary = 0;\n    const bottomBoundary = buildOpts.outerRect.height;\n    const textHeight = buildOpts.maxHeight / 2;\n    const topTextBoundary = struct.y - textHeight;\n    const bottomTextBoundary = struct.y + textHeight;\n    if (topTextBoundary < topBoundary) {\n      struct.y = buildOpts.innerRect.y - buildOpts.outerRect.y;\n      struct.baseline = 'text-before-edge';\n    } else if (bottomTextBoundary > bottomBoundary) {\n      struct.y = buildOpts.innerRect.height + (buildOpts.innerRect.y - buildOpts.outerRect.y);\n      struct.baseline = 'text-after-edge';\n    }\n  }\n}\n\nfunction appendPadding(struct, buildOpts) {\n  if (buildOpts.align === 'top') {\n    struct.y -= buildOpts.padding;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y += buildOpts.padding + buildOpts.maxHeight;\n  } else if (buildOpts.align === 'left') {\n    struct.x -= buildOpts.padding;\n  } else if (buildOpts.align === 'right') {\n    struct.x += buildOpts.padding;\n  }\n}\n\nfunction appendTilting(struct, buildOpts) {\n  if (buildOpts.tilted) {\n    const r = -buildOpts.angle;\n    const radians = r * (Math.PI / 180);\n\n    if (buildOpts.align === 'bottom') {\n      struct.x -= (buildOpts.maxHeight * Math.sin(radians)) / 2;\n      struct.y -= buildOpts.maxHeight;\n      struct.y += (buildOpts.maxHeight * Math.cos(radians)) / 2;\n    } else {\n      struct.x -= (buildOpts.maxHeight * Math.sin(radians)) / 3;\n    }\n\n    struct.transform = `rotate(${r}, ${struct.x}, ${struct.y})`;\n    struct.anchor = (buildOpts.align === 'bottom') === buildOpts.angle < 0 ? 'start' : 'end';\n\n    // adjustForEnds\n    const textWidth = Math.cos(radians) * buildOpts.maxWidth;\n    if ((buildOpts.align === 'bottom') === buildOpts.angle < 0) {\n      // right\n      const rightBoundary = buildOpts.outerRect.width - buildOpts.paddingEnd;\n      const rightTextBoundary = struct.x + textWidth;\n      if (rightTextBoundary > rightBoundary) {\n        struct.maxWidth = (rightBoundary - struct.x - 10) / Math.cos(radians);\n      }\n    } else {\n      // left\n      const leftBoundary = buildOpts.paddingEnd;\n      const leftTextBoundary = struct.x - textWidth;\n      if (leftTextBoundary < leftBoundary) {\n        struct.maxWidth = (struct.x - leftBoundary - 10) / Math.cos(radians);\n      }\n    }\n  }\n}\n\nfunction bandwidthCollider(tick, struct, buildOpts) {\n  if (buildOpts.align === 'bottom' || buildOpts.align === 'top') {\n    const tickCenter = tick.position * buildOpts.innerRect.width;\n    const leftBoundary = tickCenter + (buildOpts.innerRect.x - buildOpts.outerRect.x - buildOpts.stepSize / 2);\n    struct.collider = {\n      type: 'rect',\n      x: leftBoundary,\n      y: 0,\n      width: leftBoundary < 0 ? buildOpts.stepSize + leftBoundary : buildOpts.stepSize, // Adjust collider so that it doesnt extend onto neighbor collider\n      height: buildOpts.innerRect.height,\n    };\n  } else {\n    const tickCenter = tick.position * buildOpts.innerRect.height;\n    const topBoundary = tickCenter + (buildOpts.innerRect.y - buildOpts.outerRect.y - buildOpts.stepSize / 2);\n    struct.collider = {\n      type: 'rect',\n      x: 0,\n      y: topBoundary,\n      width: buildOpts.innerRect.width,\n      height: topBoundary < 0 ? buildOpts.stepSize + topBoundary : buildOpts.stepSize, // Adjust collider so that it doesnt extend onto neighbor collider\n    };\n  }\n\n  // Clip edges of the collider, should not extend beyoned the outerRect\n  const collider = struct.collider;\n  collider.x = Math.max(collider.x, 0);\n  collider.y = Math.max(collider.y, 0);\n  const widthClip = collider.x + collider.width - (buildOpts.outerRect.x + buildOpts.outerRect.width);\n  collider.width = widthClip > 0 ? collider.width - widthClip : collider.width;\n  const heightClip = collider.y + collider.height - (buildOpts.outerRect.y + buildOpts.outerRect.height);\n  collider.height = heightClip > 0 ? collider.height - heightClip : collider.height;\n}\n\nfunction boundsCollider(tick, struct) {\n  struct.collider = {\n    type: 'polygon',\n    vertices: [\n      { x: struct.boundingRect.x, y: struct.boundingRect.y },\n      { x: struct.boundingRect.x + struct.boundingRect.width, y: struct.boundingRect.y },\n      { x: struct.boundingRect.x + struct.boundingRect.width, y: struct.boundingRect.y + struct.boundingRect.height },\n      { x: struct.boundingRect.x, y: struct.boundingRect.y + struct.boundingRect.height },\n    ],\n  };\n}\n\nfunction tiltedCollider(tick, struct, buildOpts) {\n  const radians = buildOpts.angle * (Math.PI / 180);\n  const halfWidth = Math.max(buildOpts.stepSize / 2, struct.boundingRect.height / 2); // Handle if bandwidth is zero\n  const startAnchor = struct.anchor === 'start';\n  const em = struct.anchor === 'end' && radians < 0;\n  const sp = struct.anchor === 'start' && radians >= 0;\n  const y = struct.boundingRect.y + (sp || em ? struct.boundingRect.height : 0);\n  // Generate starting points at bandwidth boundaries\n  const points = [\n    { x: struct.x - halfWidth, y },\n    { x: struct.x + halfWidth, y },\n  ].map((p) => rotateVector(p, radians, { x: struct.x, y: struct.y })); // Rotate around center point to counteract labels rotation\n\n  // Append points to wrap polygon around label\n  const margin = 10; // extend slightly to handle single char labels better\n  const leftPoint = {\n    x: startAnchor ? struct.boundingRect.x + struct.boundingRect.width + margin : struct.boundingRect.x - margin,\n    y: struct.boundingRect.y + struct.boundingRect.height,\n  };\n\n  const rightPoint = {\n    x: startAnchor ? struct.boundingRect.x + struct.boundingRect.width + margin : struct.boundingRect.x - margin,\n    y: struct.boundingRect.y,\n  };\n\n  const orderedPoints = radians >= 0 ? [leftPoint, rightPoint] : [rightPoint, leftPoint];\n  points.push(...orderedPoints);\n\n  struct.collider = {\n    type: 'polygon',\n    vertices: points,\n  };\n}\n\nfunction appendCollider(tick, struct, buildOpts) {\n  if (buildOpts.layered || !buildOpts.stepSize) {\n    boundsCollider(tick, struct);\n  } else if (buildOpts.tilted) {\n    tiltedCollider(tick, struct, buildOpts);\n  } else {\n    bandwidthCollider(tick, struct, buildOpts);\n  }\n}\n\nfunction appendBounds(struct, buildOpts) {\n  struct.boundingRect = buildOpts.textBounds(struct);\n}\n\nfunction wiggle(buildOpts, isVertical) {\n  const a = isNaN(buildOpts.style.align) ? 0.5 : Math.min(Math.max(buildOpts.style.align, 0), 1);\n  let w = 0;\n  if (buildOpts.tilted) {\n    w = buildOpts.stepSize * a;\n  } else {\n    const size = isVertical ? buildOpts.textRect.height : buildOpts.textRect.width;\n    w = Math.max(0, buildOpts.stepSize - size) * a;\n  }\n\n  return w;\n}\n\nexport default function buildNode(tick, buildOpts) {\n  const struct = {\n    type: 'text',\n    text: checkText(tick.label),\n    x: 0,\n    y: 0,\n    maxWidth: buildOpts.maxWidth,\n    maxHeight: buildOpts.maxHeight,\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x =\n      tick.start * buildOpts.innerRect.width +\n      (buildOpts.innerRect.x - buildOpts.outerRect.x) +\n      wiggle(buildOpts, false);\n    struct.y = buildOpts.align === 'top' ? buildOpts.innerRect.height : 0;\n    struct.anchor = buildOpts.stepSize ? 'start' : 'middle';\n\n    struct.x += isNaN(buildOpts.style.offset) ? 0 : +buildOpts.style.offset;\n  } else {\n    struct.y =\n      tick.start * buildOpts.innerRect.height +\n      (buildOpts.innerRect.y - buildOpts.outerRect.y) +\n      wiggle(buildOpts, true);\n    struct.x = buildOpts.align === 'left' ? buildOpts.innerRect.width : 0;\n    struct.anchor = buildOpts.align === 'left' ? 'end' : 'start';\n    struct.baseline = buildOpts.stepSize ? 'text-before-edge' : 'central';\n\n    struct.y += isNaN(buildOpts.style.offset) ? 0 : +buildOpts.style.offset;\n  }\n\n  appendStyle(struct, buildOpts);\n  clampEnds(struct, buildOpts);\n  appendPadding(struct, buildOpts);\n  appendTilting(struct, buildOpts);\n  appendBounds(struct, buildOpts);\n  appendCollider(tick, struct, buildOpts);\n\n  return struct;\n}\n","import extend from 'extend';\n\nfunction appendStyle(struct, buildOpts) {\n  extend(struct, buildOpts.style);\n}\n\nfunction appendPadding(struct, buildOpts) {\n  if (buildOpts.align === 'top') {\n    struct.y1 -= buildOpts.padding;\n    struct.y2 -= buildOpts.padding;\n  } else if (buildOpts.align === 'bottom') {\n    struct.y1 += buildOpts.padding;\n    struct.y2 += buildOpts.padding;\n  } else if (buildOpts.align === 'left') {\n    struct.x1 -= buildOpts.padding;\n    struct.x2 -= buildOpts.padding;\n  } else if (buildOpts.align === 'right') {\n    struct.x1 += buildOpts.padding;\n    struct.x2 += buildOpts.padding;\n  }\n}\n\nfunction adjustForEnds(struct, buildOpts) {\n  const halfWidth = struct.strokeWidth / 2;\n\n  if (struct.x1 === buildOpts.innerRect.width) {\n    // outer end tick\n    struct.x1 -= halfWidth;\n    struct.x2 -= halfWidth;\n  } else if (struct.x1 === 0) {\n    // outer start tick\n    struct.x1 += halfWidth;\n    struct.x2 += halfWidth;\n  } else if (struct.y1 === buildOpts.innerRect.height) {\n    struct.y1 -= halfWidth;\n    struct.y2 -= halfWidth;\n  } else if (struct.y1 === 0) {\n    struct.y1 += halfWidth;\n    struct.y2 += halfWidth;\n  }\n}\n\nexport default function buildNode(tick, buildOpts) {\n  const struct = {\n    type: 'line',\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    collider: {\n      type: null,\n    },\n  };\n\n  if (buildOpts.align === 'top' || buildOpts.align === 'bottom') {\n    struct.x1 = struct.x2 = tick.position * buildOpts.innerRect.width + (buildOpts.innerRect.x - buildOpts.outerRect.x);\n    struct.y1 = buildOpts.align === 'top' ? buildOpts.innerRect.height : 0;\n    struct.y2 = buildOpts.align === 'top' ? struct.y1 - buildOpts.tickSize : struct.y1 + buildOpts.tickSize;\n  } else {\n    struct.y1 = struct.y2 =\n      tick.position * buildOpts.innerRect.height + (buildOpts.innerRect.y - buildOpts.outerRect.y);\n    struct.x1 = buildOpts.align === 'left' ? buildOpts.innerRect.width : 0;\n    struct.x2 = buildOpts.align === 'left' ? struct.x1 - buildOpts.tickSize : struct.x1 + buildOpts.tickSize;\n  }\n\n  appendStyle(struct, buildOpts);\n  appendPadding(struct, buildOpts);\n  adjustForEnds(struct, buildOpts);\n  return struct;\n}\n","function isMajorTick(tick) {\n  return !tick.isMinor && tick.position >= 0 && tick.position <= 1;\n}\n\nfunction isVerticalLabelOverlapping({ majorTicks, measureText, rect }) {\n  const size = rect.height;\n  const textHeight = measureText('M').height;\n  if (majorTicks.length < 2) {\n    return false;\n  }\n\n  const d = size * Math.abs(majorTicks[0].position - majorTicks[1].position);\n  if (d < textHeight) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isHorizontalLabelOverlapping({ majorTicks, measureText, rect, state }) {\n  /*\n   * Currently isn't any good way of doing a accurate measurement on size available (bandWidth * width) for labels.\n   * It's a lifecycle limitation as components docked either left or right can affect the width available after the calculation is done.\n   * <number of components docked left/right> * <width of components> => Less accurate ===> Can result in only ellips char rendered as labels.\n   */\n  const m = state.labels.activeMode === 'layered' ? 2 : 1;\n  const size = rect.width;\n  const tickSize = majorTicks\n    .map((tick) => tick.label)\n    .map((l) => `${l.slice(0, 1)}${l.length > 1 ? '…' : ''}`) // Measure the size of 1 chars + the ellips char.\n    .map(measureText)\n    .map((r) => r.width);\n  for (let i = 0; i < majorTicks.length; ++i) {\n    const tick = majorTicks[i];\n    const d1 = m * size * Math.abs(tick.start - tick.end);\n    const d2 = tickSize[i];\n    if (d1 < d2) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction shouldAutoTilt({ majorTicks, measure, rect, state, settings }) {\n  const glyphCount = settings.labels.maxGlyphCount;\n  const m = state.labels.activeMode === 'layered' ? 2 : 1;\n  const magicSizeRatioMultipler = settings.labels.tiltThreshold ? settings.labels.tiltThreshold : 0.7; // So that if less the 70% of labels are visible, toggle on tilt or use variable tiltThreshold\n  const ellipsCharSize = measure('…').width; // include ellipsed char in calc as it's generally large then the char it replaces\n  const size = rect.width;\n  let maxLabelWidth = 0;\n  let d1 = 0;\n\n  if (!isNaN(glyphCount)) {\n    const minBandwidth = majorTicks.reduce((prev, curr) => Math.min(Math.abs(curr.start - curr.end), prev), Infinity);\n    d1 = m * size * minBandwidth;\n    maxLabelWidth = measure('M').width * magicSizeRatioMultipler * glyphCount;\n    if (maxLabelWidth + ellipsCharSize > d1) {\n      return true;\n    }\n  } else {\n    for (let i = 0; i < majorTicks.length; i++) {\n      const tick = majorTicks[i];\n      const label = tick.label;\n      const width = measure(label).width * (label.length > 1 ? magicSizeRatioMultipler : 1);\n      d1 = m * size * Math.abs(tick.start - tick.end);\n      if (width + ellipsCharSize > d1) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isTiltedLabelOverlapping({ majorTicks, measureText, rect, bleedSize, angle }) {\n  if (majorTicks.length < 2) {\n    return false;\n  }\n  if (angle === 0) {\n    return true; // TODO 0 angle should be considered non-tilted\n  }\n  const absAngle = Math.abs(angle);\n  const size = Math.min(rect.outer.width - bleedSize, rect.inner.width);\n  const stepSize = size * Math.abs(majorTicks[0].position - majorTicks[1].position);\n  const textHeight = measureText('M').height;\n  const reciprocal = 1 / stepSize; // 1 === Math.sin(90 * (Math.PI / 180))\n  const distanceBetweenLabels = Math.sin(absAngle * (Math.PI / 180)) / reciprocal;\n\n  return textHeight > distanceBetweenLabels;\n}\n\nfunction isToLarge({ rect, state, majorTicks, measure, horizontal }) {\n  if (horizontal) {\n    return isHorizontalLabelOverlapping({\n      majorTicks,\n      measureText: measure,\n      rect,\n      state,\n    });\n  }\n\n  return isVerticalLabelOverlapping({\n    majorTicks,\n    measureText: measure,\n    rect,\n    state,\n  });\n}\n\nexport function getClampedValue({ value, maxValue, minValue, range, modifier }) {\n  if (!isNaN(range) && !isNaN(modifier)) {\n    value = range * modifier;\n  }\n\n  if (value > maxValue) {\n    value = maxValue;\n  }\n\n  if (value < minValue) {\n    value = minValue;\n  }\n\n  return value;\n}\n\nexport default function getSize({ isDiscrete, rect, formatter, measureText, scale, settings, state }) {\n  let size = 0;\n  const edgeBleed = {\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  };\n  const { maxLengthPx: maxValue, minLengthPx: minValue } = settings.labels;\n\n  if (settings.labels.show) {\n    const align = settings.align;\n    const horizontal = align === 'top' || align === 'bottom';\n    const distance = horizontal ? rect.inner.width : rect.inner.height;\n    const majorTicks = scale\n      .ticks({\n        settings,\n        distance,\n        formatter,\n      })\n      .filter(isMajorTick);\n\n    const measure = (text) => {\n      const m = measureText({\n        text,\n        fontSize: settings.labels.fontSize,\n        fontFamily: settings.labels.fontFamily,\n      });\n      m.width = getClampedValue({ value: m.width, maxValue, minValue });\n      return m;\n    };\n\n    if (isDiscrete && horizontal && settings.labels.mode === 'auto') {\n      if (\n        shouldAutoTilt({\n          majorTicks,\n          measure,\n          rect: rect.inner,\n          state,\n          settings,\n        })\n      ) {\n        state.labels.activeMode = 'tilted';\n      } else {\n        state.labels.activeMode = 'horizontal';\n      }\n    }\n\n    if (\n      !settings.labels.filterOverlapping &&\n      state.labels.activeMode !== 'tilted' &&\n      isToLarge({\n        rect: rect.inner,\n        state,\n        majorTicks,\n        measure,\n        horizontal,\n      })\n    ) {\n      const toLargeSize = Math.max(rect.outer.width, rect.outer.height); // used to hide the axis\n      return { size: toLargeSize, isToLarge: true };\n    }\n\n    let sizeFromTextRect;\n    if (state.labels.activeMode === 'tilted') {\n      const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180); // angle in radians\n      sizeFromTextRect = (r) =>\n        getClampedValue({ value: r.width, maxValue, minValue }) * Math.sin(radians) + r.height * Math.cos(radians);\n    } else if (horizontal) {\n      sizeFromTextRect = (r) => r.height;\n    } else {\n      sizeFromTextRect = (r) => getClampedValue({ value: r.width, maxValue, minValue });\n    }\n\n    let labels;\n    if (horizontal && state.labels.activeMode !== 'tilted') {\n      labels = ['M'];\n    } else if (!isNaN(settings.labels.maxGlyphCount)) {\n      let label = '';\n      for (let i = 0; i < settings.labels.maxGlyphCount; i++) {\n        label += 'M';\n      }\n      labels = [label];\n    } else {\n      labels = majorTicks.map((tick) => tick.label);\n    }\n    const tickMeasures = labels.map(measure);\n    const labelSizes = tickMeasures.map(sizeFromTextRect);\n    const textSize = Math.max(...labelSizes, 0);\n    size += textSize;\n    size += settings.labels.margin;\n\n    if (state.labels.activeMode === 'layered') {\n      size *= 2;\n    }\n\n    if (state.labels.activeMode === 'tilted') {\n      const extendLeft = (settings.align === 'bottom') === settings.labels.tiltAngle >= 0;\n      const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180); // angle in radians\n      const h = measureText('M').height;\n      const maxWidth = (textSize - h * Math.cos(radians)) / Math.sin(radians);\n      const labelWidth = (r) => Math.min(maxWidth, r.width) * Math.cos(radians) + r.height;\n      const adjustByPosition = (s, i) => {\n        const pos = majorTicks[i] ? majorTicks[i].position : 0;\n        if (extendLeft) {\n          return s - pos * rect.inner.width;\n        }\n        return s - (1 - pos) * rect.inner.width;\n      };\n      const bleedSize =\n        Math.min(settings.labels.maxEdgeBleed, Math.max(...tickMeasures.map(labelWidth).map(adjustByPosition), 0)) +\n        settings.paddingEnd;\n      const bleedDir = extendLeft ? 'left' : 'right';\n      edgeBleed[bleedDir] = bleedSize;\n\n      if (\n        !settings.labels.filterOverlapping &&\n        isTiltedLabelOverlapping({\n          majorTicks,\n          measureText,\n          rect,\n          bleedSize,\n          angle: settings.labels.tiltAngle,\n        })\n      ) {\n        const toLargeSize = Math.max(rect.outer.width, rect.outer.height); // used to hide the axis\n        return { size: toLargeSize, isToLarge: true };\n      }\n    }\n  }\n\n  return { size, edgeBleed };\n}\n","const PADDING = 2;\n\nconst tickDistance = (rect, start, end) => rect.width * Math.abs(start.position - end.position);\n\nconst getLeftEdgeWidth = ({ innerRect, outerRect, tick, nextWidth }) => {\n  const leftEdgeBleed = innerRect.x - outerRect.x;\n  const left = innerRect.width * tick.position + leftEdgeBleed;\n  const minDubble = Math.min(nextWidth, left) * 2;\n  const minWidth = tick.position === 0 ? innerRect.width / 2 - PADDING : 0;\n\n  return Math.max(nextWidth, minDubble, minWidth);\n};\n\nconst getRightEdgeWidth = ({ innerRect, outerRect, tick, prevWidth }) => {\n  const leftEdgeBleed = innerRect.x - outerRect.x;\n  const rightEdgeBleed = outerRect.width - innerRect.width - leftEdgeBleed;\n  const right = innerRect.width - innerRect.width * tick.position + rightEdgeBleed;\n  const minDubble = Math.min(prevWidth, right) * 2;\n  const minWidth = tick.position === 1 ? innerRect.width / 2 - PADDING : 0;\n\n  return Math.max(prevWidth, minDubble, minWidth);\n};\n\nexport default function getHorizontalWidth({ layered, major, innerRect, outerRect, tick, index }) {\n  const step = layered ? 2 : 1;\n  const prev = major[index - step];\n  const next = major[index + step];\n  const prevWidth = prev ? tickDistance(innerRect, tick, prev) / 2 - PADDING : Infinity;\n  const nextWidth = next ? tickDistance(innerRect, tick, next) / 2 - PADDING : Infinity;\n\n  if (major.length < 2) {\n    return innerRect.width;\n  }\n\n  if (!prev) {\n    return getLeftEdgeWidth({\n      innerRect,\n      outerRect,\n      tick,\n      nextWidth,\n    });\n  }\n\n  if (!next) {\n    return getRightEdgeWidth({\n      innerRect,\n      outerRect,\n      tick,\n      prevWidth,\n    });\n  }\n\n  return Math.min(prevWidth, nextWidth) * 2;\n}\n","import buildLine from './axis-line-node';\nimport buildLabel from './axis-label-node';\nimport buildTick from './axis-tick-node';\nimport { testRectRect } from '../../math/narrow-phase-collision';\nimport { getClampedValue } from './axis-label-size';\nimport getHorizontalContinuousWidth from './get-continuous-label-rect';\nimport { expandRect } from '../../geometry/util';\n\nfunction tickSpacing(settings) {\n  let spacing = 0;\n  spacing += settings.paddingStart;\n  spacing += settings.line.show ? settings.line.strokeWidth : 0;\n  spacing += settings.ticks.show ? settings.ticks.margin : 0;\n  return spacing;\n}\n\nfunction tickMinorSpacing(settings) {\n  return settings.line.strokeWidth + settings.minorTicks.margin;\n}\n\nfunction labelsSpacing(settings) {\n  let spacing = 0;\n  spacing += settings.ticks.show ? settings.ticks.tickSize : 0;\n  spacing += tickSpacing(settings) + settings.labels.margin;\n  return spacing;\n}\n\nfunction calcActualTextRect({ style, measureText, tick }) {\n  return measureText({\n    text: tick.label,\n    fontSize: style.fontSize,\n    fontFamily: style.fontFamily,\n  });\n}\n\nfunction majorTicks(ticks) {\n  return ticks.filter((t) => !t.isMinor);\n}\n\nfunction minorTicks(ticks) {\n  return ticks.filter((t) => t.isMinor);\n}\n\nfunction tickBuilder(ticks, buildOpts) {\n  return ticks.map((tick) => buildTick(tick, buildOpts));\n}\n\nfunction tickBandwidth(scale, tick) {\n  return tick ? Math.abs(tick.end - tick.start) : scale.bandwidth();\n}\n\nfunction labelBuilder(ticks, buildOpts, resolveTickOpts) {\n  return ticks.map((tick, idx) => {\n    resolveTickOpts(tick, idx);\n    const label = buildLabel(tick, buildOpts);\n    label.data = tick.data;\n    return label;\n  });\n}\n\nfunction layeredLabelBuilder(ticks, buildOpts, settings, resolveTickOpts) {\n  const padding = buildOpts.padding;\n  const spacing = labelsSpacing(settings);\n  return ticks.map((tick, idx) => {\n    resolveTickOpts(tick, idx);\n    const padding2 = spacing + buildOpts.maxHeight + settings.labels.margin;\n    buildOpts.layer = idx % 2;\n    buildOpts.padding = idx % 2 === 0 ? padding : padding2;\n    const label = buildLabel(tick, buildOpts);\n    label.data = tick.data;\n    return label;\n  });\n}\n\nexport function filterOverlappingLabels(labels, ticks, buildOpts) {\n  let isOverlapping = (i, k) => {\n    const rect1 = expandRect(1, labels[i].boundingRect);\n    const rect2 = expandRect(1, labels[k].boundingRect);\n\n    return testRectRect(rect1, rect2);\n  };\n\n  if (buildOpts && buildOpts.tilted) {\n    const absAngle = Math.abs(buildOpts.angle);\n\n    isOverlapping = (i, k) => {\n      const stepSize = Math.abs(labels[i].x - labels[k].x);\n      const reciprocal = 1 / stepSize;\n      const distanceBetweenLabels = Math.sin(absAngle * (Math.PI / 180)) / reciprocal;\n\n      return labels[i].boundingRect.height > distanceBetweenLabels;\n    };\n  }\n\n  for (let i = 0; i <= labels.length - 1; i++) {\n    for (let k = i + 1; k <= Math.min(i + 5, i + (labels.length - 1)); k++) {\n      // TODO Find a better way to handle exteme/layered labels then to iterare over ~5 next labels\n      if (labels[i] && labels[k] && isOverlapping(i, k)) {\n        if (k === labels.length - 1) {\n          // On collition with last label, remove current label instead\n          labels.splice(i, 1);\n          if (ticks) {\n            ticks.splice(i, 1);\n          }\n        } else {\n          labels.splice(k, 1);\n          if (ticks) {\n            ticks.splice(k, 1);\n          }\n        }\n        k--;\n        i--;\n      }\n    }\n  }\n}\n\nfunction discreteCalcMaxTextRect({ textMetrics, settings, innerRect, scale, tilted, layered, tick }) {\n  const h = textMetrics.height;\n\n  const bandwidth = tickBandwidth(scale, tick);\n\n  const textRect = { width: 0, height: h };\n  if (settings.align === 'left' || settings.align === 'right') {\n    textRect.width = innerRect.width - labelsSpacing(settings) - settings.paddingEnd;\n  } else if (layered) {\n    textRect.width = bandwidth * innerRect.width * 2;\n  } else if (tilted) {\n    const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180);\n    textRect.width =\n      (innerRect.height - labelsSpacing(settings) - settings.paddingEnd - h * Math.cos(radians)) / Math.sin(radians);\n  } else {\n    textRect.width = bandwidth * innerRect.width;\n  }\n\n  textRect.width = getClampedValue({\n    value: textRect.width,\n    maxValue: settings.labels.maxLengthPx,\n    minValue: settings.labels.minLengthPx,\n  });\n\n  return textRect;\n}\n\nfunction continuousCalcMaxTextRect({\n  textMetrics,\n  settings,\n  innerRect,\n  outerRect,\n  tilted,\n  layered,\n  tick,\n  index,\n  major,\n}) {\n  const h = textMetrics.height;\n\n  const textRect = { width: 0, height: h };\n  if (settings.align === 'left' || settings.align === 'right') {\n    textRect.width = innerRect.width - labelsSpacing(settings) - settings.paddingEnd;\n  } else if (tilted) {\n    const radians = Math.abs(settings.labels.tiltAngle) * (Math.PI / 180);\n    textRect.width =\n      (innerRect.height - labelsSpacing(settings) - settings.paddingEnd - h * Math.cos(radians)) / Math.sin(radians);\n  } else {\n    textRect.width = getHorizontalContinuousWidth({\n      layered,\n      major,\n      innerRect,\n      outerRect,\n      tick,\n      index,\n    });\n  }\n\n  textRect.width = getClampedValue({\n    value: textRect.width,\n    maxValue: settings.labels.maxLengthPx,\n    minValue: settings.labels.minLengthPx,\n  });\n\n  return textRect;\n}\n\nfunction getStepSizeFn({ innerRect, scale, settings, tick }) {\n  const size = settings.align === 'top' || settings.align === 'bottom' ? innerRect.width : innerRect.height;\n  const bandwidth = tickBandwidth(scale, tick);\n  return size * bandwidth;\n}\n\nexport default function nodeBuilder(isDiscrete) {\n  let resolveLabelRect;\n\n  function continuous() {\n    resolveLabelRect = continuousCalcMaxTextRect;\n    return continuous;\n  }\n\n  function discrete() {\n    resolveLabelRect = discreteCalcMaxTextRect;\n    return discrete;\n  }\n\n  function build({ settings, scale, innerRect, outerRect, measureText, ticks, state, textBounds }) {\n    const nodes = [];\n    const major = majorTicks(ticks);\n    const minor = minorTicks(ticks);\n    const buildOpts = {\n      innerRect,\n      align: settings.align,\n      outerRect,\n    };\n    const tilted = state.labels.activeMode === 'tilted';\n    const layered = state.labels.activeMode === 'layered';\n    let majorTickNodes;\n\n    if (settings.line.show) {\n      buildOpts.style = settings.line;\n      buildOpts.padding = settings.paddingStart;\n\n      nodes.push(buildLine(buildOpts));\n    }\n    if (settings.ticks.show) {\n      buildOpts.style = settings.ticks;\n      buildOpts.tickSize = settings.ticks.tickSize;\n      buildOpts.padding = tickSpacing(settings);\n\n      majorTickNodes = tickBuilder(major, buildOpts);\n    }\n    if (settings.labels.show) {\n      const padding = labelsSpacing(settings);\n      buildOpts.style = settings.labels;\n      buildOpts.padding = padding;\n      buildOpts.tilted = tilted;\n      buildOpts.layered = layered;\n      buildOpts.angle = settings.labels.tiltAngle;\n      buildOpts.paddingEnd = settings.paddingEnd;\n      buildOpts.textBounds = textBounds;\n      const resolveTickOpts = (tick, index) => {\n        buildOpts.textRect = calcActualTextRect({ tick, measureText, style: buildOpts.style });\n        const maxSize = resolveLabelRect({\n          textMetrics: buildOpts.textRect,\n          settings,\n          innerRect,\n          outerRect,\n          scale,\n          tilted,\n          layered,\n          tick,\n          major,\n          index,\n        });\n        buildOpts.maxWidth = maxSize.width;\n        buildOpts.maxHeight = maxSize.height;\n        buildOpts.stepSize = getStepSizeFn({\n          innerRect,\n          scale,\n          ticks,\n          settings,\n          tick,\n        });\n      };\n\n      let labelNodes = [];\n      if (layered && (settings.align === 'top' || settings.align === 'bottom')) {\n        labelNodes = layeredLabelBuilder(major, buildOpts, settings, resolveTickOpts);\n      } else {\n        labelNodes = labelBuilder(major, buildOpts, resolveTickOpts);\n      }\n\n      // Remove labels (and paired tick) that are overlapping\n      if (settings.labels.filterOverlapping) {\n        filterOverlappingLabels(labelNodes, majorTickNodes, buildOpts);\n      }\n\n      nodes.push(...labelNodes);\n    }\n\n    if (settings.minorTicks && settings.minorTicks.show && minor.length > 0) {\n      buildOpts.style = settings.minorTicks;\n      buildOpts.tickSize = settings.minorTicks.tickSize;\n      buildOpts.padding = tickMinorSpacing(settings);\n\n      nodes.push(...tickBuilder(minor, buildOpts));\n    }\n\n    if (majorTickNodes) {\n      nodes.push(...majorTickNodes);\n    }\n\n    return nodes;\n  }\n\n  continuous.build = build;\n  discrete.build = build;\n\n  return isDiscrete ? discrete() : continuous();\n}\n","// const DEFAULT_LAYOUT_SETTINGS = { // TODO create dis and con specific settings\n//   anchor: 'auto', // TODO re-name from align..\n//   // orientation: 'auto', // TODO impl. v/h/auto\n//   // direction: 'auto', // TODO impl. left/right/top/bottom/auto\n//   padding: { // TODO use dock layout margin instead..\n//     start: 0,\n//     end: 10\n//   },\n//   maxGlyphCount: NaN,\n//   maxEdgeBleed: Infinity\n//   // labelMode: 'auto' // TODO move here? auto, horizontal, layered\n// };\n\n/**\n * @typedef {object} ComponentAxis\n * @extends ComponentSettings\n * @property {string} scale reference to band or linear scale\n * @property {ComponentAxis~DiscreteSettings|ComponentAxis~ContinuousSettings} settings discrete or continuous axis settings\n * @example\n * {\n *  type: 'axis',\n *  scale: '<name-of-scale>'\n * }\n */\n\n/**\n * Discrete axis settings\n * @typedef {object}\n * @alias ComponentAxis~DiscreteSettings\n * @example\n * {\n *  type: 'axis',\n *  scale: '<name-of-band-scale>',\n *  settings: {\n *    labels: {\n *      mode: 'tilted',\n *      tiltAngle: 40,\n *    },\n *  },\n * }\n */\nconst DEFAULT_DISCRETE_SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  labels: {\n    /** Toggle labels on/off\n     * @type {boolean=} */\n    show: true,\n    /** Tilting angle in degrees. Capped between -90 and 90. Only applicable when labels are in `tilted` mode.\n     * @type {number=} */\n    tiltAngle: 40,\n    /** Threshold for toggle of tilted labels. Capped between 0 and 1. For example, if it is set to 0.7, then tilted labels will be toggled if less than 70% of the labels are visible.\n     * @type {number=} */\n    tiltThreshold: 0.7,\n    /** Control the amount of space (in pixels) that labes can occupy outside their docking area. Only applicable when labels are in `tilted` mode.\n     * @type {number=} */\n    maxEdgeBleed: Infinity,\n    /** Space in pixels between the tick and label.\n     * @type {number=} */\n    margin: 4,\n    /** Max length of labels in pixels\n     * @type {number=} */\n    maxLengthPx: 150,\n    /** Min length of labels in pixels. Labels will always at least require this much space\n     * @type {number=} */\n    minLengthPx: 0,\n    /** Control how labels arrange themself. Availabe modes are `auto`, `horizontal`, `layered` and `tilted`. When set to `auto` the axis determines the best possible layout in the current context.\n     * @type {string=} */\n    mode: 'auto',\n    /** When only a sub-set of data is available, ex. when paging. This property can be used to let the axis estimate how much space the labels will consume, allowing it to give a consistent space estimate over the entire dataset when paging.\n     * @type {number=} */\n    maxGlyphCount: NaN,\n    /** Align act as a slider for the text bounding rect over the item bandwidth, given that the item have a bandwidth. Except when labels are tilted, then the align is a pure align that shifts the position of the label anchoring point.\n     * @type {number=} */\n    align: 0.5,\n    /** Offset in pixels along the axis direction.\n     * @type {number=} */\n    offset: 0,\n    /**\n     * Toggle whether labels should be filtered if they are overlapping. Filtering may be applied in a non-sequential order.\n     * If labels are overlapping and this setting is toggled off, the axis will automatically hide.\n     * @type {boolean=}\n     */\n    filterOverlapping: false,\n  },\n  /**\n   * @typedef {object}\n   */\n  ticks: {\n    /** Toggle ticks on/off\n     * @type {boolean=} */\n    show: false,\n    /** Space in pixels between the ticks and the line.\n     * @type {number=} */\n    margin: 0,\n    /** Size of the ticks in pixels.\n     * @type {number=} */\n    tickSize: 4,\n  },\n  /**\n   * @typedef {object}\n   */\n  line: {\n    /** Toggle line on/off\n     * @type {boolean=} */\n    show: false,\n  },\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingStart: 0,\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingEnd: 10,\n  /** Set the anchoring point of the axis. Available options are `auto/left/right/bottom/top`. In `auto` the axis determines the best option. The options are restricted based on the axis orientation, a vertical axis may only anchor on `left` or `right`\n   * @type {string=} */\n  align: 'auto',\n};\n\n/**\n * Continuous axis settings\n * @typedef {object}\n * @alias ComponentAxis~ContinuousSettings\n * @example\n * {\n *  type: 'axis',\n *  scale: '<name-of-linear-scale>',\n *  settings: {\n *    minorTicks: {\n *      show: false,\n *    },\n *  },\n * }\n */\nconst DEFAULT_CONTINUOUS_SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  labels: {\n    /** Toggle labels on/off\n     * @type {boolean=} */\n    show: true,\n    /** Space in pixels between the tick and label.\n     * @type {number=} */\n    margin: 4,\n    /** Max length of labels in pixels\n     * @type {number=} */\n    maxLengthPx: 150,\n    /** Min length of labels in pixels. Labels will always at least require this much space\n     * @type {number=} */\n    minLengthPx: 0,\n    /** Align act as a slider for the text bounding rect over the item bandwidth, given that the item have a bandwidth.\n     * @type {number=} */\n    align: 0.5,\n    /** Offset in pixels along the axis direction.\n     * @type {number=} */\n    offset: 0,\n    /**\n     * Toggle whether labels should be filtered if they are overlapping. Filtering may be applied in a non-sequential order.\n     * If labels are overlapping and this setting is toggled off, the axis will automatically hide.\n     * @type {boolean=}\n     */\n    filterOverlapping: true,\n  },\n  /**\n   * @typedef {object}\n   */\n  ticks: {\n    /** Toggle ticks on/off\n     * @type {boolean=} */\n    show: true,\n    /** Space in pixels between the ticks and the line.\n     * @type {number=} */\n    margin: 0,\n    /** Size of the ticks in pixels.\n     * @type {number=} */\n    tickSize: 8,\n  },\n  /**\n   * @typedef {object}\n   */\n  minorTicks: {\n    /** Toggle minor-ticks on/off\n     * @type {boolean=} */\n    show: false,\n    /** Size of the ticks in pixels.\n     * @type {number=} */\n    tickSize: 3,\n    /** Space in pixels between the ticks and the line.\n     * @type {number=} */\n    margin: 0,\n  },\n  /**\n   * @typedef {object}\n   */\n  line: {\n    /** Toggle line on/off\n     * @type {boolean=} */\n    show: true,\n  },\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingStart: 0,\n  /** Padding in direction perpendicular to the axis\n   * @type {number=} */\n  paddingEnd: 10,\n  /** Set the anchoring point of the axis. Available options are `auto/left/right/bottom/top`. In `auto` the axis determines the best option. The options are restricted based on the axis orientation, a vertical axis may only anchor on `left` or `right`\n   * @type {string=} */\n  align: 'auto',\n};\n\nexport { DEFAULT_DISCRETE_SETTINGS, DEFAULT_CONTINUOUS_SETTINGS };\n","import getLabelSize from './axis-label-size';\n\nexport default function calcRequiredSize({ isDiscrete, rect, formatter, measureText, scale, settings, state }) {\n  let size = 0;\n\n  const { size: labelSize, edgeBleed, isToLarge } = getLabelSize({\n    isDiscrete,\n    rect,\n    formatter,\n    measureText,\n    scale,\n    settings,\n    state,\n  });\n\n  size += labelSize;\n\n  if (isToLarge) {\n    return { size };\n  }\n\n  if (settings.ticks.show) {\n    size += settings.ticks.margin;\n    size += settings.ticks.tickSize;\n  }\n  if (settings.minorTicks && settings.minorTicks.show) {\n    const minorTicksSize = settings.minorTicks.margin + settings.minorTicks.tickSize;\n    if (minorTicksSize > size) {\n      size = minorTicksSize;\n    }\n  }\n  if (settings.line.show) {\n    size += settings.line.strokeWidth;\n  }\n  size += settings.paddingStart;\n  size += settings.paddingEnd;\n\n  return { size, edgeBleed };\n}\n","import extend from 'extend';\n\nimport nodeBuilder from './axis-node-builder';\nimport { DEFAULT_CONTINUOUS_SETTINGS, DEFAULT_DISCRETE_SETTINGS } from './axis-default-settings';\nimport calcRequiredSize from './axis-size-calculator';\nimport crispify from '../../transposer/crispifier';\nimport { scaleWithSize } from '../../scales';\n\nfunction alignTransform({ align, inner }) {\n  if (align === 'left') {\n    return { x: inner.width + inner.x };\n  }\n  if (align === 'right' || align === 'bottom') {\n    return inner;\n  }\n  return { y: inner.y + inner.height };\n}\n\nfunction resolveAlign(align, dock) {\n  const horizontal = ['top', 'bottom'];\n  const vertical = ['left', 'right'];\n  if (horizontal.indexOf(align) !== -1 && vertical.indexOf(dock) === -1) {\n    return align;\n  }\n  if (vertical.indexOf(align) !== -1 && horizontal.indexOf(dock) === -1) {\n    return align;\n  }\n  return dock; // Invalid align, return current dock as default\n}\n\n/**\n * @ignore\n * @param {object} context - The component context\n */\nfunction resolveLocalSettings({ state, style, settings }) {\n  const defaultStgns = extend(\n    true,\n    {},\n    state.isDiscrete ? DEFAULT_DISCRETE_SETTINGS : DEFAULT_CONTINUOUS_SETTINGS,\n    style\n  );\n  const localStgns = extend(true, {}, defaultStgns, settings.settings);\n\n  const dock = settings.layout.dock || state.defaultDock;\n  localStgns.dock = dock;\n  localStgns.align = resolveAlign(settings.settings.align, dock);\n  localStgns.labels.tiltAngle = Math.max(-90, Math.min(localStgns.labels.tiltAngle, 90));\n\n  const { paddingStart, paddingEnd } = localStgns;\n  localStgns.paddingStart = typeof paddingStart === 'function' ? paddingStart.call(null) : paddingStart;\n  localStgns.paddingEnd = typeof paddingEnd === 'function' ? paddingEnd.call(null) : paddingEnd;\n\n  return localStgns;\n}\n\nfunction updateActiveMode(state, settings, isDiscrete) {\n  const mode = settings.labels.mode;\n\n  if (!isDiscrete || !state.isHorizontal) {\n    return 'horizontal';\n  }\n\n  if (mode === 'auto') {\n    return state.labels.activeMode;\n  }\n  if (['layered', 'tilted'].indexOf(settings.labels.mode) !== -1 && ['top', 'bottom'].indexOf(settings.dock) !== -1) {\n    return mode;\n  }\n  return 'horizontal';\n}\n\nconst axisComponent = {\n  require: ['chart', 'renderer', 'dockConfig'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n      prioOrder: 0,\n    },\n    settings: {},\n    style: {\n      labels: '$label',\n      ticks: '$guide-line',\n      minorTicks: '$guide-line--minor',\n      line: '$guide-line',\n    },\n  },\n  created() {\n    // State is a representation of properties that are private to this component defintion and may be modified by only in this context.\n    this.state = {\n      isDiscrete: !!this.scale.bandwidth,\n      isHorizontal: false,\n      labels: {\n        activeMode: 'horizontal',\n      },\n      ticks: [],\n      innerRect: {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n      },\n      outerRect: {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n      },\n      defaultDock: undefined,\n      concreteNodeBuilder: undefined,\n      settings: undefined,\n    };\n\n    if (this.state.isDiscrete) {\n      this.state.defaultDock = 'bottom';\n    } else {\n      this.state.defaultDock = 'left';\n    }\n\n    this.setState(this.settings);\n  },\n  setState() {\n    this.state.isDiscrete = !!this.scale.bandwidth;\n    this.state.settings = resolveLocalSettings(this);\n\n    this.state.concreteNodeBuilder = nodeBuilder(this.state.isDiscrete);\n\n    this.dockConfig.dock(this.state.settings.dock); // Override the dock setting (TODO should be removed)\n\n    this.state.isHorizontal = this.state.settings.align === 'top' || this.state.settings.align === 'bottom';\n    this.state.labels.activeMode = updateActiveMode(this.state, this.state.settings, this.state.isDiscrete);\n  },\n  preferredSize(opts) {\n    const { formatter, state, scale } = this;\n\n    const distance = this.state.isHorizontal ? opts.inner.width : opts.inner.height;\n\n    this.state.pxScale = scaleWithSize(scale, distance);\n\n    const reqSize = calcRequiredSize({\n      isDiscrete: this.state.isDiscrete,\n      rect: {\n        inner: opts.inner,\n        outer: opts.outer,\n      },\n      formatter,\n      measureText: this.renderer.measureText,\n      scale: this.state.pxScale,\n      settings: this.state.settings,\n      state,\n    });\n\n    return reqSize;\n  },\n  beforeUpdate(opts = {}) {\n    const { settings } = opts;\n    this.setState(settings);\n  },\n  resize(opts) {\n    const { inner, outer } = opts;\n\n    const extendedInner = extend(\n      {},\n      inner,\n      alignTransform({\n        align: this.state.settings.align,\n        inner,\n      })\n    );\n\n    const finalOuter = outer || extendedInner;\n    extend(this.state.innerRect, extendedInner);\n    extend(this.state.outerRect, finalOuter);\n\n    return outer;\n  },\n  beforeRender() {\n    const { scale, formatter } = this;\n\n    const distance = this.state.isHorizontal ? this.state.innerRect.width : this.state.innerRect.height;\n\n    this.state.pxScale = scaleWithSize(scale, distance);\n    this.state.ticks = this.state.pxScale\n      .ticks({\n        distance,\n        formatter,\n      })\n      .filter((t) => t.position >= 0 && t.position <= 1);\n  },\n  render() {\n    const { state } = this;\n\n    const nodes = [];\n    nodes.push(\n      ...this.state.concreteNodeBuilder.build({\n        settings: this.state.settings,\n        scale: this.state.pxScale,\n        innerRect: this.state.innerRect,\n        outerRect: this.state.outerRect,\n        measureText: this.renderer.measureText,\n        textBounds: this.renderer.textBounds,\n        ticks: this.state.ticks,\n        state,\n      })\n    );\n\n    crispify.multiple(nodes);\n\n    return nodes;\n  },\n};\n\nexport default axisComponent;\n","import axisComponent from './axis';\n\nconst type = 'axis';\n\nexport default function axis(picasso) {\n  picasso.component(type, axisComponent);\n}\n","/**\n * @typedef {object} ComponentContainer\n * @experimental\n * @extends ComponentSettings\n * @property {string} [type='container']\n * @example\n * {\n *  type: 'container',\n *  preferredSize: ({ inner, outer, dock, children }) => {\n *    const sizes = children.map(c => c.preferredSize({ inner, outer }));\n *    return Math.max(...sizes);\n *  },\n *  strategy: (rect, components) => {\n *    const height = rect.height / components.length;\n *    components.forEach((c, i) => {\n *      c.resize({ ...rect, height, y: rect.y + i * height })\n *    });\n *    return { visible: components, hidden: [], order: components };\n *  },\n *  components: [\n *     ...\n *  ],\n * }\n */\n\nconst containerComponent = {\n  render() {\n    return [];\n  },\n};\n\nexport default containerComponent;\n","import containerComponent from './container';\n\nexport default function container(picasso) {\n  picasso.component('container', containerComponent);\n}\n","import extend from 'extend';\n\nfunction parseTitle(text, join, scale) {\n  let title = '';\n  if (typeof text === 'function') {\n    title = text();\n  } else if (typeof text === 'string') {\n    title = text;\n  } else if (scale) {\n    let data = scale.data();\n    const titles = (data.fields || []).map((field) => field.title());\n    title = titles.join(join);\n  }\n\n  return title;\n}\n\nfunction getTextAnchor(dock, anchor) {\n  let val = 'middle';\n  if (dock === 'left') {\n    if (anchor === 'top') {\n      val = 'end';\n    } else if (anchor === 'bottom') {\n      val = 'start';\n    }\n  } else if (dock === 'right') {\n    if (anchor === 'top') {\n      val = 'start';\n    } else if (anchor === 'bottom') {\n      val = 'end';\n    }\n  } else if (anchor === 'left') {\n    val = 'start';\n  } else if (anchor === 'right') {\n    val = 'end';\n  }\n  return val;\n}\n\nfunction generateTitle({ title, definitionSettings, dock, rect, measureText, style }) {\n  const struct = {\n    type: 'text',\n    text: title,\n    x: 0,\n    y: 0,\n    dx: 0,\n    dy: 0,\n    anchor: getTextAnchor(dock, definitionSettings.anchor),\n    baseline: 'alphabetical',\n  };\n\n  extend(struct, style.text);\n  const textRect = measureText(struct);\n\n  if (dock === 'top' || dock === 'bottom') {\n    let x = rect.width / 2;\n    if (definitionSettings.anchor === 'left') {\n      x = definitionSettings.paddingLeft || 0;\n    } else if (definitionSettings.anchor === 'right') {\n      x = rect.width - (definitionSettings.paddingRight || 0);\n    }\n\n    struct.x = x;\n    struct.y =\n      dock === 'top'\n        ? rect.height - definitionSettings.paddingStart\n        : definitionSettings.paddingStart + textRect.height;\n    struct.dy = dock === 'top' ? -(textRect.height / 6) : -(textRect.height / 3);\n    struct.maxWidth = rect.width * 0.8;\n  } else {\n    let y = rect.height / 2;\n    if (definitionSettings.anchor === 'top') {\n      y = definitionSettings.paddingStart;\n    } else if (definitionSettings.anchor === 'bottom') {\n      y = rect.height - definitionSettings.paddingStart;\n    }\n\n    struct.y = y;\n    struct.x = dock === 'left' ? rect.width - definitionSettings.paddingStart : definitionSettings.paddingStart;\n    struct.dx = dock === 'left' ? -(textRect.height / 3) : textRect.height / 3;\n    const rotation = dock === 'left' ? 270 : 90;\n    struct.transform = `rotate(${rotation}, ${struct.x + struct.dx}, ${struct.y + struct.dy})`;\n    struct.maxWidth = rect.height * 0.8;\n  }\n\n  if (!isNaN(definitionSettings.maxLengthPx)) {\n    struct.maxWidth = Math.min(struct.maxWidth, definitionSettings.maxLengthPx);\n  }\n\n  return struct;\n}\n\n/**\n * @typedef {object} ComponentText\n * @extends ComponentSettings\n * @property {string|function} text Text to display\n * @example\n * {\n *  type: 'text',\n *  text: 'my title',\n *  dock: 'left',\n *  settings: {\n *    anchor: 'left',\n *  }\n * }\n */\n\n/**\n * @typedef {object} ComponentText.settings\n * @property {number} [paddingStart=5] - Start padding in pixels\n * @property {number} [paddingEnd=5] - End padding in pixels\n * @property {number} [paddingLeft=0] - Left padding in pixels\n * @property {number} [paddingRight=0] - Right padding in pixels\n * @property {string} [anchor='center'] - Where to v- or h-align the text. Supports `left`, `right`, `top`, `bottom` and `center`\n * @property {string} [join=', '] - String to add when joining titles from multiple sources\n * @property {number} [maxLengthPx] - Limit the text length\n */\nconst textComponent = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    layout: {\n      dock: 'bottom',\n      displayOrder: 0,\n      prioOrder: 0,\n    },\n    settings: {\n      paddingStart: 5,\n      paddingEnd: 5,\n      paddingLeft: 0,\n      paddingRight: 0,\n      anchor: 'center',\n      join: ', ',\n      maxLengthPx: NaN,\n    },\n    style: {\n      text: '$title',\n    },\n  },\n\n  created() {\n    this.definitionSettings = this.settings.settings;\n\n    const text = this.settings.text;\n    const join = this.definitionSettings.join;\n    this.title = parseTitle(text, join, this.scale);\n  },\n\n  preferredSize() {\n    const height = this.renderer.measureText({\n      text: this.title,\n      fontSize: this.style.text.fontSize,\n      fontFamily: this.style.text.fontFamily,\n    }).height;\n    return height + this.definitionSettings.paddingStart + this.definitionSettings.paddingEnd;\n  },\n\n  render() {\n    const { title, definitionSettings, rect } = this;\n    const nodes = [];\n    nodes.push(\n      generateTitle({\n        title,\n        dock: this.settings.layout.dock,\n        definitionSettings,\n        rect,\n        measureText: this.renderer.measureText,\n        style: this.style,\n      })\n    );\n    return nodes;\n  },\n\n  beforeUpdate(opts) {\n    if (opts.settings) {\n      extend(this.settings, opts.settings);\n      this.definitionSettings = opts.settings.settings;\n    }\n    const text = this.settings.text;\n    const join = this.definitionSettings.join;\n    this.title = parseTitle(text, join, this.scale);\n  },\n};\n\nexport default textComponent;\n","import textComponent from './text';\n\nexport default function text(picasso) {\n  picasso.component('text', textComponent);\n}\n","/**\n * @typedef {object} ComponentScrollbar\n * @extends ComponentSettings\n * @private\n */\n\n/**\n * @typedef {object} ComponentScrollbar.settings\n * @property {boolean} [backgroundColor = '#eee']\n * @property {boolean} [thumbColor = '#ccc']\n * @property {boolean} [width = 16]\n */\n\nfunction start(_scrollbar, pos) {\n  const dock = _scrollbar.settings.layout.dock;\n  const invert = _scrollbar.settings.settings.invert;\n  const horizontal = dock === 'top' || dock === 'bottom';\n  const lengthAttr = horizontal ? 'width' : 'height';\n  const length = _scrollbar.rect[lengthAttr];\n  const scroll = _scrollbar.chart.scroll(_scrollbar.settings.scroll);\n  let currentMove;\n\n  {\n    // local scope to allow reuse of variable names later\n    let offset = pos[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    const scrollState = scroll.getState();\n\n    currentMove = {\n      startOffset: offset,\n      startScroll: scrollState.start,\n      swipe: false,\n    };\n\n    // Detect swipe start outsize the thumb & change startScroll to jump the scroll there.\n    const scrollPoint = (offset / length) * (scrollState.max - scrollState.min) + scrollState.min;\n    if (scrollPoint < scrollState.start) {\n      currentMove.startScroll = scrollPoint;\n    } else if (scrollPoint > scrollState.start + scrollState.viewSize) {\n      currentMove.startScroll = scrollPoint - scrollState.viewSize;\n    }\n  }\n\n  const update = (p) => {\n    let offset = p[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    if (!currentMove.swipe) {\n      if (Math.abs(currentMove.startOffset - offset) <= 1) {\n        return;\n      }\n      currentMove.swipe = true;\n    }\n\n    const scrollState = scroll.getState();\n    const scrollMove = ((offset - currentMove.startOffset) / length) * (scrollState.max - scrollState.min);\n    const scrollStart = currentMove.startScroll + scrollMove;\n    scroll.moveTo(scrollStart);\n  };\n  const end = (p) => {\n    let offset = p[horizontal ? 'x' : 'y'];\n    if (invert) {\n      offset = length - offset;\n    }\n    const scrollState = scroll.getState();\n    if (currentMove.swipe) {\n      const scrollMove = ((offset - currentMove.startOffset) / length) * (scrollState.max - scrollState.min);\n      const scrollStart = currentMove.startScroll + scrollMove;\n      scroll.moveTo(scrollStart);\n    } else {\n      const scrollCenter = (offset / length) * (scrollState.max - scrollState.min) + scrollState.min;\n      const scrollStart = scrollCenter - scrollState.viewSize / 2;\n      scroll.moveTo(scrollStart);\n    }\n  };\n\n  return {\n    update,\n    end,\n  };\n}\n\nfunction getLocalPos(event, renderer) {\n  const containerRect = renderer.element().getBoundingClientRect();\n  return {\n    x: event.center.x - containerRect.left,\n    y: event.center.y - containerRect.top,\n  };\n}\n\nconst scrollbarComponent = {\n  require: ['chart', 'renderer'],\n  on: {\n    panStart(event) {\n      const pos = getLocalPos(event, this.renderer);\n      const startPos = {\n        x: pos.x - event.deltaX,\n        y: pos.y - event.deltaY,\n      };\n      this.currentMove = start(this, startPos);\n      this.currentMove.update(pos);\n    },\n    panMove(event) {\n      if (!this.currentMove) {\n        return;\n      }\n      const pos = getLocalPos(event, this.renderer);\n      this.currentMove.update(pos);\n    },\n    panEnd(event) {\n      if (!this.currentMove) {\n        return;\n      }\n      const pos = getLocalPos(event, this.renderer);\n      this.currentMove.end(pos);\n      this.currentMove = null;\n    },\n    panCancel() {\n      this.currentMove = null;\n    },\n    tap(event) {\n      const pos = getLocalPos(event, this.renderer);\n      const move = start(this, pos);\n      move.end(pos);\n    },\n  },\n  defaultSettings: {\n    settings: {\n      backgroundColor: '#eee',\n      thumbColor: '#ccc',\n      width: 16, // 32 for touch\n    },\n  },\n\n  preferredSize: function preferredSize(rect) {\n    const scrollState = this.chart.scroll(this.settings.scroll).getState();\n    // hide the scrollbar if it is not possible to scroll\n    if (scrollState.viewSize >= scrollState.max - scrollState.min) {\n      const toLargeSize = Math.max(rect.width, rect.height);\n      return toLargeSize;\n    }\n    return this.settings.settings.width;\n  },\n\n  render: function render(h) {\n    const dock = this.settings.layout.dock;\n    const invert = this.settings.settings.invert;\n    const horizontal = dock === 'top' || dock === 'bottom';\n    const lengthAttr = horizontal ? 'width' : 'height';\n\n    const _rect = this.rect;\n    const length = _rect[lengthAttr];\n\n    const scrollState = this.chart.scroll(this.settings.scroll).getState();\n    let thumbStart = (length * (scrollState.start - scrollState.min)) / (scrollState.max - scrollState.min);\n    const thumbRange = (length * scrollState.viewSize) / (scrollState.max - scrollState.min);\n\n    if (invert) {\n      thumbStart = length - thumbStart - thumbRange;\n    }\n\n    return h(\n      'div',\n      {\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          background: this.settings.settings.backgroundColor,\n          pointerEvents: 'auto',\n        },\n      },\n      [].concat(\n        h('div', {\n          class: 'scroller',\n          style: {\n            position: 'absolute',\n            [horizontal ? 'left' : 'top']: `${thumbStart}px`,\n            [horizontal ? 'top' : 'left']: '25%',\n            [horizontal ? 'height' : 'width']: '50%', // ${width}px\n            [lengthAttr]: `${Math.max(1, thumbRange)}px`,\n            background: this.settings.settings.thumbColor,\n          },\n        })\n      )\n    );\n  },\n\n  renderer: 'dom',\n};\n\nexport default function scrollbar(picasso) {\n  picasso.component('scrollbar', scrollbarComponent);\n}\n","const TARGET_SIZE = 5;\nconst VERTICAL = 0;\nconst HORIZONTAL = 1;\n\nexport { TARGET_SIZE, VERTICAL, HORIZONTAL };\n","import extend from 'extend';\n\nimport { TARGET_SIZE, VERTICAL } from './brush-range-const';\n\nfunction buildLine({ h, isVertical, value, pos, align, borderHit, state, idx }) {\n  const isAlignStart = align !== 'end';\n  const alignStart = { left: '0', top: '0' };\n  const alignEnd = { right: '0', bottom: '0' };\n  const alignStyle = isAlignStart ? alignStart : alignEnd;\n  let start = 0;\n  let width = '100%';\n  let height = '100%';\n\n  if (state.targetRect && state.settings.bubbles.align === 'start') {\n    width = `${state.targetRect.x + state.targetRect.width}px`;\n    height = `${state.targetRect.y + state.targetRect.height}px`;\n  } else if (state.targetRect && state.settings.bubbles.align === 'end') {\n    start = isVertical ? state.targetRect.x : state.targetRect.y;\n    width = `${state.rect.width - start}px`;\n    height = `${state.rect.height - start}px`;\n  }\n\n  if (!isAlignStart) {\n    pos -= borderHit;\n  }\n\n  // edge\n  return h(\n    'div',\n    {\n      onmouseover(e) {\n        e.srcElement.children[0].style.backgroundColor = '#000';\n        e.srcElement.children[0].style[isVertical ? 'height' : 'width'] = '2px';\n      },\n      onmouseout(e) {\n        e.srcElement.children[0].style.backgroundColor = state.style.line.stroke;\n        e.srcElement.children[0].style[isVertical ? 'height' : 'width'] = '1px';\n      },\n      'data-value': value,\n      'data-key': [state.key, 'edge', idx].join('-'),\n      style: {\n        cursor: isVertical ? 'ns-resize' : 'ew-resize',\n        position: 'absolute',\n        left: isVertical ? `${start}px` : `${pos}px`,\n        top: isVertical ? `${pos}px` : `${start}px`,\n        height: isVertical ? `${borderHit}px` : height,\n        width: isVertical ? width : `${borderHit}px`,\n        pointerEvents: 'auto',\n      },\n    },\n    [\n      // line\n      h('div', {\n        style: extend(\n          {\n            backgroundColor: state.style.line.stroke,\n            position: 'absolute',\n            height: isVertical ? `${1}px` : '100%',\n            width: isVertical ? '100%' : `${1}px`,\n            pointerEvents: 'none',\n          },\n          alignStyle\n        ),\n      }),\n    ]\n  );\n}\n\nfunction buildBubble({ h, isVertical, label, otherValue, rangeIdx, idx, pos, align, state, value }) {\n  const isAlignStart = align !== 'end';\n  const isOutside = state.settings.bubbles.placement === 'outside';\n  let outside = 'none';\n  let bubbleDock;\n  if (isVertical) {\n    bubbleDock = isAlignStart ? 'left' : 'right';\n    if (isOutside) {\n      outside = isAlignStart ? 'translate(-100%,  0px)' : 'translate(100%,  0px)';\n    }\n  } else {\n    bubbleDock = isAlignStart ? 'top' : 'bottom';\n    if (isOutside) {\n      outside = isAlignStart ? 'translate(0px, -100%)' : 'translate(0px,  100%)';\n    }\n  }\n\n  let inEdit = state.edit && state.edit.rangeIdx === rangeIdx && state.edit.bubbleIdx === idx;\n\n  const bubbleStyle = {\n    position: 'relative',\n    borderRadius: `${state.style.bubble.borderRadius}px`,\n    border: `${state.style.bubble.strokeWidth}px solid ${state.style.bubble.stroke}`,\n    backgroundColor: state.style.bubble.fill,\n    color: state.style.bubble.color,\n    fontFamily: state.style.bubble.fontFamily,\n    fontSize: state.style.bubble.fontSize,\n    padding: '4px 8px',\n    textAlign: 'center',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    maxWidth: '150px',\n    minWidth: '50px',\n    minHeight: '1em',\n    pointerEvents: 'auto',\n    transform: isVertical ? 'translate(0,-50%)' : 'translate(-50%,0)',\n    cursor: isVertical ? 'ns-resize' : 'ew-resize',\n  };\n\n  let currentBorderColor = state.style.bubble.stroke;\n\n  const bubble = inEdit\n    ? h('input', {\n        type: 'text',\n        value,\n        style: {\n          ...bubbleStyle,\n          textAlign: 'start',\n          textOverflow: '',\n          fontSize: '13px', // TODO - make it styleable\n        },\n        onkeyup(e) {\n          if (e.key === 'Enter') {\n            e.preventDefault();\n            e.stopPropagation();\n            const newValue = parseFloat(e.target.value);\n            if (isNaN(newValue)) {\n              currentBorderColor = 'rgba(230, 78, 78, 0.6)';\n              e.target.style.border = `${state.style.bubble.strokeWidth}px solid ${currentBorderColor}`;\n            } else {\n              state.onEditConfirmed(rangeIdx, newValue, otherValue);\n            }\n          } else if (e.key === 'Escape') {\n            e.preventDefault();\n            e.stopPropagation();\n            state.onEditCanceled();\n          }\n        },\n      })\n    : h(\n        'div',\n        {\n          'data-key': [state.key, 'bubble', rangeIdx].join('-'),\n          'data-other-value': otherValue,\n          'data-idx': rangeIdx,\n          'data-bidx': idx,\n          style: bubbleStyle,\n        },\n        [label]\n      );\n\n  // bubble wrapper\n  return h(\n    'div',\n    {\n      style: {\n        position: 'absolute',\n        [bubbleDock]: '0',\n        [isVertical ? 'top' : 'left']: `${pos}px`,\n        transform: outside,\n      },\n    },\n    [\n      // bubble\n      bubble,\n    ]\n  );\n}\n\nfunction buildArea({ h, isVertical, top, height, color, on, opacity }) {\n  return h(\n    'div',\n    extend(\n      {\n        style: {\n          backgroundColor: color,\n          opacity,\n          position: 'absolute',\n          left: isVertical ? 0 : `${top}px`,\n          top: isVertical ? `${top}px` : 0,\n          height: isVertical ? `${height}px` : '100%',\n          width: isVertical ? '100%' : `${height}px`,\n          pointerEvents: 'auto',\n        },\n      },\n      on\n    ),\n    []\n  );\n}\n\nexport default function buildRange({ borderHit, els, isVertical, state, vStart, vEnd, idx }) {\n  let targetOffset = 0;\n  if (state.targetRect) {\n    targetOffset = isVertical ? state.targetRect.y : state.targetRect.x;\n  }\n  const hasScale = !!state.scale;\n  const start = hasScale ? state.scale.norm(vStart) * state.size : vStart;\n  const end = hasScale ? state.scale.norm(vEnd) * state.size : vEnd;\n  const height = Math.abs(start - end);\n  const top = Math.min(start, end) + targetOffset;\n  const bottom = top + height;\n\n  if (state.targetRect) {\n    const target = state.targetFillRect || state.targetRect;\n    const targetSize = isVertical ? target.height : target.width;\n    const targetStart = hasScale ? state.scale.norm(vStart) * targetSize : vStart;\n    const targetEnd = hasScale ? state.scale.norm(vEnd) * targetSize : vEnd;\n    const targetHeight = Math.abs(targetStart - targetEnd);\n    const targetTop = Math.min(targetStart, targetEnd);\n    const targetArea = {\n      h: state.h,\n      isVertical,\n      top: targetTop,\n      height: targetHeight,\n      color: state.style.target.fill,\n      opacity: state.style.target.opacity,\n    };\n    if (state.style.target.opacity < 0.8) {\n      targetArea.on = {\n        onmouseover(e) {\n          e.srcElement.style.opacity = state.style.target.opacity + 0.1;\n        },\n        onmouseout(e) {\n          e.srcElement.style.opacity = state.style.target.opacity;\n        },\n      };\n    }\n    els.push(\n      state.h(\n        'div',\n        {\n          style: {\n            position: 'absolute',\n            left: `${target.x}px`,\n            top: `${target.y}px`,\n            height: `${target.height}px`,\n            width: `${target.width}px`,\n          },\n        },\n        [buildArea(targetArea)]\n      )\n    );\n  }\n\n  // active range area\n  // els.push(buildArea({\n  //   h: state.h,\n  //   isVertical,\n  //   top,\n  //   height,\n  //   color: state.settings.fill\n  // }));\n\n  const valStart = start < end ? vStart : vEnd;\n  const valEnd = start < end ? vEnd : vStart;\n  const [min, max] = hasScale ? state.scale.domain() : [Math.min(vStart, vEnd), Math.max(vStart, vEnd)];\n\n  const isStartVisible = valStart + 1e-5 >= min && valStart - 1e-5 <= max; // accept minor floating point difference\n  const isEndVisible = valEnd - 1e-5 <= max && valEnd + 1e-5 >= min;\n\n  if (isStartVisible) {\n    els.push(\n      buildLine({\n        h: state.h,\n        isVertical,\n        borderHit,\n        value: valStart,\n        pos: top,\n        align: 'start',\n        state,\n        idx,\n      })\n    );\n  }\n\n  if (isEndVisible) {\n    els.push(\n      buildLine({\n        h: state.h,\n        isVertical,\n        borderHit,\n        value: valEnd,\n        pos: bottom,\n        align: 'end',\n        state,\n        idx,\n      })\n    );\n  }\n\n  const bubbles = state.settings.bubbles;\n  if (bubbles && bubbles.show) {\n    const fontSize = bubbles.fontSize;\n    const fontFamily = bubbles.fontFamily;\n    const fill = bubbles.fill;\n    const style = {\n      fontSize,\n      fontFamily,\n      color: fill,\n    };\n\n    const range = [vStart, vEnd];\n\n    if (isStartVisible) {\n      els.push(\n        buildBubble({\n          h: state.h,\n          isVertical,\n          align: bubbles.align,\n          style,\n          rangeIdx: idx,\n          idx: 0,\n          otherValue: valEnd,\n          value: valStart,\n          label: `${state.format(valStart, range)}`,\n          pos: top,\n          state,\n        })\n      );\n    }\n\n    if (isEndVisible) {\n      els.push(\n        buildBubble({\n          h: state.h,\n          isVertical,\n          align: bubbles.align,\n          style,\n          rangeIdx: idx,\n          idx: 1,\n          otherValue: valStart,\n          value: valEnd,\n          label: `${state.format(valEnd, range)}`,\n          pos: bottom,\n          state,\n        })\n      );\n    }\n  }\n}\n\nexport function getMoveDelta(state) {\n  const posDelta = state.active.limitHigh - state.active.end;\n  const negDelta = state.active.limitLow - state.active.start;\n  let delta = state.current - state.start;\n  if (delta < 0) {\n    delta = Math.max(delta, negDelta);\n  } else {\n    delta = Math.min(delta, posDelta);\n  }\n\n  return delta;\n}\n\nexport function nodes(state) {\n  let els = [];\n\n  const isVertical = state.direction === VERTICAL;\n\n  if (Array.isArray(state.ranges)) {\n    // add all other ranges\n    state.ranges.forEach((r, i) => {\n      if (!state.active || i !== state.active.idx) {\n        buildRange({\n          borderHit: TARGET_SIZE,\n          els,\n          isVertical,\n          state,\n          vStart: Math.min(r.min, r.max),\n          vEnd: Math.max(r.min, r.max),\n          idx: i,\n        });\n      }\n    });\n  }\n\n  if (state.active) {\n    // add active range\n    let vStart = state.start;\n    let vEnd = state.current;\n    if (state.active.idx !== -1) {\n      if (state.active.mode === 'foo') {\n        vStart = Math.min(state.active.start, state.active.end);\n        vEnd = Math.max(state.active.start, state.active.end);\n      } else if (state.active.mode === 'modify') {\n        vStart = Math.min(state.start, state.current);\n        vEnd = Math.max(state.start, state.current);\n      } else {\n        const delta = getMoveDelta(state);\n        vStart = state.active.start + delta;\n        vEnd = state.active.end + delta;\n      }\n    }\n\n    buildRange({\n      borderHit: TARGET_SIZE,\n      els,\n      isVertical,\n      state,\n      vStart,\n      vEnd,\n      idx: state.active.idx,\n    });\n  }\n\n  return els;\n}\n","import extend from 'extend';\nimport { testRectPoint } from '../../../core/math/narrow-phase-collision';\n\nfunction rangelimits(state) {\n  return {\n    min: state.scale.min(),\n    max: state.scale.max(),\n  };\n}\n\nfunction areaLimits(state) {\n  return {\n    min: 0,\n    max: state.direction ? state.rect.width : state.rect.height,\n  };\n}\n\nfunction findActive(state, value, limits) {\n  let rs = state.ranges;\n  let i;\n  let activeIdx = -1;\n  for (i = 0; i < rs.length; i++) {\n    if (rs[i].min <= value && value <= rs[i].max) {\n      activeIdx = i;\n      limits.min = i ? rs[i - 1].max : limits.min;\n      limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n      break;\n    } else if (value < rs[i].min) {\n      limits.max = rs[i].min;\n      limits.min = i ? rs[i - 1].max : limits.min;\n      break;\n    }\n  }\n  if (activeIdx === -1 && rs.length && i >= rs.length) {\n    limits.min = rs[rs.length - 1].max;\n  }\n\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'foo',\n    };\n  }\n  state.active = activeRange;\n}\n\nexport function startArea({ state, e, renderer, ranges, targetSize }) {\n  if (state.started) {\n    return;\n  }\n  const x = e.center.x - e.deltaX;\n  const y = e.center.y - e.deltaY;\n  let target = document.elementFromPoint(x, y);\n  if (!renderer.element().contains(target)) {\n    target = null;\n  }\n\n  const tempState = {\n    started: true,\n  };\n\n  state.offset = renderer.element().getBoundingClientRect();\n  state.ranges = ranges(state);\n  const relX = x - state.offset.left; // coordinate relative renderer\n  const relY = y - state.offset.top;\n  const startPoint = e.center[state.cssCoord.coord] - e[state.cssCoord.pos] - state.offset[state.cssCoord.offset];\n  const relStart = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  let v = relStart;\n  let vStart = startPoint;\n\n  tempState.start = startPoint;\n  tempState.current = relStart;\n\n  let rs = state.ranges;\n  const limits = areaLimits(state);\n  let i;\n  let activeIdx = -1;\n  if (target && target.hasAttribute('data-idx')) {\n    activeIdx = parseInt(target.getAttribute('data-idx'), 10);\n    limits.min = activeIdx > 0 ? rs[activeIdx - 1].max : limits.min;\n    limits.max = activeIdx + 1 < rs.length ? rs[activeIdx + 1].min : limits.max;\n  } else {\n    for (i = 0; i < rs.length; i++) {\n      if (rs[i].min <= vStart && vStart <= rs[i].max) {\n        activeIdx = i;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n        break;\n      } else if (vStart < rs[i].min) {\n        limits.max = rs[i].min;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        break;\n      }\n    }\n    if (activeIdx === -1 && rs.length && i >= rs.length) {\n      limits.min = rs[rs.length - 1].max;\n    }\n  }\n\n  if (activeIdx === -1 && !state.multi) {\n    tempState.ranges = [];\n    limits.min = 0;\n    limits.max = state.direction ? state.rect.width : state.rect.height;\n  }\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'move',\n    };\n\n    if (target && target.hasAttribute('data-other-value')) {\n      tempState.start = parseFloat(target.getAttribute('data-other-value'));\n      activeRange.mode = 'modify';\n    } else {\n      let pxStart = activeRange.start;\n      let pxEnd = activeRange.end;\n      if (Math.abs(startPoint - pxStart) <= targetSize) {\n        tempState.start = activeRange.end;\n        activeRange.mode = 'modify';\n      } else if (Math.abs(startPoint - pxEnd) <= targetSize) {\n        tempState.start = activeRange.start;\n        activeRange.mode = 'modify';\n      }\n    }\n  } else {\n    activeRange = {\n      idx: -1,\n      start: vStart,\n      end: v,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'current',\n    };\n  }\n\n  tempState.active = activeRange;\n\n  if (activeRange.mode !== 'modify' && state.targetRect && !testRectPoint(state.targetRect, { x: relX, y: relY })) {\n    // do nothing\n  } else {\n    Object.keys(tempState).forEach((key) => (state[key] = tempState[key]));\n  }\n}\n\nexport function start({ state, e, renderer, ranges, targetSize }) {\n  if (state.started) {\n    return;\n  }\n  state.edit = null;\n  const x = e.center.x - e.deltaX;\n  const y = e.center.y - e.deltaY;\n  let target = document.elementFromPoint(x, y);\n  if (!renderer.element().contains(target)) {\n    target = null;\n  }\n\n  const tempState = {\n    started: true,\n  };\n\n  state.offset = extend({}, renderer.element().getBoundingClientRect());\n  const relX = x - state.offset.left; // coordinate relative renderer\n  const relY = y - state.offset.top;\n  state.offset.left += state.targetRect ? state.targetRect.x : 0; // make offset relative to targetRect\n  state.offset.top += state.targetRect ? state.targetRect.y : 0;\n  state.ranges = ranges(state, state.fauxBrushInstance || state.brushInstance);\n  const startPoint = e.center[state.cssCoord.coord] - e[state.cssCoord.pos] - state.offset[state.cssCoord.offset];\n  const relStart = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  tempState.current = state.scale.normInvert(relStart / state.size);\n  tempState.start = state.scale.normInvert(startPoint / state.size);\n\n  let rs = state.ranges;\n  const limits = rangelimits(state);\n  let i;\n  let activeIdx = -1;\n  if (target && target.hasAttribute('data-idx')) {\n    activeIdx = parseInt(target.getAttribute('data-idx'), 10);\n    limits.min = activeIdx > 0 ? rs[activeIdx - 1].max : limits.min;\n    limits.max = activeIdx + 1 < rs.length ? rs[activeIdx + 1].min : limits.max;\n  } else {\n    for (i = 0; i < rs.length; i++) {\n      if (rs[i].min <= tempState.start && tempState.start <= rs[i].max) {\n        activeIdx = i;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        limits.max = i + 1 < rs.length ? rs[i + 1].min : limits.max;\n        break;\n      } else if (tempState.start < rs[i].min) {\n        limits.max = rs[i].min;\n        limits.min = i ? rs[i - 1].max : limits.min;\n        break;\n      }\n    }\n    if (activeIdx === -1 && rs.length && i >= rs.length) {\n      limits.min = rs[rs.length - 1].max;\n    }\n  }\n\n  if (activeIdx === -1 && !state.multi) {\n    tempState.ranges = [];\n    limits.min = state.scale.min();\n    limits.max = state.scale.max();\n  }\n  let activeRange;\n\n  if (activeIdx !== -1) {\n    activeRange = {\n      idx: activeIdx,\n      start: rs[activeIdx].min,\n      end: rs[activeIdx].max,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'move',\n    };\n\n    if (target && target.hasAttribute('data-other-value')) {\n      tempState.start = parseFloat(target.getAttribute('data-other-value'));\n      activeRange.mode = 'modify';\n    } else {\n      let pxStart = state.scale.norm(activeRange.start) * state.size;\n      let pxEnd = state.scale.norm(activeRange.end) * state.size;\n      if (Math.abs(startPoint - pxStart) <= targetSize) {\n        tempState.start = activeRange.end;\n        activeRange.mode = 'modify';\n      } else if (Math.abs(startPoint - pxEnd) <= targetSize) {\n        tempState.start = activeRange.start;\n        activeRange.mode = 'modify';\n      }\n    }\n  } else {\n    activeRange = {\n      idx: -1,\n      start: tempState.start,\n      end: tempState.current,\n      limitLow: limits.min,\n      limitHigh: limits.max,\n      mode: 'current',\n    };\n  }\n\n  tempState.active = activeRange;\n\n  if (activeRange.mode !== 'modify' && state.targetRect && !testRectPoint(state.targetRect, { x: relX, y: relY })) {\n    // do nothing\n  } else {\n    Object.keys(tempState).forEach((key) => (state[key] = tempState[key]));\n  }\n}\nexport function end(state, ranges) {\n  state.started = false;\n  state.ranges = ranges(state, state.fauxBrushInstance || state.brushInstance);\n  const limits = rangelimits(state);\n  findActive(state, state.current, limits);\n}\n\nexport function endArea(state, ranges) {\n  state.started = false;\n  state.ranges = ranges(state);\n  const limits = areaLimits(state);\n  findActive(state, state.current, limits);\n}\n\nexport function move(state, e) {\n  const relY = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n  const rel = relY / state.size;\n  const v = state.scale.normInvert(rel);\n  state.current = Math.max(Math.min(v, state.active.limitHigh), state.active.limitLow);\n}\n\nexport function moveArea(state, e) {\n  const rel = e.center[state.cssCoord.coord] - state.offset[state.cssCoord.offset];\n\n  state.current = Math.max(Math.min(rel, state.active.limitHigh), state.active.limitLow);\n}\n","import { nodes, getMoveDelta } from './brush-range-node-builder';\nimport { start, end, move } from './brush-range-interaction';\nimport linear from '../../../core/scales/linear';\nimport { scaleWithSize } from '../../../core/scales';\nimport brushFactory from '../../../core/brush';\nimport { TARGET_SIZE, VERTICAL, HORIZONTAL } from './brush-range-const';\nimport { pointsToRect, rectToPoints } from '../../../core/geometry/util';\n\nfunction render(state) {\n  state.renderer.render(nodes(state));\n}\n\nfunction ranges(state, brush) {\n  if (!brush || !brush.isActive()) {\n    return [];\n  }\n\n  const sourceData = state.scale.data();\n  const sourceFields = sourceData ? sourceData.fields || [] : [];\n  const sources = sourceFields.map((field) => field.id());\n  const rangeBrush = brush.brushes().filter((f) => f.type === 'range' && sources.indexOf(f.id) !== -1)[0];\n\n  if (!rangeBrush) {\n    return [];\n  }\n\n  return rangeBrush.brush.ranges();\n}\n\nfunction setRanges(state) {\n  let rs = state.ranges.map((r) => ({ min: r.min, max: r.max }));\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'modify') {\n      rs[state.active.idx].min = Math.min(state.start, state.current);\n      rs[state.active.idx].max = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      rs[state.active.idx].min += delta;\n      rs[state.active.idx].max += delta;\n    }\n  } else {\n    rs.push({\n      min: Math.min(state.start, state.current),\n      max: Math.max(state.start, state.current),\n    });\n  }\n\n  const scaleData = state.scale.data();\n  if (scaleData && scaleData.fields) {\n    scaleData.fields.forEach((field) => {\n      if (state.fauxBrushInstance) {\n        let ordRS = ranges(state, state.fauxBrushInstance);\n        let oldValues = state.findValues(ordRS);\n        let values = state.findValues(rs);\n\n        let addedValues = values.filter((v) => oldValues.indexOf(v) === -1);\n        let removedValues = oldValues.filter((v) => values.indexOf(v) === -1);\n\n        let addItems = addedValues.map((v) => ({ key: field.id(), value: v }));\n        let removeItems = removedValues.map((v) => ({ key: field.id(), value: v }));\n\n        state.brushInstance.addAndRemoveValues(addItems, removeItems);\n\n        state.fauxBrushInstance.setRange(field.id(), rs);\n      } else {\n        state.brushInstance.setRange(field.id(), rs);\n      }\n    });\n  }\n}\n\nfunction setEditedRanges(state, idx, startValue, endValue) {\n  let rs = state.ranges.map((r) => ({ min: r.min, max: r.max }));\n  const limitMin = state.scale.min();\n  const limitMax = state.scale.max();\n  rs[idx] = {\n    min: Math.max(limitMin, Math.min(startValue, endValue)),\n    max: Math.min(limitMax, Math.max(startValue, endValue)),\n  };\n  state.ranges[idx] = { ...rs[idx] };\n\n  const scaleData = state.scale.data();\n  if (scaleData && scaleData.fields) {\n    scaleData.fields.forEach((field) => {\n      if (!state.fauxBrushInstance) {\n        state.brushInstance.setRange(field.id(), rs);\n      }\n    });\n  }\n}\n\nfunction findClosest(value, scale) {\n  let name;\n  let minDist = Infinity;\n  const domain = scale.domain();\n  const halfBandwidth = scale.bandwidth() / 2;\n  for (let i = 0; i < domain.length; ++i) {\n    const d = Math.abs(value - halfBandwidth - scale(domain[i]));\n    if (d < minDist) {\n      minDist = d;\n      name = domain[i];\n    }\n  }\n  return name;\n}\n\nfunction findClosestLabel(value, scale) {\n  const ticks = scale.ticks();\n  const idx = scale.domain().indexOf(findClosest(value, scale));\n  return idx !== -1 ? ticks[idx].label : '-';\n}\n\nfunction rangesOverlap(r1, r2) {\n  return Math.min(...r1) <= Math.max(...r2) && Math.max(...r1) >= Math.min(...r2);\n}\n\nfunction findValues(rangesValues, scale) {\n  const domain = scale.domain();\n  const scaleRange = scale.range();\n  const values = [];\n  rangesValues.forEach((range) => {\n    if (!rangesOverlap(scaleRange, [range.min, range.max])) {\n      return;\n    }\n    const startIdx = domain.indexOf(findClosest(range.min, scale));\n    const endIdx = domain.indexOf(findClosest(range.max, scale));\n    values.push.apply(\n      values,\n      domain.slice(Math.min(startIdx, endIdx), Math.max(startIdx, endIdx) + 1)\n    ); /* eslint prefer-spread:0 */\n  });\n\n  return values;\n}\n\nfunction resolveNodeBounds(targetNodes) {\n  const points = targetNodes.reduce((ary, node) => {\n    ary.push(...rectToPoints(node.bounds));\n    return ary;\n  }, []);\n  return pointsToRect(points);\n}\n\nfunction resolveTarget(ctx) {\n  const resolved = {\n    targetRect: null,\n    targetFillRect: null,\n    scale: null,\n    size: null,\n  };\n  const stngs = ctx.settings.settings;\n  const targets =\n    stngs.target &&\n    (stngs.target.components || (stngs.target.component ? [stngs.target.component] : []))\n      .map((c) => ctx.chart.component(c))\n      .filter((c) => !!c && !!c.rect);\n  const targetNodes = stngs.target && stngs.target.selector ? ctx.chart.findShapes(stngs.target.selector) : [];\n  const targetFillNodes =\n    stngs.target && stngs.target.fillSelector ? ctx.chart.findShapes(stngs.target.fillSelector) : [];\n  if (targetNodes.length > 0) {\n    const bounds = resolveNodeBounds(targetNodes);\n    resolved.size = bounds[ctx.state.direction === VERTICAL ? 'height' : 'width'];\n    resolved.scale = scaleWithSize(ctx.chart.scale(stngs.scale), resolved.size);\n    resolved.targetRect = bounds;\n    if (targetFillNodes.length > 0) {\n      const fillBounds = resolveNodeBounds(targetFillNodes);\n      resolved.targetFillRect = fillBounds;\n    }\n  } else if (targets && targets.length > 0) {\n    const targetRect = targets.slice(1).reduce(\n      (prev, curr) => ({\n        x0: Math.min(prev.x0, curr.rect.computedInner.x),\n        y0: Math.min(prev.y0, curr.rect.computedInner.y),\n        x1: Math.max(prev.x1, curr.rect.computedInner.x + curr.rect.computedInner.width),\n        y1: Math.max(prev.y1, curr.rect.computedInner.y + curr.rect.computedInner.height),\n      }),\n      {\n        x0: targets[0].rect.computedInner.x,\n        y0: targets[0].rect.computedInner.y,\n        x1: targets[0].rect.computedInner.x + targets[0].rect.computedInner.width,\n        y1: targets[0].rect.computedInner.y + targets[0].rect.computedInner.height,\n      }\n    );\n\n    resolved.targetRect = {\n      x: targetRect.x0 - ctx.state.rect.x,\n      y: targetRect.y0 - ctx.state.rect.y,\n      width: targetRect.x1 - targetRect.x0,\n      height: targetRect.y1 - targetRect.y0,\n    };\n  }\n\n  return resolved;\n}\n\n/**\n * @typedef {object} ComponentBrushRange.settings\n * @property {string|object} brush - Brush context to apply changes to\n * @property {string} scale - Scale to extract data from\n * @property {string} [direction=vertical] - Rendering direction [horizontal|vertical]\n * @property {object} [bubbles]\n * @property {boolean} [bubbles.show=true] - True to show label bubble, false otherwise\n * @property {string} [bubbles.align=start] - Where to anchor bubble [start|end]\n * @property {function} [bubbles.label] - Callback function for the labels\n * @property {object} [target]\n * @property {string[]} [target.components] - Render matching overlay on target components\n * @property {string} [target.selector] - Instead of targeting a component, target one or more shapes\n * @property {string} [target.fillSelector] - Target a subset of the selector as fill area. Only applicable if `selector` property is set\n */\n\n/**\n * @private\n * @typedef {object} ComponentBrushRangeStyle\n * @property {object} [bubble]\n * @property {string} [bubble.fontSize]\n * @property {string} [bubble.fontFamily]\n * @property {string} [bubble.fill]\n * @property {string} [bubble.color]\n * @property {string} [bubble.stroke]\n * @property {number} [bubble.strokeWidth]\n * @property {number} [bubble.borderRadius]\n * @property {object} [line]\n * @property {string} [line.stroke]\n * @property {number} [line.strokeWidth]\n * @property {object} [target]\n * @property {string} [target.fill]\n * @property {number} [target.strokeWidth]\n * @property {number} [target.opacity]\n */\n\nconst brushRangeComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {\n      bubbles: {\n        show: true,\n        align: 'start',\n      },\n    },\n    style: {\n      bubble: '$label-overlay',\n      line: '$shape-guide--inverted',\n      target: '$selection-area-target',\n    },\n  },\n  renderer: 'dom',\n  on: {\n    rangeStart(e) {\n      this.start(e);\n    },\n    rangeMove(e) {\n      this.move(e);\n    },\n    rangeEnd(e) {\n      this.end(e);\n    },\n    rangeClear(e) {\n      this.clear(e);\n    },\n    bubbleStart(e) {\n      this.bubbleStart(e);\n    },\n  },\n  created() {\n    this.state = {\n      key: this.settings.key || 'brush-range',\n    };\n  },\n  beforeRender(opts) {\n    this.state.rect = opts.size.computedInner;\n  },\n  renderRanges() {\n    if (!this.state.started) {\n      this.state.ranges = ranges(this.state, this.state.brushInstance);\n      this.state.active = null;\n      render(this.state);\n    }\n  },\n  render(h) {\n    const stngs = this.settings.settings;\n    this.state.direction = stngs.direction === 'vertical' ? VERTICAL : HORIZONTAL;\n    const offset = this.renderer.element().getBoundingClientRect();\n    const size = this.state.rect[this.state.direction === VERTICAL ? 'height' : 'width'];\n    let scale = scaleWithSize(this.chart.scale(stngs.scale), size);\n\n    const target = resolveTarget(this);\n    scale = target.scale ? target.scale : scale;\n    this.state.targetRect = target.targetRect;\n    this.state.targetFillRect = target.targetFillRect;\n    this.state.size = target.size === null ? size : target.size;\n\n    this.state.settings = stngs;\n    this.state.style = this.style;\n    this.state.offset = offset;\n    this.state.brush = typeof stngs.brush === 'object' ? stngs.brush.context : stngs.brush;\n    this.state.brushInstance = this.chart.brush(this.state.brush);\n    this.state.renderer = this.renderer;\n    this.state.multi = !!stngs.multiple;\n    this.state.h = h;\n    this.state.onEditConfirmed = (rangeIdx, value, otherValue) => {\n      this.state.edit = null;\n      setEditedRanges(this.state, rangeIdx, value, otherValue);\n      this.emit('bubbleEnd');\n      render(this.state);\n    };\n    this.state.onEditCanceled = () => {\n      this.state.edit = null;\n      render(this.state);\n    };\n    this.state.cssCoord = {\n      offset: this.state.direction === VERTICAL ? 'top' : 'left',\n      coord: this.state.direction === VERTICAL ? 'y' : 'x',\n      pos: this.state.direction === VERTICAL ? 'deltaY' : 'deltaX',\n    };\n    this.state.format =\n      typeof stngs.bubbles.label === 'function'\n        ? (v, r) =>\n            stngs.bubbles.label.call(undefined, {\n              datum: v,\n              data: r,\n              scale,\n              resources: {\n                scale: this.chart.scale,\n                formatter: this.chart.formatter,\n              },\n            })\n        : false;\n\n    if (!{}.hasOwnProperty.call(scale, 'norm')) {\n      // Non-linear scale if norm method is unavailable\n      this.state.editable = false;\n      this.state.scale = linear();\n      this.state.scale.data = scale.data;\n      if (!this.state.format) {\n        this.state.format = (v, r) => {\n          if (!rangesOverlap(scale.range(), r)) {\n            return '-';\n          }\n          return findClosestLabel(v, scale);\n        };\n      }\n      this.state.fauxBrushInstance = brushFactory();\n      this.state.findValues = (valueRanges) => findValues(valueRanges, scale);\n    } else {\n      this.state.editable = true;\n      this.state.observeBrush = typeof stngs.brush === 'object' ? stngs.brush.observe : false;\n      this.state.fauxBrushInstance = null;\n      this.state.findValues = null;\n      this.state.scale = scale;\n      const scaleData = this.state.scale.data();\n      if (!this.state.format && scaleData && scaleData.fields && scaleData.fields[0]) {\n        this.state.format = scaleData.fields[0].formatter();\n      }\n    }\n\n    this.state.ranges = ranges(this.state, this.state.brushInstance);\n\n    return this.state.observeBrush || this.state.sourcedFromThisComponent ? [nodes(this.state)] : [];\n  },\n  mounted() {\n    if (this.state.observeBrush && this.state.brushInstance) {\n      this.state.brushInstance.on('update', this.renderRanges);\n    }\n  },\n  beforeDestroy() {\n    if (this.state.observeBrush && this.state.brushInstance) {\n      this.state.brushInstance.removeListener('update', this.renderRanges);\n    }\n  },\n  start(e) {\n    start({\n      e,\n      state: this.state,\n      renderer: this.renderer,\n      ranges,\n      targetSize: TARGET_SIZE,\n    });\n  },\n  end() {\n    if (!this.state.started) {\n      return;\n    }\n    end(this.state, ranges);\n    render(this.state);\n    this.state.sourcedFromThisComponent = true;\n    this.state.active = null;\n  },\n  move(e) {\n    if (!this.state.started) {\n      return;\n    }\n    move(this.state, e);\n    setRanges(this.state);\n    render(this.state);\n  },\n  clear() {\n    if (this.state.fauxBrushInstance) {\n      this.state.fauxBrushInstance.clear();\n    }\n    this.state.renderer.render([]);\n    this.state.started = false;\n    this.state.active = null;\n    this.state.sourcedFromThisComponent = false;\n  },\n  bubbleStart(e) {\n    if (!this.state.editable) {\n      return;\n    }\n    const ee = e.srcEvent || e;\n\n    const target = ee.target;\n    const ed = {\n      rangeIdx: parseInt(target.getAttribute('data-idx'), 10),\n      bubbleIdx: parseInt(target.getAttribute('data-bidx'), 10),\n    };\n    if (isNaN(ed.rangeIdx) || JSON.stringify(ed) === JSON.stringify(this.state.edit)) {\n      return;\n    }\n    this.state.edit = ed;\n\n    ee.stopPropagation();\n    ee.stopImmediatePropagation();\n    ee.preventDefault();\n\n    const wrapper = target.parentNode;\n\n    render(this.state);\n    const inputEl = wrapper.querySelector('input');\n    inputEl.focus();\n    inputEl.select();\n  },\n};\n\nexport default brushRangeComponent;\n","import { getMoveDelta, nodes } from './brush-range-node-builder';\nimport { startArea, moveArea, endArea } from './brush-range-interaction';\nimport rangeCollection from '../../../core/brush/range-collection';\nimport { TARGET_SIZE, VERTICAL, HORIZONTAL } from './brush-range-const';\n\nfunction render(state) {\n  state.renderer.render(nodes(state));\n}\n\nfunction ranges(state) {\n  return state.rc.ranges();\n}\n\nfunction shapesFromRange(state, brushRange) {\n  const shapeAt = {\n    x: state.direction ? brushRange.min + state.rect.x : state.rect.x,\n    y: state.direction ? state.rect.y : brushRange.min + state.rect.y,\n    width: state.direction ? brushRange.max - brushRange.min : state.rect.width + state.rect.x,\n    height: state.direction ? state.rect.height + state.rect.y : brushRange.max - brushRange.min,\n  };\n  return state.chart.shapesAt(shapeAt, state.settings.brush);\n}\n\nfunction brushFromShape(state, newShapes) {\n  state.chart.brushFromShapes(newShapes, state.settings.brush);\n}\n\nfunction setRanges(state) {\n  const rs = state.ranges.map((r) => ({ min: r.min, max: r.max }));\n\n  if (state.active.idx !== -1) {\n    if (state.active.mode === 'modify') {\n      rs[state.active.idx].min = Math.min(state.start, state.current);\n      rs[state.active.idx].max = Math.max(state.start, state.current);\n    } else {\n      const delta = getMoveDelta(state);\n      rs[state.active.idx].min = state.active.start + delta;\n      rs[state.active.idx].max = state.active.end + delta;\n    }\n  } else {\n    rs.push({\n      min: Math.min(state.start, state.current),\n      max: Math.max(state.start, state.current),\n    });\n  }\n\n  state.rc.set(rs);\n\n  const shapes = [];\n  rs.forEach((range) => {\n    shapes.push(...shapesFromRange(state, range));\n  });\n\n  brushFromShape(state, shapes);\n}\n\nfunction getBubbleLabel(state, value, range) {\n  const min = Math.min(...range);\n  const max = Math.max(...range);\n  const shapeAt = {\n    x: state.direction ? min + state.rect.x : state.rect.x,\n    y: state.direction ? state.rect.y : min + state.rect.y,\n    width: state.direction ? max - min : state.rect.width + state.rect.x,\n    height: state.direction ? state.rect.height + state.rect.y : max - min,\n  };\n\n  const shapes = state.chart.shapesAt(shapeAt, state.settings.brush);\n\n  if (shapes.length === 0) {\n    return '-';\n  }\n\n  const labelShape = shapes.reduce((s0, s1) => {\n    // Min value\n    const bounds0 = s0.bounds;\n    const bounds1 = s1.bounds;\n\n    if (value === min) {\n      if (bounds0[state.cssCoord.coord] <= bounds1[state.cssCoord.coord]) {\n        return s0;\n      }\n      return s1;\n    }\n\n    // Max value\n    if (\n      bounds0[state.cssCoord.coord] + bounds0[state.cssCoord.area] >=\n      bounds1[state.cssCoord.coord] + bounds1[state.cssCoord.area]\n    ) {\n      return s0;\n    }\n    return s1;\n  });\n\n  const compConfig = state.settings.brush.components.reduce((c0, c1) => (c0.key === labelShape.key ? c0 : c1));\n\n  if (typeof state.settings.bubbles.label === 'function') {\n    return state.settings.bubbles.label(labelShape.data);\n  }\n  if (Array.isArray(compConfig.data) && compConfig.data.length) {\n    return labelShape.data[compConfig.data[0]].label;\n  }\n\n  return labelShape.data && labelShape.data.label ? labelShape.data.label : '-';\n}\n\n/**\n * @typedef {object} ComponentBrushAreaDir.settings\n * @property {object} brush\n * @property {BrushTargetConfig[]} brush.components\n * @property {string} [direction=vertical] - Rendering direction [horizontal|vertical]\n * @property {object} [bubbles]\n * @property {boolean} [bubbles.show=true] - True to show label bubble, false otherwise\n * @property {string} [bubbles.align=start] - Where to anchor bubble [start|end]\n * @property {function} [bubbles.label] - Callback function for the labels\n * @property {object} [target]\n * @property {string[]} [target.components] - Render matching overlay on target components\n */\n\n/**\n * @private\n * @typedef {object} ComponentBrushAreaDirStyle\n * @property {object} [bubble]\n * @property {string} [bubble.fontSize]\n * @property {string} [bubble.fontFamily]\n * @property {string} [bubble.fill]\n * @property {string} [bubble.color]\n * @property {string} [bubble.stroke]\n * @property {number} [bubble.strokeWidth]\n * @property {number} [bubble.borderRadius]\n * @property {object} [line]\n * @property {string} [line.stroke]\n * @property {number} [line.strokeWidth]\n * @property {object} [target]\n * @property {string} [target.fill]\n * @property {number} [target.strokeWidth]\n * @property {number} [target.opacity]\n */\n\nconst brushAreaDirectionalComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {\n      bubbles: {\n        show: true,\n        align: 'start',\n      },\n    },\n    style: {\n      bubble: '$label-overlay',\n      line: '$shape-guide--inverted',\n      target: '$selection-area-target',\n    },\n  },\n  renderer: 'dom',\n  on: {\n    areaStart(e) {\n      this.start(e);\n    },\n    areaMove(e) {\n      this.move(e);\n    },\n    areaEnd(e) {\n      this.end(e);\n    },\n    areaClear(e) {\n      this.clear(e);\n    },\n  },\n  created() {\n    this.state = {\n      key: this.settings.key || 'brush-area-dir',\n    };\n  },\n  render(h) {\n    this.state.rect = this.rect;\n\n    const stngs = this.settings.settings;\n    const direction = stngs.direction === 'vertical' ? VERTICAL : HORIZONTAL;\n    const size = this.state.rect[direction === VERTICAL ? 'height' : 'width'];\n    const offset = this.renderer.element().getBoundingClientRect();\n\n    const targets = (stngs.target ? stngs.target.components || [stngs.target.component] : [])\n      .map((c) => this.chart.component(c))\n      .filter((c) => !!c && !!c.rect);\n\n    const targetRect = targets[0]\n      ? targets.slice(1).reduce(\n          (prev, curr) => ({\n            x0: Math.min(prev.x0, curr.rect.x),\n            y0: Math.min(prev.y0, curr.rect.y),\n            x1: Math.max(prev.x1, curr.rect.x + curr.rect.width),\n            y1: Math.max(prev.y1, curr.rect.y + curr.rect.height),\n          }),\n          {\n            x0: targets[0].rect.x,\n            y0: targets[0].rect.y,\n            x1: targets[0].rect.x + targets[0].rect.width,\n            y1: targets[0].rect.y + targets[0].rect.height,\n          }\n        )\n      : null;\n\n    this.state.targetRect = targetRect\n      ? {\n          x: targetRect.x0 - this.rect.x,\n          y: targetRect.y0 - this.rect.y,\n          width: targetRect.x1 - targetRect.x0,\n          height: targetRect.y1 - targetRect.y0,\n        }\n      : null;\n\n    this.state.style = this.style;\n    this.state.chart = this.chart;\n    this.state.direction = direction;\n    this.state.settings = stngs;\n    this.state.offset = offset;\n    this.state.rc = rangeCollection();\n    this.state.renderer = this.renderer;\n    this.state.multi = !!stngs.multiple;\n    this.state.h = h;\n    this.state.size = size;\n    this.state.cssCoord = {\n      offset: this.state.direction === VERTICAL ? 'top' : 'left',\n      coord: this.state.direction === VERTICAL ? 'y' : 'x',\n      pos: this.state.direction === VERTICAL ? 'deltaY' : 'deltaX',\n      area: this.state.direction === VERTICAL ? 'height' : 'width',\n    };\n\n    this.state.format = function getFormat(v, r) {\n      return getBubbleLabel(this, v, r);\n    };\n\n    return [];\n  },\n  start(e) {\n    startArea({\n      e,\n      state: this.state,\n      renderer: this.renderer,\n      ranges,\n      targetSize: TARGET_SIZE,\n    });\n  },\n  end() {\n    if (!this.state.started) {\n      return;\n    }\n    endArea(this.state, ranges);\n    render(this.state);\n  },\n  move(e) {\n    if (!this.state.started) {\n      return;\n    }\n    moveArea(this.state, e);\n    setRanges(this.state);\n    render(this.state);\n  },\n  clear() {\n    if (this.state.rc) {\n      this.state.rc.clear();\n    }\n    this.state.renderer.render([]);\n  },\n};\n\nexport default brushAreaDirectionalComponent;\n","import rangeBrushComponent from './brush-range';\nimport brushAreaDirectionalComponent from './brush-area-dir';\n\n/**\n * @typedef {object} ComponentBrushAreaDir\n * @extends ComponentSettings\n */\n\n/**\n * @typedef {object} ComponentBrushRange\n * @extends ComponentSettings\n */\n\nexport default function rangeBrush(picasso) {\n  picasso.component('brush-range', rangeBrushComponent);\n  picasso.component('brush-area-dir', brushAreaDirectionalComponent);\n}\n","import { scaleWithSize } from '../../scales';\n\nconst FILL = '#ccc';\nconst OPACITY = 1;\n\nfunction ranges(state) {\n  const brush = state.brush;\n  if (!brush || !brush.isActive()) {\n    return [];\n  }\n\n  const sourceData = state.scale.data();\n  const sourceFields = sourceData ? sourceData.fields || [] : [];\n  const sources = sourceFields.map((field) => field.id());\n  const rangeBrush = brush.brushes().filter((f) => f.type === 'range' && sources.indexOf(f.id) !== -1)[0];\n\n  if (!rangeBrush) {\n    return [];\n  }\n\n  return rangeBrush.brush.ranges();\n}\n\nfunction shapes(state) {\n  const isVertical = state.direction === 'vertical';\n  const size = state.rect[isVertical ? 'height' : 'width'];\n  const otherSize = state.rect[isVertical ? 'width' : 'height'];\n  return ranges(state).map((range) => {\n    const start = state.scale(range.min) * size;\n    const end = state.scale(range.max) * size;\n    const low = Math.min(start, end);\n    const s = Math.abs(start - end);\n    return {\n      type: 'rect',\n      fill: state.fill,\n      opacity: state.opacity,\n      x: isVertical ? 0 : low,\n      width: isVertical ? otherSize : s,\n      y: isVertical ? low : 0,\n      height: isVertical ? s : otherSize,\n    };\n  });\n}\n\nfunction onStart(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction onUpdate(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction onEnd(state) {\n  state.renderer.render(shapes(state));\n}\n\nfunction setup(state, brush, scale, renderer) {\n  state.brush = brush;\n\n  if (!brush) {\n    return;\n  }\n\n  function start() {\n    onStart(state);\n  }\n\n  function update() {\n    onUpdate(state);\n  }\n\n  function end() {\n    onEnd(state);\n  }\n\n  brush.on('start', start);\n  brush.on('update', update);\n  brush.on('end', end);\n\n  state.start = start;\n  state.update = update;\n  state.end = end;\n  state.brush = brush;\n  state.scale = scale;\n  state.renderer = renderer;\n}\n\nfunction teardown(state) {\n  if (state.brush) {\n    state.brush.removeListener('start', state.start);\n    state.brush.removeListener('update', state.update);\n    state.brush.removeListener('end', state.end);\n  }\n\n  state.start = undefined;\n  state.update = undefined;\n  state.end = undefined;\n  state.brush = undefined;\n  state.scale = undefined;\n  state.renderer = undefined;\n}\n\n/**\n * @private\n * @typedef {object} ComponentRange\n * @extends ComponentSettings\n */\n\n/**\n * @typedef {object} ComponentRange.settings\n * @property {string} brush - Name of brush instance\n * @property {string} scale - Name of a scale\n * @property {string} [direction='horizontal'] - Direction of the brush\n * @property {string} [fill='#ccc'] - Fill color\n * @property {number} [opacity=1] - Layer opacity\n */\n\nconst rangeComponent = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    settings: {},\n  },\n  preferredSize: () => 50,\n  created() {\n    this.state = {};\n  },\n  render() {\n    const stngs = this.settings.settings;\n    const brush = this.chart.brush(stngs.brush);\n    const direction = stngs.direction || 'horizontal';\n    const distance = direction === 'horizontal' ? this.rect.width : this.rect.height;\n    const scale = scaleWithSize(this.chart.scale(stngs.scale), distance);\n\n    teardown(this.state);\n    setup(this.state, brush, scale, this.renderer);\n\n    this.state.rect = this.rect;\n    this.state.fill = stngs.fill || FILL;\n    this.state.opacity = typeof stngs.opacity !== 'undefined' ? stngs.opacity : OPACITY;\n    this.state.direction = direction;\n\n    return shapes(this.state);\n  },\n  beforeDestroy() {\n    teardown(this.state);\n  },\n};\n\nexport default rangeComponent;\n","import rangeBrushComponent from './range';\n\nexport default function rangeBrush(picasso) {\n  picasso.component('range', rangeBrushComponent);\n}\n","import { sqrDistance } from '../../math/vector';\n\nfunction getPoint(rendererBounds, event) {\n  const eventOffsetX = event.center.x;\n  const eventOffsetY = event.center.y;\n  return {\n    x: eventOffsetX - rendererBounds.left,\n    y: eventOffsetY - rendererBounds.top,\n  };\n  // return {\n  //   x: Math.min(Math.max(eventOffsetX - rendererBounds.left, 0), rendererBounds.width),\n  //   y: Math.min(Math.max(eventOffsetY - rendererBounds.top, 0), rendererBounds.height)\n  // };\n}\n\nfunction withinThreshold(p, state, settings) {\n  const startPoint = state.points[0];\n  const sqrDist = sqrDistance(p, startPoint);\n  return sqrDist < Math.pow(settings.settings.snapIndicator.threshold, 2);\n}\n\nfunction appendToPath(state, p) {\n  if (state.path.d == null) {\n    state.path.d = `M${p.x} ${p.y} `;\n  } else {\n    state.path.d += `L${p.x} ${p.y} `;\n  }\n  state.points.push(p);\n}\n\nfunction render(state, renderer) {\n  const nodes = [state.startPoint, state.path, state.snapIndicator].filter((node) => node.visible);\n\n  renderer.render(nodes);\n}\n\nfunction setSnapIndictor({ state, start = null, end = null }) {\n  if (start !== null) {\n    state.snapIndicator.x1 = start.x;\n    state.snapIndicator.y1 = start.y;\n  }\n  if (end !== null) {\n    state.snapIndicator.x2 = end.x;\n    state.snapIndicator.y2 = end.y;\n  }\n}\n\nfunction showSnapIndicator(state, show) {\n  state.snapIndicator.visible = show;\n}\n\nfunction setStartPoint(state, p) {\n  state.startPoint.cx = p.x;\n  state.startPoint.cy = p.y;\n}\n\nfunction getComponentDelta(chart, rendererBounds) {\n  const chartBounds = chart.element.getBoundingClientRect();\n  return {\n    x: rendererBounds.left - chartBounds.left,\n    y: rendererBounds.top - chartBounds.top,\n  };\n}\n\nfunction doLineBrush(state, chart) {\n  if (state.active) {\n    const p1 = state.points[state.points.length - 2];\n    const p2 = state.points[state.points.length - 1];\n    state.lineBrushShape.x1 = p1.x + state.componentDelta.x;\n    state.lineBrushShape.y1 = p1.y + state.componentDelta.y;\n    state.lineBrushShape.x2 = p2.x + state.componentDelta.x;\n    state.lineBrushShape.y2 = p2.y + state.componentDelta.y;\n\n    const shapes = chart.shapesAt(state.lineBrushShape, { components: state.brushConfig });\n    chart.brushFromShapes(shapes, { components: state.brushConfig });\n  }\n}\n\nfunction doPolygonBrush(state, chart) {\n  if (state.active) {\n    const dx = state.componentDelta.x;\n    const dy = state.componentDelta.y;\n    const vertices = state.points.map((p) => ({\n      x: p.x + dx,\n      y: p.y + dy,\n    }));\n\n    const shapes = chart.shapesAt({ vertices }, { components: state.brushConfig });\n    chart.brushFromShapes(shapes, { components: state.brushConfig });\n  }\n}\n\nfunction initPath(stgns) {\n  return {\n    visible: true,\n    type: 'path',\n    d: null,\n    fill: stgns.fill,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    opacity: stgns.opacity,\n    strokeDasharray: stgns.strokeDasharray,\n    collider: {\n      type: null,\n    },\n  };\n}\n\nfunction initSnapIndicator(stgns) {\n  return {\n    visible: false,\n    type: 'line',\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    strokeDasharray: stgns.strokeDasharray,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    opacity: stgns.opacity,\n    collider: {\n      type: null,\n    },\n  };\n}\n\nfunction initStartPoint(stgns) {\n  return {\n    visible: true,\n    type: 'circle',\n    cx: 0,\n    cy: 0,\n    r: stgns.r,\n    fill: stgns.fill,\n    opacity: stgns.opacity,\n    stroke: stgns.stroke,\n    strokeWidth: stgns.strokeWidth,\n    collider: {\n      type: null,\n    },\n  };\n}\n\nfunction getBrushConfig(settings) {\n  return settings.settings.brush.components.map((b) => ({\n    key: b.key,\n    contexts: b.contexts || ['lassoBrush'],\n    data: b.data || [''],\n    action: b.action || 'add',\n  }));\n}\n\nfunction endBrush(state, chart) {\n  state.brushConfig.forEach((config) => {\n    config.contexts.forEach((context) => {\n      chart.brush(context).end();\n    });\n  });\n}\n\nfunction resetState() {\n  return {\n    points: [],\n    active: false,\n    path: null,\n    snapIndicator: null,\n    startPoint: null,\n    rendererBounds: null,\n    componentDelta: null,\n    brushConfig: null,\n    lineBrushShape: {\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 0,\n    }, // Keep a single shape instance to avoid instantiating a new object on each lookup\n  };\n}\n\n/**\n * @typedef {object} ComponentBrushLasso\n * @extends ComponentSettings\n * @example\n * {\n *  type: 'brush-lasso',\n *  settings: {\n *    brush: {\n *      components: [{ key: '<target-component>', contexts: ['<brush-context>'] }]\n *    }\n *  },\n * }\n */\n\n/**\n * Component settings\n * @typedef {object} ComponentBrushLasso.settings\n * @property {object} [lasso] - Lasso style settings\n * @property {string} [lasso.fill='transparent']\n * @property {string} [lasso.stroke='black']\n * @property {number} [lasso.strokeWidth=2]\n * @property {number} [lasso.opacity=0.7]\n * @property {number} [lasso.strokeDasharray]\n * @property {object} [snapIndicator] - Snap indicator settings\n * @property {number} [snapIndicator.threshold=75] - The distance in pixel to show the snap indicator, if less then threshold the indicator is dispalyed\n * @property {string} [snapIndicator.strokeDasharray='5, 5']\n * @property {string} [snapIndicator.stroke='black']\n * @property {number} [snapIndicator.strokeWidth=2]\n * @property {number} [snapIndicator.opacity=0.5]\n * @property {object} [startPoint] - Start point style settings\n * @property {number} [startPoint.r=10] - Circle radius\n * @property {string} [startPoint.stroke='green']\n * @property {number} [startPoint.strokeWidth=1]\n * @property {number} [startPoint.opacity=1]\n * @property {object} [brush]\n * @property {object[]} brush.components - Array of components to brush on.\n * @property {string} [brush.components[].component.key] - Component key\n * @property {string[]} [brush.components[].component.contexts=['brushLasso']] - Name of the brushing contexts to affect\n * @property {string[]} [brush.components[].component.data=['']] - The mapped data properties to add to the brush\n * @property {string} [brush.components[].component.action='add'] - Type of action to respond with\n */\n\nconst brushLassoComponent = {\n  require: ['chart', 'renderer', 'settings'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n    },\n    settings: {\n      brush: {\n        components: [],\n      },\n      snapIndicator: {\n        threshold: 75,\n        strokeDasharray: '5, 5',\n        stroke: 'black',\n        strokeWidth: 2,\n        opacity: 0.5,\n      },\n      lasso: {\n        fill: 'transparent',\n        stroke: 'black',\n        strokeWidth: 2,\n        opacity: 0.7,\n        strokeDasharray: '20, 10',\n      },\n      startPoint: {\n        r: 10,\n        fill: 'green',\n        stroke: 'black',\n        strokeWidth: 1,\n        opacity: 1,\n      },\n    },\n  },\n  on: {\n    lassoStart(e) {\n      this.start(e);\n    },\n    lassoEnd(e) {\n      this.end(e);\n    },\n    lassoMove(e) {\n      this.move(e);\n    },\n    lassoCancel() {\n      this.cancel();\n    },\n  },\n  created() {\n    this.state = resetState();\n  },\n  start(e) {\n    this.state.active = true;\n    this.state.path = initPath(this.settings.settings.lasso);\n    this.state.snapIndicator = initSnapIndicator(this.settings.settings.snapIndicator);\n    this.state.startPoint = initStartPoint(this.settings.settings.startPoint);\n    this.state.rendererBounds = this.renderer.element().getBoundingClientRect();\n    this.state.componentDelta = getComponentDelta(this.chart, this.state.rendererBounds);\n    this.state.brushConfig = getBrushConfig(this.settings);\n\n    const p = getPoint(this.state.rendererBounds, e);\n\n    appendToPath(this.state, p);\n    setSnapIndictor({ state: this.state, start: p });\n    setStartPoint(this.state, p);\n  },\n  move(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    const p = getPoint(this.state.rendererBounds, e);\n\n    if (withinThreshold(p, this.state, this.settings)) {\n      showSnapIndicator(this.state, true);\n    } else {\n      showSnapIndicator(this.state, false);\n    }\n\n    appendToPath(this.state, p);\n    setSnapIndictor({ state: this.state, end: p });\n    render(this.state, this.renderer);\n\n    doLineBrush(this.state, this.chart);\n  },\n  end(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    showSnapIndicator(this.state, false);\n    const p = getPoint(this.state.rendererBounds, e);\n    const shouldSnap = withinThreshold(p, this.state, this.settings);\n\n    if (shouldSnap) {\n      doPolygonBrush(this.state, this.chart);\n    }\n\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  cancel() {\n    if (!this.state.active) {\n      return;\n    }\n    endBrush(this.state, this.chart);\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  render() {\n    // Do nothing\n  },\n};\n\nexport default brushLassoComponent;\n","import lassoBrushComponent from './brush-lasso';\n\nexport default function lassoBrush(picasso) {\n  picasso.component('brush-lasso', lassoBrushComponent);\n}\n","import { testRectRect } from '../../../math/narrow-phase-collision';\n\n/**\n * Using the basic example found here: https://en.wikipedia.org/wiki/Binary_search_algorithm\n *\n * Finds the first node that may intersect the label.\n * @private\n */\nexport function binaryLeftSearch(labelBounds, ary, coord, side, extractBounds) {\n  let left = 0;\n  let right = ary.length - 1;\n  let bounds;\n\n  while (left < right) {\n    let m = Math.floor((left + right) / 2);\n    bounds = extractBounds(ary[m]);\n    if (bounds[coord] + bounds[side] < labelBounds[coord]) {\n      // label is on right side\n      left = m + 1;\n    } else {\n      // label is on the left side\n      right = m;\n    }\n  }\n\n  return left;\n}\n\n/**\n * The purpose of this module is to act as a filtering function to remove any labels\n * that meets one of the following criterias:\n * -- The label is not fully inside the container, such that it would be fully or partially clipped if rendered\n * -- The label overlaps another label\n * -- The label overlaps another bar which is not the bar the label is originating from\n *\n * Assumes that the nodes are sorted from left/top to right/down, as that allows\n * some optimizations to be performed.\n * @private\n * @returns {function} Filter function, returns false if label be removed and true otherwise\n */\nexport default function filterOverlappingLabels(\n  { orientation, targetNodes, labels, container },\n  findLeft = binaryLeftSearch\n) {\n  const renderLabels = [];\n  const coord = orientation === 'v' ? 'x' : 'y';\n  const side = orientation === 'v' ? 'width' : 'height';\n  const getTextBounds = (item) => item.textBounds;\n  const getNodeBounds = (item) => item.node.localBounds;\n\n  return (doNotUse, labelIndex) => {\n    const { textBounds: labelBounds, node: labelNode } = labels[labelIndex];\n\n    // ### Test if label is not fully inside container based on the orientation ###\n    if (\n      labelBounds[coord] < container[coord] ||\n      labelBounds[coord] + labelBounds[side] > container[coord] + container[side]\n    ) {\n      return false;\n    }\n\n    // ### Test label to label collision ###\n    const leftStartLabel = findLeft(labelBounds, renderLabels, coord, side, getTextBounds);\n    for (let i = leftStartLabel; i < renderLabels.length; i++) {\n      if (testRectRect(labelBounds, renderLabels[i].textBounds)) {\n        return false;\n      }\n    }\n\n    // ### Test label to node collision ###\n    const leftStartNode = findLeft(labelBounds, targetNodes, coord, side, getNodeBounds);\n    const labelRightBoundary = labelBounds[coord] + labelBounds[side];\n    for (let i = leftStartNode; i < targetNodes.length; i++) {\n      const node = targetNodes[i].node;\n      // Do not test beyond this node, as they are assumed to not collide with the label\n      if (labelRightBoundary < node.localBounds[coord]) {\n        break;\n      }\n\n      if (testRectRect(labelBounds, node.localBounds) && labelNode !== node) {\n        return false;\n      }\n    }\n\n    // No collision occured, allow the label to be rendered\n    renderLabels.push(labels[labelIndex]);\n    return true;\n  };\n}\n","import extend from 'extend';\nimport { testRectRect } from '../../../math/narrow-phase-collision';\nimport filterOverlapping from './bars-overlapping-filter';\n\nconst PADDING = 4;\n// const DOUBLE_PADDING = PADDING * 2;\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset,\n  };\n}\n\nfunction isValidText(text) {\n  const type = typeof text;\n  return (type === 'string' || type === 'number') && text !== '';\n}\n\nfunction toBackground(label) {\n  return {\n    type: 'rect',\n    rx: 2,\n    ry: 2,\n    fill: label.backgroundColor,\n    ...label.backgroundBounds,\n  };\n}\n\nfunction isTextWidthInRectWidth(rect, label, rotate) {\n  return rotate ? rect.width >= label.height : rect.width >= label.width;\n}\n\nfunction isTextHeightInRectHeight(rect, label, rotate) {\n  return rotate ? rect.height >= label.width : rect.height >= label.height;\n}\n\nfunction isGoodPlacement(orientation, rect, label, fitsHorizontally, overflow) {\n  let fitWidth;\n  let fitHeight;\n  if (orientation === 'v') {\n    fitWidth = fitsHorizontally || overflow || isTextWidthInRectWidth(rect, label, true);\n    fitHeight = isTextHeightInRectHeight(rect, label, !fitsHorizontally);\n  } else {\n    fitWidth = isTextWidthInRectWidth(rect, label);\n    fitHeight = overflow || isTextHeightInRectHeight(rect, label, false);\n  }\n  return fitWidth && fitHeight;\n}\n\nexport function isTextInRect(rect, label, opts) {\n  return isTextWidthInRectWidth(rect, label, opts.rotate) && isTextHeightInRectHeight(rect, label, opts.rotate);\n}\n\nexport function placeSegmentInSegment(majorSegmentPosition, majorSegmentSize, minorSegmentSize, align) {\n  const majorSegmentCenter = majorSegmentPosition + majorSegmentSize * 0.5;\n  const offset = (align - 0.5) * (majorSegmentSize - minorSegmentSize);\n  const minorSegmentCenter = majorSegmentCenter + offset;\n  const minorSegmentPosition = minorSegmentCenter - minorSegmentSize * 0.5;\n  return minorSegmentPosition;\n}\n\nexport function placeTextInRect(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: opts.rotate ? rect.height : rect.width,\n    x: 0,\n    y: rect.y,\n    dx: 0,\n    dy: 0,\n    fill: opts.fill,\n    anchor: opts.rotate ? 'end' : 'start',\n    baseline: 'central',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily,\n  };\n\n  const textMetrics = opts.textMetrics;\n  if (!opts.overflow && !isTextInRect(rect, textMetrics, opts)) {\n    return false;\n  }\n  const baseLineOffset = textMetrics.height * 0.5;\n  if (opts.rotate) {\n    label.x = placeSegmentInSegment(rect.x, rect.width, textMetrics.height, opts.align) + baseLineOffset;\n    label.y = placeSegmentInSegment(rect.y, rect.height, textMetrics.width, opts.justify);\n    label.transform = `rotate(-90, ${label.x + label.dx}, ${label.y + label.dy})`;\n  } else {\n    label.x = placeSegmentInSegment(rect.x, rect.width, textMetrics.width, opts.align);\n    label.y = placeSegmentInSegment(rect.y, rect.height, textMetrics.height, opts.justify) + baseLineOffset;\n  }\n\n  return label;\n}\n\nfunction limitBounds(bounds, view) {\n  const minY = Math.max(0, Math.min(bounds.y, view.height));\n  const maxY = Math.max(0, Math.min(bounds.y + bounds.height, view.height));\n  const minX = Math.max(0, Math.min(bounds.x, view.width));\n  const maxX = Math.max(0, Math.min(bounds.x + bounds.width, view.width));\n  bounds.x = minX;\n  bounds.width = maxX - minX;\n  bounds.y = minY;\n  bounds.height = maxY - minY;\n}\n\nfunction pad(bounds, padding = {}) {\n  const { top = PADDING, bottom = PADDING, left = PADDING, right = PADDING } = padding;\n  bounds.x += left;\n  bounds.width -= left + right;\n  bounds.y += top;\n  bounds.height -= top + bottom;\n}\n\nexport function getBarRect({ bar, view, direction, position, padding = PADDING }) {\n  const bounds = {};\n  extend(bounds, bar);\n\n  if (!position || position === 'inside') {\n    // do nothing\n  } else if (direction === 'up' || direction === 'down') {\n    const start = Math.max(0, Math.min(bar.y, view.height));\n    const end = Math.max(0, Math.min(bar.y + bar.height, view.height));\n\n    if ((position === 'outside' && direction === 'up') || (position === 'opposite' && direction === 'down')) {\n      bounds.y = 0;\n      bounds.height = start;\n    } else if ((position === 'outside' && direction === 'down') || (position === 'opposite' && direction === 'up')) {\n      bounds.y = end;\n      bounds.height = view.height - end;\n    }\n  } else {\n    const start = Math.max(0, Math.min(bar.x, view.width));\n    const end = Math.max(0, Math.min(bar.x + bar.width, view.width));\n\n    if ((position === 'outside' && direction === 'left') || (position === 'opposite' && direction === 'right')) {\n      bounds.x = 0;\n      bounds.width = start;\n    } else if ((position === 'outside' && direction === 'right') || (position === 'opposite' && direction === 'left')) {\n      bounds.x = end;\n      bounds.width = view.width - end;\n    }\n  }\n\n  limitBounds(bounds, view);\n  pad(bounds, padding);\n\n  return bounds;\n}\n\nexport function findBestPlacement(\n  {\n    direction,\n    fitsHorizontally,\n    // lblStngs,\n    measured,\n    node,\n    orientation,\n    // placements,\n    placementSettings,\n    rect,\n  },\n  barRect = getBarRect\n) {\n  let largest;\n  let bounds;\n  let placement;\n  let testBounds;\n  let p;\n  const boundaries = [];\n  const dimension = orientation === 'h' ? 'width' : 'height';\n  for (p = 0; p < placementSettings.length; p++) {\n    placement = placementSettings[p];\n    testBounds = barRect({\n      bar: node.localBounds,\n      view: rect,\n      direction,\n      position: placement.position,\n      padding: placement.padding,\n    });\n    boundaries.push(testBounds);\n    largest = !p || testBounds[dimension] > largest[dimension] ? testBounds : largest;\n\n    if (isGoodPlacement(orientation, testBounds, measured, fitsHorizontally, placement.overflow)) {\n      bounds = testBounds;\n      break;\n    }\n  }\n\n  // fallback strategy - place the text in the largest rectangle\n  if (!bounds) {\n    bounds = largest;\n    p = boundaries.indexOf(bounds);\n  }\n  placement = placementSettings[p];\n\n  return { bounds, placement };\n}\n\nfunction approxTextBounds(label, textMetrics, rotated, rect, padding = {}) {\n  const { top = PADDING, bottom = PADDING, left = PADDING, right = PADDING } = padding;\n  const x0 = label.x + label.dx;\n  const y0 = label.y + label.dy;\n  const height = rotated ? Math.min(textMetrics.width, rect.height) : Math.min(textMetrics.height, rect.width);\n  const width = rotated ? Math.min(textMetrics.height, rect.height) : Math.min(textMetrics.width, rect.width);\n  const offset = textMetrics.height * 0.5;\n  const PADDING_OFFSET = 1e-9; // Needed to support a case when multiple bars are on the same location\n  const x = rotated ? x0 - offset : x0;\n  const y = rotated ? y0 : y0 - offset;\n  const bounds = {\n    x: x - left - PADDING_OFFSET,\n    y: y - top - PADDING_OFFSET,\n    width: width + (left + right) - PADDING_OFFSET,\n    height: height + (top + bottom) - PADDING_OFFSET,\n  };\n  return bounds;\n}\n\nexport function placeInBars(\n  { chart, targetNodes, rect, fitsHorizontally, collectiveOrientation },\n  findPlacement = findBestPlacement,\n  placer = placeTextInRect,\n  postFilter = filterOverlapping\n) {\n  const labels = [];\n  const postFilterContext = {\n    container: rect,\n    targetNodes,\n    labels: [],\n    orientation: collectiveOrientation,\n  };\n  let label;\n  let target;\n  let node;\n  let text;\n  let justify;\n  let bounds;\n  let fill;\n  let measured;\n  let direction;\n  let lblStngs;\n  let placement;\n  let placements;\n  let arg;\n  let orientation;\n\n  for (let i = 0, len = targetNodes.length; i < len; i++) {\n    bounds = null;\n    target = targetNodes[i];\n    node = target.node;\n    arg = cbContext(node, chart);\n    direction = target.direction;\n    orientation = direction === 'left' || direction === 'right' ? 'h' : 'v';\n\n    for (let j = 0; j < target.texts.length; j++) {\n      text = target.texts[j];\n      if (!isValidText(text)) {\n        continue;\n      }\n      lblStngs = target.labelSettings[j];\n      measured = target.measurements[j];\n      placements = lblStngs.placements;\n\n      const bestPlacement = findPlacement({\n        direction,\n        fitsHorizontally,\n        lblStngs,\n        measured,\n        node,\n        orientation,\n        placements,\n        placementSettings: target.placementSettings[j],\n        rect,\n      });\n\n      bounds = bestPlacement.bounds;\n      placement = bestPlacement.placement;\n\n      if (bounds && placement) {\n        justify = placement.justify;\n        const linkData = typeof lblStngs.linkData === 'function' ? lblStngs.linkData(arg, i) : undefined;\n        const overflow = typeof placement.overflow === 'function' ? placement.overflow(arg, i) : placement.overflow;\n\n        if (direction === 'up') {\n          justify = 1 - justify;\n        }\n        if (placement.position === 'opposite') {\n          justify = 1 - justify;\n        }\n        if (direction === 'left') {\n          justify = 1 - justify;\n        }\n\n        const isRotated = !(collectiveOrientation === 'h' || fitsHorizontally);\n        label = placer(bounds, text, {\n          justify: orientation === 'h' ? placement.align : justify,\n          align: orientation === 'h' ? justify : placement.align,\n          fontSize: lblStngs.fontSize,\n          fontFamily: lblStngs.fontFamily,\n          textMetrics: measured,\n          rotate: isRotated,\n          overflow: !!overflow,\n        });\n\n        if (label) {\n          const textBounds = approxTextBounds(label, measured, isRotated, bounds, placement.padding);\n          fill = typeof placement.fill === 'function' ? placement.fill({ ...arg, textBounds }, i) : placement.fill;\n          label.fill = fill;\n          if (typeof linkData !== 'undefined') {\n            label.data = linkData;\n          }\n          if (typeof placement.background === 'object') {\n            label.backgroundColor =\n              typeof placement.background.fill === 'function'\n                ? placement.background.fill({ ...arg, textBounds }, i)\n                : placement.background.fill;\n            if (typeof label.backgroundColor !== 'undefined') {\n              label.backgroundBounds = approxTextBounds(\n                label,\n                measured,\n                isRotated,\n                bounds,\n                placement.background.padding\n              );\n            }\n          }\n          labels.push(label);\n          postFilterContext.labels.push({\n            node,\n            textBounds,\n          });\n        }\n      }\n    }\n  }\n\n  const filteredLabels = labels.filter(postFilter(postFilterContext));\n  const backgrounds = filteredLabels.filter((lb) => typeof lb.backgroundBounds !== 'undefined').map(toBackground);\n\n  return [...backgrounds, ...filteredLabels];\n}\n\nexport function precalculate({ nodes, rect, chart, labelSettings, placementSettings, settings, renderer }) {\n  const labelStruct = {};\n  const targetNodes = [];\n  let target;\n  let fitsHorizontally = true;\n  let hasHorizontalDirection = false;\n  let node;\n  let text;\n  let bounds;\n  let measured;\n  let lblStng;\n  let direction;\n\n  for (let i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n    bounds = node.localBounds;\n    if (!testRectRect(bounds, rect)) {\n      continue;\n    }\n    let arg = cbContext(node, chart);\n\n    target = {\n      node,\n      texts: [],\n      measurements: [],\n      labelSettings: [],\n      placementSettings: [],\n      // direction: 'up'\n    };\n\n    for (let j = 0; j < labelSettings.length; j++) {\n      lblStng = labelSettings[j];\n      text = typeof lblStng.label === 'function' ? lblStng.label(arg, i) : undefined;\n      if (!isValidText(text)) {\n        continue; // eslint-ignore-line\n      }\n      direction = typeof settings.direction === 'function' ? settings.direction(arg, i) : settings.direction || 'up';\n      hasHorizontalDirection = hasHorizontalDirection || direction === 'left' || direction === 'right';\n\n      labelStruct.fontFamily = lblStng.fontFamily;\n      labelStruct.fontSize = `${lblStng.fontSize}px`;\n      labelStruct.text = text;\n\n      measured = renderer.measureText(labelStruct);\n      target.measurements.push(measured);\n      target.texts.push(text);\n      target.labelSettings.push(lblStng);\n      target.placementSettings.push(placementSettings[j]);\n      target.direction = direction;\n      fitsHorizontally = fitsHorizontally && measured.width <= bounds.width - PADDING * 2;\n    }\n\n    targetNodes.push(target);\n  }\n\n  return {\n    targetNodes,\n    fitsHorizontally,\n    hasHorizontalDirection,\n  };\n}\n\n/**\n * @typedef {object} ComponentLabels~BarsLabelStrategy\n * @property {string} type='bar' Name of strategy\n */\n\n/**\n * Bars strategy settings\n * @typedef {object} ComponentLabels~BarsLabelStrategy.settings\n * @property {string|function} [direction='up'] - The direction in which the bars are growing: 'up', 'down', 'right' or 'left'.\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {function} labels[].linkData - Link data to the label\n * @property {Array<object>} labels[].placements\n * @property {string} labels[].placements[].position - 'inside' | 'outside' | 'opposite'\n * @property {number} [labels[].placements[].justify=0] - Placement of the label along the direction of the bar\n * @property {number} [labels[].placements[].align=0.5] - Placement of the label along the perpendicular direction of the bar\n * @property {string} [labels[].placements[].fill='#333'] - Color of the label\n * @property {boolean} [labels[].placements[].overflow=false] - True if the label is allowed to overflow the bar\n * @property {object} labels[].placements[].padding - Padding between the label and the bar\n * @property {number} [labels[].placements[].padding.top=4] - Padding-top between the label and the bar\n * @property {number} [labels[].placements[].padding.bottom=4] - Padding-bottom between the label and the bar\n * @property {number} [labels[].placements[].padding.left=4] - Padding-left between the label and the bar\n * @property {number} [labels[].placements[].padding.right=4] - Padding-right between the label and the bar\n * @property {object} labels[].placements[].background - Background of the label\n * @property {string|function} labels[].placements[].background.fill - Background color of the label\n * @property {object} labels[].placements[].background.padding - Padding between the label and the background\n * @property {number} [labels[].placements[].background.padding.top=4] - Padding-top between the label and the background\n * @property {number} [labels[].placements[].background.padding.bottom=4] - Padding-bottom between the label and the background\n * @property {number} [labels[].placements[].background.padding.left=4] - Padding-left between the label and the background\n * @property {number} [labels[].placements[].background.padding.right=4] - Padding-right between the label and the background\n */\n\nexport function bars({ settings, chart, nodes, rect, renderer, style }, placer = placeInBars) {\n  const defaults = extend(\n    {\n      fontSize: 12,\n      fontFamily: 'Arial',\n      align: 0.5,\n      justify: 0,\n      fill: '#333',\n    },\n    style.label\n  );\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const labelSettings = settings.labels.map((labelSetting) => extend({}, defaults, settings, labelSetting));\n\n  const placementSettings = settings.labels.map((labelSetting) =>\n    labelSetting.placements.map((placement) => extend({}, defaults, settings, labelSetting, placement))\n  );\n\n  const { fitsHorizontally, hasHorizontalDirection, targetNodes } = precalculate({\n    nodes,\n    chart,\n    renderer,\n    settings,\n    rect,\n    labelSettings,\n    placementSettings,\n  });\n\n  const coord = hasHorizontalDirection ? 'y' : 'x';\n  const side = hasHorizontalDirection ? 'height' : 'width';\n  targetNodes.sort(\n    (a, b) =>\n      a.node.localBounds[coord] + a.node.localBounds[side] - (b.node.localBounds[coord] + b.node.localBounds[side])\n  );\n\n  return placer({\n    chart,\n    targetNodes,\n    stngs: settings,\n    rect,\n    fitsHorizontally,\n    collectiveOrientation: hasHorizontalDirection ? 'h' : 'v',\n  });\n}\n","import extend from 'extend';\nimport { testCircleRect, testRectLine, testRectRect } from '../../../math/narrow-phase-collision';\nimport { rectContainsRect } from '../../../math/intersection';\n\nconst LABEL_OVERLAP_THRESHOLD_X = 4;\n\nfunction normalize(angle) {\n  const PI2 = Math.PI * 2;\n  return ((angle % PI2) + PI2) % PI2; // normalize\n}\n\nfunction pad(bounds, padding) {\n  bounds.x += padding;\n  bounds.width -= padding * 2;\n  bounds.y += padding;\n  bounds.height -= padding * 2;\n}\n\nfunction getTopLeftBounds(bounds) {\n  const x = bounds.x;\n  const y = bounds.y - bounds.height / 2;\n\n  return {\n    x,\n    y,\n    width: bounds.width,\n    height: bounds.height,\n  };\n}\n\n// assume 0 <= angle < (PI / 2)\nfunction getLineCircleIntersection(radius, offset, angle) {\n  let { x, y } = offset;\n\n  if (x * x + y * y > radius * radius) {\n    return null;\n  }\n\n  let dx = Math.sin(angle);\n  let dy = Math.cos(angle);\n  let D = x * dy - y * dx;\n\n  let d = radius * radius - D * D;\n  if (d < 0) {\n    return null;\n  }\n  let sqrtD = Math.sqrt(d);\n  return {\n    x: D * dy + dx * sqrtD,\n    y: -(D * dx) + dy * sqrtD,\n  };\n}\n\n// assume 0 <= angle < (PI * 2)\nfunction getRectFromCircleIntersection({ radius, size, angle }) {\n  let { width, height } = size;\n  let lineOffset = { x: width / 2, y: height / 2 };\n  let section = Math.floor(angle / (Math.PI / 2));\n  let intersection;\n  let offset;\n  switch (section) {\n    case 0:\n      intersection = getLineCircleIntersection(radius, lineOffset, angle);\n      if (!intersection) {\n        return null;\n      }\n      intersection.y *= -1;\n      offset = { x: -width, y: 0 };\n      break;\n    case 1:\n      intersection = getLineCircleIntersection(radius, lineOffset, Math.PI - angle);\n      if (!intersection) {\n        return null;\n      }\n      offset = { x: -width, y: -height };\n      break;\n    case 2:\n      intersection = getLineCircleIntersection(radius, lineOffset, angle - Math.PI);\n      if (!intersection) {\n        return null;\n      }\n      intersection.x *= -1;\n      offset = { x: 0, y: -height };\n      break;\n    case 3:\n      intersection = getLineCircleIntersection(radius, lineOffset, 2 * Math.PI - angle);\n      if (!intersection) {\n        return null;\n      }\n      intersection.x *= -1;\n      intersection.y *= -1;\n      offset = { x: 0, y: 0 };\n      break;\n    default:\n      throw new Error('invalid angle');\n  }\n  let bounds = {\n    x: intersection.x + offset.x,\n    y: intersection.y + offset.y,\n    width,\n    height,\n  };\n  return bounds;\n}\n\nfunction getHorizontalInsideSliceRect({ slice, padding, measured, store }) {\n  const { start, end, outerRadius } = slice;\n  const middle = normalize((start + end) / 2);\n\n  const size = {\n    width: measured.width + padding * 2,\n    height: measured.height + padding * 2,\n  };\n\n  let bounds = getRectFromCircleIntersection({\n    radius: outerRadius,\n    size,\n    angle: middle,\n  });\n\n  if (!bounds) {\n    return null;\n  }\n\n  bounds.baseline = 'top';\n\n  pad(bounds, padding);\n\n  if (store.insideLabelBounds.some((rect) => testRectRect(rect, bounds))) {\n    return null;\n  }\n\n  store.insideLabelBounds.push({\n    x: bounds.x - LABEL_OVERLAP_THRESHOLD_X,\n    y: bounds.y,\n    width: bounds.width + LABEL_OVERLAP_THRESHOLD_X * 2,\n    height: bounds.height,\n  }); // Copy as bounds is mutated else where\n\n  return bounds;\n}\n\nfunction getHorizontalIntoSliceRect({ slice, padding, measured }) {\n  let { start, end, innerRadius, outerRadius } = slice;\n  const middle = normalize((start + end) / 2);\n\n  let size = {\n    width: measured.width + padding * 2,\n    height: measured.height + padding * 2,\n  };\n\n  let bounds = getRectFromCircleIntersection({\n    radius: outerRadius,\n    size,\n    angle: middle,\n  });\n\n  if (!bounds) {\n    return null;\n  }\n\n  bounds.baseline = 'top';\n\n  let startLine = {\n    x1: 0,\n    y1: 0,\n    x2: Math.sin(start) * outerRadius,\n    y2: -Math.cos(start) * outerRadius,\n  };\n  if (testRectLine(bounds, startLine)) {\n    return null;\n  }\n  let endLine = {\n    x1: 0,\n    y1: 0,\n    x2: Math.sin(end) * outerRadius,\n    y2: -Math.cos(end) * outerRadius,\n  };\n  if (testRectLine(bounds, endLine)) {\n    return null;\n  }\n  let circle = { cx: 0, cy: 0, r: innerRadius };\n  if (testCircleRect(circle, bounds)) {\n    return null;\n  }\n\n  pad(bounds, padding);\n\n  return bounds;\n}\n\n// TODO: this case can support a justify setting\nfunction getRotatedInsideSliceRect({ slice, measured, padding }) {\n  let { start, end, innerRadius, outerRadius } = slice;\n\n  let maxWidth = outerRadius - innerRadius - padding * 2;\n  let size = end - start;\n  if (size < Math.PI) {\n    let x = (measured.height / 2 + padding) / Math.tan(size / 2);\n    if (x > innerRadius) {\n      maxWidth = outerRadius - x - padding * 2;\n    }\n  }\n  if (maxWidth < 0 || maxWidth < measured.minReqWidth) {\n    return null;\n  }\n\n  const middle = normalize((start + end) / 2);\n  let r = outerRadius - padding;\n  let bounds = {\n    x: Math.sin(middle) * r,\n    y: -Math.cos(middle) * r,\n    width: maxWidth,\n    height: measured.height,\n  };\n  if (middle < Math.PI) {\n    bounds.angle = middle - Math.PI / 2;\n    bounds.anchor = 'end';\n  } else {\n    bounds.angle = middle + Math.PI / 2;\n    bounds.anchor = 'start';\n  }\n  return bounds;\n}\n\nfunction getRotatedOusideSliceRect({ slice, measured, padding, view }) {\n  let { start, end, outerRadius, offset } = slice;\n  let r = outerRadius + padding;\n  let size = end - start;\n  if (size < Math.PI) {\n    let minR = (measured.height / 2 + padding) / Math.tan(size / 2);\n    if (minR > r) {\n      return null;\n    }\n  }\n  const middle = normalize((start + end) / 2);\n  let x = Math.sin(middle) * r;\n  let y = -Math.cos(middle) * r;\n\n  let maxWidth = measured.width;\n  let v = middle % Math.PI;\n  if (v > Math.PI / 2) {\n    v = Math.PI - v;\n  }\n  if (Math.cos(v) > 0.001) {\n    let edge = y < 0 ? view.y : view.y + view.height;\n    let d = Math.abs(edge - offset.y);\n    let w = d / Math.cos(v) - Math.tan(v) * (measured.height / 2) - padding * 2 - outerRadius;\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  }\n  if (Math.sin(v) > 0.001) {\n    let edge = x < 0 ? view.x : view.x + view.width;\n    let d = Math.abs(edge - offset.x);\n    let w = d / Math.sin(v) - measured.height / 2 / Math.tan(v) - padding * 2 - outerRadius;\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  }\n\n  if (maxWidth <= 0 || maxWidth < measured.minReqWidth) {\n    return null;\n  }\n\n  let bounds = {\n    x,\n    y,\n    width: maxWidth,\n    height: measured.height,\n  };\n  if (middle < Math.PI) {\n    bounds.angle = middle - Math.PI / 2;\n    bounds.anchor = 'start';\n  } else {\n    bounds.angle = middle + Math.PI / 2;\n    bounds.anchor = 'end';\n  }\n  return bounds;\n}\n\nfunction outOfSpace(context, section, view) {\n  switch (section) {\n    case 0:\n      return context.q1maxY < 0;\n    case 1:\n      return context.q2minY > view.height;\n    case 2:\n      return context.q3minY > view.height;\n    case 3:\n      return context.q4maxY < 0;\n    default:\n      return true;\n  }\n}\nfunction adjustBounds(bounds, context, slice) {\n  const LINE_PADDING = 2;\n  const LIMIT = 1;\n\n  const { start, end, offset, outerRadius } = slice;\n  const middle = normalize((start + end) / 2);\n  let section = Math.floor(middle / (Math.PI / 2));\n\n  switch (section) {\n    case 0:\n      if (context.q1maxY !== undefined) {\n        let y = Math.min(bounds.y, context.q1maxY - bounds.height);\n        let dy = bounds.y - y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x - LINE_PADDING,\n            y1: bounds.y + LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    case 1:\n      if (context.q2minY !== undefined) {\n        let y = Math.max(bounds.y, context.q2minY);\n        let dy = y - bounds.y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x - LINE_PADDING,\n            y1: bounds.y - LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    case 2:\n      if (context.q3minY !== undefined) {\n        let y = Math.max(bounds.y, context.q3minY);\n        let dy = y - bounds.y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x + LINE_PADDING,\n            y1: bounds.y - LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    case 3:\n      if (context.q4maxY !== undefined) {\n        let y = Math.min(bounds.y, context.q4maxY - bounds.height);\n        let dy = bounds.y - y;\n        bounds.y = y;\n        if (dy > LIMIT) {\n          let r = outerRadius + LINE_PADDING;\n          bounds.line = {\n            type: 'line',\n            x1: bounds.x + LINE_PADDING,\n            y1: bounds.y + LINE_PADDING,\n            x2: offset.x + Math.sin(middle) * r,\n            y2: offset.y - Math.cos(middle) * r,\n            strokeWidth: 1,\n          };\n        }\n      }\n      break;\n    default:\n      break;\n  }\n}\nfunction updateContext({ context, node, bounds }) {\n  const PADDING = 2;\n  let { start, end } = node.desc.slice;\n  const middle = normalize((start + end) / 2);\n\n  let section = Math.floor(middle / (Math.PI / 2));\n  switch (section) {\n    case 0:\n      context.q1maxY = bounds.y - PADDING;\n      if (context.q2minY === undefined) {\n        context.q2minY = bounds.y + bounds.height + PADDING;\n      }\n      break;\n    case 1:\n      context.q2minY = bounds.y + bounds.height + PADDING;\n      break;\n    case 2:\n      context.q3minY = bounds.y + bounds.height + PADDING;\n      break;\n    case 3:\n      context.q4maxY = bounds.y - PADDING;\n      if (context.q3minY === undefined) {\n        context.q3minY = bounds.y + bounds.height + PADDING;\n      }\n      break;\n    default:\n      break;\n  }\n}\n\nfunction getHorizontalOusideSliceRect({ slice, measured, padding, view, context }) {\n  let { start, end, outerRadius, offset } = slice;\n  const middle = normalize((start + end) / 2);\n\n  let section = Math.floor(middle / (Math.PI / 2));\n  if (outOfSpace(context, section, view)) {\n    return null;\n  }\n\n  let r = outerRadius + padding + measured.height / 2;\n  let x = Math.sin(middle) * r;\n  let y = -Math.cos(middle) * r;\n\n  let maxWidth = measured.width;\n  if (middle < Math.PI) {\n    let w = Math.abs(view.x + view.width - (x + offset.x));\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  } else {\n    let w = Math.abs(view.x - (x + offset.x));\n    if (w < maxWidth) {\n      maxWidth = w;\n    }\n  }\n\n  if (maxWidth < measured.minReqWidth) {\n    return null;\n  }\n\n  let bounds = {\n    x,\n    y,\n    width: maxWidth,\n    height: measured.height,\n  };\n\n  if (middle < Math.PI) {\n    bounds.anchor = 'start';\n  } else {\n    bounds.anchor = 'end';\n  }\n\n  return bounds;\n}\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset,\n  };\n}\n\nfunction placeTextOnPoint(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: rect.width,\n    x: rect.x,\n    y: rect.y + (rect.baseline === 'top' ? rect.height / 2 : 0),\n    fill: opts.fill,\n    anchor: rect.anchor || 'start',\n    baseline: 'middle',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily,\n  };\n\n  if (!isNaN(rect.angle)) {\n    let angle = rect.angle * (360 / (Math.PI * 2));\n    label.transform = `rotate(${angle}, ${label.x}, ${label.y})`;\n  }\n\n  return label;\n}\n\nexport function getSliceRect({ slice, direction, position, padding, measured, view, context, store }) {\n  let { start, end, innerRadius, offset } = slice;\n\n  let bounds;\n  let s;\n  switch (position) {\n    case 'into':\n      if (direction === 'rotate') {\n        bounds = getRotatedInsideSliceRect({ slice, measured, padding });\n      } else {\n        bounds = getHorizontalIntoSliceRect({ slice, measured, padding });\n      }\n      break;\n    case 'inside':\n      s = {\n        start,\n        end,\n        innerRadius: 0,\n        outerRadius: innerRadius,\n      };\n      if (direction === 'rotate') {\n        bounds = getRotatedInsideSliceRect({ slice: s, measured, padding });\n      } else {\n        bounds = getHorizontalInsideSliceRect({\n          slice: s,\n          measured,\n          padding,\n          store,\n        });\n      }\n      break;\n    case 'outside':\n      if (direction === 'rotate') {\n        bounds = getRotatedOusideSliceRect({\n          slice,\n          measured,\n          padding,\n          view,\n        });\n      } else {\n        bounds = getHorizontalOusideSliceRect({\n          slice,\n          measured,\n          padding,\n          view,\n          context,\n        });\n      }\n      break;\n    default:\n      throw new Error('not implemented');\n  }\n  if (bounds) {\n    bounds.x += offset.x;\n    bounds.y += offset.y;\n    if (position === 'outside' && direction !== 'rotate') {\n      adjustBounds(bounds, context, slice);\n    }\n  }\n  return bounds;\n}\n\nfunction findBestPlacement(\n  { context, direction, measured, node, placementSettings, rect, store },\n  sliceRect = getSliceRect\n) {\n  for (let p = 0; p < placementSettings.length; p++) {\n    let placement = placementSettings[p];\n    let bounds = sliceRect({\n      context,\n      slice: node.desc.slice,\n      view: rect,\n      direction,\n      position: placement.position,\n      measured,\n      padding: placement.padding,\n      store,\n    });\n\n    if (!bounds) {\n      continue;\n    }\n\n    return { bounds, placement };\n  }\n  return { bounds: null, placement: null };\n}\n\n/*\n * Sorts the nodes so that\n *   in each quarter sort nodes from the center (in y) outwards\n *   first quarter before the second\n *   forth quarter before the third\n */\nfunction sortNodes(nodes) {\n  const q1 = [];\n  const q2 = [];\n  const q3 = [];\n  const q4 = [];\n  for (let i = 0; i < nodes.length; ++i) {\n    const { start, end } = nodes[i].desc.slice;\n    const middle = normalize((start + end) / 2);\n    let section = Math.floor(middle / (Math.PI / 2));\n    switch (section) {\n      case 0:\n        q1.push(nodes[i]);\n        break;\n      case 1:\n        q2.push(nodes[i]);\n        break;\n      case 2:\n        q3.push(nodes[i]);\n        break;\n      case 3:\n        q4.push(nodes[i]);\n        break;\n      default:\n        break;\n    }\n  }\n\n  const sortFn = (a, b) => {\n    const middleA = normalize((a.desc.slice.start + a.desc.slice.end) / 2);\n    const middleB = normalize((b.desc.slice.start + b.desc.slice.end) / 2);\n    return middleA - middleB;\n  };\n  const reverseSortFn = (a, b) => sortFn(b, a);\n\n  q1.sort(reverseSortFn);\n  q2.sort(sortFn);\n  q3.sort(reverseSortFn);\n  q4.sort(sortFn);\n  return q1.concat(q2, q4, q3);\n}\n\nfunction measureText(text, stgns, renderer) {\n  const fontFamily = stgns.fontFamily;\n  const fontSize = `${stgns.fontSize}px`;\n  const metrics = renderer.measureText({ text, fontFamily, fontSize });\n\n  metrics.minReqWidth = Math.min(\n    metrics.width,\n    renderer.measureText({\n      text: `${text[0]}…`,\n      fontFamily,\n      fontSize,\n    }).width\n  );\n\n  return metrics;\n}\n\n/**\n * @typedef {object} ComponentLabels~SlicesLabelStrategy\n * @property {string} type='slice' Name of strategy\n */\n\n/**\n * Slices strategy settings\n * @typedef {object} ComponentLabels~SlicesLabelStrategy.settings\n * @property {string|function} [direction='horizontal'] - The direction of the text: 'horizontal' or 'rotate'.\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {function} labels[].linkData - Link data to the label\n * @property {Array<object>} labels[].placements\n * @property {string} [labels[].placements[].position='into'] - 'inside' | 'into' | 'outside' (outside is not implmented yet)\n * @property {string} [labels[].placements[].fill='#333'] - Color of the label\n */\n\nexport function slices(\n  { settings, chart, nodes, rect, renderer, style },\n  findPlacement = findBestPlacement,\n  placer = placeTextOnPoint\n) {\n  const defaults = extend(\n    {\n      fontSize: 12,\n      fontFamily: 'Arial',\n      fill: '#333',\n      padding: 4,\n      position: 'into',\n    },\n    style.label\n  );\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const labelSettings = settings.labels.map((labelSetting) => extend({}, defaults, settings, labelSetting));\n\n  const placementSettings = settings.labels.map((labelSetting) =>\n    labelSetting.placements.map((placement) => extend({}, defaults, settings, labelSetting, placement))\n  );\n\n  const labels = [];\n  const store = {\n    insideLabelBounds: [],\n  };\n\n  nodes = sortNodes(nodes);\n  const context = {};\n\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    const node = nodes[i];\n    const arg = cbContext(node, chart);\n\n    for (let j = 0; j < labelSettings.length; j++) {\n      const lblStngs = labelSettings[j];\n      const text = typeof lblStngs.label === 'function' ? lblStngs.label(arg, i) : '';\n      if (!text) {\n        continue;\n      }\n      const direction =\n        typeof lblStngs.direction === 'function' ? lblStngs.direction(arg, i) : lblStngs.direction || 'horizontal';\n      const linkData = typeof lblStngs.linkData === 'function' ? lblStngs.linkData(arg, i) : undefined;\n      const measured = measureText(text, lblStngs, renderer);\n      const bestPlacement = findPlacement({\n        context,\n        direction,\n        lblStngs,\n        measured,\n        node,\n        placementSettings: placementSettings[j],\n        rect,\n        store,\n      });\n\n      const bounds = bestPlacement.bounds;\n      const placement = bestPlacement.placement;\n\n      if (bounds && placement) {\n        if (placement.position === 'outside' && direction !== 'rotate') {\n          updateContext({ context, node, bounds });\n\n          const topLeftBounds = getTopLeftBounds(bounds);\n\n          if (!rectContainsRect(topLeftBounds, rect)) {\n            continue;\n          }\n        }\n\n        const fill = typeof placement.fill === 'function' ? placement.fill(arg, i) : placement.fill;\n\n        const label = placer(bounds, text, {\n          fill,\n          fontSize: lblStngs.fontSize,\n          fontFamily: lblStngs.fontFamily,\n          textMetrics: measured,\n        });\n\n        if (label) {\n          if (typeof linkData !== 'undefined') {\n            label.data = linkData;\n          }\n          labels.push(label);\n          if (bounds.line) {\n            bounds.line.stroke = fill;\n            labels.push(bounds.line);\n          }\n        }\n      }\n    }\n  }\n\n  return labels;\n}\n","const LINEBREAK_REGEX = /\\n+|\\r+|\\r\\n/;\nconst WHITESPACE_REGEX = /\\s/;\nconst HYPHEN_REGEX = /[a-zA-Z\\u00C0-\\u00F6\\u00F8-\\u00FF\\u00AD]/;\nexport const NO_BREAK = 0;\nexport const MANDATORY = 1;\nexport const BREAK_ALLOWED = 2;\n\nexport function includesLineBreak(c) {\n  if (typeof c === 'string') {\n    return c.search(LINEBREAK_REGEX) !== -1;\n  }\n  return String(c).search(LINEBREAK_REGEX) !== -1;\n}\n\nfunction includesWhiteSpace(c) {\n  return c.search(WHITESPACE_REGEX) !== -1;\n}\n\nfunction hyphenationAllowed(c) {\n  /* Latin character set. Excluding numbers, sign and symbol characters, but including soft hyphen */\n  return c.search(HYPHEN_REGEX) !== -1;\n}\n\nfunction resolveBreakOpportunity(chunk, i, chunks, mandatory, noBreakAllowed) {\n  if (mandatory.some((fn) => fn(chunk, i, chunks))) {\n    return MANDATORY;\n  }\n  if (noBreakAllowed.some((fn) => fn(chunk, i, chunks))) {\n    return NO_BREAK;\n  }\n\n  return BREAK_ALLOWED;\n}\n\nfunction cleanEmptyChunks(chunks) {\n  if (chunks[0] === '') {\n    chunks.shift();\n  }\n  if (chunks[chunks.length - 1] === '') {\n    chunks.pop();\n  }\n}\n\nfunction clamp(val, min, max) {\n  return Math.max(min, Math.min(max, val));\n}\n\nexport default function stringTokenizer({\n  string,\n  separator = '',\n  reverse = false,\n  measureText = (text) => ({ width: text.length, height: 1 }),\n  mandatoryBreakIdentifiers = [includesLineBreak],\n  noBreakAllowedIdentifiers = [],\n  suppressIdentifier = [includesWhiteSpace, includesLineBreak, (chunk) => chunk === ''],\n  hyphenationIdentifiers = [hyphenationAllowed],\n} = {}) {\n  const chunks = String(string).split(separator);\n  cleanEmptyChunks(chunks);\n  const length = chunks.length;\n  const isNotDone = reverse ? (p) => p >= 0 : (p) => p < length;\n  let position = reverse ? length : -1; // Set init position 1 step before or after to make first next call go to first position\n\n  function peek(peekAt) {\n    const i = clamp(peekAt, 0, length - 1);\n    const chunk = chunks[i];\n    const textMeasure = measureText(chunk);\n    const opportunity = resolveBreakOpportunity(chunk, i, chunks, mandatoryBreakIdentifiers, noBreakAllowedIdentifiers);\n\n    return {\n      index: i,\n      value: chunk,\n      breakOpportunity: opportunity,\n      suppress: suppressIdentifier.some((fn) => fn(chunk, i, chunks)),\n      hyphenation: hyphenationIdentifiers.some((fn) => fn(chunk, i, chunks)),\n      width: textMeasure.width,\n      height: textMeasure.height,\n      done: false,\n    };\n  }\n\n  function next(jumpToPosition) {\n    if (isNaN(jumpToPosition)) {\n      if (reverse) {\n        position--;\n      } else {\n        position++;\n      }\n    } else {\n      position = clamp(jumpToPosition, 0, length - 1);\n    }\n\n    if (isNotDone(position)) {\n      return peek(position);\n    }\n    return { done: true };\n  }\n\n  return {\n    next,\n    peek,\n    length,\n  };\n}\n","const HYPHENS_CHAR = '\\u2010';\nconst ELLIPSIS_CHAR = '…';\n\nexport { HYPHENS_CHAR, ELLIPSIS_CHAR };\n","const BASE = 24;\nconst PAD = 4;\nconst BUMP = 1e-12;\nconst DEFAULT_FONT_HEIGHT = 16;\nconst DEFAULT_LINE_HEIGHT = 1.2;\nconst TEXT_REGEX = /^\\s*\\d+(\\.\\d+)?px\\s*$/i;\n\nfunction isValidFontSize(val) {\n  const type = typeof val;\n  if (type === 'string') {\n    return TEXT_REGEX.test(val);\n  }\n\n  return false;\n}\n\nexport function fontSizeToHeight(fontSize) {\n  if (isValidFontSize(fontSize)) {\n    const size = parseFloat(fontSize);\n    const m = PAD * Math.ceil((size + BUMP) / BASE);\n\n    return size + m;\n  }\n\n  return DEFAULT_FONT_HEIGHT;\n}\n\nexport function fontSizeToLineHeight(node) {\n  const fontSize = node['font-size'] || node.fontSize;\n  if (isValidFontSize(fontSize)) {\n    return parseFloat(fontSize) * Math.max(isNaN(node.lineHeight) ? DEFAULT_LINE_HEIGHT : node.lineHeight, 0);\n  }\n\n  return DEFAULT_FONT_HEIGHT * DEFAULT_LINE_HEIGHT;\n}\n","import stringTokenizer, { MANDATORY, BREAK_ALLOWED } from './string-tokenizer';\nimport { HYPHENS_CHAR } from './text-const';\nimport { fontSizeToLineHeight } from './font-size-to-height';\n\nfunction resolveMaxAllowedLines(node) {\n  const maxHeight = node.maxHeight;\n  const maxLines = Math.max(node.maxLines, 1) || Infinity;\n\n  if (isNaN(maxHeight)) {\n    return maxLines;\n  }\n\n  const computedLineHeight = fontSizeToLineHeight(node);\n\n  return Math.max(1, Math.min(Math.floor(maxHeight / computedLineHeight), maxLines));\n}\n\nfunction initState(node, measureText) {\n  return {\n    lines: [],\n    line: '',\n    width: 0,\n    maxLines: resolveMaxAllowedLines(node),\n    maxWidth: node.maxWidth,\n    hyphens: {\n      enabled: node.hyphens === 'auto',\n      char: HYPHENS_CHAR,\n      metrics: measureText(HYPHENS_CHAR),\n    },\n  };\n}\n\nfunction newLine(state) {\n  state.lines.push(state.line);\n  state.line = '';\n  state.width = 0;\n}\n\nfunction appendToLine(state, token) {\n  state.line += token.value;\n  state.width += token.width;\n}\n\nfunction insertHyphenAndJump(state, token, iterator) {\n  if (token.width > state.maxWidth) {\n    return token;\n  }\n\n  const startIndex = token.index;\n\n  for (let i = 1; i < 5; i++) {\n    const pairToken = iterator.peek(token.index - 1);\n\n    if (!token.hyphenation || !pairToken.hyphenation || token.index === 0) {\n      return token;\n    }\n    if (state.width + state.hyphens.metrics.width <= state.maxWidth) {\n      state.line += state.hyphens.char;\n      return token;\n    }\n    if (state.line.length === 1) {\n      return token;\n    }\n\n    token = iterator.next(startIndex - i);\n    state.line = state.line.slice(0, -1);\n    state.width -= token.width;\n  }\n\n  return token;\n}\n\nfunction breakSequence(state, token, measureText) {\n  const charTokenIterator = stringTokenizer({\n    string: token.value,\n    measureText,\n  });\n\n  while (state.lines.length < state.maxLines) {\n    let charToken = charTokenIterator.next();\n    if (charToken.done) {\n      break;\n    } else if (\n      state.width + charToken.width > state.maxWidth &&\n      charToken.breakOpportunity === BREAK_ALLOWED &&\n      state.line.length > 0\n    ) {\n      charToken = state.hyphens.enabled ? insertHyphenAndJump(state, charToken, charTokenIterator) : charToken;\n      newLine(state);\n      appendToLine(state, charToken);\n    } else {\n      appendToLine(state, charToken);\n    }\n  }\n}\n\nexport function breakAll(node, measureText) {\n  const text = node.text;\n  const iterator = stringTokenizer({\n    string: text,\n    separator: '',\n    measureText,\n    noBreakAllowedIdentifiers: [(chunk, i) => i === 0],\n  });\n  const state = initState(node, measureText);\n  let reduced = true;\n\n  while (state.lines.length < state.maxLines) {\n    let token = iterator.next();\n\n    if (token.done) {\n      newLine(state);\n      reduced = false;\n      break;\n    } else if (token.breakOpportunity === MANDATORY) {\n      newLine(state);\n    } else if (state.width + token.width > state.maxWidth && token.breakOpportunity === BREAK_ALLOWED) {\n      if (token.suppress) {\n        // Token is suppressable and can be ignored\n        state.width += token.width;\n      } else {\n        token = state.hyphens.enabled ? insertHyphenAndJump(state, token, iterator) : token;\n        newLine(state);\n        appendToLine(state, token);\n      }\n    } else {\n      appendToLine(state, token);\n    }\n  }\n\n  return {\n    lines: state.lines,\n    reduced,\n  };\n}\n\nexport function breakWord(node, measureText) {\n  const text = node.text;\n  const iterator = stringTokenizer({\n    string: text,\n    separator: /(\\s|-|\\u2010)/,\n    measureText,\n  });\n  const state = initState(node, measureText);\n  let reduced = true;\n\n  while (state.lines.length < state.maxLines) {\n    let token = iterator.next();\n\n    if (token.done) {\n      newLine(state);\n      reduced = false;\n      break;\n    } else if (token.breakOpportunity === MANDATORY) {\n      newLine(state);\n    } else if (state.width + token.width > state.maxWidth && token.breakOpportunity === BREAK_ALLOWED) {\n      if (token.suppress) {\n        // Token is suppressable and can be ignored\n        newLine(state);\n      } else if (token.width > state.maxWidth) {\n        // Single sequence is wider then maxWidth, break sequence into multiple lines\n        breakSequence(state, token, measureText);\n      } else {\n        newLine(state);\n        appendToLine(state, token);\n      }\n    } else {\n      appendToLine(state, token);\n    }\n  }\n\n  return {\n    lines: state.lines,\n    reduced,\n  };\n}\n","import extend from 'extend';\nimport { breakAll, breakWord } from './word-break';\nimport { ELLIPSIS_CHAR } from './text-const';\nimport { includesLineBreak } from './string-tokenizer';\nimport { fontSizeToLineHeight } from './font-size-to-height';\n\nfunction generateLineNodes(result, item, halfLead, height) {\n  const container = { type: 'container', children: [] };\n\n  if (typeof item.id !== 'undefined') {\n    // TODO also inherit data attribute and more?\n    container.id = item.id;\n  }\n\n  let currentY = 0;\n\n  result.lines.forEach((line, i) => {\n    const node = extend({}, item);\n    node.text = line;\n    node._lineBreak = true; // Flag node as processed to avoid duplicate linebreak run\n    currentY += halfLead; // leading height above\n\n    if (result.reduced && i === result.lines.length - 1) {\n      node.text += ELLIPSIS_CHAR;\n    } else {\n      delete node.maxWidth;\n    }\n\n    node.dy = isNaN(node.dy) ? currentY : node.dy + currentY;\n    currentY += height;\n    currentY += halfLead; // Leading height below\n    container.children.push(node);\n  });\n\n  return container;\n}\n\nfunction shouldLineBreak(item) {\n  // If type text and not already broken into lines\n  return item.type === 'text' && !item._lineBreak;\n}\n\nfunction wrappedMeasureText(node, measureText) {\n  return (text) =>\n    measureText({\n      text,\n      fontSize: node.fontSize,\n      fontFamily: node.fontFamily,\n    });\n}\n\nexport function resolveLineBreakAlgorithm(node) {\n  const WORDBREAK = {\n    'break-all': breakAll,\n    'break-word': breakWord,\n  };\n\n  return WORDBREAK[node.wordBreak];\n}\n\n/**\n * Apply wordBreak rules to text nodes.\n * @ignore\n * @param {function} measureText\n * @returns {function} Event function to convert a text node into multiple nodes\n */\nexport function onLineBreak(measureText) {\n  return (state) => {\n    const item = state.node;\n    if (shouldLineBreak(item)) {\n      const wordBreakFn = resolveLineBreakAlgorithm(item);\n      if (!wordBreakFn) {\n        return;\n      }\n\n      const tm = measureText(item);\n      if (tm.width > item.maxWidth || includesLineBreak(item.text)) {\n        const diff = fontSizeToLineHeight(item) - tm.height;\n        const halfLead = diff / 2;\n        const result = wordBreakFn(item, wrappedMeasureText(item, measureText));\n\n        state.node = generateLineNodes(result, item, halfLead, tm.height); // Convert node to container\n      }\n    }\n  };\n}\n","import { ELLIPSIS_CHAR } from './text-const';\n\nexport default function ellipsText({ text, 'font-size': fontSize, 'font-family': fontFamily, maxWidth }, measureText) {\n  // eslint-disable-line import/prefer-default-export\n  text = typeof text === 'string' ? text : `${text}`;\n  if (maxWidth === undefined) {\n    return text;\n  }\n  let textWidth = measureText({ text, fontSize, fontFamily }).width;\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let min = 0;\n  let max = text.length - 1;\n  while (min <= max) {\n    let reduceIndex = Math.floor((min + max) / 2);\n    let reduceText = text.substr(0, reduceIndex) + ELLIPSIS_CHAR;\n    textWidth = measureText({ text: reduceText, fontSize, fontFamily }).width;\n    if (textWidth <= maxWidth) {\n      min = reduceIndex + 1;\n    } else {\n      // textWidth > maxWidth\n      max = reduceIndex - 1;\n    }\n  }\n  return text.substr(0, max) + ELLIPSIS_CHAR;\n}\n","/**\n * Currently some browsers, IE11 and Edge confirmed, doesn't support the dominant-baseline svg-attribute and\n * the browser that does, have different implementations. Thus giving an unpredictable result when rendering'\n * text and predicting it's position (ex. in collision detection).\n *\n * To supplement and the aid in aligning/positioning text with various items, this function can be used\n * to follow a common heuristic across supported renderers.\n * @ignore\n * @param {object} textNode\n * @param {string|number} [textNode['font-size']=0] - String in px format or number\n * @param {string} [textNode['dominant-baseline']] - If baseline is omitted dominant-baseline is used\n * @param {string} [textNode.baseline]\n * @returns {number} Delta-y required to adjust for baseline\n */\nexport default function baselineHeuristic(textNode) {\n  const baseline = textNode.baseline || textNode['dominant-baseline'];\n  let dy = 0;\n\n  const fontSize = parseInt(textNode.fontSize || textNode['font-size'], 10) || 0;\n\n  switch (baseline) {\n    case 'hanging':\n      dy = fontSize * 0.75;\n      break;\n    case 'text-before-edge':\n      dy = fontSize * 0.85;\n      break;\n    case 'middle':\n      dy = fontSize * 0.25;\n      break;\n    case 'central':\n      dy = fontSize * 0.35;\n      break;\n    case 'mathemetical':\n      dy = fontSize / 2;\n      break;\n    case 'text-after-edge':\n    case 'ideographic':\n      dy = -fontSize * 0.2;\n      break;\n    default:\n      dy = 0;\n      break;\n  }\n\n  return dy;\n}\n","import extend from 'extend';\nimport { resolveLineBreakAlgorithm } from './line-break-resolver';\nimport baselineHeuristic from './baseline-heuristic';\nimport { ELLIPSIS_CHAR } from './text-const';\nimport { fontSizeToHeight, fontSizeToLineHeight } from './font-size-to-height';\nimport { includesLineBreak } from './string-tokenizer';\n\nconst heightCache = {};\nconst widthCache = {};\nconst contextCache = {\n  fontSize: undefined,\n  fontFamily: undefined,\n};\nlet context;\n\nfunction setContext() {\n  context = context || document.createElement('canvas').getContext('2d');\n}\n\nfunction setFont(fontSize, fontFamily) {\n  if (contextCache.fontSize === fontSize && contextCache.fontFamily === fontFamily) {\n    return;\n  }\n\n  context.font = fontSize + ' ' + fontFamily; // eslint-disable-line\n  contextCache.fontSize = fontSize;\n  contextCache.fontFamily = fontFamily;\n}\n\nfunction measureTextWidth(text, fontSize, fontFamily) {\n  const key = text + fontSize + fontFamily;\n  if (typeof widthCache[key] !== 'number') {\n    setContext();\n    setFont(fontSize, fontFamily);\n    widthCache[key] = context.measureText(text).width;\n  }\n\n  return widthCache[key];\n}\n\nfunction measureTextHeight(fontSize) {\n  if (typeof heightCache[fontSize] !== 'number') {\n    heightCache[fontSize] = fontSizeToHeight(fontSize);\n  }\n\n  return heightCache[fontSize];\n}\n\n/**\n * @private\n * @param {object} opts\n * @param {string} opts.text - Text to measure\n * @param {string} opts.fontSize - Font size with a unit definition, ex. 'px' or 'em'\n * @param {string} opts.fontFamily - Font family\n * @return {object} Width and height of text in pixels\n * @example\n * measureText({\n *  text: 'my text',\n *  fontSize: '12px',\n *  fontFamily: 'Arial'\n * }); // returns { width: 20, height: 12 }\n */\nexport function measureText({ text, fontSize, fontFamily }) {\n  const w = measureTextWidth(text, fontSize, fontFamily);\n  const h = measureTextHeight(fontSize);\n  return { width: w, height: h };\n}\n\n/**\n * Calculates the bounding rectangle of a text node.\n * The bounding rectangle is a approximate of the \"em square\" seen here (http://www.w3resource.com/html5-canvas/html5-canvas-text.php)\n * @ignore\n * @param {object} attrs - Text node definition\n * @param {number} [attrs.x] - X-coordinate\n * @param {number} [attrs.y] - Y-coordinate\n * @param {number} [attrs.dx] - Delta x-coordinate\n * @param {number} [attrs.dy] - Delta y-coordinate\n * @param {string} [attrs.anchor] - Text anchor\n * @param {number} [attrs.maxWidth] - Maximum allowed text width\n * @return {object} The bounding rectangle\n */\nfunction calcTextBounds(attrs, measureFn = measureText) {\n  const fontSize = attrs['font-size'] || attrs.fontSize;\n  const fontFamily = attrs['font-family'] || attrs.fontFamily;\n  const textMeasure = measureFn({ text: attrs.text, fontFamily, fontSize });\n  const calWidth = Math.min(attrs.maxWidth || textMeasure.width, textMeasure.width); // Use actual value if max is not set\n  const x = attrs.x || 0;\n  const y = attrs.y || 0;\n  const dx = attrs.dx || 0;\n  const dy = (attrs.dy || 0) + baselineHeuristic(attrs);\n\n  const boundingRect = {\n    x: 0,\n    y: y + dy - textMeasure.height * 0.75, // Magic number for alphabetical baseline\n    width: calWidth,\n    height: textMeasure.height,\n  };\n\n  const anchor = attrs['text-anchor'] || attrs.anchor;\n\n  if (anchor === 'middle') {\n    boundingRect.x = x + dx - calWidth / 2;\n  } else if (anchor === 'end') {\n    boundingRect.x = x + dx - calWidth;\n  } else {\n    boundingRect.x = x + dx;\n  }\n\n  return boundingRect;\n}\n\n/**\n * Calculates the bounding rectangle of a text node. Including any line breaks.\n * @ignore\n * @param {object} node\n * @param {string} node.text - Text to measure\n * @param {number} [node.x=0] - X-coordinate\n * @param {number} [node.y=0] - Y-coordinate\n * @param {number} [node.dx=0] - Delta x-coordinate\n * @param {number} [node.dy=0] - Delta y-coordinate\n * @param {string} [node.anchor='start'] - Text anchor\n * @param {string} [node.fontSize] - Font size\n * @param {string} [node.fontFamily] - Font family\n * @param {string} [node['font-size']] - Font size\n * @param {string} [node['font-family']] - Font family\n * @param {string} [node.wordBreak] - Word-break option\n * @param {number} [node.maxWidth] - Maximum allowed text width\n * @param {number} [node.maxHeight] - Maximum allowed text height. If both maxLines and maxHeight are set, the property that results in the fewest number of lines is used\n * @param {number} [node.maxLines] - Maximum number of lines allowed.\n * @param {number} [node.lineHeight=1.2] - Line height\n * @param {function} [measureFn] - Optional text measure function\n * @return {object} The bounding rectangle\n */\nexport function textBounds(node, measureFn = measureText) {\n  const lineBreakFn = resolveLineBreakAlgorithm(node);\n  const fontSize = node['font-size'] || node.fontSize;\n  const fontFamily = node['font-family'] || node.fontFamily;\n  const tm = measureFn({ text: node.text, fontFamily, fontSize });\n\n  if (lineBreakFn && (tm.width > node.maxWidth || includesLineBreak(node.text))) {\n    const resolvedLineBreaks = lineBreakFn(node, (text) => measureFn({ text, fontFamily, fontSize }));\n    const nodeCopy = extend({}, node);\n    let maxWidth = 0;\n    let widestLine = '';\n    for (let i = 0, len = resolvedLineBreaks.lines.length; i < len; i++) {\n      let line = resolvedLineBreaks.lines[i];\n      line += i === len - 1 && resolvedLineBreaks.reduced ? ELLIPSIS_CHAR : '';\n      const width = measureFn({ text: line, fontSize, fontFamily }).width;\n      if (width >= maxWidth) {\n        maxWidth = width;\n        widestLine = line;\n      }\n    }\n    nodeCopy.text = widestLine;\n    const bounds = calcTextBounds(nodeCopy, measureFn);\n    bounds.height = fontSizeToLineHeight(node) * resolvedLineBreaks.lines.length;\n\n    return bounds;\n  }\n\n  return calcTextBounds(node, measureFn);\n}\n","import extend from 'extend';\n\nimport { ellipsText } from '../../../../web/text-manipulation';\nimport { ELLIPSIS_CHAR } from '../../../../web/text-manipulation/text-const';\n\nconst LINE_HEIGHT = 1.2;\nconst CIRCLE_FACTOR = 0.9;\n\nfunction cbContext(node, chart) {\n  return {\n    node,\n    data: node.data,\n    scale: chart.scale,\n    formatter: chart.formatter,\n    dataset: chart.dataset,\n  };\n}\n\nexport function placeTextInRect(rect, text, opts) {\n  const label = {\n    type: 'text',\n    text,\n    maxWidth: rect.width,\n    x: 0,\n    y: rect.y,\n    dx: 0,\n    dy: 0,\n    fill: opts.fill,\n    anchor: 'start',\n    baseline: 'alphabetical',\n    fontSize: `${opts.fontSize}px`,\n    fontFamily: opts.fontFamily,\n  };\n\n  const textMetrics = opts.textMetrics;\n\n  if (rect.width < opts.fontSize) {\n    return false;\n  }\n\n  const wiggleWidth = Math.max(0, rect.width - textMetrics.width);\n  label.x = rect.x + opts.align * wiggleWidth;\n  label.y = rect.y + textMetrics.height / LINE_HEIGHT;\n\n  return label;\n}\n\nfunction getRectFromCircle({ cx, cy, r }) {\n  return {\n    type: 'circle',\n    bounds: { cx, cy, r },\n  };\n}\nfunction getSliceBounds(slice) {\n  const EPSILON = 1e-12;\n  let { start, end, innerRadius, outerRadius, offset } = slice;\n  if (Math.abs(start + 2 * Math.PI - end) > EPSILON) {\n    return { type: null, bounds: null };\n  }\n  let r = innerRadius !== 0 ? innerRadius : outerRadius;\n  return getRectFromCircle({ cx: offset.x, cy: offset.y, r });\n}\n\nfunction getBounds(node) {\n  if (node.desc && node.desc.slice) {\n    return getSliceBounds(node.desc.slice);\n  }\n  if (node.type === 'circle') {\n    return getRectFromCircle(node.attrs);\n  }\n  if (node.type === 'rect') {\n    return { type: 'rect', bounds: node.bounds };\n  }\n  // defualt to node.bounds ?\n  return { type: null, bounds: null };\n}\n\n/**\n * @typedef {object} ComponentLabels~RowsLabelStrategy\n * @property {string} type='rows' Name of strategy\n */\n\n/**\n * Rows strategy settings\n * @typedef {object} ComponentLabels~RowsLabelStrategy.settings\n * @property {string} [fontFamily='Arial']\n * @property {number} [fontSize=12]\n * @property {number} [justify=0.5]\n * @property {number} [padding=4]\n * @property {Array<object>} labels\n * @property {string|function} labels[].label - The text value\n * @property {function} labels[].linkData - Link data to the label\n * @property {number} [labels[].align=0.5]\n * @property {string|function} [labels[].fill='#333']\n */\n\nexport function rows({ settings, chart, nodes, renderer, style }, placer = placeTextInRect) {\n  const defaults = extend(\n    {\n      fontSize: 12,\n      fontFamily: 'Arial',\n      fill: '#333',\n      padding: 4,\n      align: 0.5,\n      justify: 0.5,\n    },\n    style.label\n  );\n\n  defaults.fontSize = parseInt(defaults.fontSize, 10);\n\n  const rowSettings = extend({}, defaults, settings);\n\n  const labelSettings = settings.labels.map((labelSetting) => extend({}, rowSettings, labelSetting));\n\n  const labelStruct = {};\n  const labels = [];\n\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    let node = nodes[i];\n    let arg = cbContext(node, chart);\n\n    let { type, bounds } = getBounds(node);\n    if (!bounds) {\n      continue;\n    }\n\n    let totalHeight = 0;\n    let measurements = [];\n    let texts = [];\n\n    let maxHeight = type === 'circle' ? 2 * bounds.r * CIRCLE_FACTOR : bounds.height;\n    totalHeight += rowSettings.padding;\n    let j;\n    for (j = 0; j < labelSettings.length; j++) {\n      let lblStngs = labelSettings[j];\n      let text = typeof lblStngs.label === 'function' ? lblStngs.label(arg, i) : '';\n\n      labelStruct.fontFamily = lblStngs.fontFamily;\n      labelStruct.fontSize = `${lblStngs.fontSize}px`;\n      labelStruct.text = text;\n      let measured = renderer.measureText(labelStruct);\n      totalHeight += measured.height + lblStngs.padding;\n      if (totalHeight > maxHeight) {\n        break;\n      }\n      texts.push(text);\n      measurements.push(measured);\n    }\n\n    const labelCount = j;\n    const wiggleHeight = Math.max(0, maxHeight - totalHeight);\n    let currentY;\n    if (type === 'circle') {\n      currentY = bounds.cy - bounds.r * CIRCLE_FACTOR;\n    } else {\n      currentY = bounds.y;\n    }\n    currentY += rowSettings.justify * wiggleHeight + rowSettings.padding;\n\n    for (j = 0; j < labelCount; j++) {\n      let lblStngs = labelSettings[j];\n      let rect;\n      if (type === 'circle') {\n        let maxYDistToCenter = Math.max(\n          Math.abs(currentY - bounds.cy),\n          Math.abs(currentY + measurements[j].height - bounds.cy)\n        );\n        let halfWidth = Math.sqrt(bounds.r * bounds.r - maxYDistToCenter * maxYDistToCenter);\n        rect = {\n          x: bounds.cx - halfWidth + rowSettings.padding,\n          y: currentY,\n          width: 2 * halfWidth - 2 * rowSettings.padding,\n          height: measurements[j].height,\n        };\n      } else {\n        rect = {\n          x: bounds.x + rowSettings.padding,\n          y: currentY,\n          width: bounds.width - 2 * rowSettings.padding,\n          height: measurements[j].height,\n        };\n      }\n\n      currentY += measurements[j].height + rowSettings.padding;\n      let fill = typeof lblStngs.fill === 'function' ? lblStngs.fill(arg, i) : lblStngs.fill;\n      const linkData = typeof lblStngs.linkData === 'function' ? lblStngs.linkData(arg, i) : undefined;\n      let label = placer(rect, texts[j], {\n        fill,\n        align: lblStngs.align,\n        fontSize: lblStngs.fontSize,\n        fontFamily: lblStngs.fontFamily,\n        textMetrics: measurements[j],\n      });\n      if (label) {\n        if (label.text && label.text !== ELLIPSIS_CHAR) {\n          const ellipsed = ellipsText(label, renderer.measureText);\n          if (ELLIPSIS_CHAR === ellipsed) {\n            // don't include label if it's only an ellipsis\n            continue;\n          }\n          label.ellipsed = ellipsed;\n        }\n        if (typeof linkData !== 'undefined') {\n          label.data = linkData;\n        }\n        labels.push(label);\n      }\n    }\n  }\n\n  return labels;\n}\n","import { bars } from './bars';\nimport { slices } from './slices';\nimport { rows } from './rows';\n\nexport default {\n  bar: bars,\n  slice: slices,\n  rows,\n};\n","import strategies from './strategies';\n\n/**\n * @typedef {object} ComponentLabels\n * @extends ComponentSettings\n * @example\n{\n  type: 'labels',\n  settings: {\n    sources: [\n      {\n        component: 'bars',\n        selector: 'rect', // select all 'rect' shapes from the 'bars' component\n        strategy: {\n          type: 'bar', // the strategy type\n          settings: {\n            labels: [\n              {\n                label({ data }) {\n                  return data ? data.end.label : '';\n                },\n                placements: [\n                  // label placements in prio order. Label will be placed in the first place it fits into\n                  { position: 'inside', fill: '#fff' },\n                  { position: 'outside', fill: '#666' },\n                ],\n              },\n            ],\n          },\n        },\n      },\n    ],\n  },\n}\n */\n\n/**\n * Component settings\n * @typedef {object} ComponentLabels.settings\n * @property {Array<ComponentLabels~Source>} sources Source settings\n */\n\n/**\n * @typedef {object} ComponentLabels~Source\n * @property {string} component Key of target component\n * @property {string} selector Shape selector\n * @property {ComponentLabels~BarsLabelStrategy|ComponentLabels~RowsLabelStrategy|ComponentLabels~SlicesLabelStrategy} strategy Strategy settings\n */\n\nexport function strategy({ chart, source, rect, renderer, style }, fn) {\n  const component = chart.component(source.component);\n  if (!component) {\n    return [];\n  }\n  const nodes = chart.findShapes(source.selector).filter((n) => n.key === source.component);\n\n  return fn({\n    chart,\n    settings: source.strategy.settings,\n    nodes,\n    rect: {\n      x: 0,\n      y: 0,\n      width: rect.width,\n      height: rect.height,\n    },\n    renderer,\n    style,\n  });\n}\n\nconst labelsComponent = {\n  require: ['chart', 'renderer', 'settings'],\n  defaultSettings: {\n    settings: {},\n    style: {\n      label: '$label',\n    },\n  },\n  render() {\n    const stngs = this.settings.settings;\n    const labels = [];\n\n    (stngs.sources || []).forEach((source) => {\n      if (source.strategy && strategies[source.strategy.type] && source.component) {\n        labels.push(\n          ...strategy(\n            {\n              chart: this.chart,\n              rect: this.rect,\n              renderer: this.renderer,\n              source,\n              style: this.style,\n            },\n            strategies[source.strategy.type]\n          )\n        );\n      }\n    });\n\n    return labels;\n  },\n};\n\nexport default labelsComponent;\n","import labelsComponent from './labels';\n\nexport default function labels(picasso) {\n  picasso.component('labels', labelsComponent);\n}\n","import extend from 'extend';\n\n/**\n * Component settings\n * @typedef {object}\n * @alias ComponentLegendCat.settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * @typedef {object=}\n   */\n  layout: {\n    /**\n     * Maximum number of columns (vertical) or rows (horizontal)\n     * @type {number=}\n     */\n    size: 1,\n    /**\n     * Layout direction. Either `'ltr'` or `'rtl'`\n     * @type {string=}\n     */\n    direction: 'ltr',\n    /** Initial scroll offset\n     * @type {number=} */\n    scrollOffset: 0,\n  },\n  /**\n   * Settings applied per item\n   * @typedef {object=}\n   */\n  item: {\n    /** Whether to show the current item\n     * @type {boolean=} */\n    show: true,\n    /** Justify item\n     * @type {number=} */\n    justify: 0.5,\n    /** Align item\n     * @type {number=} */\n    align: 0.5,\n    /**\n     * @typedef {object=} */\n    label: {\n      /** Font size in pixels\n       * @type {string=} */\n      fontSize: '12px',\n      /** Font family\n       * @type {string=} */\n      fontFamily: 'Arial',\n      fill: '#595959',\n      /** Word break rule, how to apply line break if label text overflows its maxWidth property. Either `'break-word'` or `'break-all'`\n       * @type {string=} */\n      wordBreak: 'none',\n      /** Max number of lines allowed if label is broken into multiple lines (only applicable with wordBreak)\n       * @type {number=} */\n      maxLines: 2,\n      /** Maximum width of label, in px\n       * @type {number=} */\n      maxWidth: 136,\n      /** Line height as a multiple of the font size\n       * @type {number=} */\n      lineHeight: 1.2,\n    },\n    /**\n     * @typedef {object=} */\n    shape: {\n      /**\n       * Type of shape\n       * @type {string=} */\n      type: 'square',\n      /**\n       * Size of shape in pixels\n       * @type {number=} */\n      size: 12,\n    },\n  },\n  /**\n   * @typedef {object=} */\n  title: {\n    /** Whether to show the title\n     * @type {boolean=} */\n    show: true,\n    /** Title text. Defaults to the title of the provided data field\n     * @type {string=} */\n    text: undefined,\n    /** Horizontal alignment of the text. Allowed values are `'start'`, `'middle'` and `'end'`\n     * @type {string}\n     */\n    anchor: 'start',\n    /** Font size in pixels\n     * @type {string=} */\n    fontSize: '16px',\n    /** Font family\n     * @type {string=} */\n    fontFamily: 'Arial',\n    /** Title color\n     * @type {string=} */\n    fill: '#595959',\n    /** Word break rule, how to apply line break if label text overflows its maxWidth property. Either `'break-word'` or `'break-all'`\n     * @type {string=} */\n    wordBreak: 'none',\n    /** Max number of lines allowed if label is broken into multiple lines, is only appled when `wordBreak` is not set to `'none'`\n     * @type {number=} */\n    maxLines: 2,\n    /** Maximum width of title, in px\n     * @type {number=} */\n    maxWidth: 156,\n    /** Line height as a multiple of the font size\n     * @type {number=} */\n    lineHeight: 1.25,\n  },\n  /**\n   * @typedef {object=} */\n  navigation: {\n    /**\n     * @typedef {object=} */\n    button: {\n      /**\n       * @type {object<string, boolean>=} */\n      class: undefined,\n      /**\n       * @type {function} */\n      content: undefined,\n      /**\n       * @type {number=} */\n      tabIndex: undefined,\n    },\n    /** Whether the button should be disabled or not\n     * @type {boolean=} */\n    disabled: false,\n  },\n};\n\n/**\n * Resolve settings based on input, defaults, and data\n *\n * @ignore\n * @param {legendComponent} comp - The component instance\n */\nexport default function resolveSettings(comp) {\n  const domain = comp.scale.domain();\n  let data = { items: [] };\n  const dock = comp.settings.layout.dock;\n  if (comp.scale.type === 'threshold-color') {\n    const fields = comp.scale.data().fields;\n    const sourceField = fields[0];\n    let formatter = (v) => String(v);\n\n    if (comp.settings.formatter) {\n      formatter = comp.chart.formatter(comp.settings.formatter);\n    } else if (sourceField) {\n      formatter = sourceField.formatter();\n    }\n\n    for (let i = 0; i < domain.length - 1; i++) {\n      const it = {\n        value: domain[i],\n        label: `${formatter(domain[i])} - < ${formatter(domain[i + 1])}`,\n      };\n      if (sourceField) {\n        it.source = {\n          field: sourceField.id(),\n        };\n      }\n      data.items.push(it);\n    }\n    const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n\n    if (orientation === 'vertical') {\n      data.items.reverse();\n    }\n  } else {\n    const labels = comp.scale.labels ? comp.scale.labels() : null;\n    data.items = domain.map((d, idx) => {\n      const datum = comp.scale.datum ? extend({}, comp.scale.datum(d)) : { value: d };\n      datum.value = d;\n\n      if (comp.scale.label) {\n        datum.label = comp.scale.label(d);\n      } else if (labels) {\n        datum.label = labels[idx];\n      }\n\n      return datum;\n    });\n  }\n\n  const title = comp.resolver.resolve({\n    data: {\n      fields: comp.scale.data().fields,\n    },\n    defaults: extend(true, {}, DEFAULT_SETTINGS.title, comp.style.title),\n    settings: comp.settings.settings.title,\n  });\n\n  const layout = comp.resolver.resolve({\n    data: {\n      fields: comp.scale.data().fields,\n    },\n    defaults: DEFAULT_SETTINGS.layout,\n    settings: comp.settings.settings.layout,\n  });\n\n  const labels = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, DEFAULT_SETTINGS.item.label, comp.style.item.label),\n    settings: (comp.settings.settings.item || {}).label,\n  });\n\n  const shapeSettings = extend(true, {}, (comp.settings.settings.item || {}).shape);\n\n  if (typeof shapeSettings.fill === 'undefined' && comp.settings.scale) {\n    shapeSettings.fill = {\n      scale: comp.settings.scale,\n    };\n  }\n\n  const symbols = comp.resolver.resolve({\n    data,\n    defaults: extend(true, {}, DEFAULT_SETTINGS.item.shape, comp.style.item.shape),\n    settings: shapeSettings,\n  });\n\n  const items = comp.resolver.resolve({\n    data,\n    defaults: extend(\n      true,\n      {},\n      {\n        show: DEFAULT_SETTINGS.item.show,\n      }\n    ),\n    settings: {\n      show: (comp.settings.settings.item || {}).show,\n    },\n  });\n\n  function range(item, i) {\n    let v = item.data.value;\n    let next = domain[i + 1];\n    item.data.value = [v, next];\n  }\n\n  if (comp.scale.type === 'threshold-color') {\n    const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n\n    if (orientation === 'vertical') {\n      items.items.reverse().forEach(range);\n      items.items.reverse();\n    } else {\n      items.items.forEach(range);\n    }\n  }\n\n  return {\n    title,\n    labels,\n    symbols,\n    items,\n    layout,\n  };\n}\n","import extend from 'extend';\n\n/* eslint no-mixed-operators:0 */\n\nfunction placeTextInRect(rect, label, opts) {\n  const textMetrics = opts.textMetrics;\n\n  if (rect.height < textMetrics.height) {\n    return false;\n  }\n\n  const wiggleWidth = Math.max(0, rect.width - textMetrics.width);\n  label.baseline = 'text-before-edge';\n  const wiggleHeight = Math.max(0, rect.height - textMetrics.height);\n  label.x = rect.x + opts.align * wiggleWidth;\n  label.y = rect.y + opts.justify * wiggleHeight + parseInt(label.fontSize, 10) * 0.175; // 0.175 - basline offset\n\n  return label;\n}\n\nfunction wiggleSymbol(container, size, opts) {\n  const wiggleWidth = Math.max(0, container.width - size);\n  const wiggleHeight = Math.max(0, container.height - size);\n\n  return {\n    x: container.x + size / 2 + opts.align * wiggleWidth,\n    y: container.y + size / 2 + opts.justify * wiggleHeight,\n  };\n}\n\nexport function createRenderItem({ x = 0, y, item, globalMetrics, createSymbol, direction = 'ltr' }) {\n  let label = item.label.displayObject;\n  let labelBounds = item.label.bounds;\n  let symbolItem = item.symbol.meta;\n  const rtl = direction === 'rtl';\n\n  let labelRect = {\n    x: rtl ? x + globalMetrics.maxLabelBounds.width : x + globalMetrics.maxSymbolSize + globalMetrics.spacing,\n    y,\n    width: globalMetrics.maxLabelBounds.width,\n    height: Math.max(globalMetrics.maxSymbolSize, globalMetrics.maxLabelBounds.height),\n  };\n\n  let wiggled = wiggleSymbol(\n    {\n      x: rtl ? x + globalMetrics.maxLabelBounds.width + globalMetrics.spacing : x,\n      y,\n      width: globalMetrics.maxSymbolSize,\n      height: labelRect.height,\n    },\n    symbolItem.size,\n    {\n      align: typeof symbolItem.align === 'undefined' ? 0.5 : symbolItem.align,\n      justify: typeof symbolItem.justify === 'undefined' ? 0.5 : symbolItem.justify,\n    }\n  );\n\n  const symbol = createSymbol(extend({}, symbolItem, wiggled));\n\n  delete symbol.collider;\n\n  label.anchor = rtl ? 'end' : 'start';\n\n  placeTextInRect(labelRect, label, {\n    textMetrics: labelBounds,\n    fontSize: parseInt(label.fontSize, 10),\n    align: 0.0,\n    justify: 0.5,\n  });\n\n  let container = {\n    type: 'container',\n    data: item.label.displayObject.data,\n    children: [symbol, label],\n    collider: {\n      type: 'rect',\n      x,\n      y,\n      width: globalMetrics.maxItemBounds.width,\n      height: globalMetrics.maxItemBounds.height,\n    },\n  };\n\n  return {\n    item: container,\n    metrics: labelRect,\n  };\n}\n\nexport function getItemsToRender({ viewRect }, rect, { itemized, create = createRenderItem, parallels, createSymbol }) {\n  const direction = itemized.layout.direction;\n  const globalMetrics = itemized.globalMetrics;\n  const legendItems = itemized.items;\n  const isHorizontal = itemized.layout.orientation === 'horizontal';\n  let s = 0;\n\n  const renderItems = [];\n  const fixedHeight = globalMetrics.maxItemBounds.height;\n  const fixedWidth = globalMetrics.maxItemBounds.width;\n  const rowHeight = itemized.layout.margin.vertical + fixedHeight;\n  const columnWidth = itemized.layout.margin.horizontal + fixedWidth;\n  let x = rect.x;\n  let y = rect.y;\n\n  let shift = viewRect.x - rect.x;\n\n  for (let i = 0; i < legendItems.length; i++) {\n    let renderItem = create({\n      y,\n      x: direction === 'rtl' ? viewRect.x + shift + viewRect.width - fixedWidth - (x - rect.x) : x,\n      item: legendItems[i],\n      globalMetrics,\n      direction,\n      createSymbol,\n    });\n\n    if ((isHorizontal && x >= viewRect.x - fixedWidth) || (!isHorizontal && y >= viewRect.y - fixedHeight)) {\n      renderItems.push(renderItem.item);\n    }\n\n    s++;\n    if (s >= parallels) {\n      s = 0;\n      if (isHorizontal) {\n        x += columnWidth; // next column\n        y = rect.y; // reset y to first row\n      } else {\n        y += rowHeight; // next row\n        x = rect.x; // reset x to first column\n      }\n    } else if (isHorizontal) {\n      y += rowHeight; // next row\n    } else {\n      x += columnWidth; // next column\n    }\n\n    if (!isHorizontal && y > viewRect.y + viewRect.height) {\n      break;\n    } else if (isHorizontal && x > viewRect.x + viewRect.width) {\n      break;\n    }\n  }\n  return renderItems;\n}\n\nexport function itemize({ resolved, dock }, renderer) {\n  let label;\n  let items = [];\n  let item;\n  let sourceItems = resolved.items.items;\n  let sourceSymbols = resolved.symbols.items;\n  let sourceLabels = resolved.labels.items;\n\n  let maxSymbolSize = 0;\n  let maxLabelWidth = 0;\n  let maxLabelHeight = 0;\n\n  for (let i = 0; i < sourceItems.length; i++) {\n    if (sourceItems[i].show === false) {\n      continue;\n    }\n\n    const text = typeof sourceLabels[i].text !== 'undefined' ? sourceLabels[i].text : sourceLabels[i].data.label || '';\n    label = extend({}, sourceLabels[i], {\n      // create the displayObject here in order to measure it\n      type: 'text',\n      fontSize: `${parseInt(sourceLabels[i].fontSize, 10)}px`,\n      text,\n      title: text,\n    });\n\n    item = {\n      symbol: {\n        // can't create a displayObject here due to need to wiggle the center position of the symbol later on,\n        // just store the object needed later on\n        meta: sourceSymbols[i],\n      },\n      label: {\n        displayObject: label,\n        bounds: renderer.textBounds(label),\n      },\n    };\n\n    items.push(item);\n\n    maxSymbolSize = Math.max(sourceSymbols[i].size, maxSymbolSize);\n    maxLabelWidth = Math.max(item.label.bounds.width, maxLabelWidth);\n    maxLabelHeight = Math.max(item.label.bounds.height, maxLabelHeight);\n  }\n\n  return {\n    items,\n    globalMetrics: {\n      spacing: 8,\n      maxSymbolSize,\n      maxItemBounds: {\n        height: Math.max(maxSymbolSize, maxLabelHeight),\n        width: maxSymbolSize + 8 + maxLabelWidth,\n      },\n      maxLabelBounds: {\n        width: maxLabelWidth,\n        height: maxLabelHeight,\n      },\n    },\n    layout: {\n      margin: {\n        vertical: typeof resolved.layout.item.vertical !== 'undefined' ? resolved.layout.item.vertical : 4,\n        horizontal: typeof resolved.layout.item.horizontal !== 'undefined' ? resolved.layout.item.horizontal : 4,\n      },\n      mode: resolved.layout.item.mode,\n      size: resolved.layout.item.size,\n      orientation: dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical',\n      direction: resolved.layout.item.direction,\n      scrollOffset: resolved.layout.item.scrollOffset,\n    },\n  };\n}\n\nexport function extent(itemized, parallels) {\n  const count = itemized.items.length;\n  const size = Math.ceil(count / parallels);\n  const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n  const margin = property === 'width' ? 'horizontal' : 'vertical';\n  return itemized.globalMetrics.maxItemBounds[property] * size + (size - 1) * itemized.layout.margin[margin];\n}\n\nexport function spread(itemized, parallels) {\n  const size = parallels;\n  const property = itemized.layout.orientation === 'horizontal' ? 'height' : 'width';\n  const margin = property === 'width' ? 'horizontal' : 'vertical';\n  return (\n    itemized.globalMetrics.maxItemBounds[property] * size + // expected vertical size of items\n    (size - 1) * itemized.layout.margin[margin]\n  ); // expected spacing between items\n}\n\nexport function parallelize(availableExtent, availableSpread, itemized) {\n  const count = itemized.items.length;\n  const extentProperty = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n  const margin = extentProperty === 'width' ? 'horizontal' : 'vertical';\n  const extentInPx =\n    itemized.globalMetrics.maxItemBounds[extentProperty] * count + (count - 1) * itemized.layout.margin[margin];\n  let numNeeded = Math.ceil(extentInPx / availableExtent);\n\n  if (availableSpread != null) {\n    const spreadProperty = itemized.layout.orientation === 'horizontal' ? 'height' : 'width';\n    const spreadMargin = spreadProperty === 'width' ? 'horizontal' : 'vertical';\n    const spreadMarginSize = itemized.layout.margin[spreadMargin] || 4;\n    const numAllowed = Math.floor(\n      (availableSpread + spreadMarginSize) / (spreadMarginSize + itemized.globalMetrics.maxItemBounds[spreadProperty])\n    );\n    numNeeded = Math.min(numNeeded, numAllowed);\n  }\n\n  const numInput = isNaN(itemized.layout.size) ? 1 : itemized.layout.size;\n  return Math.max(1, Math.min(numNeeded, numInput));\n}\n\nexport default function (legend, { onScroll = () => {} }) {\n  let itemized;\n  let parallels;\n  let viewRect;\n  let containerRect;\n  let offset = null;\n  let overflow = 0;\n\n  const api = {\n    itemize: (obj) => {\n      itemized = itemize(obj, legend.renderer);\n      offset = !isNaN(itemized.layout.scrollOffset) ? itemized.layout.scrollOffset : offset; // Set the initial offset\n    },\n    getItemsToRender: (obj) => {\n      viewRect = obj.viewRect;\n      overflow = api.getContentOverflow(viewRect);\n      const ext = api.extent();\n      offset = Math.max(0, Math.min(offset, overflow));\n\n      containerRect = extend({}, viewRect);\n\n      const offsetProperty = api.orientation() === 'horizontal' ? 'x' : 'y';\n      containerRect[offsetProperty] -= offset;\n      containerRect[offsetProperty === 'x' ? 'width' : 'height'] = ext;\n\n      return getItemsToRender(obj, containerRect, { itemized, parallels, createSymbol: legend.symbol });\n    },\n    parallelize: (availableExtent, availableSpread) => {\n      parallels = parallelize(availableExtent, availableSpread, itemized);\n      return parallels;\n    },\n    hasContentOverflow: () => {\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      return extent(itemized, parallels) > viewRect[property];\n    },\n    getContentOverflow: (rect = viewRect) => {\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      return Math.max(0, extent(itemized, parallels) - rect[property]);\n    },\n    getNextSize: () => {\n      // TODO - calculate the actual size to next item to ensure alignment\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      const margin = property === 'width' ? 'horizontal' : 'vertical';\n      return itemized.globalMetrics.maxItemBounds[property] + itemized.layout.margin[margin];\n    },\n    getPrevSize: () => {\n      // TODO - calculate the actual size to next item to ensure alignment\n      const property = itemized.layout.orientation === 'horizontal' ? 'width' : 'height';\n      const margin = property === 'width' ? 'horizontal' : 'vertical';\n      return itemized.globalMetrics.maxItemBounds[property] + itemized.layout.margin[margin];\n    },\n    hasNext: () => {\n      if (api.orientation() === 'horizontal') {\n        return viewRect.x + viewRect.width < containerRect.x + containerRect.width;\n      }\n      return viewRect.y + viewRect.height < containerRect.y + containerRect.height;\n    },\n    hasPrev: () => {\n      if (api.orientation() === 'horizontal') {\n        return containerRect.x < viewRect.x;\n      }\n      return containerRect.y < viewRect.y;\n    },\n    next: () => {\n      api.scroll(-api.getNextSize());\n    },\n    prev: () => {\n      api.scroll(api.getPrevSize());\n    },\n    scroll: (delta) => {\n      const current = Math.max(0, Math.min(overflow, offset - delta));\n      if (current === offset) {\n        return;\n      }\n      offset = current;\n      onScroll();\n    },\n    offset: () => offset,\n    orientation: () => itemized.layout.orientation,\n    direction: () => itemized.layout.direction,\n    extent: () => extent(itemized, parallels), // total amount of space along orientation\n    spread: () => spread(itemized, parallels), // total amount of space perpendicular to orientation\n  };\n\n  return api;\n}\n","/**\n * Concatenate object keys into a space separated string. Use for transforming a 'class name map' into a class string\n * @private\n * @param  {Object} classMap Object with class names as keys and true or false values depending on if they should be in the returned class string or not\n * @return {String} Space separated string with class names\n */\nexport default function classString(classMap) {\n  return Object.keys(classMap)\n    .filter((className) => classMap[className])\n    .join(' ');\n}\n","import extend from 'extend';\nimport classString from '../../utils/class-string';\n\nconst DIR = {\n  up: '\\u25B2',\n  right: '\\u25B6',\n  down: '\\u25BC',\n  left: '\\u25C0',\n};\n\nfunction itemize({\n  // resolved,\n  dock,\n  navigation,\n}) {\n  return {\n    layout: {\n      orientation: dock === 'top' || dock === 'bottom' ? 'vertical' : 'horizontal',\n    },\n    navigation,\n  };\n}\n\nfunction btn(h, { size, isActive, direction, nav, attrs }) {\n  let c = {};\n  let content = '';\n  const attrsMerged = attrs;\n  if (nav && nav.button) {\n    if (typeof nav.button.class === 'function') {\n      c = nav.button.class({ direction });\n    } else if (nav.button.class) {\n      c = nav.button.class;\n    }\n    if (typeof nav.button.content === 'function') {\n      content = nav.button.content(h, { direction });\n    }\n    if (nav.button.tabIndex !== undefined) {\n      attrsMerged.tabindex = nav.button.tabIndex;\n    }\n  }\n  const style = {\n    width: `${size}px`,\n    minWidth: `${size}px`,\n    height: `${size}px`,\n  };\n\n  if (!Object.keys(c).length) {\n    // if no classes are set, add some basic styling\n    style.border = '0';\n    style.background = 'none';\n  }\n\n  if (!isActive || (nav && nav.disabled)) {\n    attrsMerged.disabled = 'disabled';\n  }\n\n  return h(\n    'button',\n    extend(\n      {\n        class: classString(c),\n        style,\n      },\n      attrsMerged\n    ),\n    [\n      content ||\n        h(\n          'span',\n          {\n            style: {\n              pointerEvents: 'none',\n            },\n          },\n          [DIR[direction]]\n        ),\n    ]\n  );\n}\n\nfunction render(renderer, { rect, itemRenderer }, itemized, legend) {\n  if (!renderer || !renderer.renderArgs) {\n    return;\n  }\n  renderer.size(rect);\n  const h = renderer.renderArgs[0];\n\n  const isVertical = itemized.layout.orientation === 'vertical'; // orientation of the navigation (not the legend)\n  const isRtl = itemRenderer.direction() === 'rtl';\n\n  const hasNext = itemRenderer.hasNext();\n  const hasPrev = itemRenderer.hasPrev();\n\n  if (!hasPrev && !hasNext) {\n    renderer.render([]);\n    return;\n  }\n\n  const buttonSize = 32;\n\n  const order = isVertical ? ['right', 'left'] : ['down', 'up'];\n\n  if (isRtl && isVertical) {\n    order.reverse();\n  }\n\n  const nodes = [\n    h(\n      'div',\n      {\n        style: {\n          position: 'relative',\n          display: 'flex',\n          'flex-direction': isVertical ? 'column' : 'row',\n          'justify-content': 'center',\n          height: '100%',\n          pointerEvents: 'auto',\n        },\n        dir: isRtl && !isVertical ? 'rtl' : 'ltr',\n      },\n      [\n        btn(h, {\n          size: buttonSize,\n          isActive: hasNext,\n          direction: order[0],\n          attrs: {\n            'data-action': 'next',\n            'data-component-key': legend.settings.key,\n          },\n          nav: itemized.navigation,\n        }),\n        btn(h, {\n          size: buttonSize,\n          isActive: hasPrev,\n          direction: order[1],\n          attrs: {\n            'data-action': 'prev',\n            'data-component-key': legend.settings.key,\n          },\n          nav: itemized.navigation,\n        }),\n      ]\n    ),\n  ];\n  renderer.render(nodes);\n}\n\nexport default function (legend) {\n  let itemized;\n\n  const nav = {\n    itemize: (obj) => {\n      itemized = itemize(obj);\n    },\n    render: (obj) => render(nav.renderer, obj, itemized, legend),\n    extent: () => 32,\n    spread: () => 64,\n  };\n\n  return nav;\n}\n","import extend from 'extend';\n\nfunction itemize({ resolved }, legend) {\n  if (resolved.title.item.show === false) {\n    return null;\n  }\n  const t = extend({}, resolved.title.item, {\n    type: 'text',\n  });\n\n  if (resolved.layout.item.direction === 'rtl') {\n    if (!t.anchor || t.anchor === 'start') {\n      t.anchor = 'end';\n    } else if (t.anchor === 'end') {\n      t.anchor = 'start';\n    }\n  }\n\n  if (typeof resolved.title.settings.text === 'undefined') {\n    const fields = legend.scale.data().fields;\n    t.text = fields && fields[0] ? fields[0].title() : '';\n  }\n\n  return {\n    displayObject: t,\n    bounds: legend.renderer.textBounds(t),\n  };\n}\n\nfunction render({ rect }, renderer, itemized) {\n  if (!renderer) {\n    return;\n  }\n  const nodes = [];\n  renderer.size(rect);\n  if (itemized) {\n    const align = {\n      start: 0,\n      end: rect.width,\n      middle: rect.width / 2,\n    };\n    nodes.push(\n      extend({}, itemized.displayObject, {\n        x: align[itemized.displayObject.anchor] || 0,\n        y: 0,\n        baseline: 'text-before-edge',\n        title: itemized.displayObject.text,\n      })\n    );\n  }\n  renderer.render(nodes);\n}\n\nexport default function (legend) {\n  let itemized;\n\n  const api = {\n    itemize: (obj) => {\n      itemized = itemize(obj, legend);\n    },\n    render: (obj) => {\n      render(obj, api.renderer, itemized);\n    },\n    spread: () => (itemized ? itemized.bounds.height : 0),\n    extent: () => (itemized ? itemized.bounds.width : 0),\n  };\n\n  return api;\n}\n","import extend from 'extend';\n/* eslint no-mixed-operators:0 */\n\nexport default function layout(\n  rect,\n  display,\n  orientation,\n  { itemRenderer, navigationRenderer, titleRenderer, isPreliminary = false }\n) {\n  let title;\n  let content;\n  let navigation;\n  let preferredSize = 0;\n\n  const paddedRect = {\n    x: display.spacing,\n    y: display.spacing,\n    width: rect.width - 2 * display.spacing,\n    height: rect.height - 2 * display.spacing,\n  };\n\n  title = {\n    x: paddedRect.x,\n    y: paddedRect.y,\n    width: paddedRect.width,\n    height: titleRenderer.spread(),\n  };\n\n  if (orientation === 'horizontal') {\n    // const titleAtTop = false;\n    // if (titleAtTop) { // this might be a nicer layout sometimes\n    //   // |------------------|\n    //   // |title             |\n    //   // |------------|-----|\n    //   // |content     | nav |\n    //   // |------------|-----|\n\n    //   // available space for items without navigation UI\n    //   const availableExtentForItems = paddedRect.width;\n    //   const availableSpreadForItems = paddedRect.height - (title.y + title.height) + 8;\n    //   const isRtl = itemRenderer.direction() === 'rtl';\n    //   itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    //   const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    //   content = {\n    //     x: paddedRect.x,\n    //     y: title.y + title.height,\n    //     width: paddedRect.width - navigationSize,\n    //     height: availableSpreadForItems\n    //   };\n    //   navigation = {\n    //     x: content.x + content.width,\n    //     y: title.y + title.height,\n    //     width: navigationSize,\n    //     height: paddedRect.height - (title.y + title.height) + 8\n    //   };\n\n    //   if (isRtl) { // switch navigation and content\n    //     navigation.x = content.x;\n    //     content.x = navigation.x + navigation.width;\n    //     // totalContent.x = navigation.x;\n    //   }\n    //   preferredSize = title.height + Math.max(navigationRenderer.spread(), itemRenderer.spread());\n    // } else {\n    // |-----|------------|-----|\n    // |title|content     | nav |\n    // |-----|------------|-----|\n\n    title = {\n      x: paddedRect.x,\n      y: paddedRect.y,\n      width: titleRenderer.extent(),\n      height: titleRenderer.spread(),\n    };\n\n    // available space for items without navigation UI\n    const availableExtentForItems = paddedRect.width - title.width - (title.width ? display.spacing : 0);\n    const availableSpreadForItems = paddedRect.height;\n    itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    const spread = itemRenderer.spread();\n    const navigationSpread = navigationSize ? navigationRenderer.spread() : 0;\n    content = {\n      x: title.x + title.width + (title.width ? display.spacing : 0),\n      y: paddedRect.y + Math.max(0, (navigationSpread - spread) / 2),\n      width:\n        paddedRect.width -\n        navigationSize -\n        title.width -\n        (navigationSize ? display.spacing : 0) -\n        (title.width ? display.spacing : 0),\n      height: availableSpreadForItems,\n    };\n    navigation = {\n      x: content.x + content.width + (navigationSize ? display.spacing : 0),\n      y: paddedRect.y,\n      width: navigationSize,\n      height: paddedRect.height,\n    };\n\n    title.y = content.y;\n\n    const isRtl = itemRenderer.direction() === 'rtl';\n    if (isRtl) {\n      // switch title, content and navigation\n      navigation.x = paddedRect.x;\n      content.x = navigation.x + navigation.width + (navigation.width ? display.spacing : 0);\n      title.x = content.x + content.width + (title.width ? display.spacing : 0);\n    }\n    preferredSize = Math.max(title.height, navigationSpread, itemRenderer.spread());\n    // }\n  } else {\n    // |------------|\n    // |title       |\n    // |------------|\n    // |content     |\n    // |------------|\n    // |navigation  |\n    // |------------|\n\n    const availableExtentForItems = paddedRect.height - title.height - (title.height ? display.spacing : 0);\n    const availableSpreadForItems = paddedRect.width;\n    itemRenderer.parallelize(availableExtentForItems, isPreliminary ? undefined : availableSpreadForItems);\n\n    const navigationSize = itemRenderer.extent() > availableExtentForItems ? navigationRenderer.extent() : 0;\n    navigation = {\n      x: paddedRect.x,\n      y: paddedRect.y + paddedRect.height - navigationSize,\n      width: paddedRect.width,\n      height: navigationSize,\n    };\n\n    content = {\n      x: paddedRect.x,\n      y: title.y + title.height + (title.height ? display.spacing : 0),\n      width: paddedRect.width,\n      height:\n        paddedRect.height -\n        title.height -\n        (title.height ? display.spacing : 0) -\n        navigation.height -\n        (navigation.height ? display.spacing : 0),\n    };\n\n    preferredSize = Math.max(\n      titleRenderer.extent(),\n      navigationSize ? navigationRenderer.spread() : 0,\n      itemRenderer.spread()\n    );\n  }\n\n  content = extend({}, rect, {\n    x: rect.x + content.x,\n    y: rect.y + content.y,\n    width: content.width,\n    height: content.height,\n  });\n\n  navigation.x += rect.x;\n  navigation.y += rect.y;\n\n  title.x += rect.x;\n  title.y += rect.y;\n\n  return {\n    title: extend({}, rect, title),\n    content: extend({}, rect, content),\n    navigation: extend({}, rect, navigation),\n    orientation,\n    preferredSize,\n  };\n}\n","import extend from 'extend';\nimport resolveSettings from './legend-resolver';\nimport itemRendererFactory from './item-renderer';\nimport navigationRendererFactory from './navigation-renderer';\nimport titleRendererFactory from './title-renderer';\nimport layout from './legend-layout';\n\nfunction update(comp) {\n  comp.state.resolved = resolveSettings(comp);\n  comp.titleRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.layout.dock || 'center',\n  });\n  comp.itemRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.layout.dock || 'center',\n  });\n  comp.navigationRenderer.itemize({\n    resolved: comp.state.resolved,\n    dock: comp.settings.layout.dock || 'center',\n    navigation: comp.settings.settings.navigation,\n  });\n\n  comp.state.display = {\n    spacing: 8,\n  };\n}\n\nfunction preferredSize(comp, size) {\n  let s = 0;\n  const dock = comp.settings.layout.dock || 'center';\n  const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n  const d = comp.state.display;\n  const tempLayout = layout(size.inner, d, orientation, {\n    itemRenderer: comp.itemRenderer,\n    navigationRenderer: comp.navigationRenderer,\n    titleRenderer: comp.titleRenderer,\n    isPreliminary: true,\n  });\n  s += d.spacing; // start padding in both vertical and horizontal mode\n  s += tempLayout.preferredSize;\n  s += d.spacing; // end padding in both vertical and horizontal mode\n  return s;\n}\n\nfunction render(legend) {\n  const { rect, settings, state, itemRenderer, navigationRenderer, titleRenderer } = legend;\n  const dock = settings.layout.dock;\n  const orientation = dock === 'top' || dock === 'bottom' ? 'horizontal' : 'vertical';\n  const l = layout(rect, state.display, orientation, {\n    itemRenderer,\n    navigationRenderer,\n    titleRenderer,\n  });\n\n  legend.renderer.size(l.content);\n\n  // l.content.x = 0;\n  // l.content.y = 0;\n\n  // l.navigation.x += rect.x;\n  // l.navigation.y += rect.y;\n\n  // l.title.x += rect.x;\n  // l.title.y += rect.y;\n\n  let contentItems = itemRenderer.getItemsToRender({\n    viewRect: extend({}, l.content, { x: 0, y: 0 }),\n  });\n\n  navigationRenderer.render({\n    rect: l.navigation,\n    itemRenderer,\n  });\n\n  titleRenderer.render({\n    rect: l.title,\n  });\n\n  legend.state.views = {\n    layout: l,\n  };\n\n  return contentItems;\n}\n\nconst component = {\n  require: ['chart', 'settings', 'renderer', 'update', 'resolver', 'registries', 'symbol'],\n  defaultSettings: {\n    settings: {},\n    style: {\n      item: {\n        label: '$label',\n        shape: '$shape',\n      },\n      title: '$title',\n    },\n  },\n  mounted(renderElement) {\n    if (renderElement && renderElement.parentNode) {\n      this.navigationRenderer.renderer.appendTo(renderElement.parentNode);\n      this.titleRenderer.renderer.appendTo(renderElement.parentNode);\n\n      renderElement.parentNode.insertBefore(this.navigationRenderer.renderer.element(), renderElement);\n      renderElement.parentNode.insertBefore(this.titleRenderer.renderer.element(), renderElement);\n    }\n    this.navigationRenderer.render({\n      rect: this.state.views.layout.navigation,\n      itemRenderer: this.itemRenderer,\n    });\n\n    this.titleRenderer.render({\n      rect: this.state.views.layout.title,\n    });\n  },\n  beforeUnmount() {\n    this.navigationRenderer.renderer.clear();\n    this.titleRenderer.renderer.clear();\n  },\n  on: {\n    panstart() {\n      if (this.state.interaction.started) {\n        return;\n      }\n      const contentOverflow = this.itemRenderer.getContentOverflow();\n      if (!contentOverflow) {\n        return;\n      }\n      this.state.interaction.started = true;\n      this.state.interaction.delta = 0;\n    },\n    panmove(e) {\n      if (!this.state.interaction.started) {\n        return;\n      }\n      const delta =\n        this.itemRenderer.orientation() === 'horizontal'\n          ? (this.itemRenderer.direction() === 'rtl' ? -1 : 1) * e.deltaX\n          : e.deltaY;\n      this.itemRenderer.scroll(delta - this.state.interaction.delta);\n      this.state.interaction.delta = delta;\n    },\n    panend() {\n      this.state.interaction.started = false;\n    },\n    scroll(delta) {\n      this.itemRenderer.scroll(-delta);\n    },\n    next() {\n      this.itemRenderer.next();\n    },\n    prev() {\n      this.itemRenderer.prev();\n    },\n  },\n  created() {\n    this.state = {\n      interaction: {},\n    };\n    this.onScroll = () => {\n      const items = render(this);\n      this.update(items);\n    };\n    this.itemRenderer = itemRendererFactory(this, {\n      onScroll: this.onScroll,\n    });\n    this.navigationRenderer = navigationRendererFactory(this);\n    this.titleRenderer = titleRendererFactory(this);\n    this.navigationRenderer.renderer = this.registries.renderer('dom')();\n    this.titleRenderer.renderer = this.registries.renderer(this.settings.renderer)();\n    update(this);\n  },\n  preferredSize(obj) {\n    return preferredSize(this, obj);\n  },\n  beforeUpdate() {\n    update(this);\n  },\n  render() {\n    return render(this);\n  },\n  beforeDestroy() {\n    this.navigationRenderer.renderer.destroy();\n    this.titleRenderer.renderer.destroy();\n  },\n  additionalElements() {\n    return [this.titleRenderer.renderer.element(), this.navigationRenderer.renderer.element()];\n  },\n  _DO_NOT_USE_getInfo() {\n    return {\n      offset: this.itemRenderer.offset(),\n    };\n  },\n};\n\nexport default component;\n","import component from './legend-cat';\n\n/**\n * @typedef {object} ComponentLegendCat\n * @extends ComponentSettings\n * @property {string} scale Reference to categorical color scale\n * @example\n{\n  type: 'legend-cat',\n  scale: '<categorical-color-scale>',\n}\n */\n\nconst type = 'legend-cat';\n\nexport default function categoricalLegend(picasso) {\n  picasso.component(type, component);\n}\n","function applyAlignJustify(ctx, node) {\n  let wiggle = 0;\n  const cmd = {\n    type: ctx.state.isVertical ? 'justify' : 'align',\n    coord: ctx.state.isVertical ? 'y' : 'x',\n    pos: ctx.state.isVertical ? 'height' : 'width',\n    fn: ctx.state.isVertical ? 'requiredHeight' : 'requiredWidth',\n  };\n\n  wiggle = ctx.state.rect[cmd.pos] - ctx.state.legend.length() - ctx.state.title[cmd.fn]();\n  wiggle *= Math.min(1, Math.max(ctx.stgns[cmd.type], 0));\n  node[cmd.coord] += wiggle;\n}\n\nexport function generateStopNodes(ctx) {\n  const fillScale = ctx.state.legend.fillScale;\n  const majorScale = ctx.state.legend.majorScale;\n  const stops = fillScale.domain().map((d) => ({\n    type: 'stop',\n    color: fillScale(d),\n    offset: Math.min(1, Math.max(0, majorScale.norm(d))),\n  }));\n\n  return stops.sort((a, b) => a.offset - b.offset);\n}\n\nexport function createTitleNode(ctx) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  const isTickLeft = state.ticks.anchor === 'left';\n  const isTickTop = state.ticks.anchor === 'top';\n  let x = state.rect.x;\n  let y = state.rect.y;\n  let textAnchor = 'start';\n\n  if (state.title.anchor === 'left') {\n    x += state.title.requiredWidth() - settings.title.padding;\n    y += state.title.textMetrics.height;\n    y += isTickTop ? state.rect.height - state.title.textBounds.height : 0;\n    textAnchor = 'end';\n  } else if (state.title.anchor === 'right') {\n    x += state.legend.length();\n    x += settings.title.padding;\n    y += state.title.textMetrics.height;\n    y += isTickTop ? state.rect.height - state.title.textBounds.height : 0;\n  } else if (state.title.anchor === 'top') {\n    x += isTickLeft ? state.rect.width : 0;\n    y += state.title.textMetrics.height;\n    textAnchor = isTickLeft ? 'end' : 'start';\n  }\n\n  const node = {\n    tag: 'legend-title',\n    type: 'text',\n    x,\n    y: Math.min(y, state.rect.y + state.rect.height),\n    text: settings.title.text,\n    fill: settings.title.fill,\n    fontSize: settings.title.fontSize,\n    fontFamily: settings.title.fontFamily,\n    maxWidth: settings.title.maxLengthPx,\n    maxLines: settings.title.maxLines,\n    wordBreak: settings.title.wordBreak,\n    hyphens: settings.title.hyphens,\n    lineHeight: settings.title.lineHeight,\n    anchor: textAnchor,\n    title: settings.title.text,\n  };\n\n  applyAlignJustify(ctx, node);\n  return node;\n}\n\nexport function createLegendRectNode(ctx, stops) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  const container = state.rect;\n  let x = container.x;\n  let y = container.y;\n  let width = state.isVertical ? settings.size : state.legend.length();\n  let height = state.isVertical ? state.legend.length() : settings.size;\n\n  if (state.ticks.anchor === 'left') {\n    x += state.rect.width - settings.size;\n  } else if (state.ticks.anchor === 'top') {\n    y += state.rect.height - settings.size;\n  }\n\n  if (state.title.anchor === 'top') {\n    y += state.title.requiredHeight();\n  } else if (state.title.anchor === 'left') {\n    x += state.title.requiredWidth();\n  }\n\n  const node = {\n    type: 'rect',\n    x,\n    y,\n    width,\n    height,\n    fill: {\n      type: 'gradient',\n      stops,\n      degree: state.isVertical ? 90 : 180,\n    },\n  };\n\n  applyAlignJustify(ctx, node);\n  return node;\n}\n\nexport function createTickNodes(ctx, legendNode) {\n  const state = ctx.state;\n  const settings = ctx.stgns;\n  let anchor = 'start';\n  const rangeSelectorRect = {\n    type: 'rect',\n    x: legendNode.x,\n    y: legendNode.y,\n    width: state.isVertical ? 0 : legendNode.width,\n    height: state.isVertical ? legendNode.height : 0,\n    fill: 'transparent',\n  };\n\n  const nodes = state.ticks.values.map((tick) => {\n    let x = 0;\n    let y = 0;\n    let dx = 0;\n    let dy = 0;\n    let baseline = 'alphabetical';\n\n    if (state.isVertical) {\n      y = legendNode.y + legendNode.height * tick.pos;\n      baseline = tick.pos === 0 ? 'text-before-edge' : 'text-after-edge';\n    } else {\n      x = legendNode.x + legendNode.width * tick.pos;\n    }\n\n    if (state.ticks.anchor === 'right') {\n      x = legendNode.x + settings.size + settings.tick.padding;\n\n      rangeSelectorRect.x = legendNode.x + legendNode.width;\n    } else if (state.ticks.anchor === 'left') {\n      x = legendNode.x - settings.tick.padding;\n      anchor = 'end';\n    } else if (state.ticks.anchor === 'top') {\n      y = legendNode.y - settings.tick.padding;\n      dy -= tick.textMetrics.height * 0.25;\n      anchor = tick.pos === 0 ? 'start' : 'end';\n    } else if (state.ticks.anchor === 'bottom') {\n      y = legendNode.y + legendNode.height + settings.tick.padding;\n      dy = tick.textMetrics.height * 0.8;\n      anchor = tick.pos === 0 ? 'start' : 'end';\n\n      rangeSelectorRect.y = legendNode.y + legendNode.height;\n    }\n\n    const node = {\n      type: 'text',\n      x,\n      y,\n      dx,\n      dy,\n      text: tick.label,\n      fontSize: settings.tick.fontSize,\n      fontFamily: settings.tick.fontFamily,\n      fill: settings.tick.fill,\n      maxWidth: state.isVertical\n        ? settings.tick.maxLengthPx\n        : Math.min(settings.tick.maxLengthPx, state.legend.length() / 2),\n      anchor,\n      textBoundsFn: ctx.renderer.textBounds,\n      title: tick.label,\n      baseline,\n    };\n\n    return node;\n  });\n\n  return {\n    type: 'container',\n    id: 'legend-seq-ticks',\n    children: [...nodes, rangeSelectorRect],\n  };\n}\n","import { createTitleNode, generateStopNodes, createLegendRectNode, createTickNodes } from './node-builder';\n\nfunction resolveAnchor(dock, anchor, map) {\n  const mapped = map[dock];\n  if (typeof mapped === 'object') {\n    if (mapped.valid.indexOf(anchor) !== -1) {\n      return anchor;\n    }\n    return mapped.default;\n  }\n\n  return map.default;\n}\n\nfunction resolveTickAnchor(settings) {\n  const dock = settings.layout.dock;\n  const anchor = settings.settings.tick.anchor;\n\n  const dockAnchorMap = {\n    left: { valid: ['left', 'right'], default: 'left' },\n    right: { valid: ['left', 'right'], default: 'right' },\n    top: { valid: ['top', 'bottom'], default: 'top' },\n    bottom: { valid: ['top', 'bottom'], default: 'bottom' },\n    default: 'right',\n  };\n\n  return resolveAnchor(dock, anchor, dockAnchorMap);\n}\n\nfunction resolveTitleAnchor(settings) {\n  const dockAnchorMap = {\n    left: { valid: ['top'], default: 'top' },\n    right: { valid: ['top'], default: 'top' },\n    top: { valid: ['left', 'right'], default: 'left' },\n    bottom: { valid: ['left', 'right'], default: 'left' },\n    default: 'top',\n  };\n\n  const dock = settings.layout.dock;\n  const anchor = settings.settings.title.anchor;\n\n  return resolveAnchor(dock, anchor, dockAnchorMap);\n}\n\nfunction initRect(ctx, size) {\n  const rect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n  const padding = ctx.stgns.padding;\n  rect.x = padding.left;\n  rect.y = padding.top;\n  rect.width = size.width - padding.left - padding.right;\n  rect.height = size.height - padding.top - padding.bottom;\n\n  return rect;\n}\n\nfunction getTicks(ctx, majorScale) {\n  const values = majorScale.domain();\n  let labels = values;\n  let labelFn = ctx.stgns.tick.label;\n  if (!labelFn && ctx.formatter) {\n    labelFn = ctx.formatter;\n  } else if (!labelFn && majorScale.data().fields) {\n    labelFn = majorScale.data().fields[0].formatter();\n  }\n  if (typeof labelFn === 'function') {\n    labels = values.map(labelFn).map(String);\n  }\n\n  const ticks = values.map((value, i) => {\n    const label = labels[i];\n    return {\n      value,\n      label,\n      pos: majorScale.norm(parseFloat(value, 10)),\n      textMetrics: ctx.renderer.measureText({\n        text: label,\n        fontSize: ctx.stgns.tick.fontSize,\n        fontFamily: ctx.stgns.tick.fontFamily,\n      }),\n    };\n  });\n\n  return ticks;\n}\n\nfunction initState(ctx) {\n  const isVertical = ctx.settings.layout.dock !== 'top' && ctx.settings.layout.dock !== 'bottom';\n  const titleStgns = ctx.stgns.title;\n\n  const fillScale = ctx.chart.scale(ctx.stgns.fill);\n  const majorScale = ctx.chart.scale(ctx.stgns.major);\n  const tickValues = getTicks(ctx, majorScale);\n  const tickAnchor = resolveTickAnchor(ctx.settings);\n\n  if (typeof titleStgns.text === 'undefined') {\n    const fields = majorScale.data().fields;\n    titleStgns.text = fields && fields[0] ? fields[0].title() : '';\n  }\n\n  const titleTextMetrics = ctx.renderer.measureText({\n    text: titleStgns.text,\n    fontSize: titleStgns.fontSize,\n    fontFamily: titleStgns.fontFamily,\n  });\n\n  const titleTextBounds = ctx.renderer.textBounds({\n    text: titleStgns.text,\n    fontSize: titleStgns.fontSize,\n    fontFamily: titleStgns.fontFamily,\n    maxLines: titleStgns.maxLines,\n    maxWidth: titleStgns.maxLengthPx,\n    wordBreak: titleStgns.wordBreak,\n    hyphens: titleStgns.hyphens,\n    lineHeight: titleStgns.lineHeight,\n  });\n\n  const state = {\n    isVertical,\n    nodes: [],\n    title: {\n      anchor: resolveTitleAnchor(ctx.settings),\n      textMetrics: titleTextMetrics,\n      textBounds: titleTextBounds,\n      requiredWidth: () => {\n        if (!titleStgns.show) {\n          return 0;\n        }\n        let w = titleTextBounds.width;\n        let mw = titleStgns.maxLengthPx;\n        if (!isVertical) {\n          w += titleStgns.padding;\n          mw += titleStgns.padding;\n        }\n        return Math.min(w, mw, state.rect.width);\n      },\n      requiredHeight: () => {\n        if (!titleStgns.show) {\n          return 0;\n        }\n        let h = titleTextBounds.height;\n        if (isVertical) {\n          h += titleStgns.padding;\n        }\n        return Math.min(h, state.rect.height);\n      },\n    },\n    ticks: {\n      values: tickValues,\n      anchor: tickAnchor,\n      length: Math.min(Math.max(...tickValues.map((t) => t.textMetrics.width)), ctx.stgns.tick.maxLengthPx),\n      requiredHeight: () =>\n        tickAnchor === 'top'\n          ? Math.max(...state.ticks.values.map((t) => t.textMetrics.height)) + ctx.stgns.tick.padding\n          : 0,\n      height: Math.max(...tickValues.map((t) => t.textMetrics.height)),\n    },\n    legend: {\n      fillScale,\n      majorScale,\n      length: () => {\n        const pos = isVertical ? 'height' : 'width';\n        const fnPos = isVertical ? 'requiredHeight' : 'requiredWidth';\n        const len = Math.min(state.rect[pos], state.rect[pos] * ctx.stgns.length) - state.title[fnPos]();\n        return Math.max(0, Math.min(len, ctx.stgns.maxLengthPx));\n      },\n    },\n  };\n\n  return state;\n}\n\n/**\n * Component settings\n * @typedef {object} ComponentLegendSeq.settings\n * @property {string} fill - Reference to definition of sequential color scale\n * @property {string} major - Reference to definition of linear scale\n * @property {number} [size=15] - Size in pixels of the legend, if vertical is the width and height otherwise\n * @property {number} [length=1] - A value in the range 0-1 indicating the length of the legend node\n * @property {number} [maxLengthPx=250] - Max length in pixels\n * @property {number} [align=0.5] - A value in the range 0-1 indicating horizontal alignment of the legend's content. 0 aligns to the left, 1 to the right.\n * @property {number} [justify=0] - A value in the range 0-1 indicating vertical alignment of the legend's content. 0 aligns to the top, 1 to the bottom.\n * @property {object} [padding]\n * @property {number} [padding.left=5] - Size in pixels\n * @property {number} [padding.right=5] - Size in pixels\n * @property {number} [padding.top=5] - Size in pixels\n * @property {number} [padding.bottom=5] - Size in pixels\n * @property {object} [tick]\n * @property {function} [tick.label] - Function applied to all tick values. Return value should be a string and is used as label\n * @property {string} [tick.fill='#595959'] - Tick color\n * @property {string} [tick.fontSize='12px'] - Font size in pixels\n * @property {string} [tick.fontFamily='Arial'] - Font family\n * @property {number} [tick.maxLengthPx=150] - Max length in pixels\n * @property {string} [tick.anchor=''] - Where to anchor the tick in relation to the legend node, supported values are [top, bottom, left and right] or empty string to auto anchor\n * @property {number} [tick.padding=5] - padding in pixels to the legend node\n * @property {object} [title] - Title settings\n * @property {boolean} [title.show=true] - Toggle title on/off\n * @property {string} [title.text=''] - Title text. Defaults to the title of the provided data field\n * @property {string} [title.fill='#595959'] - Title color\n * @property {string} [title.fontSize='12px'] - Font size in pixels\n * @property {string} [title.fontFamily='Arial'] - Font family\n * @property {number} [title.maxLengthPx=100] - Max length in pixels\n * @property {number} [title.padding=5] - padding in pixels to the legend node\n * @property {string} [title.anchor=''] - Where to anchor the title in relation to the legend node, supported values are [top, left and right] or empty string to auto anchor\n * @property {string} [title.wordBreak='none'] - How overflowing title is handled, if it should insert line breaks at word boundries (break-word) or character boundries (break-all)\n * @property {string} [title.hyphens='auto'] - How words should be hyphenated when text wraps across multiple lines (only applicable with wordBreak)\n * @property {number} [title.maxLines=2] - Number of allowed lines if title contains line breaks (only applicable with wordBreak)\n * @property {number} [title.lineHeight=1.2] - A multiplier defining the distance between lines (only applicable with wordBreak)\n */\n\nconst legendDef = {\n  require: ['chart', 'settings', 'renderer'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 0,\n      dock: 'right',\n    },\n    settings: {\n      size: 15,\n      length: 0.5,\n      maxLengthPx: 250,\n      align: 0.5,\n      justify: 0,\n      padding: {\n        left: 5,\n        right: 5,\n        top: 5,\n        bottom: 5,\n      },\n      tick: {\n        label: null,\n        fill: '#595959',\n        fontSize: '12px',\n        fontFamily: 'Arial',\n        maxLengthPx: 100,\n        anchor: null, // Use default based on dock\n        padding: 5,\n      },\n      title: {\n        show: true,\n        text: undefined,\n        fill: '#595959',\n        fontSize: '12px',\n        fontFamily: 'Arial',\n        maxLengthPx: 100,\n        padding: 5,\n        maxLines: 2,\n        wordBreak: 'none',\n        lineHeight: 1.2,\n        hyphens: 'auto',\n        anchor: null, // Use default based on dock\n      },\n    },\n  },\n  preferredSize(opts) {\n    const state = this.state;\n    state.rect = initRect(this, opts.inner);\n\n    // Init with size of legend\n    let prefSize = this.stgns.size;\n\n    // Append paddings\n    const paddings = state.isVertical\n      ? this.stgns.padding.left + this.stgns.padding.right\n      : this.stgns.padding.top + this.stgns.padding.bottom;\n    prefSize += paddings;\n\n    // Append tick size\n    const maxSize = Math.max(opts.inner.width, opts.inner.height);\n    if (state.ticks.anchor === 'left' || state.ticks.anchor === 'right') {\n      const tHeight = state.ticks.values.reduce((sum, t) => sum + t.textMetrics.height, 0);\n      if (tHeight > this.state.legend.length()) {\n        return maxSize;\n      }\n      prefSize += state.ticks.length;\n    } else {\n      const tWidth = state.ticks.length;\n      if (tWidth > this.state.legend.length()) {\n        return maxSize;\n      }\n      prefSize += Math.max(...state.ticks.values.map((t) => t.textMetrics.height));\n    }\n    prefSize += this.stgns.tick.padding;\n\n    // Append or use title size\n    if (this.stgns.title.show) {\n      if (state.title.anchor === 'left' || state.title.anchor === 'right') {\n        prefSize = Math.max(state.title.textBounds.height + paddings, prefSize);\n      } else {\n        prefSize = Math.max(prefSize, state.title.requiredWidth() + paddings);\n      }\n    }\n\n    this.state.preferredSize = prefSize;\n    return prefSize;\n  },\n  created() {\n    this.stgns = this.settings.settings;\n\n    this.state = initState(this);\n  },\n  beforeUpdate(opts) {\n    this.stgns = opts.settings.settings;\n\n    this.state = initState(this);\n  },\n  beforeRender(opts) {\n    this.state.nodes = [];\n    this.state.rect = initRect(this, opts.size);\n\n    if (this.stgns.title.show) {\n      const titleNode = createTitleNode(this);\n      this.state.nodes.push(titleNode);\n    }\n\n    const stopNodes = generateStopNodes(this);\n    const rectNode = createLegendRectNode(this, stopNodes);\n    const tickNodes = createTickNodes(this, rectNode);\n\n    const targetNode = {\n      // The target node enables range selection component to limit its range to a specific area\n      id: 'legend-seq-target',\n      type: 'container',\n      children: [rectNode, tickNodes],\n    };\n\n    this.state.nodes.push(targetNode);\n  },\n  render() {\n    return this.state.nodes;\n  },\n};\n\nexport default legendDef;\n","import legendSeq from './legend-seq';\n\n/**\n * @typedef {object} ComponentLegendSeq\n * @extends ComponentSettings\n * @example\n{\n  type: 'legend-seq',\n  settings: {\n    fill: '<sequential-color-scale>',\n    major: '<linear-scale>',\n  }\n}\n */\n\nexport default function sequentialLegend(picasso) {\n  picasso.component('legend-seq', legendSeq);\n}\n","import extend from 'extend';\nimport {\n  area,\n  curveLinear,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  curveBasis,\n  curveCardinal,\n  curveCatmullRom,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n} from 'd3-shape';\n\nconst CURVES = {\n  step: curveStep,\n  stepAfter: curveStepAfter,\n  stepBefore: curveStepBefore,\n  linear: curveLinear,\n  basis: curveBasis,\n  cardinal: curveCardinal.tension(0),\n  catmullRom: curveCatmullRom,\n  monotonex: curveMonotoneX,\n  monotoney: curveMonotoneY,\n  natural: curveNatural,\n};\n\n/**\n * Callback function for layer sort\n * @callback ComponentLine~LayerSort\n * @param {object} a\n * @param {string} a.id\n * @param {Array<DatumExtract>} a.data\n * @param {object} b\n * @param {string} b.id\n * @param {Array<DatumExtract>} b.data\n */\n\n/**\n * Component settings\n * @typedef {object}\n * @alias ComponentLine.settings\n */\nconst SETTINGS = {\n  /**\n   * @typedef {object}\n   */\n  coordinates: {\n    /**\n     * @type {number} */\n    minor: 0.5,\n    /**\n     * @type {number} */\n    major: 0.5,\n    /**\n     * @type {number=} */\n    layerId: 0,\n    /**\n     * @type {DatumBoolean=} */\n    defined: true,\n  },\n  /**\n   * @type {boolean=} */\n  connect: false,\n  /**\n   * @type {string=} */\n  orientation: 'horizontal',\n  /**\n   * @typedef {object} */\n  layers: {\n    /**\n     * @type {string=} */\n    curve: 'linear',\n    /**\n     * @type {boolean=} */\n    show: true,\n    /**\n     * @type {ComponentLine~LayerSort=} */\n    sort: undefined,\n    /**\n     * @typedef {object} */\n    line: {\n      /**\n       * @type {string=} */\n      stroke: '#ccc',\n      /**\n       * @type {number=} */\n      strokeWidth: 1,\n      /**\n       * @type {string=} */\n      strokeLinejoin: 'miter',\n      /**\n       * @type {string=} */\n      strokeDasharray: undefined,\n      /**\n       * @type {number=} */\n      opacity: 1,\n      /**\n       * @type {boolean=} */\n      show: true,\n      /**\n       * @type {boolean=} */\n      showMinor0: true,\n    },\n    /**\n     * @typedef {object} */\n    area: {\n      /**\n       * @type {string=} */\n      fill: '#ccc',\n      /**\n       * @type {number=} */\n      opacity: 0.8,\n      /**\n       * @type {boolean=} */\n      show: true,\n    },\n  },\n};\n\nfunction createDisplayLayer(points, { generator, item, data }, fill = '') {\n  const path = generator(points);\n  const d = {\n    type: 'path',\n    d: path,\n    opacity: item.opacity,\n    stroke: item.stroke,\n    strokeWidth: item.strokeWidth,\n    strokeLinejoin: item.strokeLinejoin,\n    fill: fill || item.fill,\n    data,\n  };\n\n  if (item.strokeDasharray) {\n    d.strokeDasharray = item.strokeDasharray;\n  }\n\n  return d;\n}\n\nfunction createDisplayLayers(layers, { width, height, missingMinor0, stngs }) {\n  const nodes = [];\n  const layerStngs = stngs.layers || {};\n  layers.forEach((layer) => {\n    const { lineObj, layerObj, areaObj, points } = layer;\n\n    const areaGenerator = area();\n    const defined = stngs.coordinates ? stngs.coordinates.defined : null;\n    let lineGenerator;\n    let secondaryLineGenerator;\n    let minor = { size: height, p: 'y' };\n    let major = { size: width, p: 'x' };\n    if (stngs.orientation === 'vertical') {\n      const temp = extend(true, {}, major);\n      major = extend(true, {}, minor);\n      minor = extend(true, {}, temp);\n    }\n\n    areaGenerator[major.p]((d) => d.major * major.size) // eslint-disable-line no-unexpected-multiline\n      [`${minor.p}1`]((d) => d.minor * minor.size) // eslint-disable-line no-unexpected-multiline\n      [`${minor.p}0`]((d) => d.minor0 * minor.size) // eslint-disable-line no-unexpected-multiline\n      .curve(CURVES[layerObj.curve === 'monotone' ? `monotone${major.p}` : layerObj.curve]);\n    if (defined) {\n      areaGenerator.defined((d) => !d.dummy && typeof d.minor === 'number' && !isNaN(d.minor) && d.defined);\n    } else {\n      areaGenerator.defined((d) => !d.dummy && typeof d.minor === 'number' && !isNaN(d.minor));\n    }\n\n    const filteredPoints = stngs.connect ? points.filter(areaGenerator.defined()) : points;\n    lineGenerator = areaGenerator[`line${minor.p.toUpperCase()}1`]();\n    secondaryLineGenerator = areaGenerator[`line${minor.p.toUpperCase()}0`]();\n\n    // area layer\n    if (layerStngs.area && areaObj.show !== false) {\n      nodes.push(\n        createDisplayLayer(filteredPoints, {\n          data: layer.consumableData,\n          item: areaObj,\n          generator: areaGenerator,\n        })\n      );\n    }\n\n    // main line layer\n    if (lineObj && lineObj.show !== false) {\n      nodes.push(\n        createDisplayLayer(\n          filteredPoints,\n          {\n            data: layer.consumableData,\n            item: lineObj,\n            generator: lineGenerator,\n          },\n          'none'\n        )\n      );\n\n      // secondary line layer, used only when rendering area\n      if (!missingMinor0 && layerStngs.area && areaObj.show !== false && lineObj.showMinor0 !== false) {\n        nodes.push(\n          createDisplayLayer(\n            filteredPoints,\n            {\n              data: layer.consumableData,\n              item: lineObj,\n              generator: secondaryLineGenerator,\n            },\n            'none'\n          )\n        );\n      }\n    }\n  });\n\n  return nodes;\n}\n\nfunction resolve({ data, stngs, rect, resolver, style, domain }) {\n  const { width, height } = rect;\n  const coordinates = resolver.resolve({\n    data,\n    defaults: SETTINGS.coordinates,\n    settings: stngs.coordinates || {},\n    scaled: {\n      major: stngs.orientation === 'vertical' ? height : width,\n      minor: stngs.orientation === 'vertical' ? width : height,\n    },\n  });\n\n  // there are two cases when a line should be interrupted:\n  // 1. When the minor value is undefined (this case is easily handled by the lineGenerator.defined).\n  // 2. When a line is moving over a domain that may not coincide with the domain on the major scale.\n  // For the second case, dummy points need to be injected in order to create values which will cause gaps as they fulfill the first case.\n  // These dummy points need to be injected only when: the domain is discrete, connect !== false and multiple layers are defined\n  const injectDummy =\n    !stngs.connect &&\n    domain.length > 2 &&\n    (typeof stngs.coordinates.layerId === 'function' || typeof stngs.coordinates.layerId === 'object');\n\n  // collect points into layers\n  const layerIds = {};\n  let numLines = 0;\n  for (let i = 0; i < coordinates.items.length; i++) {\n    let p = coordinates.items[i];\n    let lid = p.layerId;\n    if (injectDummy) {\n      // inject dummy if the previous point on the major domain is not the same as the prev point on the line's domain.\n      // this works only if a datum's value property is the same primitive as in the domain.\n      const lastItem = layerIds[lid] ? layerIds[lid].items[layerIds[lid].items.length - 1] : null;\n      const lastOrderIdx = lastItem\n        ? domain.indexOf(lastItem.data.major ? lastItem.data.major.value : lastItem.data.value)\n        : null;\n      if (lastItem && domain.indexOf(p.data.major ? p.data.major.value : p.data.value) - 1 !== lastOrderIdx) {\n        layerIds[lid].items.push({ dummy: true });\n      }\n    }\n    layerIds[lid] = layerIds[lid] || {\n      order: numLines++,\n      id: lid,\n      items: [],\n      dataItems: [],\n      consumableData: {},\n    };\n    layerIds[lid].dataItems.push(p.data);\n    layerIds[lid].items.push(p);\n  }\n\n  const metaLayers = Object.keys(layerIds).map((lid) => {\n    layerIds[lid].consumableData = {\n      points: layerIds[lid].dataItems,\n      ...layerIds[lid].dataItems[0],\n    };\n    return layerIds[lid];\n  });\n\n  const layersData = {\n    items: metaLayers.map((layer) => layer.consumableData),\n  };\n  const layerStngs = stngs.layers || {};\n\n  const layersResolved = resolver.resolve({\n    data: layersData,\n    defaults: {\n      curve: SETTINGS.layers.curve,\n      show: SETTINGS.layers.show,\n    },\n    settings: {\n      curve: layerStngs.curve,\n      show: layerStngs.show,\n    },\n  });\n\n  const linesResolved = resolver.resolve({\n    data: layersData,\n    defaults: extend({}, SETTINGS.layers.line, style.line),\n    settings: layerStngs.line,\n  });\n\n  const areasResolved = resolver.resolve({\n    data: layersData,\n    defaults: extend({}, SETTINGS.layers.area, style.area),\n    settings: layerStngs.area,\n  });\n\n  return {\n    coordinates,\n    metaLayers,\n    layers: layersResolved,\n    lines: linesResolved,\n    areas: areasResolved,\n  };\n}\n\nfunction calculateVisibleLayers(opts) {\n  const { metaLayers, coordinates, layers, lines, areas } = resolve(opts);\n\n  const visibleLayers = [];\n  metaLayers.forEach((layer, ix) => {\n    const layerObj = layers.items[ix];\n    if (layerObj.show === false) {\n      return;\n    }\n\n    // layerObj.points = [];\n    layerObj.datum = layerObj.data;\n    layerObj.data = [];\n    layerObj.id = layer.id;\n\n    const values = [];\n    const points = [];\n    let point;\n    let pData;\n    for (let i = 0; i < layer.items.length; i++) {\n      point = layer.items[i];\n      pData = point.data;\n      if (!point.dummy) {\n        if (isNaN(point.major)) {\n          continue;\n        }\n        if (opts.missingMinor0) {\n          point.minor0 = coordinates.settings.minor.scale\n            ? coordinates.settings.minor.scale(pData.minor0 ? pData.minor0.value : 0)\n            : 0;\n        }\n        if (!isNaN(point.minor)) {\n          values.push(point.minor);\n        }\n        layerObj.data.push(point.data);\n      }\n      points.push(point);\n    }\n\n    const median = values.sort((a, b) => a - b)[Math.floor((values.length - 1) / 2)];\n\n    visibleLayers.push({\n      layerObj,\n      lineObj: lines.items[ix],\n      areaObj: areas.items[ix],\n      median,\n      points,\n      consumableData: layer.consumableData,\n    });\n  });\n\n  return visibleLayers;\n}\n\nconst lineMarkerComponent = {\n  require: ['chart', 'resolver'],\n  defaultSettings: {\n    style: {\n      area: '$shape',\n      line: '$shape-outline',\n    },\n  },\n  created() {},\n  render({ data }) {\n    // console.log(\"DATA\", data);\n    const { width, height } = this.rect;\n    this.stngs = this.settings.settings || {};\n    const missingMinor0 = !this.stngs.coordinates || typeof this.stngs.coordinates.minor0 === 'undefined';\n\n    const visibleLayers = calculateVisibleLayers({\n      data,\n      stngs: this.stngs,\n      rect: this.rect,\n      resolver: this.resolver,\n      style: this.style,\n      missingMinor0,\n      domain:\n        this.stngs.coordinates && this.stngs.coordinates.major && this.stngs.coordinates.major.scale\n          ? this.chart.scale(this.stngs.coordinates.major.scale).domain()\n          : [],\n    });\n\n    if (this.stngs.layers && this.stngs.layers.sort) {\n      const sortable = visibleLayers\n        .map((v) => ({\n          id: v.layerObj.id,\n          data: v.layerObj.data,\n        }))\n        .sort(this.stngs.layers.sort)\n        .map((s) => s.id);\n      visibleLayers.sort((a, b) => sortable.indexOf(a.layerObj.id) - sortable.indexOf(b.layerObj.id));\n    } else {\n      visibleLayers.sort((a, b) => a.median - b.median);\n    }\n\n    // generate visuals\n    return createDisplayLayers(visibleLayers, {\n      width,\n      height,\n      missingMinor0,\n      stngs: this.stngs,\n    });\n  },\n};\n\nexport default lineMarkerComponent;\n","import component from './line';\n\n/**\n * @typedef {object} ComponentLine\n * @extends ComponentSettings\n * @example\n{\n  type: \"line\",\n  data: {\n    extract: {\n      field: \"Year\",\n      props: {\n        sales: { field: \"Sales\" },\n      },\n    },\n  },\n  settings: {\n    coordinates: {\n      major: { scale: \"t\" },\n      minor: { scale: \"y\", ref: \"sales\" },\n    },\n  },\n}\n */\n\nconst type = 'line';\n\nexport default function line(picasso) {\n  picasso.component(type, component);\n}\n","import extend from 'extend';\nimport { testRectPoint } from '../../../core/math/narrow-phase-collision';\n\n/**\n * @typedef {object}\n * @alias ComponentBrushArea.settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * @type {object}\n   */\n  brush: {\n    /**\n     * @type {Array<BrushTargetConfig>}\n     */\n    components: [],\n  },\n};\n\n/**\n * Transform the incoming event into point in the local coordinate system. That is the coordinate system of the component.\n * @private\n * @param {object} ctx - Context\n * @param {object} event - Incoming event, either native event or hammer event\n * @param {boolean} clamp - True to clamp the point inside the component bounds\n * @returns {point}\n */\nfunction getLocalPoint(ctx, event, clamp = true) {\n  let x;\n  let y;\n\n  if (typeof event.center === 'object') {\n    x = event.center.x;\n    y = event.center.y;\n  } else {\n    x = event.clientX;\n    y = event.clientY;\n  }\n\n  const localX = x - ctx.state.boundingRect.left;\n  const localY = y - ctx.state.boundingRect.top;\n\n  return {\n    x: clamp ? Math.max(0, Math.min(localX, ctx.rect.width)) : localX,\n    y: clamp ? Math.max(0, Math.min(localY, ctx.rect.height)) : localY,\n  };\n}\n\n/**\n * Transform a local point into a point in the chart coordinate system.\n * @private\n * @param {object} ctx - Context\n * @param {object} p - Point to transform\n * @returns {point}\n */\nfunction localToChartPoint(ctx, p) {\n  return {\n    x: p.x + ctx.rect.x,\n    y: p.y + ctx.rect.y,\n  };\n}\n\n/**\n * Extract and apply default brush configuration.\n * @private\n * @param {object} settings\n * @returns {object[]} An Array of brush configurations\n */\nfunction getBrushConfig(settings) {\n  return settings.settings.brush.components.map((b) => ({\n    key: b.key,\n    contexts: b.contexts,\n    data: b.data,\n    action: b.action || 'set',\n  }));\n}\n\n/**\n * End all active brush contexts.\n * @private\n * @param {oject} state\n * @param {object} chart - Chart instance\n */\nfunction doEndBrush(state, chart) {\n  state.brushConfig.forEach((config) => {\n    if (Array.isArray(config.contexts)) {\n      config.contexts.forEach((context) => {\n        chart.brush(context).end();\n      });\n    }\n  });\n}\n\n/**\n * Convert two points into a rectangle.\n * @private\n * @param {Point} p0\n * @param {Point} p1\n * @returns {Rect}\n */\nfunction toRect(p0, p1) {\n  const xMin = Math.min(p0.x, p1.x);\n  const yMin = Math.min(p0.y, p1.y);\n  const xMax = Math.max(p0.x, p1.x);\n  const yMax = Math.max(p0.y, p1.y);\n\n  return {\n    x: xMin,\n    y: yMin,\n    width: xMax - xMin,\n    height: yMax - yMin,\n  };\n}\n\n/**\n * Perform a brush on the given area.\n * @private\n * @param {object} ctx\n */\nfunction doAreaBrush(ctx) {\n  if (ctx.state.active) {\n    const start = localToChartPoint(ctx, ctx.state.start);\n    const end = localToChartPoint(ctx, ctx.state.end);\n\n    const shapes = ctx.chart.shapesAt(toRect(start, end), { components: ctx.state.brushConfig });\n    ctx.chart.brushFromShapes(shapes, { components: ctx.state.brushConfig });\n  }\n}\n\nfunction render(ctx) {\n  ctx.renderer.render([extend({ type: 'rect' }, toRect(ctx.state.start, ctx.state.end), ctx.style.area)]);\n}\n\nfunction resetState() {\n  return {\n    start: { x: 0, y: 0 },\n    end: { x: 0, y: 0 },\n    active: false,\n  };\n}\n\nconst definition = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    layout: {\n      displayOrder: 99,\n    },\n    settings: DEFAULT_SETTINGS,\n    style: {\n      area: '$selection-area-target',\n    },\n  },\n  on: {\n    areaStart(e) {\n      this.start(e);\n    },\n    areaMove(e) {\n      this.move(e);\n    },\n    areaEnd(e) {\n      this.end(e);\n    },\n    areaCancel() {\n      this.cancel();\n    },\n  },\n  created() {\n    this.state = resetState();\n  },\n  preferredSize() {\n    return 0;\n  },\n  render() {},\n  start(e) {\n    this.state.boundingRect = this.renderer.element().getBoundingClientRect();\n    const p = getLocalPoint(this, e, false);\n\n    // Require event to be inside the component bounds\n    if (\n      !testRectPoint(\n        {\n          x: 0,\n          y: 0,\n          width: this.rect.width,\n          height: this.rect.height,\n        },\n        p\n      )\n    ) {\n      return;\n    }\n\n    this.state.brushConfig = getBrushConfig(this.settings);\n    this.state.start = getLocalPoint(this, e);\n    this.state.active = true;\n  },\n  move(e) {\n    if (!this.state.active) {\n      return;\n    }\n\n    this.state.end = getLocalPoint(this, e);\n\n    doAreaBrush(this);\n    render(this);\n  },\n  end() {\n    if (!this.state.active) {\n      return;\n    }\n\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n  cancel() {\n    if (!this.state.active) {\n      return;\n    }\n    doEndBrush(this.state, this.chart);\n    this.state = resetState();\n    this.renderer.render([]);\n  },\n};\n\nexport default definition;\n","import definition from './brush-area';\n\n/**\n * A component that can brush a rectangular area\n * @typedef {object} ComponentBrushArea\n * @extends ComponentSettings\n * @example\n * {\n *  type: 'brush-area',\n *  brush: {\n *    components: [{ key: '<target-component>', contexts: ['highlight'] }]\n *  }\n * }\n */\n\nexport default function areaBrush(picasso) {\n  picasso.component('brush-area', definition);\n}\n","import extend from 'extend';\n\nexport default function extractor(nodes, { chart, scale, props, h }) {\n  const dataCtx = {\n    resources: {\n      dataset: chart.dataset,\n      scale: chart.scale,\n      formatter: chart.formatter,\n    },\n    scale,\n    h,\n  };\n\n  const data = [];\n  nodes.forEach((node) => {\n    if (typeof props.extract === 'function') {\n      const ctx = extend({ node }, dataCtx);\n      data.push(props.extract(ctx));\n    }\n  });\n\n  return data;\n}\n","import extend from 'extend';\nimport classString from '../../../core/utils/class-string';\n\nfunction resolveClasses(props, opts) {\n  return {\n    tooltip: typeof props.tooltipClass === 'function' ? props.tooltipClass({ dock: opts.dock }) : props.tooltipClass,\n    content: typeof props.contentClass === 'function' ? props.contentClass({ dock: opts.dock }) : props.contentClass,\n    arrow: typeof props.arrowClass === 'function' ? props.arrowClass({ dock: opts.dock }) : props.arrowClass,\n  };\n}\n\nfunction resolveContent(h, data, style, props) {\n  return props.content({\n    h,\n    style,\n    data,\n  });\n}\n\nexport default function render(data, placement, { renderer, style, props, h }) {\n  const classes = resolveClasses(props, placement);\n  const content = resolveContent(h, data, style, props);\n\n  const tooltipDefaultStyle = {\n    position: 'relative',\n    display: 'inline-block',\n  };\n\n  const tooltipNode = (\n    <div\n      dir={props.direction}\n      class={classString(extend({ 'pic-tooltip': true }, classes.tooltip))}\n      style={extend(tooltipDefaultStyle, placement.computedTooltipStyle)}\n    >\n      <div style={style.content} class={classString(extend({ 'pic-tooltip-content': true }, classes.content))}>\n        {content}\n      </div>\n      <div\n        class={classString(extend({ 'pic-tooltip-arrow': true }, classes.arrow))}\n        style={extend({}, style.arrow, style[`arrow-${placement.dock}`], placement.computedArrowStyle)}\n      ></div>\n    </div>\n  );\n\n  renderer.render(tooltipNode);\n\n  return renderer.element().children[0];\n}\n","// Successfull flow: pending -> active -> fulfilled (only with duration)\n// Cancelled flow: pending -> active -> cancelled\n// Rejected flow: pending -> rejected\n// Debounced flow: pending -> debounced -> pending -> [rejected|fulfilled]\nfunction dispatcherState() {\n  const fn = function fn() {};\n  const on = {\n    pending: [],\n    debounced: [],\n    active: [],\n    cancelled: [],\n    rejected: [],\n    fulfilled: [],\n  };\n  let state;\n\n  fn.set = (s) => {\n    state = s;\n    on[state].forEach((event) => event(s));\n  };\n\n  fn.on = (key, event) => {\n    if (Array.isArray(key)) {\n      key.forEach((k) => on[k].push(event));\n    } else {\n      on[key].push(event);\n    }\n  };\n\n  fn.destroy = () => {\n    Object.keys(on).forEach((key) => {\n      on[key].length = 0;\n    });\n  };\n\n  // fn.on(['pending', 'debounced', 'active', 'cancelled', 'rejected', 'fulfilled'], (e) => {\n  //   console.log(e);\n  // });\n\n  return fn;\n}\n\nexport default function timeSpanDispatcher({ defaultDuration, defaultDelay }) {\n  let actionId = null;\n  let fulfilledId = null;\n  let isActive = false;\n  const state = dispatcherState();\n  const fn = function fn() {};\n  const fulfilled = () => {\n    actionId = null;\n    fulfilledId = null;\n    isActive = false;\n    state.set('fulfilled');\n  };\n\n  fn.invoke = (action, duration = defaultDuration, delay = defaultDelay) => {\n    if (actionId) {\n      clearTimeout(actionId);\n      state.set('debounced');\n    }\n\n    state.set('pending');\n    actionId = setTimeout(() => {\n      action();\n      isActive = true;\n      actionId = null;\n      state.set('active');\n    }, delay);\n\n    if (duration > 0) {\n      if (fulfilledId) {\n        clearTimeout(fulfilledId);\n      }\n      fulfilledId = setTimeout(fulfilled, duration + Math.max(delay, 0));\n    }\n  };\n\n  fn.clear = () => {\n    if (isActive) {\n      state.set('cancelled');\n    } else if (actionId) {\n      clearTimeout(actionId);\n      state.set('rejected');\n    }\n    if (fulfilledId) {\n      clearTimeout(fulfilledId);\n    }\n    actionId = null;\n    fulfilledId = null;\n    isActive = false;\n  };\n\n  fn.on = (key, event) => {\n    state.on(key, event);\n  };\n\n  fn.destroy = () => {\n    fn.clear();\n    state.destroy();\n  };\n\n  return fn;\n}\n","import extend from 'extend';\n\nfunction getDockTransform(offset = 0) {\n  return {\n    left: `translate(-100%,-50%) translateX(${-offset}px)`,\n    right: `translate(${offset}px, -50%)`,\n    top: `translate(-50%, -100%) translateY(${-offset}px)`,\n    bottom: `translate(-50%, ${offset}px)`,\n  };\n}\n\nfunction getDockOffset(width, height, offset = 0) {\n  return {\n    left: { x: -width - offset, y: -height / 2 },\n    right: { x: offset, y: -height / 2 },\n    top: { x: -width / 2, y: -height - offset },\n    bottom: { x: -width / 2, y: offset },\n  };\n}\n\nfunction getComputedArrowStyle(offset) {\n  return {\n    left: {\n      left: '100%',\n      top: `calc(50% - ${offset}px)`,\n      borderWidth: `${offset}px`,\n    },\n    right: {\n      left: `${-offset * 2}px`,\n      top: `calc(50% - ${offset}px)`,\n      borderWidth: `${offset}px`,\n    },\n    top: {\n      left: `calc(50% - ${offset}px)`,\n      top: '100%',\n      borderWidth: `${offset}px`,\n    },\n    bottom: {\n      left: `calc(50% - ${offset}px)`,\n      top: `${-offset * 2}px`,\n      borderWidth: `${offset}px`,\n    },\n  };\n}\n\nfunction isInsideArea(area, vx, vy, width, height, offset) {\n  const rect = {\n    x: vx + offset.x,\n    y: vy + offset.y,\n    width,\n    height,\n  };\n\n  if (rect.x < 0 || rect.y < 0) {\n    return false;\n  }\n  if (rect.x + rect.width > area.width || rect.y + rect.height > area.height) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * @private\n * @param {vx} vx X-coordinate realative to the area\n * @param {vy} vy Y-coordinate realative to the area\n */\nexport function calcOffset({ area, vx, vy, width, height, offset }) {\n  const rect = {\n    x: vx + offset.x,\n    y: vy + offset.y,\n    width,\n    height,\n  };\n\n  let offsetX = rect.x < 0 ? -rect.x : 0;\n  let offsetY = rect.y < 0 ? -rect.y : 0;\n\n  offsetX += rect.x + rect.width > area.width ? -(rect.x + rect.width - area.width) : 0;\n  offsetY += rect.y + rect.height > area.height ? -(rect.y + rect.height - area.height) : 0;\n\n  return {\n    x: offsetX,\n    y: offsetY,\n  };\n}\n\nfunction alignToBounds({ resources, nodes, pointer, width: elmWidth, height: elmHeight, options }) {\n  const { targetBounds } = pointer;\n  const { x, y, width, height } = resources.getNodeBoundsRelativeToTarget(nodes[0]);\n\n  const docks = {\n    left: { x, y: y + height / 2 },\n    right: { x: x + width, y: y + height / 2 },\n    top: { x: x + width / 2, y },\n    bottom: { x: x + width / 2, y: y + height },\n  };\n\n  // Check if explicit dock\n  const dockTransforms = getDockTransform(options.offset);\n  const transform = dockTransforms[options.dock];\n  if (transform) {\n    return {\n      computedTooltipStyle: {\n        left: `${docks[options.dock].x}px`,\n        top: `${docks[options.dock].y}px`,\n        transform,\n      },\n      computedArrowStyle: getComputedArrowStyle(options.offset)[options.dock],\n      dock: options.dock,\n    };\n  }\n\n  const area = {\n    width: options.area === 'target' ? targetBounds.width : window.innerWidth,\n    height: options.area === 'target' ? targetBounds.height : window.innerHeight,\n  };\n  const dockOffsets = getDockOffset(elmWidth, elmHeight, options.offset);\n  const dockOrder = ['top', 'left', 'right', 'bottom'];\n\n  for (let i = 0; i < dockOrder.length; i += 1) {\n    const dock = dockOrder[i];\n    const vx = options.area === 'target' ? docks[dock].x : targetBounds.left + docks[dock].x;\n    const vy = options.area === 'target' ? docks[dock].y : targetBounds.top + docks[dock].y;\n    if (isInsideArea(area, vx, vy, elmWidth, elmHeight, dockOffsets[dock])) {\n      return {\n        computedTooltipStyle: {\n          left: `${docks[dock].x}px`,\n          top: `${docks[dock].y}px`,\n          transform: dockTransforms[dock],\n        },\n        computedArrowStyle: getComputedArrowStyle(options.offset)[dock],\n        dock,\n      };\n    }\n  }\n\n  return {\n    computedTooltipStyle: {\n      left: `${docks.top.x}px`,\n      top: `${docks.top.y}px`,\n      transform: dockTransforms.top,\n    },\n    computedArrowStyle: getComputedArrowStyle(options.offset).top,\n    dock: 'top',\n  };\n}\n\nfunction alignToPoint({ options, pointer, width, height, dockOrder, x, y }) {\n  const { targetBounds } = pointer;\n\n  // Check if explicit dock\n  const dockTransforms = getDockTransform(options.offset);\n  const transform = dockTransforms[options.dock];\n  if (transform) {\n    return {\n      computedTooltipStyle: {\n        left: `${x}px`,\n        top: `${y}px`,\n        transform,\n      },\n      computedArrowStyle: getComputedArrowStyle(options.offset)[options.dock],\n      dock: options.dock,\n    };\n  }\n\n  const area = {\n    width: options.area === 'target' ? targetBounds.width : window.innerWidth,\n    height: options.area === 'target' ? targetBounds.height : window.innerHeight,\n  };\n  const dockOffsets = getDockOffset(width, height, options.offset);\n\n  const results = [];\n  const edgeMargin = 20;\n  const vx = options.area === 'target' ? x : targetBounds.left + x;\n  const vy = options.area === 'target' ? y : targetBounds.top + y;\n\n  for (let i = 0; i < dockOrder.length; i += 1) {\n    const dock = dockOrder[i];\n\n    const offset = calcOffset({\n      area,\n      vx,\n      vy,\n      width,\n      height,\n      offset: dockOffsets[dock],\n    });\n\n    const computedTooltipStyle = {\n      left: `${x}px`,\n      top: `${y}px`,\n      transform: dockTransforms[dock],\n    };\n    const computedArrowStyle = getComputedArrowStyle(options.offset)[dock];\n\n    if (offset.x !== 0) {\n      computedTooltipStyle.width = `${width - edgeMargin - Math.abs(offset.x)}px`;\n\n      if (dock === 'top' || dock === 'bottom') {\n        computedTooltipStyle.left = `${x + offset.x}px`;\n\n        computedArrowStyle.left = `calc(50% ${offset.x > 0 ? '-' : '+'} ${Math.abs(offset.x)}px)`;\n      }\n    }\n\n    const result = {\n      computedTooltipStyle,\n      computedArrowStyle,\n      dock,\n      rect: {\n        width,\n        height,\n      },\n    };\n\n    if (offset.x === 0 && offset.y === 0) {\n      return result;\n    }\n\n    result.offset = offset;\n\n    results.push(result);\n  }\n\n  results.sort((a, b) => Math.abs(a.offset.x) - Math.abs(b.offset.x));\n\n  return results[0];\n}\n\nfunction alignToPointer({ options, pointer, width, height }) {\n  const { x, y } = pointer;\n\n  return alignToPoint({\n    x,\n    y,\n    pointer,\n    width,\n    height,\n    options,\n    dockOrder: ['top', 'left', 'right', 'bottom'],\n  });\n}\n\nfunction alignToSlice({ options, pointer, width, height, nodes, resources }) {\n  const node = nodes[0];\n  const { dx, dy } = pointer;\n  const componentBounds = resources.getComponentBoundsFromNode(node);\n\n  // cx and cy relative to targetBounds\n  const center = {\n    x: dx + componentBounds.x + componentBounds.width / 2,\n    y: dy + componentBounds.y + componentBounds.height / 2,\n  };\n\n  const { start, end, outerRadius } = node.desc.slice;\n\n  // Node origin is at 12 o clock, clockwise, but Math uses 3 a clock, so it's transformed to origin at 3 a clock\n  const middle = (start + end) / 2 - Math.PI / 2;\n  const PI2 = Math.PI * 2;\n  const radians = ((middle % PI2) + PI2) % PI2;\n  let dockOrder = ['top', 'left', 'right', 'bottom'];\n\n  if (options.dock === 'auto') {\n    if (radians <= Math.PI / 4 || radians >= (Math.PI * 7) / 4) {\n      dockOrder = ['right', 'top', 'bottom', 'left'];\n    } else if (radians <= (Math.PI * 3) / 4) {\n      dockOrder = ['bottom', 'left', 'right', 'top'];\n    } else if (radians <= (Math.PI * 5) / 4) {\n      dockOrder = ['left', 'top', 'bottom', 'right'];\n    } else {\n      dockOrder = ['top', 'left', 'right', 'bottom'];\n    }\n  }\n\n  return alignToPoint({\n    x: center.x + outerRadius * componentBounds.scaleRatio.x * Math.cos(radians),\n    y: center.y + outerRadius * componentBounds.scaleRatio.y * Math.sin(radians),\n    pointer,\n    width,\n    height,\n    options,\n    dockOrder,\n  });\n}\n\nfunction getComponentBoundsFromNode(node, pointer, chart) {\n  const comp = node.key\n    ? chart.component(node.key)\n    : chart.componentsFromPoint({ x: pointer.clientX, y: pointer.clientY })[0];\n\n  if (!comp) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      scaleRatio: {\n        x: 1,\n        y: 1,\n      },\n    };\n  }\n\n  const componentSize = comp.rect;\n  return extend({ scaleRatio: componentSize.scaleRatio }, componentSize.computedInner);\n}\n\nfunction getNodeBoundsRelativeToTarget(node, pointer, chart) {\n  const componentBounds = getComponentBoundsFromNode(node, pointer, chart);\n  const bounds = node.bounds;\n\n  return {\n    x: componentBounds.x + pointer.dx + bounds.x,\n    y: componentBounds.y + pointer.dy + bounds.y,\n    width: bounds.width,\n    height: bounds.height,\n  };\n}\n\nconst STRATEGIES = {\n  bounds: alignToBounds,\n  pointer: alignToPointer,\n  slice: alignToSlice,\n};\n\nexport default function placement({ width, height }, { chart, state, props }) {\n  const propCtx = {\n    resources: {\n      formatter: chart.formatter,\n      scale: chart.scale,\n      component: chart.component,\n      getComponentBoundsFromNode: (node) => getComponentBoundsFromNode(node, state.pointer, chart),\n      getNodeBoundsRelativeToTarget: (node) => getNodeBoundsRelativeToTarget(node, state.pointer, chart),\n    },\n    nodes: state.activeNodes,\n    pointer: state.pointer,\n    width,\n    height,\n  };\n  const type = typeof props.placement;\n\n  if (type === 'object' && typeof props.placement.fn === 'function') {\n    // Custom placement strategy function\n    return props.placement.fn(propCtx);\n  }\n\n  let opts = {\n    type: 'pointer',\n    offset: 8,\n    dock: 'auto',\n    area: 'viewport',\n  };\n  if (type === 'function') {\n    // Custom placement function\n    opts = extend(opts, props.placement(propCtx));\n  }\n\n  if (type === 'object' && STRATEGIES[props.placement.type]) {\n    // Predefined placement function with options\n    opts = extend(opts, props.placement);\n  } else if (type === 'string' && STRATEGIES[props.placement]) {\n    // Predefined placement function without options\n    opts = extend(opts, { type: props.placement });\n  }\n\n  propCtx.options = opts;\n  const plcm = STRATEGIES[opts.type](propCtx);\n\n  let { x: minX, y: minY, width: maxX, height: maxY } = propCtx.resources.getComponentBoundsFromNode(propCtx.nodes[0]);\n  minX += propCtx.pointer.dx;\n  maxX += minX;\n  minY += propCtx.pointer.dy;\n  maxY += minY;\n\n  // Clamp tooltip position\n  plcm.computedTooltipStyle.left = `${Math.min(Math.max(0, minX, parseFloat(plcm.computedTooltipStyle.left)), maxX)}px`;\n  plcm.computedTooltipStyle.top = `${Math.min(Math.max(0, minY, parseFloat(plcm.computedTooltipStyle.top)), maxY)}px`;\n\n  return plcm;\n}\n","let instance;\n\nexport function setActive(action) {\n  instance = action;\n}\n\nexport function removeActive(action) {\n  if (instance === action) {\n    instance = null;\n    return true;\n  }\n\n  return false;\n}\n\nexport function cancelActive(a) {\n  if (instance && instance !== a) {\n    instance();\n  }\n}\n\nexport function getActive() {\n  return instance;\n}\n\nexport function remove() {\n  instance = null;\n}\n","import extend from 'extend';\nimport extractor from './extractor';\nimport render from './render';\nimport timeSpanDispatcher from './timespan-dispatcher';\nimport placement from './placement';\nimport { setActive, removeActive, cancelActive, remove } from './instance-handler';\n\n/**\n * @typedef {object}\n * @alias ComponentTooltip.settings\n */\nconst DEFAULT_SETTINGS = {\n  /**\n   * How long the tooltip is visible, in milliseconds\n   * @type {number=}\n   */\n  duration: 8000,\n  /**\n   * Delay before the tooltip is rendered, in milliseconds\n   * @type {number=}\n   */\n  delay: 500,\n  /**\n   * Callback function to filter incoming nodes to only a set of applicable nodes. Is called as a part of the `show` event.\n   *\n   * Should return an array of SceneNodes.\n   * @type {function=}\n   * @callback\n   * @param {SceneNode[]} nodes Array of SceneNodes\n   * @returns {SceneNode[]} An array of SceneNodes\n   * @example\n   * filter: (nodes) => nodes.filter((node) => node.data && typeof node.data.value !== 'undefined')\n   */\n  filter: (nodes) => nodes.filter((node) => node.data && typeof node.data.value !== 'undefined'),\n  /**\n   * Callback function called for each node to extract data. Can return any type.\n   * @type {function=}\n   * @callback\n   * @param {object} ctx Callback context\n   * @param {SceneNode} ctx.node Node\n   * @returns {any} Return data\n   * @example\n   * (ctx) => ctx.node.data.value\n   */\n  extract: (ctx) => ctx.node.data.value,\n  /**\n   * Callback function to generate content. Should return an array of Virtual DOM Elements.\n   * @type {function=}\n   * @callback\n   * @param {object} ctx Callback context\n   * @param {any[]} ctx.data An array of data generated from the `extract` function\n   * @param {object} ctx.h A function for creating Virtual DOM Elements. See API reference for preactjs `h` function\n   * @returns {object[]} An array of Virtual DOM Elements\n   * @example\n   * ({ h, data }) => data.map((datum) => h('div', {}, datum))\n   */\n  content: ({ h, data }) => data.map((datum) => h('div', {}, datum)),\n  /**\n   * Comparison function. If evaluted to true, the incoming nodes in the `show` event are ignored. If evaluated to false, any active tooltip is cleared and a new tooltip is queued.\n   *\n   * The function gets two parameters, the first is the currently active set of nodes, if any, and the second is the incoming set of nodes. By default the two set of nodes are considered equal if their data attributes are the same.\n   * @type {function=}\n   * @callback\n   * @param {SceneNode[]} prev Previous array of SceneNodes\n   * @param {SceneNode[]} curr Current array of SceneNodes\n   * @returns {boolean}\n   */\n  isEqual: (prev, curr) =>\n    prev.length &&\n    prev.length === curr.length &&\n    prev.every((p, i) => curr[i] && JSON.stringify(p.data) === JSON.stringify(curr[i].data)),\n  /**\n   * @typedef {object=}\n   */\n  placement: {\n    /**\n     * Available types: [pointer | bounds | slice]\n     * @type {string=}\n     */\n    type: 'pointer',\n    /**\n     * Docking position of the tooltip. Available positions: [left | right | top | bottom | auto]\n     * @type {string=}\n     */\n    dock: 'auto',\n    /**\n     * Distance from the content area to the tooltip position, in px.\n     * @type {number=}\n     */\n    offset: 8,\n    /**\n     * Specify the limiting area, where target is the component area unless the appendTo property is set, in which case it referes to the appendTo element. Viewport is the browser viewport.\n     *\n     * Available options are: [viewport | target]\n     * @type {number=}\n     */\n    area: 'viewport',\n  },\n  /**\n   * Set tooltip class.\n   * @type {object<string, boolean>=}\n   */\n  tooltipClass: {},\n  /**\n   * Set content class.\n   * @type {object<string, boolean>=}\n   */\n  contentClass: {},\n  /**\n   * Set arrow class.\n   * @type {object<string, boolean>=}\n   */\n  arrowClass: {},\n  /**\n   * Content direction [ltr | rtl]\n   * @type {string=}\n   */\n  direction: 'ltr',\n  /**\n   * Explicitly set a target element. This allows the tooltip to attach itself outside the picasso container.\n   * @type {HTMLElement=}\n   */\n  appendTo: undefined,\n  /**\n   * Component lifecycle hook. Called before the tooltip is displayed.\n   * @type {function=}\n   * @callback\n   */\n  beforeShow: undefined,\n  /**\n   * Component lifecycle hook. Called after the tooltip have been displayed.\n   * @type {function=}\n   * @callback\n   */\n  afterShow: undefined,\n  /**\n   * Component lifecycle hook. Called before the tooltip is hidden.\n   * @type {function=}\n   * @callback\n   * @param {object} ctx Callback paramater\n   * @param {HTMLElement} ctx.element The element the tooltip is appended to\n   */\n  beforeHide: undefined,\n  /**\n   * Component lifecycle hook. Called when the toolip is hidden. By default this deletes the tooltip element.\n   * @type {function=}\n   * @callback\n   * @param {object} ctx Callback paramater\n   * @param {HTMLElement} ctx.element The element the tooltip is appended to\n   */\n  onHide: undefined,\n  /**\n   * Component lifecycle hook. Called after the tooltip is hidden.\n   * @type {function=}\n   * @callback\n   */\n  afterHide: undefined,\n};\n\nconst DEFAULT_STYLE = {\n  tooltip: {},\n  content: {\n    backgroundColor: '$gray-25',\n    color: '$font-color--inverted',\n    fontFamily: '$font-family',\n    fontSize: '$font-size',\n    lineHeight: '$line-height',\n    borderRadius: '4px',\n    padding: '8px',\n    opacity: 0.9,\n  },\n  arrow: {\n    position: 'absolute',\n    width: '0px',\n    height: '0px',\n    borderStyle: 'solid',\n    color: '$gray-25',\n    opacity: 0.9,\n  },\n  'arrow-bottom': {\n    borderTopColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderRightColor: 'transparent',\n  },\n  'arrow-top': {\n    borderBottomColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderRightColor: 'transparent',\n  },\n  'arrow-right': {\n    borderTopColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderBottomColor: 'transparent',\n  },\n  'arrow-left': {\n    borderTopColor: 'transparent',\n    borderBottomColor: 'transparent',\n    borderRightColor: 'transparent',\n  },\n};\n\nfunction toPoint(event, { chart, state }) {\n  let x = 0;\n  let y = 0;\n  if (event.center) {\n    x += event.center.x;\n    y += event.center.y;\n  } else {\n    x += event.clientX;\n    y += event.clientY;\n  }\n  // TODO Don't do getBoundingClientRect lookup here. It's performance heavy.\n  const chartBounds = chart.element.getBoundingClientRect();\n  const targetBounds = state.targetElement.getBoundingClientRect();\n  const clientX = x;\n  const clientY = y;\n  const dx = chartBounds.left - targetBounds.left;\n  const dy = chartBounds.top - targetBounds.top;\n  const cx = x - chartBounds.left;\n  const cy = y - chartBounds.top;\n  x -= targetBounds.left;\n  y -= targetBounds.top;\n  return {\n    x, // Target point relative to the target bounds\n    y,\n    dx, // Delta from target bounds to the chart bounds\n    dy,\n    cx, // Target point relative to the chart bounds\n    cy,\n    clientX,\n    clientY,\n    targetBounds, // Target bounding rect\n    chartBounds, // Chart bounding rect\n  };\n}\n\nconst component = {\n  require: ['chart', 'renderer'],\n  defaultSettings: {\n    settings: DEFAULT_SETTINGS,\n    style: DEFAULT_STYLE,\n  },\n  renderer: 'dom',\n  on: {\n    hide() {\n      this.hide();\n    },\n    show(event, opts = {}) {\n      this.show(event, opts);\n    },\n    prevent(p) {\n      this.prevent(p);\n    },\n  },\n  hide() {\n    this.dispatcher.clear();\n    this.state.activeNodes = [];\n    this.state.pointer = {};\n  },\n  show(event, { nodes, duration, delay } = {}) {\n    if (this.state.prevent) {\n      return;\n    }\n\n    // Set pointer here to always expose latest pointer to invokeRenderer\n    this.state.pointer = toPoint(event, this);\n\n    let fNodes;\n    if (Array.isArray(nodes)) {\n      fNodes = this.props.filter(nodes);\n    } else {\n      fNodes = this.props.filter(\n        this.chart.shapesAt({\n          x: this.state.pointer.cx,\n          y: this.state.pointer.cy,\n        })\n      );\n    }\n\n    if (this.props.isEqual(this.state.activeNodes, fNodes)) {\n      return;\n    }\n\n    this.dispatcher.clear();\n    this.state.activeNodes = fNodes;\n\n    if (this.state.activeNodes.length) {\n      this.dispatcher.invoke(() => this.invokeRenderer(this.state.activeNodes), duration, delay);\n    }\n  },\n  prevent(p) {\n    this.state.prevent = !!p;\n  },\n  init(settings) {\n    this.state = {\n      activeNodes: [],\n      pointer: {},\n      targetElement: null,\n      prevent: false,\n    };\n    this.props = settings.settings;\n    this.dispatcher = timeSpanDispatcher({\n      defaultDuration: this.props.duration,\n      defaultDelay: this.props.delay,\n    });\n\n    const instanceId = this.dispatcher.clear;\n    this.dispatcher.on('pending', () => {\n      // Cancel only if the active is another instance\n      cancelActive(instanceId);\n      setActive(instanceId);\n\n      if (typeof this.props.beforeShow === 'function') {\n        this.props.beforeShow.call(undefined, {\n          resources: {\n            formatter: this.chart.formatter,\n            scale: this.chart.scale,\n          },\n        });\n      }\n    });\n\n    this.dispatcher.on(['cancelled', 'fulfilled'], () => {\n      const listenerCtx = {\n        resources: {\n          formatter: this.chart.formatter,\n          scale: this.chart.scale,\n        },\n      };\n\n      if (typeof this.props.beforeHide === 'function') {\n        this.props.beforeHide.call(undefined, extend({ element: this.state.tooltipElm }, listenerCtx));\n      }\n\n      if (typeof this.props.onHide === 'function') {\n        this.props.onHide.call(undefined, extend({ element: this.state.tooltipElm }, listenerCtx));\n      } else {\n        this.renderer.clear([]); // Hide tooltip\n      }\n\n      if (typeof this.props.afterHide === 'function') {\n        this.props.afterHide.call(undefined, listenerCtx);\n      }\n\n      removeActive(instanceId);\n      this.state.tooltipElm = undefined;\n    });\n\n    this.dispatcher.on('active', () => {\n      if (typeof this.props.afterShow === 'function') {\n        this.props.afterShow.call(undefined, {\n          element: this.state.tooltipElm,\n          resources: {\n            formatter: this.chart.formatter,\n            scale: this.chart.scale,\n          },\n        });\n      }\n    });\n  },\n  created() {\n    this.init(this.settings);\n  },\n  beforeUpdate({ settings }) {\n    if (this.dispatcher) {\n      this.dispatcher.destroy();\n      remove();\n    }\n    this.init(settings);\n  },\n  render(h) {\n    this.h = h;\n    return []; // Nothing to render initially.\n  },\n  beforeDestroy() {\n    this.dispatcher.destroy();\n    remove();\n  },\n  appendTo() {\n    if (this.props.appendTo) {\n      this.state.targetElement =\n        typeof this.props.appendTo === 'function'\n          ? this.props.appendTo({\n              resources: {\n                formatter: this.chart.formatter,\n                scale: this.chart.scale,\n              },\n            })\n          : this.props.appendTo;\n      const { width, height } = this.state.targetElement.getBoundingClientRect();\n      this.renderer.destroy();\n      this.renderer.size({ width, height });\n      this.renderer.appendTo(this.state.targetElement);\n    } else {\n      this.state.targetElement = this.renderer.element();\n    }\n  },\n  mounted() {\n    this.appendTo();\n  },\n  updated() {\n    // Append here to, otherwise the picasso displayOrder logic screw things up\n    this.appendTo();\n  },\n  invokeRenderer(nodes) {\n    const items = extractor(nodes, this);\n    const pseudoElement = render(items, { style: { left: '0px', top: '0px', visibility: 'hidden' } }, this);\n    const pos = placement(pseudoElement.getBoundingClientRect(), this);\n    this.state.tooltipElm = render(items, pos, this);\n  },\n};\n\nexport { component as default };\n","import tooltip from './tooltip';\n\n/**\n * @typedef {object} ComponentTooltip\n * @extends ComponentSettings\n * @example\n * picasso.chart({\n  settings: {\n    interactions: [{\n      type: 'native',\n      events: {\n        mousemove(e) {\n          const tooltip = this.chart.component('<tooltip-key>');\n          tooltip.emit('show', e);\n        },\n        mouseleave(e) {\n          const tooltip = this.chart.component('<tooltip-key>');\n          tooltip.emit('hide');\n        }\n      }\n    }],\n    components: [\n      {\n        key: '<tooltip-key>',\n        type: 'tooltip'\n      }\n    ]\n  },\n  ...\n});\n */\n\n/**\n * @type {string}\n * @memberof ComponentTooltip\n */\nconst type = 'tooltip';\n\nexport default function addTooltip(picasso) {\n  picasso.component(type, tooltip);\n}\n","const debugColliderDef = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    settings: {\n      target: '',\n      selector: '*',\n      fill: 'rgba(0, 255, 0, 0.1)',\n      stroke: 'lime',\n      opacity: 1,\n      useOuterRect: false,\n    },\n  },\n  on: {\n    update() {\n      this.draw();\n    },\n  },\n  draw() {\n    const shapes = this.chart.findShapes(this.props.selector).filter((s) => s.key === this.props.target); // Find all shapes\n    const colliders = shapes.filter((s) => s.collider).map((s) => s.collider);\n\n    colliders.forEach((c) => {\n      c.fill = this.props.fill;\n      c.stroke = this.props.stroke;\n      c.opacity = this.props.opacity;\n      c.collider = { type: null };\n    });\n\n    this.renderer.render(colliders);\n  },\n  created() {\n    this.props = this.settings.settings;\n  },\n  resize({ outer, inner }) {\n    if (this.props.useOuterRect) {\n      return outer;\n    }\n    return inner;\n  },\n  render() {},\n  mounted() {\n    this.draw();\n  },\n  updated() {\n    this.props = this.settings.settings;\n    this.draw();\n  },\n};\n\nexport default debugColliderDef;\n","import { toRadians } from './angles';\n\nconst PI_X2 = Math.PI * 2;\n\n/**\n * Implementation of F.6.5 https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n * @ignore\n * @param {number} rx - Arc x-radius\n * @param {number} ry - Arc y-radius\n * @param {number} rotation - Arc rotation in degrees (0-360)\n * @param {boolean} largeArcFlag\n * @param {boolean} sweepFlag\n * @param {number} endX - X-coordinate for end of arc\n * @param {number} endY - Y-coordinate for end of arc\n * @param {number} startX - X-coordinate for start of arc\n * @param {number} startY - Y-coordinate for start of arc\n * @returns {object}\n */\nfunction arcToCenter(rx, ry, rotation, largeArcFlag, sweepFlag, endX, endY, startX, startY) {\n  let startAngle;\n  let endAngle;\n  let sweepAngle;\n  let cx;\n  let cy;\n  let radiusRatio;\n\n  const rad = toRadians(rotation % 360);\n\n  // F.6.5.1\n  const cos = Math.cos(rad);\n  const sin = Math.sin(rad);\n  const hdx = (startX - endX) / 2;\n  const hdy = (startY - endY) / 2;\n\n  const x1d = cos * hdx + sin * hdy;\n  const y1d = cos * hdy - sin * hdx;\n\n  // F.6.6\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  radiusRatio = Math.pow(x1d, 2) / Math.pow(rx, 2) + Math.pow(y1d, 2) / Math.pow(ry, 2);\n  if (radiusRatio > 1) {\n    radiusRatio = Math.sqrt(radiusRatio);\n    rx *= radiusRatio;\n    ry *= radiusRatio;\n  }\n\n  // F.6.5.2\n  const rxry = rx * ry;\n  const rxy1d = rx * y1d;\n  const ryx1d = ry * x1d;\n  const den = Math.pow(rxy1d, 2) + Math.pow(ryx1d, 2);\n  const num = Math.pow(rxry, 2) - den;\n\n  let frac = Math.sqrt(Math.max(num / den, 0));\n\n  if (largeArcFlag === sweepFlag) {\n    frac = -frac;\n  }\n\n  const cxd = frac * (rxy1d / ry);\n  const cyd = frac * -(ryx1d / rx);\n\n  // F.6.5.3\n  const mx = (startX + endX) / 2;\n  const my = (startY + endY) / 2;\n  cx = cos * cxd - sin * cyd + mx;\n  cy = sin * cxd + cos * cyd + my;\n\n  // F.6.5.6 clockwise angle\n  const ux = (x1d - cxd) / rx;\n  const uy = (y1d - cyd) / ry;\n  const vx = (-x1d - cxd) / rx;\n  const vy = (-y1d - cyd) / ry;\n  startAngle = Math.atan2(uy, ux);\n  startAngle += startAngle < 0 ? PI_X2 : 0;\n  endAngle = Math.atan2(vy, vx);\n  endAngle += endAngle < 0 ? PI_X2 : 0;\n\n  sweepAngle = endAngle - startAngle;\n\n  if (!sweepFlag && startAngle < endAngle) {\n    sweepAngle -= PI_X2;\n  } else if (sweepFlag && endAngle < startAngle) {\n    sweepAngle += PI_X2;\n  }\n\n  sweepAngle %= PI_X2;\n\n  return {\n    startAngle,\n    sweepAngle,\n    cx,\n    cy,\n    rx,\n    ry,\n  };\n}\n\nexport { arcToCenter as default, PI_X2 };\n","/**\n * Measure the flatnass of a cubic bezier curve\n * @ignore\n * @param {Point} s - Start point\n * @param {Point} cp1 - First control point\n * @param {Point} cp2 - Second control point\n * @param {Point} e - End point\n */\nexport default function flatness(s, cp1, cp2, e) {\n  const ux = Math.abs(s.x + cp2.x - (cp1.x + cp1.x));\n  const uy = Math.abs(s.y + cp2.y - (cp1.y + cp1.y));\n  const vx = Math.abs(cp1.x + e.x - (cp2.x + cp2.x));\n  const vy = Math.abs(cp1.y + e.y - (cp2.y + cp2.y));\n\n  return ux + uy + vx + vy;\n}\n","import flatness from './curve-flattness';\n\nfunction mid(p0, p1) {\n  return {\n    x: (p0.x + p1.x) * 0.5,\n    y: (p0.y + p1.y) * 0.5,\n  };\n}\n\nfunction interpolate(t, s, cp1, cp2, e) {\n  const td = 1 - t;\n  const t0 = Math.pow(td, 3) * s;\n  const t1 = 3 * Math.pow(td, 2) * t * cp1;\n  const t2 = 3 * td * Math.pow(t, 2) * cp2;\n  const t3 = Math.pow(t, 3) * e;\n\n  return t0 + t1 + t2 + t3;\n}\n\n/**\n * Recursive subdivision of a curve using de Casteljau algorithm.\n * Splits the curve into multiple line segments where each segments is choosen based on a level of flatness.\n *\n * At most it will be able to generate 2**maxNbrOfSplits + 1 = 257 points\n * @ignore\n * @param {Point} s - Start point\n * @param {Point} cp1 - First control point\n * @param {Point} cp2 - Second control point\n * @param {Point} e - End point\n * @param {array} points - Initial set of points\n * @returns {point[]} Array of points\n */\nfunction toPoints(s, cp1, cp2, e, points = [], maxNbrOfSplits = 8) {\n  if (maxNbrOfSplits < 1 || flatness(s, cp1, cp2, e) <= 10) {\n    if (points[points.length - 1] !== s) {\n      points.push(s);\n    }\n\n    points.push(e);\n\n    return points;\n  }\n\n  const t = 0.5;\n\n  const m0 = mid(s, cp1);\n  const m1 = mid(cp1, cp2);\n  const m2 = mid(cp2, e);\n\n  const b = {\n    // Split curve at point\n    x: interpolate(t, s.x, cp1.x, cp2.x, e.x),\n    y: interpolate(t, s.y, cp1.y, cp2.y, e.y),\n  };\n\n  const q0 = mid(m0, m1); // New cp2 for left curve\n  const q1 = mid(m1, m2); // New cp1 for right curve\n\n  toPoints(s, m0, q0, b, points, maxNbrOfSplits - 1); // left curve\n  toPoints(b, q1, m2, e, points, maxNbrOfSplits - 1); // Right curve\n\n  return points;\n}\n\nexport { toPoints as default, interpolate };\n","import cubicToPoints from './cubic-bezier-curve-interpolation';\n\nfunction interpolate(t, s, cp, e) {\n  const td = 1 - t;\n\n  return Math.pow(td, 2) * s + 2 * td * t * cp + Math.pow(t, 2) * e;\n}\n\nfunction toCubic(s, cp, e) {\n  const cp1x = s.x + (2 / 3) * (cp.x - s.x);\n  const cp1y = s.y + (2 / 3) * (cp.y - s.y);\n  const cp2x = e.x + (2 / 3) * (cp.x - e.x);\n  const cp2y = e.y + (2 / 3) * (cp.y - e.y);\n  const cp1 = { x: cp1x, y: cp1y };\n  const cp2 = { x: cp2x, y: cp2y };\n\n  return { cp1, cp2 };\n}\n\n/**\n * Recursive subdivision of a curve using de Casteljau algorithm.\n * Splits the curve into multiple line segments where each segments is choosen based on a level of flatness.\n * @ignore\n * @param {Point} s - Start point\n * @param {Point} cp - Control point\n * @param {Point} e - End point\n * @returns {Point[]} Array of points\n */\nfunction toPoints(s, cp, e) {\n  const { cp1, cp2 } = toCubic(s, cp, e);\n\n  return cubicToPoints(s, cp1, cp2, e);\n}\n\nexport { interpolate, toPoints as default };\n","import p2dp from 'path2d-polyfill';\nimport arcToCenter, { PI_X2 } from '../math/arc-to-center';\nimport cubicCurveToPoints from '../math/cubic-bezier-curve-interpolation';\nimport quadCurveToPoints from '../math/quad-bezier-curve-interpolation';\n\nconst EPSILON = 1e-12;\n\nfunction removeDuplicates(points) {\n  for (let i = 0; i < points.length - 1; i++) {\n    const p0 = points[i];\n    const p1 = points[i + 1];\n    if (Math.abs(p0.x - p1.x) < EPSILON && Math.abs(p0.y - p1.y) < EPSILON) {\n      points.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * Transform an arc to a set of points a long the arc.\n * Specifiction F.6 (https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes)\n * @ignore\n * @param {array} s - Segments\n * @param {number} startX - X-coordinate for start of arc\n * @param {number} startY - Y-coordinate for start of arc\n */\nfunction arcToPoints(s, startX, startY) {\n  const points = [];\n  const largeArcFlag = !!s[4]; // F.6.3\n  const sweepFlag = !!s[5]; // F.6.3\n  const rotation = s[3];\n  let endX = s[6];\n  let endY = s[7];\n  let rx = s[1];\n  let ry = s[2];\n  let cx;\n  let cy;\n  let sweepAngle;\n  let startAngle;\n\n  if (s[0] === 'a') {\n    endX += startX;\n    endY += startY;\n  }\n\n  // F.6.2\n  if (startX === endY && startY === endY) {\n    return points;\n  }\n\n  // Given no radius, threat as lineTo command\n  if (!rx || !ry) {\n    points.push({ x: endX, y: endY });\n    return points;\n  }\n\n  ({ cx, cy, rx, ry, sweepAngle, startAngle } = arcToCenter(\n    rx,\n    ry,\n    rotation,\n    largeArcFlag,\n    sweepFlag,\n    endX,\n    endY,\n    startX,\n    startY\n  ));\n\n  // Approximation of perimeter\n  const p = Math.abs(sweepAngle * Math.sqrt((Math.pow(rx, 2) + Math.pow(ry, 2)) / 2));\n\n  // Generate a point every 10th pixel. Scaling of the node should probably be included in this calculation\n  const res = Math.ceil(p / 10);\n  const resAngle = sweepAngle / res;\n\n  for (let k = 1; k <= res; k++) {\n    const deltaAngle = resAngle * k;\n    const radians = (startAngle + deltaAngle) % PI_X2;\n    const cos = Math.cos(radians);\n    const sin = Math.sin(radians);\n    // F.6.3 https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n    points.push({\n      x: cx + cos * rx + -sin * cos,\n      y: cy + sin * ry + cos * sin,\n    });\n  }\n\n  // points.push({ x: cx, y: cy });\n\n  return points;\n}\n\n/**\n * Converts a SVG path data string into a set of points.\n * @ignore\n * @param {string} path\n * @returns {Array<point[]>} Array of points\n */\nexport default function pathToPoints(path) {\n  const commands = p2dp.parsePath(path);\n  const segments = [];\n  const points = [];\n  let x = 0; // Current point\n  let y = 0;\n  let cpx = null; // Last control point on a cubic curve\n  let cpy = null;\n  let qcpx = null; // Last control point on a quad curve\n  let qcpy = null;\n\n  for (let i = 0; i < commands.length; ++i) {\n    const cmd = commands[i];\n    const pathType = cmd[0];\n\n    // Reset control point if command is not cubic\n    if (pathType !== 'S' && pathType !== 's' && pathType !== 'C' && pathType !== 'c') {\n      cpx = null;\n      cpy = null;\n    }\n\n    if (pathType !== 'T' && pathType !== 't' && pathType !== 'Q' && pathType !== 'q') {\n      qcpx = null;\n      qcpy = null;\n    }\n\n    switch (pathType) {\n      case 'm':\n        if (points.length) {\n          segments.push(points.splice(0));\n        }\n      // Fall through\n      case 'l': // eslint-disable-line no-fallthrough\n        x += cmd[1];\n        y += cmd[2];\n        points.push({ x, y });\n        break;\n      case 'M':\n        if (points.length) {\n          segments.push(points.splice(0));\n        }\n      // Fall through\n      case 'L': // eslint-disable-line no-fallthrough\n        x = cmd[1];\n        y = cmd[2];\n        points.push({ x, y });\n        break;\n      case 'H':\n        x = cmd[1];\n        points.push({ x, y });\n        break;\n      case 'h':\n        x += cmd[1];\n        points.push({ x, y });\n        break;\n      case 'V':\n        y = cmd[1];\n        points.push({ x, y });\n        break;\n      case 'v':\n        y += cmd[1];\n        points.push({ x, y });\n        break;\n      case 'a':\n        points.push(...arcToPoints(cmd, x, y));\n        x += cmd[6];\n        y += cmd[7];\n        break;\n      case 'A':\n        points.push(...arcToPoints(cmd, x, y));\n        x = cmd[6];\n        y = cmd[7];\n        break;\n      case 'c':\n        points.push(\n          ...cubicCurveToPoints(\n            { x, y },\n            { x: cmd[1] + x, y: cmd[2] + y },\n            { x: cmd[3] + x, y: cmd[4] + y },\n            { x: cmd[5] + x, y: cmd[6] + y }\n          )\n        );\n        cpx = cmd[3] + x; // Last control point\n        cpy = cmd[4] + y;\n        x += cmd[5];\n        y += cmd[6];\n        break;\n      case 'C':\n        points.push(\n          ...cubicCurveToPoints({ x, y }, { x: cmd[1], y: cmd[2] }, { x: cmd[3], y: cmd[4] }, { x: cmd[5], y: cmd[6] })\n        );\n        cpx = cmd[3]; // Last control point\n        cpy = cmd[4];\n        x = cmd[5];\n        y = cmd[6];\n        break;\n      case 's':\n        if (cpx === null || cpx === null) {\n          cpx = x;\n          cpy = y;\n        }\n\n        points.push(\n          ...cubicCurveToPoints(\n            { x, y },\n            { x: 2 * x - cpx, y: 2 * y - cpy },\n            { x: cmd[1] + x, y: cmd[2] + y },\n            { x: cmd[3] + x, y: cmd[4] + y }\n          )\n        );\n        cpx = cmd[1] + x; // last control point\n        cpy = cmd[2] + y;\n        x += cmd[3];\n        y += cmd[4];\n        break;\n      case 'S':\n        if (cpx === null || cpx === null) {\n          cpx = x;\n          cpy = y;\n        }\n\n        points.push(\n          ...cubicCurveToPoints(\n            { x, y },\n            { x: 2 * x - cpx, y: 2 * y - cpy },\n            { x: cmd[1], y: cmd[2] },\n            { x: cmd[3], y: cmd[4] }\n          )\n        );\n        cpx = cmd[1]; // last control point\n        cpy = cmd[2];\n        x = cmd[3];\n        y = cmd[4];\n        break;\n      case 'Q':\n        points.push(...quadCurveToPoints({ x, y }, { x: cmd[1], y: cmd[2] }, { x: cmd[3], y: cmd[4] }));\n\n        qcpx = cmd[1]; // last control point\n        qcpy = cmd[2];\n        x = cmd[3];\n        y = cmd[4];\n        break;\n      case 'q':\n        points.push(...quadCurveToPoints({ x, y }, { x: cmd[1] + x, y: cmd[2] + y }, { x: cmd[3] + x, y: cmd[4] + y }));\n\n        qcpx = cmd[1] + x; // last control point\n        qcpy = cmd[2] + y;\n        x += cmd[3];\n        y += cmd[4];\n        break;\n      case 'T':\n        if (qcpx === null || qcpx === null) {\n          qcpx = x;\n          qcpy = y;\n        }\n\n        qcpx = 2 * x - qcpx; // last control point\n        qcpy = 2 * y - qcpy;\n        points.push(...quadCurveToPoints({ x, y }, { x: qcpx, y: qcpy }, { x: cmd[1], y: cmd[2] }));\n\n        x = cmd[1];\n        y = cmd[2];\n        break;\n      case 't':\n        if (qcpx === null || qcpx === null) {\n          qcpx = x;\n          qcpy = y;\n        }\n\n        qcpx = 2 * x - qcpx; // last control point\n        qcpy = 2 * y - qcpy;\n        points.push(...quadCurveToPoints({ x, y }, { x: qcpx, y: qcpy }, { x: cmd[1] + x, y: cmd[2] + y }));\n        x += cmd[1];\n        y += cmd[2];\n        break;\n      case 'z':\n      case 'Z':\n        if (points.length) {\n          points.push({ x: points[0].x, y: points[0].y });\n        }\n        break;\n      default:\n      // Do nothing\n    }\n  }\n\n  removeDuplicates(points);\n  segments.push(points.splice(0));\n\n  return segments;\n}\n","import pathToSegments from '../../scene-graph/parse-path-d';\n\nconst debugPathToPointsDef = {\n  require: ['renderer', 'chart'],\n  defaultSettings: {\n    settings: {\n      target: '',\n      fill: 'transparent',\n      stroke: 'lime',\n      opacity: 1,\n      radius: 2,\n      useOuterRect: false,\n    },\n  },\n  on: {\n    update() {\n      this.draw();\n    },\n  },\n  draw() {\n    const shapes = this.chart.findShapes('path').filter((s) => s.key === this.props.target); // Find all shapes\n\n    const circles = [];\n    shapes.forEach((s) => {\n      pathToSegments(s.attrs.d).forEach((segment) => {\n        segment.forEach((p) => {\n          circles.push({\n            type: 'circle',\n            cx: p.x,\n            cy: p.y,\n            r: this.props.radius,\n            fill: this.props.fill,\n            stroke: this.props.stroke,\n            opacity: this.props.opacity,\n            collider: { type: null },\n          });\n        });\n      });\n    });\n\n    this.renderer.render(circles);\n  },\n  created() {\n    this.props = this.settings.settings;\n  },\n  resize({ outer, inner }) {\n    if (this.props.useOuterRect) {\n      return outer;\n    }\n    return inner;\n  },\n  render() {},\n  mounted() {\n    this.draw();\n  },\n  updated() {\n    this.props = this.settings.settings;\n    this.draw();\n  },\n};\n\nexport default debugPathToPointsDef;\n","import createDebugCollider from './debug-collider';\nimport createDebugPathToPoints from './debug-path-to-points';\n\nexport function debugCollider(picasso) {\n  picasso.component('debug-collider', createDebugCollider);\n}\n\nexport function debugPathToPoints(picasso) {\n  picasso.component('debug-path-to-points', createDebugPathToPoints);\n}\n","import boxComponent from '../core/chart-components/box';\nimport pointComponent from '../core/chart-components/point';\nimport pieComponent from '../core/chart-components/pie';\nimport gridLineComponent from '../core/chart-components/grid';\nimport refLineComponent from '../core/chart-components/ref-line';\nimport axisComponent from '../core/chart-components/axis';\nimport containerComponent from '../core/chart-components/container';\nimport textComponent from '../core/chart-components/text';\nimport scrollbarComponent from '../core/chart-components/scrollbar';\nimport brushRangeComponent from '../web/components/brush-range';\nimport rangeComponent from '../core/chart-components/range';\nimport brushLassoComponent from '../core/chart-components/brush-lasso';\nimport labelsComponent from '../core/chart-components/labels';\nimport categoricalLegend from '../core/chart-components/legend-cat';\nimport sequentialLegend from '../core/chart-components/legend-seq';\nimport lineComponent from '../core/chart-components/line';\nimport brushAreaComponent from '../web/components/brush-area';\nimport tooltipComponent from '../web/components/tooltip';\nimport { debugCollider, debugPathToPoints } from '../core/chart-components/debug';\n\nexport default [\n  boxComponent,\n  pointComponent,\n  pieComponent,\n  gridLineComponent,\n  refLineComponent,\n  axisComponent,\n  containerComponent,\n  textComponent,\n  scrollbarComponent,\n  brushRangeComponent,\n  rangeComponent,\n  brushLassoComponent,\n  labelsComponent,\n  categoricalLegend,\n  sequentialLegend,\n  lineComponent,\n  brushAreaComponent,\n  tooltipComponent,\n  debugCollider,\n  debugPathToPoints,\n];\n","class Node {\n  /**\n   * @private\n   */\n  constructor(type) {\n    this._parent = null;\n    this._children = [];\n    this._ancestors = null;\n    this.type = type;\n    this.data = null;\n  }\n\n  /**\n   * Detaches this node from its parent, if such exists.\n   * @returns {Node}\n   */\n  detach() {\n    if (this._parent) {\n      this._parent.removeChild(this);\n    }\n    return this;\n  }\n\n  /**\n   * Parent of this node.\n   * @readonly\n   * @type {Node}\n   */\n  get parent() {\n    return this._parent;\n  }\n\n  /**\n   * Checks whether this node is a branch.\n   *\n   * True if this node has children, false otherwise.\n   * @readonly\n   * @type {Boolean}\n   */\n  get isBranch() {\n    return this._children && this._children.length;\n  }\n\n  /**\n   * Children of this node.\n   * @readonly\n   * @type {Node[]}\n   */\n  get children() {\n    return this._children;\n  }\n\n  /**\n   * Ancestors of this node, including parent.\n   * @readonly\n   * @type {Node[]}\n   */\n  get ancestors() {\n    if (!this._ancestors) {\n      this._ancestors = [];\n      if (this.parent) {\n        this._ancestors.push(this.parent, ...this.parent.ancestors);\n      }\n    }\n\n    return this._ancestors;\n  }\n\n  /**\n   * Descendants of this node.\n   * @readonly\n   * @type {Node[]}\n   */\n  get descendants() {\n    const r = [];\n    const len = this.children.length;\n    let i;\n    let c;\n\n    for (i = 0, len; i < len; i++) {\n      c = this.children[i];\n      r.push(c);\n\n      if (c.children.length) {\n        r.push(...c.descendants);\n      }\n    }\n    return r;\n  }\n\n  /**\n   *\n   * @returns {Boolean}\n   */\n  equals(n) {\n    const children = this.children;\n    const nChildren = n.children;\n    if (children.length !== nChildren.length) {\n      return false;\n    }\n    // Requires deterministic child order\n    for (let i = 0; i < children.length; i++) {\n      if (!children[i].equals(nChildren[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  toJSON() {\n    return {\n      type: this.type,\n      children: this.children.map((ch) => ch.toJSON()),\n    };\n  }\n}\n\nexport default Node;\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleRect,\n  testPolygonRect,\n  testRectRect,\n  testRectPoint,\n  testRectLine,\n  testGeoPolygonRect,\n} from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoRect instance\n * @private\n */\nclass GeoRect {\n  constructor({ x = 0, y = 0, width = 0, height = 0, minWidth = 0, minHeight = 0 } = {}) {\n    this.set({\n      x,\n      y,\n      width,\n      height,\n      minWidth,\n      minHeight,\n    });\n  }\n\n  set({ x = 0, y = 0, width = 0, height = 0, minWidth = 0, minHeight = 0 } = {}) {\n    this.type = 'rect';\n\n    if (width >= 0) {\n      this.x = x;\n      this.width = Math.max(width, minWidth);\n    } else {\n      this.x = x + Math.min(width, -minWidth);\n      this.width = -Math.min(width, -minWidth);\n    }\n\n    if (height >= 0) {\n      this.y = y;\n      this.height = Math.max(height, minHeight);\n    } else {\n      this.y = y + Math.min(height, -minHeight);\n      this.height = -Math.min(height, -minHeight);\n    }\n  }\n\n  /**\n   * @param {Point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return testRectPoint(this, p);\n  }\n\n  /**\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n    return testRectLine(this, line);\n  }\n\n  /**\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return testRectRect(this, rect);\n  }\n\n  /**\n   * @param {Circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return testCircleRect(c, this);\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testPolygonRect(polygon, this);\n  }\n\n  /**\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonRect(geopolygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {Point[]}\n   */\n  points() {\n    return [\n      { x: this.x, y: this.y },\n      { x: this.x + this.width, y: this.y },\n      { x: this.x + this.width, y: this.y + this.height },\n      { x: this.x, y: this.y + this.height },\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoRect(...args);\n}\n\nexport { GeoRect as default, create };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCirclePoint,\n  testCircleRect,\n  testCircleLine,\n  testCircleCircle,\n  testCirclePolygon,\n  testCircleGeoPolygon,\n} from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoCircle instance\n * @private\n */\nclass GeoCircle {\n  constructor({ cx = 0, cy = 0, r = 0, minRadius = 0 } = {}) {\n    this.set({\n      cx,\n      cy,\n      r,\n      minRadius,\n    });\n  }\n\n  set({ cx = 0, cy = 0, r = 0, minRadius = 0 } = {}) {\n    this.type = 'circle';\n    this.cx = cx;\n    this.cy = cy;\n    this.r = Math.max(r, minRadius);\n    this.vector = { x: this.cx, y: this.cy };\n  }\n\n  /**\n   * @param {Point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return testCirclePoint(this, p);\n  }\n\n  /**\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n\n    return testCircleLine(this, line);\n  }\n\n  /**\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n\n    return testCircleRect(this, rect);\n  }\n\n  /**\n   * @param {Circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return testCircleCircle(this, c);\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testCirclePolygon(this, polygon);\n  }\n\n  /**\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testCircleGeoPolygon(this, geopolygon);\n  }\n\n  /**\n   * Get the points\n   * @returns {Point[]}\n   */\n  points() {\n    return [\n      {\n        x: this.cx,\n        y: this.cy,\n      },\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoCircle(...args);\n}\n\nexport { GeoCircle as default, create };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleLine,\n  testPolygonLine,\n  testRectLine,\n  testLinePoint,\n  testLineLine,\n  testGeoPolygonLine,\n} from '../math/narrow-phase-collision';\n\n/**\n * Construct a new GeoLine instance\n * @private\n */\nclass GeoLine {\n  constructor({ x1 = 0, y1 = 0, x2 = 0, y2 = 0, tolerance = 0 } = {}) {\n    this.set({\n      x1,\n      y1,\n      x2,\n      y2,\n      tolerance,\n    });\n  }\n\n  set({ x1 = 0, y1 = 0, x2 = 0, y2 = 0, tolerance = 0 } = {}) {\n    this.type = 'line';\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.tolerance = Math.max(0, Math.round(tolerance));\n\n    this.vectors = this.points();\n    this.zeroSize = x1 === x2 && y1 === y2;\n  }\n\n  /**\n   * @param {Point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    if (this.tolerance > 0) {\n      const c = { cx: p.x, cy: p.y, r: this.tolerance };\n      return testCircleLine(c, this);\n    }\n    return testLinePoint(this, p);\n  }\n\n  /**\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const line = pointsToLine(points);\n    return testLineLine(this, line);\n  }\n\n  /**\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return testRectLine(rect, this);\n  }\n\n  /**\n   * @param {Circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return testCircleLine(c, this);\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testPolygonLine(polygon, this);\n  }\n\n  /**\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonLine(geopolygon, this);\n  }\n\n  /**\n   * Get the points\n   * @returns {Point[]}\n   */\n  points() {\n    return [\n      { x: this.x1, y: this.y1 },\n      { x: this.x2, y: this.y2 },\n    ];\n  }\n}\n\nfunction create(...args) {\n  return new GeoLine(...args);\n}\n\nexport { GeoLine as default, create };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCirclePolygon,\n  testPolygonPoint,\n  testPolygonLine,\n  testPolygonRect,\n  testPolygonPolygon,\n  testGeoPolygonPolygon,\n} from '../math/narrow-phase-collision';\n\nfunction close(vertices) {\n  const first = vertices[0];\n  const last = vertices[vertices.length - 1];\n\n  if (first.x !== last.x || first.y !== last.y) {\n    vertices.push(first);\n  }\n}\n\nfunction removeDuplicates(vertices) {\n  for (let i = 0; i < vertices.length - 1; i++) {\n    const v0 = vertices[i];\n    const v1 = vertices[i + 1];\n    if (v0.x === v1.x && v0.y === v1.y) {\n      vertices.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * Construct a new Polygon instance\n * Added ignore flag as the name collide with definition in index.js\n * @ignore\n * @private\n */\nclass Polygon {\n  constructor({ vertices = [] } = {}) {\n    this.set({ vertices });\n  }\n\n  /**\n   * Set the vertices.\n   * If vertices doesn't close the polygon, a closing vertice is appended.\n   * @ignore\n   * @param {object} input An object with a vertices property\n   * @param {Point[]} [input.vertices=[]] Vertices are represented as an array of points.\n   */\n  set({ vertices = [] } = {}) {\n    this.type = 'polygon';\n    this.vertices = vertices.slice();\n    this.edges = [];\n\n    removeDuplicates(this.vertices);\n\n    if (this.vertices.length <= 2) {\n      return;\n    }\n\n    close(this.vertices);\n\n    this.xMin = NaN;\n    this.yMin = NaN;\n    this.xMax = NaN;\n    this.yMax = NaN;\n\n    for (let i = 0; i < this.vertices.length; i++) {\n      if (i < this.vertices.length - 1) {\n        this.edges.push([this.vertices[i], this.vertices[i + 1]]);\n      }\n\n      this.xMin = isNaN(this.xMin) ? this.vertices[i].x : Math.min(this.xMin, this.vertices[i].x);\n      this.xMax = isNaN(this.xMax) ? this.vertices[i].x : Math.max(this.xMax, this.vertices[i].x);\n      this.yMin = isNaN(this.yMin) ? this.vertices[i].y : Math.min(this.yMin, this.vertices[i].y);\n      this.yMax = isNaN(this.yMax) ? this.vertices[i].y : Math.max(this.yMax, this.vertices[i].y);\n    }\n\n    this._bounds = null;\n    this._boundingRect = null;\n  }\n\n  /**\n   * Check if a point is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @ignore\n   * @param {Point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return testPolygonPoint(this, point);\n  }\n\n  /**\n   * Check if circle is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @ignore\n   * @param {Circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return testCirclePolygon(circle, this);\n  }\n\n  /**\n   * @ignore\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return testPolygonLine(this, pointsToLine(points));\n  }\n\n  /**\n   * @ignore\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return testPolygonRect(this, pointsToRect(points));\n  }\n\n  /**\n   * Check if polygon intersects another polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @ignore\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testPolygonPolygon(this, polygon);\n  }\n\n  /**\n   * Check if polygon intersects a geopolygon.\n   * @ignore\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonPolygon(geopolygon, this);\n  }\n\n  /**\n   * Get the points\n   * @ignore\n   * @returns {Point[]}\n   */\n  points() {\n    return this.vertices;\n  }\n\n  /**\n   * Get the bounds of the polygon, as an array of points\n   * @ignore\n   * @returns {Point[]}\n   */\n  bounds() {\n    if (!this._bounds) {\n      this._bounds = [\n        { x: this.xMin, y: this.yMin },\n        { x: this.xMax, y: this.yMin },\n        { x: this.xMax, y: this.yMax },\n        { x: this.xMin, y: this.yMax },\n      ];\n    }\n\n    return this._bounds;\n  }\n\n  /**\n   * Get the bounding rect of the polygon\n   * @ignore\n   * @returns {Rect}\n   */\n  boundingRect() {\n    if (!this._boundingRect) {\n      this._boundingRect = {\n        x: this.xMin,\n        y: this.yMin,\n        width: this.xMax - this.xMin,\n        height: this.yMax - this.yMin,\n      };\n    }\n    return this._boundingRect;\n  }\n}\n\nfunction create(...a) {\n  return new Polygon(...a);\n}\n\nexport { create, Polygon as default };\n","import { create as createPolygon } from './polygon';\nimport { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleGeoPolygon,\n  testGeoPolygonPoint,\n  testGeoPolygonLine,\n  testGeoPolygonRect,\n  testGeoPolygonPolygon,\n  testGeoPolygonGeoPolygon,\n} from '../math/narrow-phase-collision';\n\nfunction close(vertices) {\n  const first = vertices[0];\n  const last = vertices[vertices.length - 1];\n\n  if (first.x !== last.x || first.y !== last.y) {\n    vertices.push(first);\n  }\n}\n\nfunction removeDuplicates(vertices) {\n  for (let i = 0; i < vertices.length - 1; i++) {\n    const v0 = vertices[i];\n    const v1 = vertices[i + 1];\n    if (v0.x === v1.x && v0.y === v1.y) {\n      vertices.splice(i, 1);\n      i--;\n    }\n  }\n}\n\n/**\n * A geo-polygon is a polygon which is similar to a polygon in GeoJson. A typical geopolygon is an array of polygons where the first polygon is an outer polygon and the rest are inner polygons\n * @private\n */\n\n/**\n * Construct a new GeoPolygon instance\n * @private\n */\nclass GeoPolygon {\n  constructor({ vertices = [[]] } = {}) {\n    this.set({ vertices });\n  }\n\n  /**\n   * Set the vertices.\n   * If vertices doesn't close the polygon, a closing vertice is appended.\n   * @param {object} input An object with a vertices property\n   * @param {Array} [input.vertices=[]] Vertices are represented as an array of arrays of points.\n   */\n  set({ vertices = [] } = {}) {\n    this.type = 'geopolygon';\n    this.vertices = vertices.slice();\n    this.numPolygons = this.vertices.length;\n    this.polygons = [];\n    this.xMin = NaN;\n    this.yMin = NaN;\n    this.xMax = NaN;\n    this.yMax = NaN;\n\n    for (let i = 0; i < this.numPolygons; i++) {\n      removeDuplicates(this.vertices[i]);\n      if (this.vertices[i].length > 2) {\n        close(this.vertices[i]);\n      }\n      this.polygons[i] = createPolygon({ vertices: this.vertices[i] });\n      this.xMin = isNaN(this.xMin) ? this.polygons[i].xMin : Math.min(this.xMin, this.polygons[i].xMin);\n      this.xMax = isNaN(this.xMax) ? this.polygons[i].xMax : Math.max(this.xMax, this.polygons[i].xMax);\n      this.yMin = isNaN(this.yMin) ? this.polygons[i].yMin : Math.min(this.yMin, this.polygons[i].yMin);\n      this.yMax = isNaN(this.yMax) ? this.polygons[i].yMax : Math.max(this.yMax, this.polygons[i].yMax);\n    }\n\n    this._bounds = null;\n    this._boundingRect = null;\n  }\n\n  /**\n   * Check if a point is inside the area of the geopolygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {Point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return testGeoPolygonPoint(this, point);\n  }\n\n  /**\n   * Check if circle is inside the area of the polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {Circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return testCircleGeoPolygon(circle, this);\n  }\n\n  /**\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return testGeoPolygonLine(this, pointsToLine(points));\n  }\n\n  /**\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return testGeoPolygonRect(this, pointsToRect(points));\n  }\n\n  /**\n   * Check if geopolygon intersects another polygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return testGeoPolygonPolygon(this, polygon);\n  }\n\n  /**\n   * Check if geopolygon intersects another geopolygon.\n   * Supports convex, concave and self-intersecting polygons (filled area).\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return testGeoPolygonGeoPolygon(this, geopolygon);\n  }\n\n  /**\n   * Get the points\n   * @returns {Point[]}\n   */\n  points() {\n    return this.vertices;\n  }\n\n  /**\n   * Get the bounds of the polygon, as an array of points\n   * @returns {Point[]}\n   */\n  bounds() {\n    if (!this._bounds) {\n      this._bounds = [\n        { x: this.xMin, y: this.yMin },\n        { x: this.xMax, y: this.yMin },\n        { x: this.xMax, y: this.yMax },\n        { x: this.xMin, y: this.yMax },\n      ];\n    }\n\n    return this._bounds;\n  }\n\n  /**\n   * Get the bounding rect of the polygon\n   * @returns {Rect}\n   */\n  boundingRect() {\n    if (!this._boundingRect) {\n      this._boundingRect = {\n        x: this.xMin,\n        y: this.yMin,\n        width: this.xMax - this.xMin,\n        height: this.yMax - this.yMin,\n      };\n    }\n    return this._boundingRect;\n  }\n}\n\nfunction create(...a) {\n  return new GeoPolygon(...a);\n}\n\nexport { create, GeoPolygon as default };\n","import { pointsToLine, pointsToRect } from './util';\nimport {\n  testCircleLine,\n  testPolygonLine,\n  testLinePoint,\n  testLineLine,\n  testRectLine,\n  testGeoPolygonLine,\n} from '../math/narrow-phase-collision';\n\nfunction pointsAreNotEqual(p0, p1) {\n  return p0.x !== p1.x || p0.y !== p1.y;\n}\n\n/**\n * Construct a new GeoPolyline instance\n * @private\n */\nclass GeoPolyline {\n  constructor({ points = [] } = {}) {\n    this.set({ points });\n  }\n\n  set({ points = [] } = {}) {\n    this.type = 'polyline';\n    this.segments = [];\n    this._points = points.slice();\n\n    if (this._points.length > 1) {\n      for (let i = 0, len = this._points.length - 1; i < len; i++) {\n        if (pointsAreNotEqual(this._points[i], this._points[i + 1])) {\n          this.segments.push({\n            x1: this._points[i].x,\n            y1: this._points[i].y,\n            x2: this._points[i + 1].x,\n            y2: this._points[i + 1].y,\n          });\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Point} point\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(point) {\n    return this.segments.some((line) => testLinePoint(line, point));\n  }\n\n  /**\n   * @param {Circle} circle\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(circle) {\n    return this.segments.some((line) => testCircleLine(circle, line));\n  }\n\n  /**\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    const testLine = pointsToLine(points);\n    return this.segments.some((line) => testLineLine(line, testLine));\n  }\n\n  /**\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    const rect = pointsToRect(points);\n    return this.segments.some((line) => testRectLine(rect, line));\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    // This is a unoptimized solution and should be replaced by a more efficient algorithm.\n    return this.segments.some((line) => testPolygonLine(polygon, line));\n  }\n\n  /**\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    // This is a unoptimized solution and should be replaced by a more efficient algorithm.\n    return this.segments.some((line) => testGeoPolygonLine(geopolygon, line));\n  }\n\n  /**\n   * Get the points\n   * @returns {Point[]}\n   */\n  points() {\n    return this._points;\n  }\n}\n\nfunction create(...a) {\n  return new GeoPolyline(...a);\n}\n\nexport { create, GeoPolyline as default };\n","import { create as rect } from './rect';\nimport { create as circle } from './circle';\nimport { create as line } from './line';\nimport { create as polygon } from './polygon';\nimport { create as geopolygon } from './geopolygon';\nimport { create as polyline } from './polyline';\nimport registry from '../utils/registry';\n\nconst reg = registry();\n\nreg.add('rect', rect);\nreg.add('circle', circle);\nreg.add('line', line);\nreg.add('polygon', polygon);\nreg.add('geopolygon', geopolygon);\nreg.add('polyline', polyline);\n\n/* eslint-disable import/prefer-default-export */\nexport function create(type, input) {\n  return reg.get(type)(input);\n}\n/* eslint-enable import/prefer-default-export */\n\n/**\n * @typedef {object} Rect\n * @property {number} x - X-coordinate\n * @property {number} y - Y-coordinate\n * @property {number} width - Width\n * @property {number} height - Height\n */\n\n/**\n * @typedef {object} Line\n * @property {number} x1 - Start x-coordinate\n * @property {number} y1 - Start y-coordinate\n * @property {number} x2 - End x-coordinate\n * @property {number} y2 - End y-coordinate\n */\n\n/**\n * @typedef {object} Point\n * @property {number} x - X-coordinate\n * @property {number} y - Y-coordinate\n */\n\n/**\n * @typedef {object} Circle\n * @property {number} cx - Center x-coordinate\n * @property {number} cy - Center y-coordinate\n * @property {number} r - Circle radius\n */\n\n/**\n * @typedef {object} Polygon\n * @property {Array<Point>} points - Array of connected points\n */\n\n/**\n * @typedef {object} Geopolygon\n * @property {Array<Polygon>} polygons - Array of polygons\n */\n\n/**\n * @typedef {object} Polyline\n * @property {Array<Point>} points - Array of connected points\n */\n\n/**\n * @typedef {object} Path\n * @property {string} d - Path definition\n */\n","import { create as factory } from './index';\n\n/**\n * Construct a new GeometryCollection instance\n * @private\n */\nclass GeometryCollection {\n  constructor(collection = []) {\n    this.set(collection);\n  }\n\n  set(collection = []) {\n    this.geometries = [];\n    collection.forEach((geo) => {\n      const geoInstance = factory(geo.type, geo);\n      if (geoInstance) {\n        this.geometries.push(geoInstance);\n      }\n    });\n  }\n\n  /**\n   * @param {Point} p\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  containsPoint(p) {\n    return this.geometries.some((geo) => geo.containsPoint(p));\n  }\n\n  /**\n   * @param {Point[]} points - Line start and end point as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsLine(points) {\n    return this.geometries.some((geo) => geo.intersectsLine(points));\n  }\n\n  /**\n   * @param {Point[]} points - Rect vertices as an array of points\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsRect(points) {\n    return this.geometries.some((geo) => geo.intersectsRect(points));\n  }\n\n  /**\n   * @param {Circle} c\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsCircle(c) {\n    return this.geometries.some((geo) => geo.intersectsCircle(c));\n  }\n\n  /**\n   * @param {Polygon} polygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsPolygon(polygon) {\n    return this.geometries.some((geo) => geo.intersectsPolygon(polygon));\n  }\n\n  /**\n   * @param {Geopolygon} geopolygon\n   * @returns {boolean} True if there is an intersection, false otherwise\n   */\n  intersectsGeoPolygon(geopolygon) {\n    return this.geometries.some((geo) => geo.intersectsGeoPolygon(geopolygon));\n  }\n}\n\nfunction create(...args) {\n  return new GeometryCollection(...args);\n}\n\nexport { GeometryCollection as default, create };\n","class Matrix {\n  /**\n   * Creates a matrix with identity values.\n   * @private\n   */\n  constructor() {\n    this._elements = [\n      [1, 0, 0],\n      [0, 1, 0],\n      [0, 0, 1],\n    ];\n\n    this._stack = [];\n  }\n\n  /**\n   * Creates a new matrix with a copy of the current values.\n   */\n  clone() {\n    const mt = new Matrix();\n    return mt.multiply(this);\n  }\n\n  /**\n   * Sets the matrix values\n   * @param {Number[][]} arr A 3x3 array.\n   */\n  set(arr) {\n    this._elements = arr;\n    return this;\n  }\n\n  /**\n   * Saves the current matrix values to a stack.\n   */\n  save() {\n    this._stack.push(this.elements);\n    return this;\n  }\n\n  /**\n   * Sets the current matrix values to the last ones saved on to the stack.\n   */\n  restore() {\n    if (this._stack.length) {\n      this._elements = this._stack.pop(); // TODO - use a copy instead\n    }\n    return this;\n  }\n\n  /**\n   * Adds a scalar value to each element in the matrix.\n   * @param {Number} value\n   */\n  add(value) {\n    // assume scalar\n    let i, j;\n    for (i = 0; i < this._elements.length; i++) {\n      for (j = 0; j < this._elements[i].length; j++) {\n        this._elements[i][j] += value;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Translates the current matrix along the x and y axis.\n   * @param {Number} x\n   * @param {Number} y\n   */\n  translate(x, y) {\n    this.multiply([\n      [1, 0, x],\n      [0, 1, y],\n      [0, 0, 1],\n    ]);\n    return this;\n  }\n\n  /**\n   * Rotates the current matrix.\n   * @param {Number} radianAngle Angle in radians.\n   */\n  rotate(radianAngle) {\n    let cos = Math.cos(-radianAngle),\n      sin = Math.sin(-radianAngle);\n    this.multiply([\n      [cos, sin, 0],\n      [-sin, cos, 0],\n      [0, 0, 1],\n    ]);\n    return this;\n  }\n\n  /**\n   *\n   * If value is a number; multiplies each element in the matrix by the given value.\n   * If value is a matrix; multiplies the two matrices.\n   * @param {Number|Array|Matrix} value\n   */\n  multiply(value) {\n    let i, j, m, k;\n    if (value instanceof Matrix) {\n      value = value._elements;\n    }\n    if (Array.isArray(value)) {\n      // matrix multiplication\n      m = [\n        [0, 0, 0],\n        [0, 0, 0],\n        [0, 0, 0],\n      ];\n      for (i = 0; i < this._elements.length; i++) {\n        // row\n        for (j = 0; j < this._elements[i].length; j++) {\n          // column\n          for (k = 0; k < 3; k++) {\n            // row\n            m[i][j] += this._elements[i][k] * value[k][j];\n          }\n        }\n      }\n      this._elements = m;\n    } else {\n      // scalar multiplication\n      for (i = 0; i < this._elements.length; i++) {\n        for (j = 0; j < this._elements[i].length; j++) {\n          this._elements[i][j] *= value;\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Scales the matrix along x and y axis.\n   * @param {Number} x The value to scale the matrix with along the x direction\n   * @param {Number} [y=x] The value to scale the matrix with along the y direction.\n   */\n  scale(x, y = x) {\n    // if ( arguments.length < 2 || typeof y === \"undefined\" ) {\n    //  y = x;\n    // }\n\n    this.multiply([\n      [x, 0, 0],\n      [0, y, 0],\n      [0, 0, 1],\n    ]);\n    return this;\n  }\n\n  /**\n   * Multiples the matrix with the supplied transformation values\n   * @param {Number} a Horizontal scaling\n   * @param {Number} b Horizontal skewing\n   * @param {Number} c Vertical skewing\n   * @param {Number} d Vertical scaling\n   * @param {Number} e Horizontal moving\n   * @param {Number} f Vertical scaling\n   */\n  transform(a, b, c, d, e, f) {\n    this.multiply([\n      [a, c, e],\n      [b, d, f],\n      [0, 0, 1],\n    ]);\n\n    return this;\n  }\n\n  /**\n   * Gets the value of the determinant.\n   * @return {Number}\n   */\n  determinant() {\n    let a = this._elements[0][0],\n      b = this._elements[0][1],\n      c = this._elements[0][2],\n      d = this._elements[1][0],\n      e = this._elements[1][1],\n      f = this._elements[1][2],\n      g = this._elements[2][0],\n      h = this._elements[2][1],\n      i = this._elements[2][2],\n      p = 0;\n\n    p = a * e * i + b * f * g + c * d * h - c * e * g - b * d * i - a * f * h;\n\n    return p;\n  }\n\n  /**\n   * Inverts the matrix.\n   */\n  invert() {\n    let dt = this.determinant(),\n      a = this._elements[0][0],\n      b = this._elements[0][1],\n      c = this._elements[0][2],\n      d = this._elements[1][0],\n      e = this._elements[1][1],\n      f = this._elements[1][2],\n      g = this._elements[2][0],\n      h = this._elements[2][1],\n      k = this._elements[2][2];\n\n    this._elements = [\n      [e * k - f * h, c * h - b * k, b * f - c * e],\n      [f * g - d * k, a * k - c * g, c * d - a * f],\n      [d * h - e * g, g * b - a * h, a * e - b * d],\n    ];\n\n    this.multiply(1 / dt); // TODO - handle when dt === 0 ?\n    return this;\n  }\n\n  /**\n   * Transposes the elements of the matrix.\n   */\n  transpose() {\n    const m = Object.create(this._elements); // ?\n    this._elements = [\n      [m[0][0], m[1][0], m[2][0]],\n      [m[0][1], m[1][1], m[2][1]],\n      [m[0][2], m[1][2], m[2][2]],\n    ];\n    return this;\n  }\n\n  /**\n   * Resets the inner elements of the matrix to identity values.\n   */\n  identity() {\n    this._elements = [\n      [1, 0, 0],\n      [0, 1, 0],\n      [0, 0, 1],\n    ];\n    return this;\n  }\n\n  toString() {\n    return `${this._elements.map((r) => r.join('\\t')).join('\\n')}`;\n  }\n\n  isIdentity() {\n    const m = this._elements;\n    return (\n      m[0][0] === 1 &&\n      m[0][1] === 0 &&\n      m[0][2] === 0 &&\n      m[1][0] === 0 &&\n      m[1][1] === 1 &&\n      m[1][2] === 0 &&\n      m[2][0] === 0 &&\n      m[2][1] === 0 &&\n      m[2][2] === 1\n    );\n  }\n\n  /**\n   * Transforms the given point by this matrix and returns a new point\n   */\n  transformPoint(p) {\n    let vec = [p.x, p.y, 1],\n      i,\n      j,\n      e = this._elements,\n      m = [0, 0, 0];\n    for (i = 0; i < this._elements.length; i++) {\n      // row\n      for (j = 0; j < this._elements[i].length; j++) {\n        // column\n        m[i] += vec[j] * e[i][j];\n      }\n    }\n\n    return { x: m[0], y: m[1] };\n  }\n\n  /**\n   * Transforms the given points by this matrix and returns the new points\n   */\n  transformPoints(array) {\n    let vec,\n      i,\n      j,\n      k,\n      m,\n      e = this._elements,\n      ret = [];\n\n    for (k = 0; k < array.length; k++) {\n      vec = [array[k].x, array[k].y, 1];\n      m = [0, 0, 0];\n\n      for (i = 0; i < this._elements.length; i++) {\n        // row\n        for (j = 0; j < this._elements[i].length; j++) {\n          // column\n          m[i] += vec[j] * e[i][j];\n        }\n      }\n      ret.push({ x: m[0], y: m[1] });\n    }\n    return ret;\n  }\n\n  get elements() {\n    const m = this._elements;\n    return [\n      [m[0][0], m[0][1], m[0][2]],\n      [m[1][0], m[1][1], m[1][2]],\n      [m[2][0], m[2][1], m[2][2]],\n    ];\n  }\n}\n\nexport default Matrix;\n","const transformRegEx = /(translate|scale|rotate|matrix)\\(([0-9,.eE+-\\s]+)(?:,|\\s?)+\\)/g;\n\nfunction parseTransform(transform) {\n  let m,\n    commands = [];\n  /* eslint-disable no-cond-assign */\n  while ((m = transformRegEx.exec(transform)) !== null) {\n    const argsStr = m[2].trim();\n    const args = argsStr.indexOf(',') === -1 ? argsStr.split(' ') : argsStr.split(',');\n\n    commands.push({\n      cmd: m[1],\n      args: args.filter((a) => a.trim().length > 0).map((a) => Number(a)),\n    });\n  }\n  /* eslint-enable no-cond-assign */\n\n  return commands;\n}\n\nfunction resolveRotateCmd(matrix, transform) {\n  const radians = transform.args[0] * (Math.PI / 180);\n\n  if (transform.args.length > 2) {\n    const x = transform.args[1];\n    const y = transform.args[2];\n    matrix.translate(x, y);\n    matrix.rotate(radians);\n    matrix.translate(-x, -y);\n  } else if (transform.args.length === 1) {\n    matrix.rotate(radians);\n  }\n}\n\nfunction resolveScaleCmd(matrix, transform) {\n  const x = transform.args[0];\n  const y = isNaN(transform.args[1]) ? transform.args[0] : transform.args[1];\n  matrix.scale(x, y);\n}\n\nfunction resolveTranslateCmd(matrix, transform) {\n  const x = transform.args[0];\n  const y = isNaN(transform.args[1]) ? 0 : transform.args[1];\n  matrix.translate(x, y);\n}\n\nfunction resolveMatrixCmd(matrix, transform) {\n  if (transform.args.length >= 6) {\n    matrix.transform(...transform.args);\n  }\n}\n\nexport default function resolveTransform(t, matrix) {\n  const transforms = parseTransform(t);\n  let transform;\n\n  for (let i = 0, len = transforms.length; i < len; i++) {\n    transform = transforms[i];\n\n    if (transform.cmd === 'rotate') {\n      resolveRotateCmd(matrix, transform);\n    } else if (transform.cmd === 'scale') {\n      resolveScaleCmd(matrix, transform);\n    } else if (transform.cmd === 'matrix') {\n      resolveMatrixCmd(matrix, transform);\n    } else if (transform.cmd === 'translate') {\n      resolveTranslateCmd(matrix, transform);\n    }\n  }\n}\n","/* eslint-disable no-useless-escape */\n\nconst SELECTOR_MAPS = {\n  type: /^\\w[\\w-]+/,\n  attr: /^\\[\\w(?:[\\w\\._-]+)?(?:[!]?=['\\\"][\\w\\s*#_-]*['\\\"])?\\]/,\n  universal: /^(\\*)/,\n  tag: /^\\.(\\w+)/,\n};\n\nconst FILTERS = {\n  type: (c, objects) => {\n    // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const type = o.type;\n\n      if (type) {\n        return type.toLowerCase() === c.toLowerCase();\n      }\n      return false;\n    });\n  },\n\n  attr: (attr, operator, value, objects) => {\n    // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const v = o.attrs[attr];\n\n      if (!operator) {\n        // TODO handle undefined differently for != operator? As display object may very well have a default rendering color\n        return typeof v !== 'undefined';\n      }\n      if (typeof v === 'undefined') {\n        return false;\n      }\n\n      switch (operator) {\n        case '=':\n          return value === String(v);\n        case '!=':\n          return value !== String(v);\n        default:\n          return false;\n      }\n    });\n  },\n\n  universal: (objects) => objects,\n\n  tag: (selector, objects) => {\n    // eslint-disable-line arrow-body-style\n    return objects.filter((o) => {\n      const tag = o.tag;\n      if (tag) {\n        return tag.trim().split(/\\s+/).indexOf(selector.replace('.', '')) !== -1;\n      }\n      return false;\n    });\n  },\n};\n\n/**\n * Filters out objects of given type and value\n * @ignore\n * @example\n * filter(\n *   {type:'type', value:'Circle'},\n *   [new Circle(), new Rectangle()]\n * )\n * // [Circle]\n * @param {Object} token\n * @param {Array} objects\n * @returns {Object[]} Objects that fulfill the type and value\n */\nexport function filter(token, objects) {\n  if (!objects || !objects.length || !token || typeof FILTERS[token.type] !== 'function') {\n    return [];\n  }\n\n  switch (token.type) {\n    case 'type':\n      return FILTERS[token.type](token.value, objects);\n    case 'attr':\n      return FILTERS[token.type](token.attribute, token.operator, token.attributeValue, objects);\n    case 'universal':\n      return FILTERS[token.type](objects);\n    case 'tag':\n      return FILTERS[token.type](token.value, objects);\n    default:\n      return [];\n  }\n}\n\n/**\n * Tokenizes a string into supported selectors\n * @ignore\n *\n * @example\n * tokenize(\"Circle[color='red']\")\n *\n * @param {String} s\n */\nexport function tokenize(s) {\n  const groups = [];\n  let sub;\n  let info;\n  let match;\n  let validSelector;\n\n  s.split(/\\s*,\\s*/).forEach((group) => {\n    group = group.trim();\n    sub = [];\n    const selectorMapsIterator = (key) => {\n      match = group.match(SELECTOR_MAPS[key]);\n      if (match) {\n        validSelector = true;\n        group = group.slice(match[0].length);\n        info = {\n          type: key,\n          value: match[0],\n        };\n\n        if (key === 'attr') {\n          // extract parts of attribute from e.g. [color='red'] => (color, =, red)\n          match = match[0].match(/\\[(\\w[\\w\\._-]+)?(?:([!]?=)['\\\"]([\\w\\s#_-]*)['\\\"])?\\]/);\n          info.attribute = match[1];\n          info.operator = match[2];\n          info.attributeValue = match[3];\n        }\n        sub.push(info);\n      }\n    };\n    while (group) {\n      validSelector = false;\n\n      match = group.match(/^\\s*([>+~]|\\s)\\s*/);\n      if (match) {\n        validSelector = true;\n        sub.push({\n          type: ' ',\n          value: match[0],\n        });\n        group = group.slice(match[0].length);\n      }\n\n      Object.keys(SELECTOR_MAPS).forEach(selectorMapsIterator);\n\n      if (sub && sub.length && groups.indexOf(sub) < 0) {\n        groups.push(sub);\n      }\n\n      if (!validSelector) {\n        break;\n      }\n    }\n  });\n  return groups;\n}\n\nfunction find(s, object) {\n  const result = [];\n  const groupResults = [];\n  let groups;\n  let descendants;\n\n  if (object.isBranch) {\n    groups = tokenize(s);\n    descendants = object.descendants;\n\n    let tokens;\n\n    for (let gi = 0, glen = groups.length; gi < glen; gi++) {\n      tokens = groups[gi];\n\n      const levels = [];\n      let filtered = descendants.slice();\n      let hasRemainder = false;\n      tokens.reverse().forEach((token) => {\n        if (token.type === ' ') {\n          levels.push(filtered);\n          filtered = descendants.slice();\n          hasRemainder = false;\n          return;\n        }\n\n        filtered = filter(token, filtered);\n        hasRemainder = true;\n      });\n\n      if (hasRemainder) {\n        levels.push(filtered);\n      }\n\n      const selected = levels[0].filter((node) => {\n        let ancestor = node.parent;\n        let idx;\n\n        for (let i = 1; i < levels.length; i++) {\n          idx = levels[i].indexOf(ancestor);\n          while (ancestor && idx < 0) {\n            ancestor = ancestor.parent;\n            idx = levels[i].indexOf(ancestor);\n          }\n          if (idx < 0) {\n            return false;\n          }\n        }\n        return true;\n      });\n\n      groupResults.push(selected);\n    }\n\n    for (let i = 0, len = groupResults.length; i < len; i++) {\n      for (let ni = 0, nlen = groupResults[i].length; ni < nlen; ni++) {\n        if (result.indexOf(groupResults[i][ni]) < 0) {\n          result.push(groupResults[i][ni]);\n        }\n      }\n    }\n  }\n\n  return result || [];\n}\n\nexport default {\n  find,\n};\n","import { pointsToRect, pointsToCircle, pointsToLine } from '../geometry/util';\nimport pointsToPath from '../utils/points-to-path';\n\nfunction appendDpi(points, dpi) {\n  for (let i = 0, len = points.length; i < len; i++) {\n    points[i].x /= dpi;\n    points[i].y /= dpi;\n  }\n}\n\nfunction geometryToDef(geometry, dpi, mvm) {\n  const type = geometry.type;\n  let points = geometry.points();\n  if (mvm) {\n    if (points.every((item) => Array.isArray(item))) {\n      points = points.map((item) => mvm.transformPoints(item));\n    } else {\n      points = mvm.transformPoints(points);\n    }\n  }\n  appendDpi(points, dpi);\n  let def = null;\n\n  if (type === 'rect' || type === 'bounds') {\n    def = pointsToRect(points);\n    def.type = type;\n  } else if (type === 'circle') {\n    def = pointsToCircle(points, geometry.r);\n    def.type = type;\n  } else if (type === 'line') {\n    def = pointsToLine(points);\n    def.type = type;\n  } else if (type === 'polygon' || type === 'polyline') {\n    const path = pointsToPath(points, type === 'polygon');\n    def = {\n      type: 'path',\n      d: path,\n    };\n  } else if (type === 'geopolygon') {\n    let path = '';\n    for (let i = 0; i < points.length; i++) {\n      path += pointsToPath(points[i], true);\n    }\n    def = {\n      type: 'path',\n      d: path,\n    };\n  }\n\n  return def;\n}\n\n/**\n * @ignore\n * @returns {object} Returns a node definition of the collider\n */\nfunction colliderToShape(node, dpi) {\n  if (node.collider) {\n    const mvm = node.modelViewMatrix;\n    const isCollection = node.colliderType === 'collection';\n\n    if (isCollection) {\n      const children = node.collider.geometries.map((geometry) => geometryToDef(geometry, dpi, mvm));\n\n      return {\n        type: 'container',\n        children,\n      };\n    }\n\n    return geometryToDef(node.collider, dpi, mvm);\n  }\n\n  return null;\n}\n\n/**\n * Read-only object representing a node on the scene.\n */\nclass SceneNode {\n  constructor(node) {\n    this._bounds = (includeTransform = true) => {\n      const { x, y, width, height } = node.boundingRect\n        ? node.boundingRect(includeTransform)\n        : {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n          };\n      return {\n        x,\n        y,\n        width,\n        height,\n      };\n    };\n    this._attrs = node.attrs;\n    this._type = node.type;\n    this._data = node.data;\n    this._dpi = node.stage ? node.stage.dpi : 1;\n    this._collider = () => colliderToShape(node, this._dpi);\n    this._desc = node.desc;\n    this._tag = node.tag;\n    this._children = () => node.children.map((n) => new SceneNode(n));\n    this._parent = () => (node.parent ? new SceneNode(node.parent) : null);\n\n    this._cache = {\n      elementBoundingRect: null,\n    };\n    this._getElementBoundingRect = () => {\n      if (!this._cache.elementBoundingRect && this.element) {\n        this._cache.elementBoundingRect = this.element.getBoundingClientRect();\n      }\n      return this._cache.elementBoundingRect || { left: 0, top: 0 };\n    };\n  }\n\n  /**\n   * Get child nodes\n   * @type {SceneNode[]}\n   */\n  get children() {\n    return this._children();\n  }\n\n  /**\n   * Get parent node\n   * @type {SceneNode}\n   */\n  get parent() {\n    return this._parent();\n  }\n\n  /**\n   * Node type\n   * @type {string}\n   */\n  get type() {\n    return this._type;\n  }\n\n  /**\n   * Get the associated data\n   * @type {any}\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Node attributes\n   * @type {object}\n   */\n  get attrs() {\n    return this._attrs;\n  }\n\n  /**\n   * Element the scene is attached to\n   * @type {HTMLElement}\n   * @private\n   */\n  set element(e) {\n    this._cache.elementBoundingRect = null;\n    this._element = e;\n  }\n\n  /**\n   * Element the scene is attached to\n   * @type {HTMLElement}\n   */\n  get element() {\n    return this._element;\n  }\n\n  /**\n   * Key of the component this shape belongs to\n   * @type {string}\n   * @private\n   */\n  set key(k) {\n    this._key = k;\n  }\n\n  /**\n   * Key of the component this shape belongs to\n   * @type {string}\n   */\n  get key() {\n    return this._key;\n  }\n\n  /**\n   * Bounding rectangle of the node. After any transform has been applied, if any, but excluding scaling transform related to devicePixelRatio.\n   * Origin is in the top-left corner of the scene element.\n   * @type {Rect}\n   */\n  get bounds() {\n    const bounds = this._bounds();\n    bounds.x /= this._dpi;\n    bounds.y /= this._dpi;\n    bounds.width /= this._dpi;\n    bounds.height /= this._dpi;\n    return bounds;\n  }\n\n  /**\n   * Bounding rectangle of the node within its local coordinate system.\n   * Origin is in the top-left corner of the scene element.\n   * @type {Rect}\n   */\n  get localBounds() {\n    const bounds = this._bounds(false);\n    return bounds;\n  }\n\n  /**\n   * Bounding rectangle of the node, relative a target.\n   *\n   * If target is an HTMLElement, the bounds are relative to the HTMLElement.\n   * Any other target type will return the bounds relative to the viewport of the browser.\n   *\n   * @param {HTMLElement|any} target\n   * @param {boolean} includeTransform - Whether to include any applied transforms on the node\n   * @returns {Rect}\n   * @example\n   *\n   * node.boundsRelativeTo($('div'));\n   * node.boundsRelativeTo('viewport');\n   */\n  boundsRelativeTo(target, includeTransform = true) {\n    const type = typeof target;\n    const bounds = includeTransform ? this.bounds : this.localBounds;\n    const selfRect = this._getElementBoundingRect();\n    let dx = selfRect.left;\n    let dy = selfRect.top;\n\n    if (type === 'object' && target !== null && typeof target.getBoundingClientRect === 'function') {\n      const { left = 0, top = 0 } = target.getBoundingClientRect();\n      dx -= left;\n      dy -= top;\n    }\n\n    bounds.x += dx;\n    bounds.y += dy;\n\n    return bounds;\n  }\n\n  /**\n   * Collider of the node. Transform on the node has been applied to the collider shape, if any, but excluding scaling transform related to devicePixelRatio.\n   * Origin is in the top-left corner of the scene element.\n   *\n   * If node has no collider, null is returned.\n   * @type {Line|Rect|Circle|Path}\n   */\n  get collider() {\n    return this._collider();\n  }\n\n  /**\n   * Node description\n   * @type {object}\n   */\n  get desc() {\n    return this._desc;\n  }\n\n  /**\n   * Node tag\n   * @type {string}\n   */\n  get tag() {\n    return this._tag;\n  }\n}\n\nfunction create(...a) {\n  return new SceneNode(...a);\n}\n\nexport { create as default, SceneNode };\n","import createSceneNode from './scene-node';\n\nexport class Collision {\n  constructor(node) {\n    this._node = createSceneNode(node);\n    this._parent = null;\n    this._input = null;\n  }\n\n  get node() {\n    return this._node;\n  }\n\n  set parent(p) {\n    this._parent = p;\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  set input(i) {\n    this._input = i;\n  }\n\n  get input() {\n    return this._input;\n  }\n}\n\nexport default function create(...a) {\n  return new Collision(...a);\n}\n","import createCollision from './collision';\nimport { scalarMultiply } from '../math/vector';\nimport { create as createPolygon } from '../geometry/polygon';\nimport { create as createGeoPolygon } from '../geometry/geopolygon';\nimport { lineToPoints, rectToPoints, getShapeType } from '../geometry/util';\n\nfunction appendParentNode(node, collision) {\n  const p = node.parent;\n\n  if (p && p.type !== 'stage') {\n    collision.parent = createCollision(p);\n\n    const pp = p.parent;\n    if (pp && pp.type !== 'stage') {\n      appendParentNode(pp, collision.parent);\n    }\n  }\n}\n\nfunction appendInputShape(shape, collisions) {\n  for (let i = 0, len = collisions.length; i < len; i++) {\n    collisions[i].input = shape;\n  }\n}\n\nfunction resolveFrontChildCollision(node, type, input) {\n  const num = node.descendants.length;\n\n  for (let i = num - 1; i >= 0; i--) {\n    const desc = node.descendants[i];\n    if (desc.collider === null) {\n      continue;\n    }\n\n    if (desc.collider[type](input)) {\n      const collision = createCollision(desc);\n\n      appendParentNode(desc, collision);\n\n      return collision;\n    }\n  }\n  return null;\n}\n\nfunction resolveGeometryCollision(node, type, input) {\n  if (node.collider[type](input)) {\n    const c = createCollision(node);\n\n    appendParentNode(node, c);\n\n    return c;\n  }\n\n  return null;\n}\n\nfunction inverseTransform(node, input) {\n  let transformedInput = {};\n  if (node.modelViewMatrix) {\n    if (Array.isArray(input)) {\n      // Rect or Line\n      transformedInput = node.inverseModelViewMatrix.transformPoints(input);\n    } else if (!isNaN(input.r)) {\n      // Circle\n      const p = { x: input.cx, y: input.cy };\n      ({ x: transformedInput.cx, y: transformedInput.cy } = node.inverseModelViewMatrix.transformPoint(p));\n      transformedInput.r = input.r;\n    } else if (Array.isArray(input.vertices)) {\n      // Polygon\n      transformedInput.vertices = node.inverseModelViewMatrix.transformPoints(input.vertices);\n    } else {\n      // Point\n      transformedInput = node.inverseModelViewMatrix.transformPoint(input);\n    }\n  } else {\n    transformedInput = input;\n  }\n\n  if (Array.isArray(transformedInput.vertices)) {\n    if (transformedInput.vertices.every((item) => Array.isArray(item))) {\n      transformedInput = createGeoPolygon(transformedInput);\n    } else {\n      transformedInput = createPolygon(transformedInput); // TODO Shouldn't have to do this here, currently its beacause a collision algorithm optimization, i.e. caching of polygon bounds\n    }\n  }\n\n  return transformedInput;\n}\n\nfunction resolveCollision(node, intersectionType, input) {\n  if (node.colliderType === null) {\n    return null;\n  }\n\n  const transformedInput = inverseTransform(node, input);\n\n  if (node.colliderType === 'frontChild') {\n    return resolveFrontChildCollision(node, intersectionType, transformedInput);\n  }\n\n  return resolveGeometryCollision(node, intersectionType, transformedInput);\n}\n\nfunction findAllCollisions(nodes, intersectionType, ary, input) {\n  const num = nodes.length;\n  for (let i = 0; i < num; i++) {\n    const node = nodes[i];\n\n    const collision = resolveCollision(node, intersectionType, input);\n\n    if (collision) {\n      ary.push(collision);\n    }\n\n    // Only traverse children if no match is found on parent and it doesnt have any custom collider\n    if (node.children && !collision && !node.collider) {\n      findAllCollisions(node.children, intersectionType, ary, input);\n    }\n  }\n}\n\nfunction hasCollision(nodes, intersectionType, input) {\n  const num = nodes.length;\n  for (let i = 0; i < num; i++) {\n    const node = nodes[i];\n\n    const collision = resolveCollision(node, intersectionType, input);\n\n    if (collision !== null) {\n      return true;\n    }\n\n    if (node.children && !node.collider) {\n      return hasCollision(node.children, intersectionType, input);\n    }\n  }\n  return false;\n}\n\nfunction resolveShape(shape, ratio = 1) {\n  const type = getShapeType(shape);\n  let _shape = {};\n\n  switch (type) {\n    case 'circle':\n      _shape.cx = shape.cx * ratio;\n      _shape.cy = shape.cy * ratio;\n      _shape.r = shape.r;\n      return ['intersectsCircle', _shape];\n    case 'rect':\n      _shape = rectToPoints(shape).map((p) => scalarMultiply(p, ratio));\n      return ['intersectsRect', _shape];\n    case 'line':\n      _shape = lineToPoints(shape).map((p) => scalarMultiply(p, ratio));\n      return ['intersectsLine', _shape];\n    case 'point':\n      _shape = scalarMultiply(shape, ratio);\n      return ['containsPoint', _shape];\n    case 'polygon':\n      _shape.vertices = shape.vertices.map((vertex) => scalarMultiply(vertex, ratio));\n      return ['intersectsPolygon', _shape];\n    case 'geopolygon':\n      _shape.vertices = shape.vertices.map((vertices) => vertices.map((vertex) => scalarMultiply(vertex, ratio)));\n      return ['intersectsGeoPolygon', _shape];\n    default:\n      return [];\n  }\n}\n\nexport function resolveCollionsOnNode(node, shape) {\n  const [intersectionType, _shape] = resolveShape(shape, node.dpi);\n  const collisions = [];\n\n  if (intersectionType) {\n    findAllCollisions([node], intersectionType, collisions, _shape);\n    appendInputShape(shape, collisions);\n  }\n  return collisions;\n}\n\nexport function hasCollisionOnNode(node, shape) {\n  const [intersectionType, _shape] = resolveShape(shape, node.dpi);\n\n  return hasCollision([node], intersectionType, _shape);\n}\n","import extend from 'extend';\nimport Node from '../node';\nimport { create as geometry } from '../../geometry';\nimport { create as geometryCollection } from '../../geometry/geometry-collection';\nimport Matrix from '../../math/matrix';\nimport resolveTransform from '../transform-resolver';\nimport nodeSelector from '../node-selector';\nimport createSceneNode from '../scene-node';\nimport { resolveCollionsOnNode, hasCollisionOnNode } from '../collision-resolver';\nimport { assignMappedAttribute } from '../attributes';\n\n/**\n * @private\n * @typedef {object} DisplayObject\n * @property {string} type\n * @property {string|GradientNode|PatternNode} [fill] - {@link https://www.w3.org/TR/fill-stroke-3/#fill-shorthand}\n * @property {string|GradientNode|PatternNode} [stroke] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke}\n * @property {number} [strokeWidth] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke-width}\n * @property {string|number[]} [strokeDasharray] - {@link https://www.w3.org/TR/fill-stroke-3/#propdef-stroke-dasharray}\n * @property {number} [opacity] - {@link https://www.w3.org/TR/css-color-4/#propdef-opacity}\n * @property {string} [transform] - {@link https://www.w3.org/TR/SVG/coords.html#TransformAttribute}\n * @property {object} [data] - Data object, may contain any properties\n * @property {object} [desc] - Meta-data object, may contain any properties\n * @property {string} [tag] - White-space seperated list of tags\n * @property {string} [id] - Unique identifier of the node\n * @property {object} [collider]\n */\n\nclass DisplayObject extends Node {\n  constructor(type) {\n    super(type);\n    this._stage = null;\n    this._collider = {\n      type: null,\n      definition: null,\n      fn: null,\n    };\n    this._attrs = {};\n    this._node = null;\n  }\n\n  set(v = {}) {\n    this.node = v;\n\n    const { data, desc, tag, strokeReference, fillReference } = v;\n\n    assignMappedAttribute(this.attrs, v);\n\n    if (typeof data !== 'undefined') {\n      this.data = data;\n    }\n\n    if (typeof desc === 'object') {\n      this.desc = extend(true, {}, desc);\n    }\n\n    if (typeof tag === 'string') {\n      this.tag = tag;\n    }\n\n    if (typeof strokeReference === 'string') {\n      this.strokeReference = strokeReference;\n    }\n\n    if (typeof fillReference === 'string') {\n      this.fillReference = fillReference;\n    }\n  }\n\n  findShapes(selector) {\n    return nodeSelector.find(selector, this).map((node) => createSceneNode(node));\n  }\n\n  getItemsFrom(shape) {\n    return resolveCollionsOnNode(this, shape);\n  }\n\n  containsPoint(p) {\n    return hasCollisionOnNode(this, p);\n  }\n\n  intersectsLine(line) {\n    return hasCollisionOnNode(this, line);\n  }\n\n  intersectsRect(rect) {\n    return hasCollisionOnNode(this, rect);\n  }\n\n  intersectsCircle(circle) {\n    return hasCollisionOnNode(this, circle);\n  }\n\n  intersectsPolygon(polygon) {\n    return hasCollisionOnNode(this, polygon);\n  }\n\n  intersectsGeoPolygon(geopolygon) {\n    return hasCollisionOnNode(this, geopolygon);\n  }\n\n  resolveLocalTransform(m = new Matrix()) {\n    if (typeof this.attrs.transform !== 'undefined') {\n      resolveTransform(this.attrs.transform, m);\n    }\n    this.modelViewMatrix = m.clone();\n  }\n\n  resolveGlobalTransform(m = new Matrix()) {\n    const a = this.ancestors;\n\n    if (a.length > 0) {\n      for (let i = a.length - 1; i >= 0; i--) {\n        a[i].resolveLocalTransform(m);\n        m = a[i].modelViewMatrix;\n      }\n    }\n\n    this.resolveLocalTransform(m);\n  }\n\n  /**\n   * Returns the value of attribute a.\n   * @private\n   * @param a\n   * @returns {*} The value of attribute a.\n   */\n  attr(a) {\n    return this.attrs[a];\n  }\n\n  equals(d) {\n    const attrs = this.attrs;\n    const attrKeys = Object.keys(attrs);\n    const dAttrs = d.attrs;\n    const dAttrKeys = Object.keys(dAttrs);\n    if (attrKeys.length !== dAttrKeys.length) {\n      return false;\n    }\n    for (let i = 0; i < attrKeys.length; i++) {\n      const key = attrKeys[i];\n      if (!Object.hasOwnProperty.call(dAttrs, key)) {\n        return false;\n      }\n      if (attrs[key] !== dAttrs[key]) {\n        return false;\n      }\n    }\n\n    return super.equals(d);\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.attrs = this.attrs;\n    return json;\n  }\n\n  get attrs() {\n    return this._attrs;\n  }\n\n  get stage() {\n    if (this._parent && !this._stage) {\n      // lazy evaluation\n      this._stage = this._parent.stage;\n    } else if (!this._parent && this._stage !== this) {\n      this._stage = null;\n    }\n    return this._stage;\n  }\n\n  set modelViewMatrix(m) {\n    this._mvm = m;\n    this._imvm = null;\n  }\n\n  get modelViewMatrix() {\n    return this._mvm;\n  }\n\n  get inverseModelViewMatrix() {\n    this._imvm = this._imvm ? this._imvm : this._mvm.clone().invert();\n    return this._imvm;\n  }\n\n  set node(n) {\n    this._node = n;\n  }\n\n  get node() {\n    return this._node;\n  }\n\n  set collider(definition) {\n    const type = Array.isArray(definition) ? 'collection' : definition && definition.type;\n    if (typeof type !== 'string') {\n      // Non string type definition resets the collider\n      this._collider.type = null;\n      this._collider.definition = null;\n      this._collider.fn = null;\n      return;\n    }\n\n    // Check if a collider of the same type is already defined, if so, do an update\n    if (this._collider !== null && this._collider.type === type && this._collider.fn !== null) {\n      this._collider.fn.set(definition);\n      this._collider.definition = definition;\n      return;\n    }\n\n    // Store the definition so that it can be lazy evaluated\n    this._collider.type = type;\n    this._collider.definition = definition;\n  }\n\n  get collider() {\n    // Resolve geometry function from cache\n    if (this._collider.fn !== null) {\n      return this._collider.fn;\n    }\n\n    // Resolve geometry function and store it in cache\n    switch (this._collider.type) {\n      case 'collection':\n        this._collider.fn = geometryCollection(this._collider.definition);\n        break;\n      case 'frontChild': // TODO Deprecate\n        // Front child is not resolved by a function on this node, but instead on one of its child nodes\n        return true;\n      case 'bounds':\n        this._collider.fn = geometry('rect', this.boundingRect());\n        break;\n      case 'line':\n      case 'rect':\n      case 'circle':\n      case 'polygon':\n      case 'geopolygon':\n      case 'polyline':\n        this._collider.fn = geometry(this._collider.type, this._collider.definition);\n        break;\n      default:\n        return null;\n    }\n\n    return this._collider.fn;\n  }\n\n  get colliderType() {\n    return this._collider.type;\n  }\n}\n\nexport default DisplayObject;\n","import Node from './node';\n\nclass NodeContainer extends Node {\n  addChild(c) {\n    if (!c || !(c instanceof Node)) {\n      throw new TypeError(`Expecting a Node as argument, but got ${c}`);\n    }\n\n    if (c === this) {\n      throw new Error('Can not add itself as child!');\n    }\n\n    if (c._children && c._children.length && this.ancestors.indexOf(c) >= 0) {\n      throw new Error('Can not add an ancestor as child!');\n    }\n\n    if (c._parent && c._parent !== this) {\n      c._parent.removeChild(c);\n    }\n\n    this._children.push(c);\n    c._parent = this;\n    c._ancestors = null;\n\n    return this;\n  }\n\n  addChildren(children) {\n    let i,\n      num = children ? children.length : 0;\n    for (i = 0; i < num; i++) {\n      this.addChild(children[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Removes given child node from this node.\n   * @private\n   * @param {Node} c\n   * @returns {Node} This object, for chaining purposes.\n   */\n  removeChild(c) {\n    const indx = this._children.indexOf(c);\n    if (indx >= 0) {\n      this._children.splice(indx, 1);\n      c._parent = null;\n      c._ancestors = null;\n    }\n    return this;\n  }\n\n  removeChildren(children) {\n    let i, num;\n    if (!this._children) {\n      return this;\n    }\n    if (children) {\n      num = children.length;\n      for (i = 0; i < num; i++) {\n        this.removeChild(children[i]);\n      }\n    } else {\n      while (this._children.length) {\n        this.removeChild(this._children[0]);\n      }\n    }\n    return this;\n  }\n}\n\nexport default NodeContainer;\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @private\n * @extends DisplayObject\n * @typedef {object} ContainerNode\n * @property {DisplayObject[]} children - Array of child nodes\n */\n\nconst NC = NodeContainer.prototype;\n\nexport default class Container extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const { collider } = v;\n    const opts = extend(\n      {\n        type: null,\n      },\n      collider\n    );\n\n    this.collider = opts;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  appendChildRect(child, includeTransform) {\n    if (typeof child.bounds !== 'undefined') {\n      const rect = this.__boundingRect[includeTransform] || {};\n      const [p0, , p2] = child.bounds(includeTransform);\n      const { x: xMin, y: yMin } = p0;\n      const { x: xMax, y: yMax } = p2;\n\n      const _xMax = isNaN(rect.width) ? xMax : Math.max(xMax, rect.width + rect.x);\n      const _yMax = isNaN(rect.height) ? yMax : Math.max(yMax, rect.height + rect.y);\n\n      rect.x = isNaN(rect.x) ? xMin : Math.min(xMin, rect.x);\n      rect.y = isNaN(rect.y) ? yMin : Math.min(yMin, rect.y);\n      rect.width = _xMax - rect.x;\n      rect.height = _yMax - rect.y;\n\n      this.__boundingRect[includeTransform] = rect;\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n\n    const num = this.children.length;\n\n    for (let i = 0; i < num; i++) {\n      this.appendChildRect(this.children[i], includeTransform);\n    }\n\n    this.__boundingRect[includeTransform] = extend(\n      {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n      this.__boundingRect[includeTransform]\n    );\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      this.appendChildRect(c, true);\n      const opts = extend(\n        {\n          type: 'bounds',\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n        },\n        this.__boundingRect.true\n      );\n      this.collider = opts;\n    }\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n    const num = children.length;\n\n    if (this._collider && this._collider.type === 'bounds' && num > 0) {\n      for (let i = 0; i < num; i++) {\n        this.appendChildRect(children[i], true);\n      }\n      const opts = extend(\n        {\n          type: 'bounds',\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n        },\n        this.__boundingRect.true\n      );\n      this.collider = opts;\n    }\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      this.__boundingRect = { true: null, false: null };\n      this.__bounds = { true: null, false: null };\n      const opts = extend(this.boundingRect(true), { type: 'bounds' });\n      this.collider = opts;\n    }\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    if (this._collider && this._collider.type === 'bounds') {\n      this.__boundingRect = { true: null, false: null };\n      this.__bounds = { true: null, false: null };\n      const opts = extend(this.boundingRect(true), { type: 'bounds' });\n      this.collider = opts;\n    }\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new Container(...s);\n}\n","import Container from './container';\n\nexport default class Stage extends Container {\n  constructor(dpi) {\n    super('stage');\n    this._stage = this;\n    this._dpiRatio = dpi || 1;\n  }\n\n  get dpi() {\n    return this._dpiRatio;\n  }\n}\n\nexport function create(...a) {\n  return new Stage(...a);\n}\n","import DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @private\n * @typedef {object} GradientNode\n * @property {string} type\n * @property {object[]} stops\n * @property {string} [stops[].type=linearGradient] - radialGradient|linearGradient\n * @property {string} stops[].color - {@link https://www.w3.org/TR/SVG/types.html#DataTypeColor}\n * @property {string} [stops[].opacity=1] - {@link https://www.w3.org/TR/css-color-4/#propdef-opacity}\n * @property {number} stops[].offset - {@link https://www.w3.org/TR/SVG/pservers.html#StopElementOffsetAttribute}\n * @property {number} [degree] - Gradient rotation angle\n */\n\n/**\n * @private\n * @typedef {object} GradientItemNode\n * @property {string} id - Gradient identifier\n * @property {number} x1 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementX1Attribute}\n * @property {number} y1 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementY1Attribute}\n * @property {number} x2 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementX2Attribute}\n * @property {number} y2 - {@link https://www.w3.org/TR/SVG/pservers.html#LinearGradientElementY2Attribute}\n * @property {number} offset - {@link https://www.w3.org/TR/SVG/pservers.html#StopElementOffsetAttribute}\n * @property {object} style - {@link https://www.w3.org/TR/SVG/styling.html#StyleAttribute}\n */\n\nconst NC = NodeContainer.prototype;\n\nconst allowedAttrs = ['x1', 'x2', 'y1', 'y2', 'id', 'offset', 'style'];\n\nexport default class GradientItem extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n    this._boundingRect = {};\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const attrs = this.attrs;\n\n    let attrKey = '';\n\n    for (let i = 0, len = allowedAttrs.length; i !== len; i++) {\n      attrKey = allowedAttrs[i];\n\n      if (typeof v[attrKey] !== 'undefined') {\n        attrs[attrKey] = v[attrKey];\n      }\n    }\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new GradientItem(...s);\n}\n","import DisplayObject from './display-object';\nimport NodeContainer from '../node-container';\n\n/**\n * @private\n * @experimental\n * @typedef {object} PatternNode\n * @property {string} [type='pattern']\n * @property {string} fill\n * @property {number} width\n * @property {number} height\n * @property {object[]} shapes\n * @example\n * // Stripe pattern\n * {\n *   type: 'pattern',\n *   fill: 'red',\n *   width: 4,\n *   height: 4,\n *   shapes: [\n *     { type: 'rect', x: 3, y: 0, width: 1, height: 1 },\n *     { type: 'rect', x: 2, y: 1, width: 1, height: 1 },\n *     { type: 'rect', x: 1, y: 2, width: 1, height: 1 },\n *     { type: 'rect', x: 0, y: 3, width: 1, height: 1 },\n *   ]\n * }\n */\n\nconst NC = NodeContainer.prototype;\n\nconst allowedAttrs = ['patternUnits', 'x', 'y', 'width', 'height', 'id'];\n\nexport default class PatternItem extends DisplayObject {\n  constructor(s = {}) {\n    const { type = 'container' } = s;\n    super(type);\n    this.set(s);\n    this._boundingRect = {};\n  }\n\n  set(v = {}) {\n    super.set(v);\n\n    const attrs = this.attrs;\n\n    let attrKey = '';\n\n    for (let i = 0, len = allowedAttrs.length; i !== len; i++) {\n      attrKey = allowedAttrs[i];\n\n      if (typeof v[attrKey] !== 'undefined') {\n        attrs[attrKey] = v[attrKey];\n      }\n    }\n  }\n\n  addChild(c) {\n    const r = NC.addChild.call(this, c);\n\n    return r;\n  }\n\n  addChildren(children) {\n    const r = NC.addChildren.call(this, children);\n\n    return r;\n  }\n\n  removeChild(c) {\n    c._stage = null;\n    let desc = c.descendants,\n      num = desc ? desc.length : 0,\n      i;\n    // remove reference to stage from all descendants\n    for (i = 0; i < num; i++) {\n      desc[i]._stage = null;\n    }\n\n    NC.removeChild.call(this, c);\n\n    return this;\n  }\n\n  removeChildren(children) {\n    NC.removeChildren.call(this, children);\n\n    return this;\n  }\n}\n\nexport function create(...s) {\n  return new PatternItem(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { rectToPoints, getMinMax } from '../../geometry/util';\n\n/**\n * @private\n * @extends DisplayObject\n * @typedef {object} RectNode\n * @property {number} x - X coordinate\n * @property {number} y - Y coordinate\n * @property {number} width - Width\n * @property {number} height- Height\n */\n\nexport default class Rect extends DisplayObject {\n  constructor(...s) {\n    super('rect');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x = 0, y = 0, width = 0, height = 0, rx = 0, ry = 0, collider } = v;\n    const opts = extend(\n      {\n        type: 'rect',\n        x,\n        y,\n        width,\n        height,\n      },\n      collider\n    );\n\n    super.set(v);\n\n    if (width >= 0) {\n      this.attrs.x = x;\n      this.attrs.width = width;\n    } else {\n      this.attrs.x = x + width;\n      this.attrs.width = -width;\n    }\n\n    if (height >= 0) {\n      this.attrs.y = y;\n      this.attrs.height = height;\n    } else {\n      this.attrs.y = y + height;\n      this.attrs.height = -height;\n    }\n\n    if (rx > 0) {\n      this.attrs.rx = rx;\n    }\n    if (ry > 0) {\n      this.attrs.ry = ry;\n    }\n\n    this.collider = opts;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n    const p = rectToPoints(this.attrs);\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(p) : p;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin,\n      y: yMin,\n      width: xMax - xMin,\n      height: yMax - yMin,\n    };\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Rect(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { getMinMax } from '../../geometry/util';\n\n/**\n * @private\n * @extends DisplayObject\n * @typedef {object} CircleNode\n * @property {number} cx - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementCXAttribute}\n * @property {number} cy - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementCYAttribute}\n * @property {number} r - {@link https://www.w3.org/TR/SVG/shapes.html#CircleElementRAttribute}\n */\n\nexport default class Circle extends DisplayObject {\n  constructor(...s) {\n    super('circle');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { cx = 0, cy = 0, r = 0, collider } = v;\n    const opts = extend(\n      {\n        type: 'circle',\n        cx,\n        cy,\n        r,\n      },\n      collider\n    );\n\n    super.set(v);\n\n    this.attrs.cx = cx;\n    this.attrs.cy = cy;\n    this.attrs.r = r;\n\n    this.collider = opts;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n    // TODO Handle Circle bounds correctly for a circle transformed to an non axis aligned ellipse/circle\n    // Current solution only rotate the bounds, giving a larger boundingRect if rotated\n    const p = this.bounds(includeTransform);\n\n    this.__boundingRect[includeTransform] = {\n      x: p[0].x,\n      y: p[0].y,\n      width: p[2].x - p[0].x,\n      height: p[2].y - p[0].y,\n    };\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    // TODO Handle Circle bounds correctly for a circle transformed to an non axis aligned ellipse/circle\n    const { cx, cy, r: rX, r: rY } = this.attrs;\n    const x = cx - rX;\n    const y = cy - rY;\n    let w = rX * 2;\n    let h = rY * 2;\n    let p = [\n      { x, y },\n      { x: x + w, y },\n      { x: x + w, y: y + h },\n      { x, y: y + h },\n    ];\n\n    if (includeTransform && this.modelViewMatrix) {\n      p = this.modelViewMatrix.transformPoints(p);\n      const [xMin, yMin, xMax, yMax] = getMinMax(p);\n      w = xMax - xMin;\n      h = yMax - yMin;\n\n      this.__bounds[includeTransform] = [\n        { x: xMin, y: yMin },\n        { x: xMin + w, y: yMin },\n        { x: xMin + w, y: yMin + h },\n        { x: xMin, y: yMin + h },\n      ];\n    } else {\n      this.__bounds[includeTransform] = p;\n    }\n\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Circle(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { lineToPoints, getMinMax } from '../../geometry/util';\n\n/**\n * @private\n * @extends DisplayObject\n * @typedef {object} LineNode\n * @property {number} x1 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementX1Attribute}\n * @property {number} y1 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementY1Attribute}\n * @property {number} x2 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementX2Attribute}\n * @property {number} y2 - {@link https://www.w3.org/TR/SVG/shapes.html#LineElementY2Attribute}\n */\n\nexport default class Line extends DisplayObject {\n  constructor(...s) {\n    super('line');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x1 = 0, y1 = 0, x2 = 0, y2 = 0, collider } = v;\n    super.set(v);\n    this.attrs.x1 = x1;\n    this.attrs.y1 = y1;\n    this.attrs.x2 = x2;\n    this.attrs.y2 = y2;\n\n    const defaultCollider = {\n      type: 'line',\n      x1,\n      y1,\n      x2,\n      y2,\n    };\n    this.collider = extend(defaultCollider, collider);\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n    let p = lineToPoints(this.attrs);\n\n    if (includeTransform && this.modelViewMatrix) {\n      p = this.modelViewMatrix.transformPoints(p);\n    }\n\n    const [xMin, yMin, xMax, yMax] = getMinMax(p);\n    const hasSize = xMin !== xMax || yMin !== yMax;\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin,\n      y: yMin,\n      width: hasSize ? Math.max(1, xMax - xMin) : 0,\n      height: hasSize ? Math.max(1, yMax - yMin) : 0,\n    };\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Line(...s);\n}\n","const PI_2 = Math.PI / 2;\n\nfunction lineAngle(p0, p1) {\n  const t = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n  return t < 0 ? t + Math.PI * 2 : t;\n}\n\n// TODO Find a more accurate method to find the open and closed points\nfunction rotatePoint(p, angle, radius) {\n  return {\n    x: p.x + Math.cos(angle) * radius,\n    y: p.y + Math.sin(angle) * radius,\n  };\n}\n\nexport default function polylineToPolygonCollider(points, radius, opts = {}) {\n  const open = [];\n  const close = [];\n\n  // TODO handle case if points.length === 2\n\n  if (opts.forceOrientation === 'h') {\n    const start = points[0].x < points[1].x ? -1 : 1;\n    const end = points[points.length - 1].x > points[points.length - 2].x ? 1 : -1;\n\n    points.unshift({ x: points[0].x + start, y: points[0].y });\n    points.push({ x: points[points.length - 1].x + end, y: points[points.length - 1].y });\n  } else if (opts.forceOrientation === 'v') {\n    const start = points[0].y < points[1].y ? -1 : 1;\n    const end = points[points.length - 1].y > points[points.length - 2].y ? 1 : -1;\n\n    points.unshift({ x: points[0].x, y: points[0].y + start });\n    points.push({ x: points[points.length - 1].x, y: points[points.length - 1].y + end });\n  }\n\n  const len = points.length - 1;\n  for (let i = 1; i < len; i++) {\n    const prev = points[i - 1];\n    const curr = points[i];\n    const next = points[i + 1];\n    const currToPrev = lineAngle(curr, prev);\n    const currToNext = lineAngle(curr, next);\n    const openAngle = (currToPrev + currToNext) / 2;\n    const closeAngle = openAngle + Math.PI;\n    const maxAngle = Math.max(openAngle, closeAngle);\n    const minAngle = Math.min(openAngle, closeAngle);\n    const openClose = currToPrev > currToNext;\n\n    if (i === 1) {\n      const prevToCurr = lineAngle(prev, curr);\n      open.push(rotatePoint(prev, prevToCurr - PI_2, radius));\n      close.unshift(rotatePoint(prev, prevToCurr + PI_2, radius));\n    }\n\n    const opened = openClose ? maxAngle : minAngle;\n    const closed = openClose ? minAngle : maxAngle;\n\n    open.push(rotatePoint(curr, opened, radius));\n    close.unshift(rotatePoint(curr, closed, radius));\n\n    if (i === len - 1) {\n      const nextToCurr = lineAngle(next, curr);\n      open.push(rotatePoint(next, nextToCurr + PI_2, radius));\n      close.unshift(rotatePoint(next, nextToCurr - PI_2, radius));\n    }\n  }\n\n  return {\n    type: 'polygon',\n    vertices: [...open, ...close],\n  };\n}\n","export default function flatten2d(ary) {\n  const newAry = [];\n  let a;\n  let len = ary.length;\n  for (let i = 0; i < len; i++) {\n    a = ary[i];\n    for (let k = 0; k < a.length; k++) {\n      newAry.push(a[k]);\n    }\n  }\n\n  return newAry;\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { getMinMax } from '../../geometry/util';\nimport pathToSegments from '../parse-path-d';\nimport polylineToPolygonCollider from '../polyline-to-polygon-collider';\nimport flatten from '../../utils/flatten-array';\n\nconst EPSILON = 1e-12;\n\n/**\n * @private\n * @extends DisplayObject\n * @typedef {object} PathNode\n * @property {string} d - {@link https://www.w3.org/TR/SVG/paths.html#DAttribute}\n */\n\nfunction isClosed(points) {\n  if (points.length < 2) {\n    return false;\n  }\n  const p0 = points[0];\n  const p1 = points[points.length - 1];\n\n  return Math.abs(p0.x - p1.x) < EPSILON && Math.abs(p0.y - p1.y) < EPSILON;\n}\n\nexport default class Path extends DisplayObject {\n  constructor(...s) {\n    super('path');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    super.set(v);\n    this.segments = [];\n    this.points = [];\n    this.attrs.d = v.d;\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n\n    if (Array.isArray(v.collider) || (typeof v.collider === 'object' && typeof v.collider.type !== 'undefined')) {\n      this.collider = v.collider;\n    } else if (v.d) {\n      this.segments = pathToSegments(v.d);\n      if (this.segments.length > 1 && this.segments.every((segment) => isClosed(segment))) {\n        this.collider = extend(\n          {\n            type: 'geopolygon',\n            vertices: this.segments,\n          },\n          v.collider\n        );\n        return;\n      }\n      this.segments.forEach((segment) => {\n        if (segment.length <= 1) {\n          // Omit empty and single point segments\n        } else if (isClosed(segment)) {\n          this.collider = extend(\n            {\n              type: 'polygon',\n              vertices: segment,\n            },\n            v.collider\n          );\n        } else if (typeof v.collider === 'object' && v.collider.visual) {\n          const size = this.attrs['stroke-width'] / 2;\n          this.collider = polylineToPolygonCollider(segment, size, v.collider);\n        } else {\n          this.collider = extend(\n            {\n              type: 'polyline',\n              points: segment,\n            },\n            v.collider\n          );\n        }\n      });\n    }\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n\n    if (!this.points.length) {\n      this.segments = this.segments.length ? this.segments : pathToSegments(this.attrs.d);\n      this.points = flatten(this.segments);\n    }\n\n    const pt =\n      includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(this.points) : this.points;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin || 0,\n      y: yMin || 0,\n      width: xMax - xMin || 0,\n      height: yMax - yMin || 0,\n    };\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Path(...s);\n}\n","import extend from 'extend';\nimport DisplayObject from './display-object';\nimport { rectToPoints, getMinMax } from '../../geometry/util';\n\nfunction hasData({ data, _boundingRect, _textBoundsFn }) {\n  return typeof data !== 'undefined' && data !== null && (_boundingRect || _textBoundsFn);\n}\n\n/**\n * @private\n * @extends DisplayObject\n * @typedef {object} TextNode\n * @property {string} text\n * @property {number} x - {@link https://www.w3.org/TR/SVG/text.html#TextElementXAttribute}\n * @property {number} y - {@link https://www.w3.org/TR/SVG/text.html#TextElementYAttribute}\n * @property {number} [dx] - {@link https://www.w3.org/TR/SVG/text.html#TextElementDXAttribute}\n * @property {number} [dy] - {@link https://www.w3.org/TR/SVG/text.html#TextElementDYAttribute}\n * @property {string} [fontSize] - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n * @property {string} [fontFamily] - {@link https://www.w3.org/TR/SVG/text.html#FontPropertiesUsedBySVG}\n * @property {Rect} [boundingRect] - Explicitly set the bounding rectangle of the node. Has predence over textBoundsFn\n * @property {function} [textBoundsFn] - Implicitly set the bounding rectangle of the node, the function must return an object with x, y, width and height attributes\n * @property {string} [baseline] - Alias for dominantBaseline\n * @property {string} [dominantBaseline] - {@link https://www.w3.org/TR/SVG/text.html#BaselineAlignmentProperties}\n * @property {string} [anchor] - Alias for textAnchor\n * @property {string} [textAnchor] - {@link https://www.w3.org/TR/SVG/text.html#TextAnchorProperty}\n * @property {string} [wordBreak] - Word-break option\n * @property {number} [maxWidth] - Maximum allowed text width\n * @property {number} [maxHeight] - Maximum allowed text height. If both maxLines and maxHeight are set, the property that results in the fewest number of lines is used\n * @property {number} [maxLines] - Maximum number of lines allowed\n * @property {number} [lineHeight=1.2] - Line height\n */\n\nexport default class Text extends DisplayObject {\n  constructor(...s) {\n    super('text');\n    this.set(...s);\n  }\n\n  set(v = {}) {\n    const { x = 0, y = 0, dx = 0, dy = 0, textBoundsFn, text, title, collider, boundingRect, ellipsed } = v;\n\n    super.set(v);\n    this.attrs.x = x;\n    this.attrs.y = y;\n    this.attrs.dx = dx;\n    this.attrs.dy = dy;\n    this.attrs.text = text;\n    if (typeof title !== 'undefined') {\n      this.attrs.title = String(title);\n    }\n    if (typeof boundingRect === 'object') {\n      this._textBoundsFn = () => boundingRect;\n    } else if (typeof textBoundsFn === 'function') {\n      this._textBoundsFn = textBoundsFn;\n    }\n\n    if (typeof ellipsed === 'string') {\n      this.ellipsed = ellipsed;\n    }\n\n    this.collider = extend({ type: hasData(this) ? 'bounds' : null }, collider);\n\n    this.__boundingRect = { true: null, false: null };\n    this.__bounds = { true: null, false: null };\n  }\n\n  boundingRect(includeTransform = false) {\n    if (this.__boundingRect[includeTransform] !== null) {\n      return this.__boundingRect[includeTransform];\n    }\n\n    let rect;\n    if (typeof this._textBoundsFn === 'function') {\n      rect = this._textBoundsFn(this.attrs);\n    } else {\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      };\n    }\n\n    const p = rectToPoints(rect);\n    const pt = includeTransform && this.modelViewMatrix ? this.modelViewMatrix.transformPoints(p) : p;\n    const [xMin, yMin, xMax, yMax] = getMinMax(pt);\n\n    this.__boundingRect[includeTransform] = {\n      x: xMin,\n      y: yMin,\n      width: xMax - xMin,\n      height: yMax - yMin,\n    };\n\n    return this.__boundingRect[includeTransform];\n  }\n\n  bounds(includeTransform = false) {\n    if (this.__bounds[includeTransform] !== null) {\n      return this.__bounds[includeTransform];\n    }\n    const rect = this.boundingRect(includeTransform);\n\n    this.__bounds[includeTransform] = [\n      { x: rect.x, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y },\n      { x: rect.x + rect.width, y: rect.y + rect.height },\n      { x: rect.x, y: rect.y + rect.height },\n    ];\n    return this.__bounds[includeTransform];\n  }\n}\n\nexport function create(...s) {\n  return new Text(...s);\n}\n","import { create as stage } from './stage';\nimport { create as container } from './container';\nimport { create as gradientItem } from './gradient-item';\nimport { create as patternItem } from './pattern-item';\nimport { create as rect } from './rect';\nimport { create as circle } from './circle';\nimport { create as line } from './line';\nimport { create as path } from './path';\nimport { create as text } from './text';\nimport registry from '../../utils/registry';\n\nconst reg = registry();\n\nreg.add('rect', rect);\nreg.add('circle', circle);\nreg.add('text', text);\nreg.add('line', line);\nreg.add('path', path);\nreg.add('stage', stage);\nreg.add('container', container);\nreg.add('defs', container);\nreg.add('linearGradient', gradientItem);\nreg.add('radialGradient', gradientItem);\nreg.add('stop', gradientItem);\nreg.add('pattern', patternItem);\n\n/* eslint-disable import/prefer-default-export */\nexport function create(type, input) {\n  return reg.get(type)(input);\n}\n/* eslint-enable import/prefer-default-export */\n","import extend from 'extend';\n\n/**\n * Creates a context. Input an array of strings that should be inherited by the context.\n * @private\n *\n * @param  {Array}  [whitelist=[]]  An array of whitelisted string keys to inherit\n * @return {Function}               A context function\n */\nfunction contextFactory(whitelist = []) {\n  const states = [{}];\n\n  /**\n   * Returns the current context as an object. The object is mutable.\n   * @private\n   *\n   * @return {Object}   Current context\n   */\n  function context() {\n    // Returns the current context, the last in the stack.\n    const item = states[states.length - 1];\n    return item;\n  }\n\n  /**\n   * Call context.save() to save the current context and move down the stack.\n   *\n   * @param  {Object} [item={}]   Optional item to save.\n   * @return {Object}             The current context, just as context()\n   */\n  context.save = function save(item = {}) {\n    const current = context();\n    const obj = {};\n    let key = '';\n\n    // Only inherit whitelisted properties\n    for (let i = 0; i < whitelist.length; i++) {\n      key = whitelist[i];\n      if (typeof current[key] !== 'undefined') {\n        obj[key] = current[key];\n      }\n    }\n\n    // Extend the new object with the saved item\n    extend(obj, item);\n\n    // Push it to the stack\n    states.push(obj);\n\n    // Return the new current context\n    return context();\n  };\n\n  /**\n   * Restore the previous context. Returns the context.\n   *\n   * @return {Undefined}   Returns nothing\n   */\n  context.restore = function restore() {\n    // Remove the last element from the stack\n    states.splice(states.length - 1, 1);\n  };\n\n  return context;\n}\n\nexport { contextFactory as default };\n","import { create } from './display-objects';\nimport Matrix from '../math/matrix';\nimport resolveTransform from './transform-resolver';\nimport contextFactory from './context';\n\nconst styleContext = contextFactory(['stroke', 'fill', 'strokeWidth', 'opacity', 'fontFamily', 'fontSize', 'baseline']);\n\nfunction doEvent(state, listeners) {\n  if (!Array.isArray(listeners)) {\n    return;\n  }\n\n  for (let i = 0, len = listeners.length; i < len; i++) {\n    listeners[i](state);\n  }\n}\n\nfunction updateState(state, index, nodes) {\n  state.node = nodes[index];\n  state.index = index;\n}\n\nfunction traverse(items, parent, matrix, on) {\n  let disabled = false;\n  const state = {\n    siblings: items,\n    node: null,\n    index: 0,\n  };\n  for (let i = 0, len = items.length; i < len; i++) {\n    updateState(state, i, items);\n    doEvent(state, on.create);\n\n    disabled = typeof state.node.disabled === 'function' ? state.node.disabled() : state.node.disabled;\n    if (disabled) {\n      continue;\n    }\n\n    // Save the current style context to be able to inherit styles\n    state.node = styleContext.save(state.node);\n\n    const displayNode = create(state.node.type, state.node);\n    if (displayNode) {\n      if (state.node.transform) {\n        matrix.save();\n        resolveTransform(state.node.transform, matrix);\n      }\n\n      if (!matrix.isIdentity()) {\n        displayNode.modelViewMatrix = matrix.clone();\n      }\n\n      parent.addChild(displayNode);\n      if (state.node.children) {\n        traverse(state.node.children, displayNode, matrix, on);\n      }\n\n      if (state.node.transform) {\n        matrix.restore();\n      }\n    }\n\n    // Revert to previous style context\n    styleContext.restore();\n  }\n}\n\nexport default function scene({ items, stage, dpi, on = {} }) {\n  if (!stage) {\n    stage = create('stage', dpi);\n  }\n\n  traverse(items, stage, new Matrix(), on);\n\n  return stage;\n}\n","import { degreesToPoints } from '../../../core/math/angles';\n\n/**\n * Get or create a gradient\n * @ignore\n * @param  {Object} g        Canvas 2d context\n * @param  {Object} node    Current node (for width/height properties)\n * @param  {Object} gradient The gradient properties\n * @return {Object}          A canvas compatible radial or linear gradient object\n */\nexport default function createCanvasGradient(g, node, gradient) {\n  const { orientation, degree, stops = [] } = gradient;\n\n  let newGradient = null;\n\n  if (orientation === 'radial') {\n    const bounds = node.boundingRect();\n\n    newGradient = g.createRadialGradient(\n      bounds.x + bounds.width / 2,\n      bounds.y + bounds.height / 2,\n      1e-5,\n      bounds.x + bounds.width / 2,\n      bounds.y + bounds.height / 2,\n      Math.max(bounds.width, bounds.height) / 2\n    );\n  } else {\n    const points = degreesToPoints(degree);\n    ['x1', 'x2', 'y1', 'y2'].forEach((c) => {\n      if (c in gradient) {\n        points[c] = gradient[c];\n      }\n    });\n\n    const bounds = node.boundingRect();\n\n    newGradient = g.createLinearGradient(\n      bounds.x + points.x1 * bounds.width,\n      bounds.y + points.y1 * bounds.height,\n      bounds.x + points.x2 * bounds.width,\n      bounds.y + points.y2 * bounds.height\n    );\n  }\n\n  for (let i = 0, len = stops.length; i < len; i++) {\n    let stop = stops[i];\n    newGradient.addColorStop(stop.offset, stop.color);\n  }\n\n  return newGradient;\n}\n","function getPattern(pattern, dummyCanvas, ctx) {\n  dummyCanvas.width = pattern.width;\n  dummyCanvas.height = pattern.height;\n  ctx.save();\n  ctx.fillStyle = pattern.fill;\n\n  pattern.shapes.forEach((s) => {\n    switch (s.type) {\n      case 'rect':\n        ctx.rect(s.x, s.y, s.width, s.height);\n        break;\n      default:\n        break;\n    }\n  });\n  ctx.fill();\n  ctx.restore();\n  return ctx.createPattern(dummyCanvas, 'repeat');\n}\n\nexport default function patternizer(document) {\n  const dummyCanvas = document.createElement('canvas');\n  const ctx = dummyCanvas.getContext('2d');\n\n  let cache = {};\n\n  return {\n    create(pattern) {\n      const key = pattern.key;\n      if (key) {\n        cache[key] = cache[key] || getPattern(pattern, dummyCanvas, ctx);\n        return cache[key];\n      }\n      return getPattern(pattern, dummyCanvas, ctx);\n    },\n    clear() {\n      cache = {};\n    },\n  };\n}\n","/**\n * @typedef {object} Renderer~SizeDefinition\n * @property {number} [x] - x-coordinate\n * @property {number} [y] - y-coordinate\n * @property {number} [width] - Width\n * @property {number} [height] - Height\n * @property {object} [scaleRatio]\n * @property {number} [scaleRatio.x] - Scale ratio on x-axis\n * @property {number} [scaleRatio.y] - Scale ratio on y-axis\n * @property {object} [margin]\n * @property {number} [margin.left] - Left margin\n * @property {number} [margin.top] - Top margin\n */\n\n/**\n * Create the renderer box\n * @private\n * @param {Renderer~SizeDefinition} [opts]\n * @returns {Renderer~SizeDefinition} A svg renderer instance\n */\nexport default function createRendererBox({ x, y, width, height, scaleRatio, margin, edgeBleed } = {}) {\n  const box = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    scaleRatio: {\n      x: 1,\n      y: 1,\n    },\n    margin: {\n      left: 0,\n      top: 0,\n    },\n    edgeBleed: {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      bool: false,\n    },\n  };\n\n  box.x = isNaN(x) ? box.x : x;\n  box.y = isNaN(y) ? box.y : y;\n  box.width = isNaN(width) ? box.width : width;\n  box.height = isNaN(height) ? box.height : height;\n  if (typeof scaleRatio !== 'undefined') {\n    box.scaleRatio.x = isNaN(scaleRatio.x) ? box.scaleRatio.x : scaleRatio.x;\n    box.scaleRatio.y = isNaN(scaleRatio.y) ? box.scaleRatio.y : scaleRatio.y;\n  }\n\n  if (typeof margin !== 'undefined') {\n    box.margin.left = isNaN(margin.left) ? 0 : margin.left;\n    box.margin.top = isNaN(margin.top) ? 0 : margin.top;\n  }\n\n  if (typeof edgeBleed === 'object') {\n    ['left', 'right', 'top', 'bottom'].forEach((prop) => {\n      if (!isNaN(edgeBleed[prop]) && edgeBleed[prop] > 0) {\n        box.edgeBleed[prop] = edgeBleed[prop];\n        box.edgeBleed.bool = true;\n      }\n    });\n  }\n\n  box.computedPhysical = {\n    x: Math.round(box.margin.left + (box.x - box.edgeBleed.left) * box.scaleRatio.x),\n    y: Math.round(box.margin.top + (box.y - box.edgeBleed.top) * box.scaleRatio.y),\n    width: Math.round((box.width + box.edgeBleed.left + box.edgeBleed.right) * box.scaleRatio.x),\n    height: Math.round((box.height + box.edgeBleed.top + box.edgeBleed.bottom) * box.scaleRatio.y),\n  };\n\n  return box;\n}\n","import { measureText, textBounds } from '../text-manipulation';\n\n/**\n * Base renderer factory\n * @private\n */\nfunction create() {\n  /**\n   * @interface\n   * @alias Renderer\n   */\n  const renderer = {\n    /**\n     * Get the element this renderer is attached to\n     * @returns {HTMLElement}\n     */\n    element: () => {},\n\n    /**\n     * Get the root element of the renderer\n     * @returns {HTMLElement}\n     */\n    root: () => {},\n\n    /**\n     * @param {HTMLElement} element - Element to attach renderer to\n     * @returns {HTMLElement} Root element of the renderer\n     */\n    appendTo: () => {},\n\n    /**\n     * @param {object[]} nodes - Nodes to render\n     * @returns {boolean} True if the nodes were rendered, otherwise false\n     */\n    render: () => false,\n\n    /**\n     * Get nodes renderer at area\n     * @param {Point|Circle|Rect|Line|Polygon|Geopolygon} geometry - Get nodes that intersects with geometry\n     * @returns {SceneNode[]}\n     */\n    itemsAt: () => [],\n\n    /**\n     * Get all nodes matching the provided selector\n     * @param {string} selector CSS selector [type, attribute, universal, class]\n     * @returns {SceneNode[]} Array of objects containing matching nodes\n     */\n    findShapes: () => [],\n\n    /**\n     * Clear all child elements from the renderer root element\n     * @returns {Renderer} The renderer instance\n     */\n    clear: () => {},\n\n    /**\n     * Remove the renderer root element from its parent element\n     */\n    destory: () => {},\n\n    /**\n     * Set or Get the size definition of the renderer container.\n     * @param {Renderer~SizeDefinition} [opts] - Size definition\n     * @returns {Renderer~SizeDefinition} The current size definition\n     */\n    size: () => {},\n\n    /**\n     * @function\n     * @param {object} opts\n     * @param {string} opts.text - Text to measure\n     * @param {string} opts.fontSize - Font size\n     * @param {string} opts.fontFamily - Font family\n     * @returns {object} Width and height of text\n     * @example\n     * measureText({\n     *  text: 'my text',\n     *  fontSize: '12px',\n     *  fontFamily: 'Arial'\n     * }); // returns { width: 20, height: 12 }\n     */\n    measureText,\n\n    /**\n     * Calculates the bounding rectangle of a text node. Including any potential line breaks.\n     * @function\n     * @private\n     * @param {TextNode} node\n     * @return {Rect} The bounding rectangle\n     */\n    textBounds,\n\n    setKey: (key) => {\n      renderer.element().setAttribute('data-key', key);\n    },\n  };\n\n  return renderer;\n}\n\nexport { create as default };\n","function hasData(data) {\n  return typeof data !== 'undefined' && data !== null;\n}\n\nexport default function injectTextBoundsFn(renderer) {\n  return ({ node }) => {\n    if (node.type === 'text' && hasData(node.data) && !node.textBoundsFn) {\n      node.textBoundsFn = renderer.textBounds;\n    }\n  };\n}\n","import sceneFactory from '../../../core/scene-graph/scene';\nimport registry from '../../../core/utils/registry';\nimport { onLineBreak } from '../../text-manipulation';\nimport createCanvasGradient from './canvas-gradient';\nimport patternizer from './canvas-pattern';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\nimport injectTextBoundsFn from '../../text-manipulation/inject-textbounds';\n\nconst reg = registry();\n\nfunction toLineDash(p) {\n  if (Array.isArray(p)) {\n    return p;\n  }\n  if (typeof p === 'string') {\n    if (p.indexOf(',') !== -1) {\n      return p.split(',');\n    }\n    return p.split(' ');\n  }\n  return [];\n}\n\nfunction dpiScale(g) {\n  const dpr = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n  const backingStorePixelRatio =\n    g.webkitBackingStorePixelRatio ||\n    g.mozBackingStorePixelRatio ||\n    g.msBackingStorePixelRatio ||\n    g.oBackingStorePixelRatio ||\n    g.backingStorePixelRatio ||\n    1;\n  return dpr / backingStorePixelRatio;\n}\n\nfunction resolveMatrix(p, g) {\n  g.setTransform(p[0][0], p[1][0], p[0][1], p[1][1], p[0][2], p[1][2]);\n}\n\nfunction applyContext(g, s, shapeToCanvasMap, computed = {}) {\n  const computedKeys = Object.keys(computed);\n\n  for (let i = 0, len = shapeToCanvasMap.length; i < len; i++) {\n    let cmd = shapeToCanvasMap[i];\n\n    const shapeCmd = cmd[0];\n    const canvasCmd = cmd[1];\n    const convertCmd = cmd[2];\n\n    if (shapeCmd in s.attrs && !(canvasCmd in computed) && g[canvasCmd] !== s.attrs[shapeCmd]) {\n      const val = convertCmd ? convertCmd(s.attrs[shapeCmd]) : s.attrs[shapeCmd];\n      if (typeof g[canvasCmd] === 'function') {\n        g[canvasCmd](val);\n      } else {\n        g[canvasCmd] = val;\n      }\n    }\n  }\n\n  for (let i = 0, len = computedKeys.length; i < len; i++) {\n    const key = computedKeys[i];\n    g[key] = computed[key];\n  }\n}\n\nfunction renderShapes(shapes, g, shapeToCanvasMap, deps) {\n  for (let i = 0, len = shapes.length; i < len; i++) {\n    let shape = shapes[i];\n    let computed = {};\n    g.save();\n\n    if (shape.attrs && (shape.attrs.fill || shape.attrs.stroke)) {\n      if (shape.attrs.fill && typeof shape.attrs.fill === 'object' && shape.attrs.fill.type === 'gradient') {\n        computed.fillStyle = createCanvasGradient(g, shape, shape.attrs.fill);\n      } else if (shape.attrs.fill && typeof shape.attrs.fill === 'object' && shape.attrs.fill.type === 'pattern') {\n        computed.fillStyle = deps.patterns.create(shape.attrs.fill);\n      }\n\n      if (shape.attrs.stroke && typeof shape.attrs.stroke === 'object' && shape.attrs.stroke.type === 'gradient') {\n        computed.strokeStyle = createCanvasGradient(g, shape, shape.attrs.stroke);\n      } else if (\n        shape.attrs.stroke &&\n        typeof shape.attrs.stroke === 'object' &&\n        shape.attrs.stroke.type === 'pattern'\n      ) {\n        computed.strokeStyle = deps.patterns.create(shape.attrs.stroke);\n      }\n    }\n\n    applyContext(g, shape, shapeToCanvasMap, computed);\n\n    if (shape.modelViewMatrix) {\n      resolveMatrix(shape.modelViewMatrix.elements, g);\n    }\n\n    if (reg.has(shape.type)) {\n      reg.get(shape.type)(shape.attrs, {\n        g,\n        doFill: 'fill' in shape.attrs && shape.attrs.fill !== 'none',\n        doStroke: 'stroke' in shape.attrs && shape.attrs['stroke-width'] !== 0,\n        ellipsed: shape.ellipsed,\n      });\n    }\n    if (shape.children) {\n      renderShapes(shape.children, g, shapeToCanvasMap, deps);\n    }\n    g.restore();\n  }\n}\n\n/**\n * Create a new canvas renderer\n * @typedef {function} canvasRendererFactory\n * @param {function} [sceneFn] - Scene factory\n * @returns {Renderer} A canvas renderer instance\n */\nexport function renderer(sceneFn = sceneFactory) {\n  let el;\n  let scene;\n  let hasChangedRect = false;\n  let rect = createRendererBox();\n  const shapeToCanvasMap = [\n    ['fill', 'fillStyle'],\n    ['stroke', 'strokeStyle'],\n    ['opacity', 'globalAlpha'],\n    ['globalAlpha', 'globalAlpha'],\n    ['stroke-width', 'lineWidth'],\n    ['stroke-linejoin', 'lineJoin'],\n    ['stroke-dasharray', 'setLineDash', toLineDash],\n  ];\n\n  let patterns;\n\n  const canvasRenderer = create();\n\n  canvasRenderer.element = () => el;\n\n  canvasRenderer.root = () => el;\n\n  canvasRenderer.appendTo = (element) => {\n    if (!el) {\n      el = element.ownerDocument.createElement('canvas');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  canvasRenderer.render = (shapes) => {\n    if (!el) {\n      return false;\n    }\n    if (!patterns) {\n      patterns = patternizer(el.ownerDocument);\n    }\n\n    const g = el.getContext('2d');\n    const dpiRatio = dpiScale(g);\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    if (hasChangedRect) {\n      el.style.left = `${rect.computedPhysical.x}px`;\n      el.style.top = `${rect.computedPhysical.y}px`;\n      el.style.width = `${rect.computedPhysical.width}px`;\n      el.style.height = `${rect.computedPhysical.height}px`;\n      el.width = Math.round(rect.computedPhysical.width * dpiRatio);\n      el.height = Math.round(rect.computedPhysical.height * dpiRatio);\n    }\n\n    const sceneContainer = {\n      type: 'container',\n      children: shapes,\n      transform: rect.edgeBleed.bool\n        ? `translate(${rect.edgeBleed.left * dpiRatio * scaleX}, ${rect.edgeBleed.top * dpiRatio * scaleY})`\n        : '',\n    };\n\n    if (dpiRatio !== 1 || scaleX !== 1 || scaleY !== 1) {\n      sceneContainer.transform += `scale(${dpiRatio * scaleX}, ${dpiRatio * scaleY})`;\n    }\n\n    const newScene = sceneFn({\n      items: [sceneContainer],\n      dpi: dpiRatio,\n      on: {\n        create: [onLineBreak(canvasRenderer.measureText), injectTextBoundsFn(canvasRenderer)],\n      },\n    });\n    const hasChangedScene = scene ? !newScene.equals(scene) : true;\n\n    patterns.clear();\n\n    const doRender = hasChangedRect || hasChangedScene;\n    if (doRender) {\n      canvasRenderer.clear();\n      renderShapes(newScene.children, g, shapeToCanvasMap, {\n        patterns,\n      });\n    }\n\n    hasChangedRect = false;\n    scene = newScene;\n    return doRender;\n  };\n\n  canvasRenderer.itemsAt = (input) => (scene ? scene.getItemsFrom(input) : []);\n\n  canvasRenderer.findShapes = (selector) => (scene ? scene.findShapes(selector) : []);\n\n  canvasRenderer.clear = () => {\n    if (el) {\n      el.width = el.width; // eslint-disable-line\n    }\n    scene = null;\n\n    return canvasRenderer;\n  };\n\n  canvasRenderer.size = (opts) => {\n    if (opts) {\n      const newRect = createRendererBox(opts);\n\n      if (JSON.stringify(rect) !== JSON.stringify(newRect)) {\n        hasChangedRect = true;\n        rect = newRect;\n      }\n    }\n\n    return rect;\n  };\n\n  canvasRenderer.destroy = () => {\n    if (el) {\n      if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n      el = null;\n    }\n    scene = null;\n  };\n\n  return canvasRenderer;\n}\n\nexport function register(type, renderFn) {\n  reg.add(type, renderFn);\n}\n","function clampRadius(max, value) {\n  return Math.max(0, Math.min(max, value));\n}\n\n/**\n * Implementation details follow rx/ry restrictions from https://svgwg.org/svg2-draft/geometry.html#RX\n *\n * Using Quadratic Bézier curve it's not possible accurately represent a circle or ellipse but should for the case of a rounded rectangle be sufficent.\n * @private\n */\nfunction quadraticRoundedRect(g, x, y, width, height, rx, ry) {\n  rx = clampRadius(width / 2, rx > 0 ? rx : ry);\n  ry = clampRadius(height / 2, ry > 0 ? ry : rx);\n\n  g.moveTo(x, y + ry);\n  g.lineTo(x, y + height - ry);\n  g.quadraticCurveTo(x, y + height, x + rx, y + height);\n  g.lineTo(x + width - rx, y + height);\n  g.quadraticCurveTo(x + width, y + height, x + width, y + height - ry);\n  g.lineTo(x + width, y + ry);\n  g.quadraticCurveTo(x + width, y, x + width - rx, y);\n  g.lineTo(x + rx, y);\n  g.quadraticCurveTo(x, y, x, y + ry);\n}\n\nexport default function render(rect, { g, doFill, doStroke }) {\n  g.beginPath();\n\n  if (rect.rx > 0 || rect.ry > 0) {\n    quadraticRoundedRect(g, rect.x, rect.y, rect.width, rect.height, rect.rx, rect.ry);\n  } else {\n    g.rect(rect.x, rect.y, rect.width, rect.height);\n  }\n\n  if (doFill) {\n    g.fill();\n  }\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(circle, { g, doFill, doStroke }) {\n  g.beginPath();\n  g.moveTo(circle.cx + circle.r, circle.cy);\n  g.arc(circle.cx, circle.cy, circle.r, 0, Math.PI * 2, false);\n  if (doFill) {\n    g.fill();\n  }\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","export default function render(line, { g, doStroke }) {\n  g.beginPath();\n  g.moveTo(line.x1, line.y1);\n  g.lineTo(line.x2, line.y2);\n  if (doStroke) {\n    g.stroke();\n  }\n}\n","/* eslint no-misleading-character-class: 0 */\n// Source: https://en.wikipedia.org/wiki/Bi-directional_text and http://www.unicode.org/Public/6.0.0/ucd/UnicodeData.txt\n// 3 types of strong direction characters: L (strong left-to-right), R(strong right-to-left, Hebrew) and AL(strong right-to-left, Arabic language)\nconst rangesOfLChars =\n  '[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u02BB-\\u02C1\\u02D0-\\u02D1\\u02E0-\\u02E4\\u02EE\\u0370-\\u0373\\u0376-\\u037D\\u0386\\u0388-\\u03F5\\u03F7-\\u0482\\u048A-\\u0589\\u0903-\\u0939\\u093B\\u093D-\\u0940\\u0949-\\u094C\\u094E-\\u0950\\u0958-\\u0961\\u0964-\\u097F\\u0982-\\u09B9\\u09BD-\\u09C0\\u09C7-\\u09CC\\u09CE-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09FA\\u0A03-\\u0A39\\u0A3E-\\u0A40\\u0A59-\\u0A6F\\u0A72-\\u0A74\\u0A83-\\u0AB9\\u0ABD-\\u0AC0\\u0AC9-\\u0ACC\\u0AD0-\\u0AE1\\u0AE6-\\u0AEF\\u0B02-\\u0B39\\u0B3D-\\u0B3E\\u0B40\\u0B47-\\u0B4C\\u0B57-\\u0B61\\u0B66-\\u0B77\\u0B83-\\u0BBF\\u0BC1-\\u0BCC\\u0BD0-\\u0BF2\\u0C01-\\u0C3D\\u0C41-\\u0C44\\u0C58-\\u0C61\\u0C66-\\u0C6F\\u0C7F-\\u0CB9\\u0CBD-\\u0CCB\\u0CD5-\\u0CE1\\u0CE6-\\u0D40\\u0D46-\\u0D4C\\u0D4E-\\u0D61\\u0D66-\\u0DC6\\u0DCF-\\u0DD1\\u0DD8-\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E46\\u0E4F-\\u0EB0\\u0EB2-\\u0EB3\\u0EBD-\\u0EC6\\u0ED0-\\u0F17\\u0F1A-\\u0F34\\u0F36\\u0F38\\u0F3E-\\u0F6C\\u0F7F\\u0F85\\u0F88-\\u0F8C\\u0FBE-\\u0FC5\\u0FC7-\\u102C\\u1031\\u1038\\u103B-\\u103C\\u103F-\\u1057\\u105A-\\u105D\\u1061-\\u1070\\u1075-\\u1081\\u1083-\\u1084\\u1087-\\u108C\\u108E-\\u109C\\u109E-\\u135A\\u1360-\\u138F\\u13A0-\\u13F4\\u1401-\\u167F\\u1681-\\u169A\\u16A0-\\u1711\\u1720-\\u1731\\u1735-\\u1751\\u1760-\\u1770\\u1780-\\u17B6\\u17BE-\\u17C5\\u17C7-\\u17C8\\u17D4-\\u17DA\\u17DC\\u17E0-\\u17E9\\u1810-\\u18A8\\u18AA-\\u191C\\u1923-\\u1926\\u1929-\\u1931\\u1933-\\u1938\\u1946-\\u19DA\\u1A00-\\u1A16\\u1A19-\\u1A55\\u1A57\\u1A61\\u1A63-\\u1A64\\u1A6D-\\u1A72\\u1A80-\\u1AAD\\u1B04-\\u1B33\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B6A\\u1B74-\\u1B7C\\u1B82-\\u1BA1\\u1BA6-\\u1BA7\\u1BAA-\\u1BE5\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2-\\u1C2B\\u1C34-\\u1C35\\u1C3B-\\u1C7F\\u1CD3\\u1CE1\\u1CE9-\\u1CEC\\u1CEE-\\u1DBF\\u1E00-\\u1FBC\\u1FBE\\u1FC2-\\u1FCC\\u1FD0-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FFC\\u200E\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E-\\u214F\\u2160-\\u2188\\u2336-\\u237A\\u2395\\u249C-\\u24E9\\u26AC\\u2800-\\u28FF\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2D00-\\u2D70\\u2D80-\\u2DDE\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u31BA\\u31F0-\\u321C\\u3220-\\u324F\\u3260-\\u327B\\u327F-\\u32B0\\u32C0-\\u32CB\\u32D0-\\u3376\\u337B-\\u33DD\\u33E0-\\u33FE\\u3400-\\u4DB5\\u4E00-\\uA48C\\uA4D0-\\uA60C\\uA610-\\uA66E\\uA680-\\uA6EF\\uA6F2-\\uA6F7\\uA722-\\uA787\\uA789-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA824\\uA827\\uA830-\\uA837\\uA840-\\uA873\\uA880-\\uA8C3\\uA8CE-\\uA8D9\\uA8F2-\\uA925\\uA92E-\\uA946\\uA952-\\uA97C\\uA983-\\uA9B2\\uA9B4-\\uA9B5\\uA9BA-\\uA9BB\\uA9BD-\\uAA28\\uAA2F-\\uAA30\\uAA33-\\uAA34\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA4D-\\uAAAF\\uAAB1\\uAAB5-\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2-\\uABE4\\uABE6-\\uABE7\\uABE9-\\uABEC\\uABF0-\\uFB17\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFDC]';\nconst rangesOfRChars =\n  '[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u07C0-\\u07EA\\u07F4-\\u07F5\\u07FA-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB4F]';\nconst rangesOfALChars =\n  '[\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5-\\u06E6\\u06EE-\\u06EF\\u06FA-\\u070D\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\uFB50-\\uFD3D\\uFD50-\\uFDFC\\uFE70-\\uFEFC]';\n// let rangesOfNChars = '[\\u0009-\\u000D\\u001C-\\u0022\\u0026-\\u002A\\u003B-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u0085\\u00A1\\u00A6-\\u00A9\\u00AB-\\u00AC\\u00AE-\\u00AF\\u00B4\\u00B6-\\u00B8\\u00BB-\\u00BF\\u00D7\\u00F7\\u02B9-\\u02BA\\u02C2-\\u02CF\\u02D2-\\u02DF\\u02E5-\\u02ED\\u02EF-\\u02FF\\u0374-\\u0375\\u037E-\\u0385\\u0387\\u03F6\\u058A\\u0606-\\u0607\\u060E-\\u060F\\u06DE\\u06E9\\u07F6-\\u07F9\\u0BF3-\\u0BF8\\u0BFA\\u0C78-\\u0C7E\\u0F3A-\\u0F3D\\u1390-\\u1399\\u1400\\u1680\\u169B-\\u169C\\u17F0-\\u180A\\u180E\\u1940-\\u1945\\u19DE-\\u19FF\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD-\\u200A\\u2010-\\u2029\\u2035-\\u2043\\u2045-\\u205F\\u207C-\\u207E\\u208C-\\u208E\\u2100-\\u2101\\u2103-\\u2106\\u2108-\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u213A-\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u2150-\\u215F\\u2189-\\u2211\\u2214-\\u2335\\u237B-\\u2394\\u2396-\\u2487\\u24EA-\\u26AB\\u26AD-\\u27FF\\u2900-\\u2B59\\u2CE5-\\u2CEA\\u2CF9-\\u2CFF\\u2E00-\\u3004\\u3008-\\u3020\\u3030\\u3036-\\u3037\\u303D-\\u303F\\u309B-\\u309C\\u30A0\\u30FB\\u31C0-\\u31E3\\u321D-\\u321E\\u3250-\\u325F\\u327C-\\u327E\\u32B1-\\u32BF\\u32CC-\\u32CF\\u3377-\\u337A\\u33DE-\\u33DF\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA60D-\\uA60F\\uA673\\uA67E-\\uA67F\\uA700-\\uA721\\uA788\\uA828-\\uA82B\\uA874-\\uA877\\uFD3E-\\uFD3F\\uFDFD\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE51\\uFE54\\uFE56-\\uFE5E\\uFE60-\\uFE61\\uFE64-\\uFE68\\uFE6B\\uFF01-\\uFF02\\uFF06-\\uFF0A\\uFF1B-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF65\\uFFE2-\\uFFE4\\uFFE8-\\uFFFD]';\nconst rangesOfLRgExp = new RegExp(rangesOfLChars);\nconst rangesOfRRgExp = new RegExp(rangesOfRChars);\nconst rangesOfALRgExp = new RegExp(rangesOfALChars);\n// let rangesOfNRgExp = new RegExp(rangesOfNChars);\n// let lrm = String.fromCharCode(8206); // left-to-right marker\n// let rlm = String.fromCharCode(8207); // right-to-left marker\n\nfunction isLtrChar(c) {\n  return rangesOfLRgExp.test(c);\n}\n\nfunction isRtlChar(c) {\n  return rangesOfRRgExp.test(c) || rangesOfALRgExp.test(c);\n}\n\nexport function detectTextDirection(s) {\n  let n = s ? s.length : 0,\n    i,\n    c;\n  for (i = 0; i < n; i++) {\n    c = s[i];\n    if (isLtrChar(c)) {\n      return 'ltr';\n    }\n    if (isRtlChar(c)) {\n      return 'rtl';\n    }\n  }\n  return 'ltr';\n}\n\nconst textAnchorRTLMap = {\n  start: 'end',\n  end: 'start',\n  center: 'center',\n  middle: 'middle',\n};\n\n/* let flippedTextAnchor = true;\nlet detected = false;\nexport function detectRtlSvgSupport(ns, ownerDoc) {\n  if (!detected) {\n    const body = ownerDoc.body;\n    if (body) {\n      const rtlTestSVG = ownerDoc.createElementNS(ns, 'svg');\n      const textNode = ownerDoc.createElementNS(ns, 'text');\n      const group = ownerDoc.createElementNS(ns, 'g');\n\n      rtlTestSVG.setAttribute('xmlns', ns);\n      rtlTestSVG.setAttribute('style', 'position: absolute; width: 100px; height: 100px; top: -100px; left: 0px');\n\n      textNode.setAttribute('text-anchor', 'start');\n      textNode.setAttribute('direction', 'rtl');\n      textNode.setAttribute('font-size', '14px');\n      textNode.setAttribute('x', 50);\n      textNode.setAttribute('y', 50);\n      textNode.textContent = 'ثعبان';\n\n      group.appendChild(textNode);\n      rtlTestSVG.appendChild(group);\n      body.appendChild(rtlTestSVG);\n\n      flippedTextAnchor = textNode.getBoundingClientRect().left < 50;\n      body.removeChild(rtlTestSVG);\n    }\n  }\n  detected = true;\n} */\n\nexport function flipTextAnchor(value, dir) {\n  if (dir === 'rtl') {\n    return textAnchorRTLMap[value];\n  }\n  return value;\n}\n","import { ellipsText, measureText } from '../../../text-manipulation';\nimport baselineHeuristic from '../../../text-manipulation/baseline-heuristic';\nimport { detectTextDirection, flipTextAnchor } from '../../../../core/utils/rtl-util';\n\nexport default function render(t, { g, ellipsed }) {\n  const text = ellipsed || ellipsText(t, measureText);\n  g.font = `${t['font-size']} ${t['font-family']}`;\n\n  const dir = detectTextDirection(t.text);\n  if (g.canvas.dir !== dir) {\n    g.canvas.dir = dir;\n  }\n  const textAnchor = t['text-anchor'] === 'middle' ? 'center' : t['text-anchor'];\n  const textAlign = flipTextAnchor(textAnchor, g.canvas.dir);\n  if (textAlign && g.textAlign !== textAlign) {\n    g.textAlign = textAlign;\n  }\n\n  const bdy = baselineHeuristic(t);\n\n  g.fillText(text, t.x + t.dx, t.y + t.dy + bdy);\n}\n","export default function render(path, { g, doStroke, doFill }) {\n  const p = new Path2D(path.d);\n  if (doFill) {\n    g.fill(p);\n  }\n  if (doStroke) {\n    g.stroke(p);\n  }\n}\n","import { renderer, register } from './canvas-renderer';\nimport rect from './shapes/rect';\nimport circle from './shapes/circle';\nimport line from './shapes/line';\nimport text from './shapes/text';\nimport path from './shapes/path';\n\nregister('rect', rect);\nregister('circle', circle);\nregister('line', line);\nregister('path', path);\nregister('text', text);\n\nexport default renderer;\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('canvas', renderer);\n}\n","function diff(from, to) {\n  const added = [];\n  let items;\n  const removed = [];\n  const updatedNew = [];\n  const updatedOld = [];\n  let fromIds;\n  let toIds;\n  const idMapper = (a) => a.id;\n  const nodeMapper = (node, i) => {\n    let id;\n    if (typeof node === 'object') {\n      if ('id' in node) {\n        id = node.id;\n      } else {\n        id = i;\n      }\n    } else {\n      id = node;\n    }\n    return {\n      content: node,\n      id: `${id}__${node.type || ''}`,\n    };\n  };\n\n  if (!from.isTree) {\n    from = from.map(nodeMapper);\n  }\n\n  to = to.map(nodeMapper);\n\n  fromIds = from.map(idMapper);\n  toIds = to.map(idMapper);\n  // TODO - handle duplicate values\n\n  // added = to.filter( v => fromIds.indexOf( v.id ) < 0 );\n  // updatedNew = to.filter( v => fromIds.indexOf( v.id ) >= 0 );\n  // removed = from.filter( v => toIds.indexOf( v.id ) < 0 );\n  // updatedOld = from.filter( v => toIds.indexOf( v.id ) >= 0 );\n\n  for (let i = 0, len = to.length; i < len; i++) {\n    const idx = fromIds.indexOf(to[i].id);\n    if (idx === -1) {\n      added.push(to[i]);\n    } else {\n      updatedNew.push(to[i]);\n    }\n  }\n\n  for (let i = 0, len = from.length; i < len; i++) {\n    const idx = toIds.indexOf(from[i].id);\n    if (idx === -1) {\n      removed.push(from[i]);\n    } else {\n      updatedOld.push(from[i]);\n    }\n  }\n\n  for (let i = 0, len = added.length; i < len; i++) {\n    if (added[i].content.children) {\n      added[i].diff = diff([], added[i].content.children);\n      added[i].children = added[i].diff.updatedNew.concat(added[i].diff.added);\n      added[i].children.isTree = true;\n    }\n  }\n\n  for (let i = 0, len = updatedNew.length; i < len; i++) {\n    updatedNew[i].diff = diff(updatedOld[i].children || [], updatedNew[i].content.children || []);\n    updatedNew[i].object = updatedOld[i].object;\n    updatedNew[i].children = updatedNew[i].diff.items;\n  }\n\n  items = updatedNew.concat(added);\n\n  added.isTree = true;\n  removed.isTree = true;\n  updatedNew.isTree = true;\n  updatedOld.isTree = true;\n  items.isTree = true;\n\n  return {\n    added,\n    updatedNew,\n    updatedOld,\n    removed,\n    items,\n  };\n}\n\nfunction createNodes(nodes, parent, create) {\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    nodes[i].object = create(nodes[i].content.type, parent);\n  }\n}\n\nfunction destroyNodes(nodes, destroy) {\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    if (nodes[i].object !== null && typeof nodes[i].object !== 'undefined') {\n      destroy(nodes[i].object);\n      nodes[i].object = null;\n    }\n  }\n}\n\nfunction updateNodes(nodes, creator, maintainer, destroyer) {\n  let item;\n  for (let i = 0, len = nodes.length; i < len; i++) {\n    item = nodes[i];\n    if (item.object !== null && typeof item.object !== 'undefined') {\n      maintainer(item.object, item.content);\n      if (item.diff) {\n        createNodes(item.diff.added, item.object, creator);\n        destroyNodes(item.diff.removed, destroyer);\n        updateNodes(item.diff.items, creator, maintainer, destroyer);\n      }\n    }\n  }\n}\n\nfunction createTree(oldItems, newItems, root, creator, maintainer, destroyer) {\n  const d = diff(oldItems, newItems);\n\n  createNodes(d.added, root, creator);\n  destroyNodes(d.removed, destroyer);\n  updateNodes(d.items, creator, maintainer, destroyer);\n\n  return d.items;\n}\n\nexport { diff, createTree, destroyNodes, createNodes, updateNodes };\n","import { ellipsText, measureText } from '../../text-manipulation';\nimport baselineHeuristic from '../../text-manipulation/baseline-heuristic';\nimport { detectTextDirection, flipTextAnchor } from '../../../core/utils/rtl-util';\n\nconst svgNs = 'http://www.w3.org/2000/svg';\n// const badValues = ['', NaN, 'NaN', undefined, null, false, true];\n\nconst creator = (type, parent) => {\n  if (!type || typeof type !== 'string') {\n    throw new Error(`Invalid type: ${type}`);\n  }\n\n  const el = parent.ownerDocument.createElementNS(svgNs, type === 'container' ? 'g' : type);\n\n  parent.appendChild(el);\n  return el;\n};\n\nconst destroyer = (el) => {\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n};\n\n// isValid - is a way to bring a more consistent rendering behaviour between SVG and canvas.\n// Where SVG would treat NaN values as 0, canvas would simple not render anything.\nconst isValid = (item) => {\n  switch (item.type) {\n    case 'circle':\n      return !isNaN(item.attrs.cx) && !isNaN(item.attrs.cy) && !isNaN(item.attrs.r);\n    case 'line':\n      return !isNaN(item.attrs.x1) && !isNaN(item.attrs.y1) && !isNaN(item.attrs.x2) && !isNaN(item.attrs.y2);\n    case 'rect':\n      return !isNaN(item.attrs.x) && !isNaN(item.attrs.y) && !isNaN(item.attrs.width) && !isNaN(item.attrs.height);\n    case 'text':\n      return !isNaN(item.attrs.x) && !isNaN(item.attrs.y);\n    default:\n      return true;\n  }\n};\n\nconst maintainer = (element, item) => {\n  if (isValid(item)) {\n    for (const attr in item.attrs) {\n      if (attr === 'stroke' && item.strokeReference) {\n        element.setAttribute('stroke', item.strokeReference);\n      } else if (attr === 'fill' && item.fillReference) {\n        element.setAttribute('fill', item.fillReference);\n      } else if (attr === 'text') {\n        element.setAttribute('style', 'white-space: pre');\n        element.textContent = item.ellipsed || ellipsText(item.attrs, measureText);\n        const dir = detectTextDirection(item.attrs.text);\n        if (dir === 'rtl') {\n          element.setAttribute('direction', 'rtl');\n          element.setAttribute('dir', 'rtl');\n          element.setAttribute('text-anchor', flipTextAnchor(element.getAttribute('text-anchor'), dir));\n        }\n      } else if (item.type === 'text' && (attr === 'dy' || attr === 'dominant-baseline')) {\n        const dy = +element.getAttribute(attr) || 0;\n        let val = 0;\n        if (attr === 'dominant-baseline') {\n          val = baselineHeuristic(item.attrs);\n        } else {\n          val = item.attrs[attr];\n        }\n        element.setAttribute('dy', val + dy);\n      } else if (item.type === 'text' && attr === 'title' && item.attrs.title) {\n        const t = element.ownerDocument.createElementNS(svgNs, 'title');\n        t.textContent = item.attrs.title;\n        element.appendChild(t);\n      } else {\n        element.setAttribute(attr, item.attrs[attr]);\n      }\n    }\n\n    if (typeof item.data === 'string' || typeof item.data === 'number' || typeof item.data === 'boolean') {\n      element.setAttribute('data', item.data);\n    } else if (typeof item.data === 'object' && item.data !== null) {\n      for (const d in item.data) {\n        if (typeof item.data[d] === 'string' || typeof item.data[d] === 'number' || typeof item.data[d] === 'boolean') {\n          element.setAttribute(`data-${d}`, item.data[d]);\n        }\n      }\n    }\n  }\n};\n\nexport { svgNs, creator, maintainer, destroyer };\n","import { createTree } from '../node-tree';\nimport { creator, maintainer, destroyer } from './svg-nodes';\n\nclass TreeItemRenderer {\n  /**\n   * Constructor\n   * @private\n   * @param  {TreeCreator} treeCreator - Function used to create the DOM tree..\n   * @param  {SVGCreator} nodeCreator - Function used to create nodes.\n   * @param  {SVGMaintainer} nodeMaintainer - Function used to update nodes.\n   * @param  {SVGDestroyer} nodeDestroyer - Function used to destroy nodes.\n   */\n  constructor(treeCreator, nodeCreator, nodeMaintainer, nodeDestroyer) {\n    this.create = treeCreator;\n    this.nodeCreator = nodeCreator;\n    this.nodeMaintainer = nodeMaintainer;\n    this.nodeDestroyer = nodeDestroyer;\n  }\n\n  render(newItems, root) {\n    return this.create([], newItems, root, this.nodeCreator, this.nodeMaintainer, this.nodeDestroyer);\n  }\n}\n\nfunction tree() {\n  return new TreeItemRenderer(createTree, creator, maintainer, destroyer);\n}\n\nexport { TreeItemRenderer as default, tree };\n\n/**\n * Create an SVGElement and attach to parent.\n * @private\n * @callback SVGCreator\n * @param {String} type - The type of element to create.\n * @param {SVGElement} parent - The parent element to append the new element to.\n * @return {SVGElement} The created element\n */\n\n/**\n * Update the element with content from item.\n * @private\n * @callback SVGMaintainer\n * @param {SVGElement} el - The element to update\n * @param {Object} item - The object to use as input for the update\n */\n\n/**\n * Detach element from its parent.\n * @private\n * @callback SVGDestroyer\n * @param {SVGElement} el - Element to destroy.\n */\n\n/**\n * Create, update and destroy nodes.\n * @private\n * @callback TreeCreator\n * @param {Object[]} existing - The existing items in the tree.\n * @param {Object[]} active - The new items to create the tree from.\n * @param {SVGCreator} creator - Function used to create nodes.\n * @param {SVGMaintainer} maintainer - Function used to update nodes.\n * @param {SVGDestroyer} destroyer - Function used to destroy nodes.\n */\n","/* eslint import/prefer-default-export: 0 */\n\n/**\n * Hash an object\n * Modified version of Java's HashCode function\n * Source: {@link http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/}\n * @ignore\n *\n * @param  {Object} item Item to hash\n * @return {String}      Unique hash id\n */\nexport function hashObject(item) {\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n\n  item = JSON.stringify(item);\n\n  if (item.length === 0) {\n    return hash;\n  }\n\n  for (i = 0, len = item.length; i < len; i++) {\n    chr = item.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}\n","import { degreesToPoints } from '../../../core/math/angles';\nimport { hashObject } from '../../../core/utils/crypto';\n\nexport default function gradienter(bucket, hasher = hashObject) {\n  let cache = {};\n  let uid = Date.now();\n\n  const p = {\n    getOrCreateGradient(item = {}, attr = 'fill', url = '') {\n      let gradientHash = hasher(item[attr]);\n      let gradientId = `picasso-gradient-${uid}-${gradientHash}`;\n\n      if (!cache[gradientHash]) {\n        let { orientation, degree, stops = [] } = item[attr];\n        let gradient = {};\n\n        if (degree === undefined) {\n          degree = 90;\n        }\n\n        // Default to linear\n        if (orientation === 'radial') {\n          gradient.type = 'radialGradient';\n        } else {\n          gradient = degreesToPoints(degree);\n          ['x1', 'x2', 'y1', 'y2'].forEach((c) => {\n            if (c in item[attr]) {\n              gradient[c] = item[attr][c];\n            }\n          });\n          gradient.type = 'linearGradient';\n        }\n\n        gradient.id = gradientId;\n        gradient.children = stops.map(({ offset, color, opacity }) => ({\n          type: 'stop',\n          offset: `${offset * 100}%`,\n          style: `stop-color:${color};stop-opacity:${typeof opacity !== 'undefined' ? opacity : 1}`,\n        }));\n\n        bucket.push(gradient);\n        cache[gradientHash] = gradientId;\n      }\n\n      return `url('${url}#${gradientId}')`;\n    },\n    onCreate(state) {\n      let url = '';\n      if (typeof window !== 'undefined') {\n        url = window.location.href.split('#')[0];\n      }\n\n      const item = state.node;\n      if (item.fill && typeof item.fill === 'object' && item.fill.type === 'gradient') {\n        item.fillReference = p.getOrCreateGradient(item, 'fill', url);\n      }\n\n      if (item.stroke && typeof item.stroke === 'object' && item.stroke.type === 'gradient') {\n        item.strokeReference = p.getOrCreateGradient(item, 'stroke', url);\n      }\n    },\n    clear() {\n      cache = {};\n    },\n  };\n\n  return p;\n}\n","import { hashObject } from '../../../core/utils/crypto';\n\nexport default function patternizer(bucket, hasher = hashObject) {\n  let cache = {};\n  let uid = Date.now();\n  const p = {\n    onCreate(state) {\n      let inputs = {};\n\n      if (\n        state.node &&\n        typeof state.node.fill === 'object' &&\n        state.node.fill.type === 'pattern' &&\n        state.node.fill.shapes\n      ) {\n        inputs.fill = state.node.fill;\n      }\n      if (\n        state.node &&\n        typeof state.node.stroke === 'object' &&\n        state.node.stroke.type === 'pattern' &&\n        state.node.stroke.shapes\n      ) {\n        inputs.stroke = state.node.stroke;\n      }\n\n      Object.keys(inputs).forEach((key) => {\n        let url = '';\n        const input = inputs[key];\n        const patternHash = hasher(input);\n        const pnid = `picasso-pattern-${uid}-${patternHash}`;\n\n        if (typeof window !== 'undefined') {\n          url = window.location.href.split('#')[0];\n        }\n\n        if (!cache[patternHash]) {\n          const pn = {\n            patternUnits: 'userSpaceOnUse',\n            x: 0,\n            y: 0,\n            width: input.width,\n            height: input.height,\n            type: 'pattern',\n            id: pnid,\n            children: [],\n            fill: input.fill,\n          };\n\n          input.shapes.forEach((s) => {\n            pn.children.push(s);\n          });\n\n          bucket.push(pn);\n          cache[patternHash] = true;\n        }\n\n        state.node[`${key}Reference`] = `url('${url}#${pnid}')`;\n      });\n    },\n    clear() {\n      cache = {};\n    },\n  };\n\n  return p;\n}\n","import { tree as treeFactory } from './svg-tree';\nimport { svgNs } from './svg-nodes';\nimport sceneFactory from '../../../core/scene-graph/scene';\nimport { onLineBreak } from '../../text-manipulation';\n// import {\n//   resetGradients,\n//   onGradient,\n//   createDefsNode\n// } from './svg-gradient';\n\nimport gradienter from './svg-gradient';\nimport patternizer from './svg-pattern';\n\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\nimport injectTextBoundsFn from '../../text-manipulation/inject-textbounds';\n\n/**\n * Create a new svg renderer\n * @typedef {function} svgRendererFactory\n * @param {function} [treeFactory] - Node tree factory\n * @param {string} [ns] - Namespace definition\n * @param {function} [sceneFn] - Scene factory\n * @returns {Renderer} A svg renderer instance\n */\nexport default function renderer(treeFn = treeFactory, ns = svgNs, sceneFn = sceneFactory) {\n  const tree = treeFn();\n  let el;\n  let group;\n  let hasChangedRect = false;\n  let rect = createRendererBox();\n  let scene;\n\n  const svg = create();\n\n  const defs = {\n    type: 'defs',\n    children: [],\n  };\n  const patterns = patternizer(defs.children);\n  const gradients = gradienter(defs.children);\n\n  svg.element = () => el;\n\n  svg.root = () => group;\n\n  svg.appendTo = (element) => {\n    if (!el) {\n      el = element.ownerDocument.createElementNS(ns, 'svg');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n      el.setAttribute('xmlns', ns);\n      group = element.ownerDocument.createElementNS(ns, 'g');\n      group.style.pointerEvents = 'auto';\n      el.appendChild(group);\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  svg.render = (nodes) => {\n    if (!el) {\n      return false;\n    }\n\n    const scaleX = rect.scaleRatio.x;\n    const scaleY = rect.scaleRatio.y;\n\n    if (hasChangedRect) {\n      el.style.left = `${rect.computedPhysical.x}px`;\n      el.style.top = `${rect.computedPhysical.y}px`;\n      el.setAttribute('width', rect.computedPhysical.width);\n      el.setAttribute('height', rect.computedPhysical.height);\n    }\n\n    gradients.clear();\n    patterns.clear();\n    defs.children.length = 0;\n\n    const sceneContainer = {\n      type: 'container',\n      children: Array.isArray(nodes) ? [...nodes, defs] : nodes,\n      transform: rect.edgeBleed.bool\n        ? `translate(${rect.edgeBleed.left * scaleX}, ${rect.edgeBleed.top * scaleY})`\n        : '',\n    };\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      sceneContainer.transform += `scale(${scaleX}, ${scaleY})`;\n    }\n\n    const newScene = sceneFn({\n      items: [sceneContainer],\n      on: {\n        create: [\n          (state) => {\n            state.node.fillReference = undefined;\n            state.node.strokeReference = undefined;\n          },\n          gradients.onCreate,\n          patterns.onCreate,\n          onLineBreak(svg.measureText),\n          injectTextBoundsFn(svg),\n        ],\n      },\n    });\n    const hasChangedScene = scene ? !newScene.equals(scene) : true;\n\n    const doRender = hasChangedRect || hasChangedScene;\n    if (doRender) {\n      svg.clear();\n      tree.render(newScene.children, group);\n    }\n\n    hasChangedRect = false;\n    scene = newScene;\n    return doRender;\n  };\n\n  svg.itemsAt = (input) => (scene ? scene.getItemsFrom(input) : []);\n\n  svg.findShapes = (selector) => (scene ? scene.findShapes(selector) : []);\n\n  svg.clear = () => {\n    if (!group) {\n      return svg;\n    }\n    scene = null;\n    const g = group.cloneNode(false);\n    el.replaceChild(g, group);\n    group = g;\n    return svg;\n  };\n\n  svg.destroy = () => {\n    // parentElement is not supported in IE11 for SVGElement.\n    if (el && el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n    el = null;\n    group = null;\n  };\n\n  svg.size = (opts) => {\n    if (opts) {\n      const newRect = createRendererBox(opts);\n\n      if (JSON.stringify(rect) !== JSON.stringify(newRect)) {\n        hasChangedRect = true;\n        rect = newRect;\n      }\n    }\n\n    return rect;\n  };\n\n  return svg;\n}\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('svg', renderer);\n}\n","var n,l,u,i,t,o,r={},f=[],e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(n,l){for(var u in l)n[u]=l[u];return n}function s(n){var l=n.parentNode;l&&l.removeChild(n)}function a(n,l,u){var i,t,o,r=arguments,f={};for(o in l)\"key\"==o?i=l[o]:\"ref\"==o?t=l[o]:f[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(r[o]);if(null!=u&&(f.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(o in n.defaultProps)void 0===f[o]&&(f[o]=n.defaultProps[o]);return v(n,f,i,t,null)}function v(l,u,i,t,o){var r={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++n.__v:o};return null!=n.vnode&&n.vnode(r),r}function h(){return{current:null}}function y(n){return n.children}function p(n,l){this.props=n,this.context=l}function d(n,l){if(null==l)return n.__?d(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?d(n):null}function _(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return _(n)}}function k(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!b.__r++||t!==n.debounceRendering)&&((t=n.debounceRendering)||i)(b)}function b(){for(var n;b.__r=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=c({},t)).__v=t.__v+1,I(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?d(t):o,t.__h),T(u,t),t.__e!=o&&_(t)))})}function m(n,l,u,i,t,o,e,c,s,a){var h,p,_,k,b,m,w,A=i&&i.__k||f,P=A.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(k=u.__k[h]=null==(k=l[h])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k||\"bigint\"==typeof k?v(null,k,null,null,k):Array.isArray(k)?v(y,{children:k},null,null,null):k.__b>0?v(k.type,k.props,k.key,null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(_=A[h])||_&&k.key==_.key&&k.type===_.type)A[h]=void 0;else for(p=0;p<P;p++){if((_=A[p])&&k.key==_.key&&k.type===_.type){A[p]=void 0;break}_=null}I(n,k,_=_||r,t,o,e,c,s,a),b=k.__e,(p=k.ref)&&_.ref!=p&&(w||(w=[]),_.ref&&w.push(_.ref,null,k),w.push(p,k.__c||b,k)),null!=b?(null==m&&(m=b),\"function\"==typeof k.type&&null!=k.__k&&k.__k===_.__k?k.__d=s=g(k,s,n):s=x(n,k,_,A,b,s),a||\"option\"!==u.type?\"function\"==typeof u.type&&(u.__d=s):n.value=\"\"):s&&_.__e==s&&s.parentNode!=n&&(s=d(_))}for(u.__e=m,h=P;h--;)null!=A[h]&&(\"function\"==typeof u.type&&null!=A[h].__e&&A[h].__e==u.__d&&(u.__d=d(i,h+1)),L(A[h],A[h]));if(w)for(h=0;h<w.length;h++)z(w[h],w[++h],w[++h])}function g(n,l,u){var i,t;for(i=0;i<n.__k.length;i++)(t=n.__k[i])&&(t.__=n,l=\"function\"==typeof t.type?g(t,l,u):x(u,t,t,n.__k,t.__e,l));return l}function w(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){w(n,l)}):l.push(n)),l}function x(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function A(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||C(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||C(n,o,l[o],u[o],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||e.test(l)?u:u+\"px\"}function C(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||P(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||P(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?H:$,o):n.removeEventListener(l,o?H:$,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink[H:h]/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function $(l){this.l[l.type+!1](n.event?n.event(l):l)}function H(l){this.l[l.type+!0](n.event?n.event(l):l)}function I(l,u,i,t,o,r,f,e,s){var a,v,h,d,_,k,b,g,w,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(s=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(g=u.props,w=(a=P.contextType)&&t[a.__c],x=a?w?w.props.value:a.__:t,i.__c?b=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(g,x):(u.__c=v=new p(g,x),v.constructor=P,v.render=M),w&&w.sub(v),v.props=g,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=c({},v.__s)),c(v.__s,P.getDerivedStateFromProps(g,v.__s))),d=v.props,_=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&g!==d&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(g,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(g,v.__s,x)||u.__v===i.__v){v.props=g,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),v.__h.length&&f.push(v);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(g,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(d,_,k)})}v.context=x,v.props=g,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(t=c(c({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(k=v.getSnapshotBeforeUpdate(d,_)),A=null!=a&&a.type===y&&null==a.key?a.props.children:a,m(l,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,s),v.base=u.__e,u.__h=null,v.__h.length&&f.push(v),b&&(v.__E=v.__=null),v.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=j(i.__e,u,i,t,o,r,f,s);(a=n.diffed)&&a(u)}catch(l){u.__v=null,(s||null!=r)&&(u.__e=e,u.__h=!!s,r[r.indexOf(e)]=null),n.__e(l,u,i)}}function T(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function j(n,l,u,i,t,o,e,c){var a,v,h,y,p=u.props,d=l.props,_=l.type,k=0;if(\"svg\"===_&&(t=!0),null!=o)for(;k<o.length;k++)if((a=o[k])&&(a===n||(_?a.localName==_:3==a.nodeType))){n=a,o[k]=null;break}if(null==n){if(null===_)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",_):document.createElement(_,d.is&&d),o=null,c=!1}if(null===_)p===d||c&&n.data===d||(n.data=d);else{if(o=o&&f.slice.call(n.childNodes),v=(p=u.props||r).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!c){if(null!=o)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&(v&&h.__html==v.__html||h.__html===n.innerHTML)||(n.innerHTML=h&&h.__html||\"\"))}if(A(n,d,p,t,c),h)l.__k=[];else if(k=l.props.children,m(n,Array.isArray(k)?k:[k],l,u,i,t&&\"foreignObject\"!==_,o,e,n.firstChild,c),null!=o)for(k=o.length;k--;)null!=o[k]&&s(o[k]);c||(\"value\"in d&&void 0!==(k=d.value)&&(k!==n.value||\"progress\"===_&&!k)&&C(n,\"value\",k,p.value,!1),\"checked\"in d&&void 0!==(k=d.checked)&&k!==n.checked&&C(n,\"checked\",k,p.checked,!1))}return n}function z(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function L(l,u,i){var t,o,r;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||z(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(o=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(r=0;r<t.length;r++)t[r]&&L(t[r],u,i);null!=o&&s(o)}function M(n,l,u){return this.constructor(n,u)}function N(l,u,i){var t,o,e;n.__&&n.__(l,u),o=(t=\"function\"==typeof i)?null:i&&i.__k||u.__k,e=[],I(u,l=(!t&&i||u).__k=a(y,null,[l]),o||r,r,void 0!==u.ownerSVGElement,!t&&i?[i]:o?null:u.firstChild?f.slice.call(u.childNodes):null,e,!t&&i?i:o?o.__e:u.firstChild,t),T(e,l)}function O(n,l){N(n,l,O)}function S(n,l,u){var i,t,o,r=arguments,f=c({},n.props);for(o in l)\"key\"==o?i=l[o]:\"ref\"==o?t=l[o]:f[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(r[o]);return null!=u&&(f.children=u),v(n.type,f,i||n.key,t||n.ref,null)}function q(n,l){var u={__c:l=\"__cC\"+o++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(k)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n={__e:function(n,l){for(var u,i,t;l=l.__;)if((u=l.__c)&&!u.__)try{if((i=u.constructor)&&null!=i.getDerivedStateFromError&&(u.setState(i.getDerivedStateFromError(n)),t=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(n),t=u.__d),t)return u.__E=u}catch(l){n=l}throw n},__v:0},l=function(n){return null!=n&&void 0===n.constructor},p.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),\"function\"==typeof n&&(n=n(c({},u),this.props)),n&&c(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),k(this))},p.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),k(this))},p.prototype.render=y,u=[],i=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b.__r=0,o=0;export{N as render,O as hydrate,a as createElement,a as h,y as Fragment,h as createRef,l as isValidElement,p as Component,S as cloneElement,q as createContext,w as toChildArray,n as options};\n//# sourceMappingURL=preact.module.js.map\n","import { h, render } from 'preact';\nimport createRendererBox from '../renderer-box';\nimport create from '../index';\n\nexport default function renderer(opts = {}) {\n  const { createElement = document.createElement.bind(document) } = opts;\n\n  let el;\n  let rect = createRendererBox();\n  let dNode;\n\n  const dom = create();\n\n  dom.element = () => el;\n\n  dom.root = () => el;\n\n  dom.appendTo = (element) => {\n    if (!el) {\n      el = createElement('div');\n      el.style.position = 'absolute';\n      el.style['-webkit-font-smoothing'] = 'antialiased';\n      el.style['-moz-osx-font-smoothing'] = 'antialiased';\n      el.style.pointerEvents = 'none';\n    }\n\n    element.appendChild(el);\n\n    return el;\n  };\n\n  dom.render = (nodes) => {\n    if (!el) {\n      return false;\n    }\n\n    el.style.left = `${rect.computedPhysical.x}px`;\n    el.style.top = `${rect.computedPhysical.y}px`;\n    el.style.width = `${rect.computedPhysical.width}px`;\n    el.style.height = `${rect.computedPhysical.height}px`;\n\n    let vNode;\n    if (Array.isArray(nodes)) {\n      vNode = <div>{nodes}</div>;\n    } else {\n      vNode = nodes;\n    }\n\n    dNode = render(vNode, el, dNode);\n\n    return true;\n  };\n\n  dom.renderArgs = [h]; // Arguments to render functions using the DOM renderer\n\n  dom.clear = () => {\n    if (el) {\n      let first = el.firstChild;\n\n      while (first) {\n        el.removeChild(first);\n        first = el.firstChild;\n      }\n      dNode = null;\n    }\n\n    return dom;\n  };\n\n  dom.destroy = () => {\n    if (el && el.parentElement) {\n      el.parentElement.removeChild(el);\n    }\n    el = null;\n    dNode = null;\n  };\n\n  dom.size = (inner) => {\n    if (inner) {\n      rect = createRendererBox(inner);\n    }\n    return rect;\n  };\n\n  return dom;\n}\n","import renderer from './dom-renderer';\n\nexport default renderer;\n\nexport function rendererComponent(picasso) {\n  picasso.renderer('dom', renderer);\n}\n","import { rendererComponent as canvas } from '../web/renderer/canvas-renderer';\nimport { rendererComponent as svg } from '../web/renderer/svg-renderer/svg-renderer';\nimport { rendererComponent as dom } from '../web/renderer/dom-renderer';\n\nexport default [svg, canvas, dom];\n","export default [];\n","const LOG_LEVEL = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  DEBUG: 4,\n};\n\nconst loggerFn = ({ level = LOG_LEVEL.OFF, pipe = console } = {}) => {\n  let currentlevel = level;\n\n  const LOG_FN = {\n    [LOG_LEVEL.OFF]: () => {},\n    [LOG_LEVEL.ERROR]: (...args) => pipe.error(...args),\n    [LOG_LEVEL.WARN]: (...args) => pipe.warn(...args),\n    [LOG_LEVEL.INFO]: (...args) => pipe.info(...args),\n    [LOG_LEVEL.DEBUG]: (...args) => pipe.log(...args),\n  };\n\n  const log = (lev, ...args) => {\n    if (!lev || currentlevel < lev) {\n      return;\n    }\n\n    (LOG_FN[lev] || LOG_FN[LOG_LEVEL.DEBUG])(...args);\n  };\n\n  /**\n   * @typedef {object} logger\n   * @private\n   */\n\n  return /** @lends logger */ {\n    /**\n     * Log a message\n     * @param {number} lev - The log level\n     * @param {...any} args\n     * @kind function\n     */\n    log,\n\n    /**\n     * Log an error message\n     * @param {...any} args\n     */\n    error: (...args) => log(LOG_LEVEL.ERROR, ...args),\n\n    /**\n     * Log a warning message\n     * @param {...any} args\n     */\n    warn: (...args) => log(LOG_LEVEL.WARN, ...args),\n\n    /**\n     * Log an info message\n     * @param {...any} args\n     */\n    info: (...args) => log(LOG_LEVEL.INFO, ...args),\n\n    /**\n     * Log a debug message\n     * @param {...any} args\n     */\n    debug: (...args) => log(LOG_LEVEL.DEBUG, ...args),\n\n    /**\n     * Set the current log level\n     * @param {number} lev - The log level\n     */\n    level: (lev) => {\n      if (typeof lev === 'number') {\n        currentlevel = lev;\n      }\n      return currentlevel;\n    },\n\n    LOG_LEVEL,\n  };\n};\n\nexport { loggerFn as default };\n","const palettes = [\n  {\n    key: 'categorical',\n    colors: [\n      [\n        '#a54343',\n        '#d76c6c',\n        '#ec983d',\n        '#ecc43d',\n        '#f9ec86',\n        '#cbe989',\n        '#70ba6e',\n        '#578b60',\n        '#79d69f',\n        '#26a0a7',\n        '#138185',\n        '#65d3da',\n      ], // breeze colors\n    ],\n  },\n  {\n    key: 'diverging',\n    colors: [\n      ['#3d52a1', '#3a89c9', '#77b7e5', '#b4ddf7', '#e6f5fe', '#ffe3aa', '#f9bd7e', '#ed875e', '#d24d3e', '#ae1c3e'],\n    ],\n  },\n  {\n    key: 'sequential',\n    colors: [['rgb(180,221,212)', 'rgb(34, 83, 90)']],\n  },\n];\n\n/* eslint quote-props: 0 */\nconst style = {\n  // -- FOUNDATION --\n  // fonts\n  '$font-family': \"'Source Sans Pro', Arial, sans-serif\",\n  '$font-size': '12px',\n  '$line-height': '16px',\n  '$font-size--l': '16px',\n\n  // base grays\n  '$gray-100': '#ffffff',\n  '$gray-98': '#f9f9f9',\n  '$gray-95': '#f2f2f2',\n  '$gray-90': '#e6e6e6',\n  '$gray-35': '#595959',\n  '$gray-30': '#4d4d4d',\n  '$gray-25': '#404040',\n  '$gray-20': '#333333',\n\n  // borders\n  '$border-95': 'rgba(255, 255, 255, 0.05)',\n  '$border-90': 'rgba(255, 255, 255, 0.1)',\n  '$border-80': 'rgba(255, 255, 255, 0.2)',\n  '$border-20': 'rgba(0, 0, 0, 0.2)',\n  '$border-10': 'rgba(0, 0, 0, 0.1)',\n  '$border-5': 'rgba(0, 0, 0, 0.05)',\n\n  // primary colors\n  '$primary-blue': '#3F8AB3',\n  '$primary-green': '#6CB33F',\n  '$primary-red': '#DC423F',\n  '$primary-orange': '#EF960F',\n\n  // spacing\n  '$spacing--s': 4,\n  $spacing: 8,\n  '$spacing--l': 12,\n  // -------------------------\n\n  // -- ALIASES --\n  '$font-color': '$gray-35',\n  '$font-color--inverted': '$gray-90',\n  '$guide-color': '$gray-90',\n  '$guide-color--inverted': '$gray-35',\n  $border: '$border-80',\n  '$border--inverted': '$border-10',\n  // -------------------------\n\n  // -- MIXINS --\n  // data points\n  $shape: {\n    // data shape\n    fill: '$primary-blue',\n    strokeWidth: 1,\n    stroke: '$border',\n  },\n\n  '$shape-outline': {\n    // data shape which usually does not have a fill, e.g. the line in a linechart\n    stroke: '$primary-blue',\n    strokeWidth: 2,\n  },\n\n  '$shape-guide': {\n    // lines that somehow belongs to a data shape, e.g. whiskers in a boxplot\n    stroke: '$guide-color',\n    strokeWidth: 1,\n  },\n\n  '$shape-guide--inverted': {\n    '@extend': '$shape-guide',\n    stroke: '$guide-color--inverted',\n  },\n\n  $label: {\n    fontSize: '$font-size',\n    fontFamily: '$font-family',\n    fill: '$font-color',\n  },\n\n  '$label--inverted': {\n    $extend: '$label',\n    fill: '$font-color--inverted',\n  },\n\n  // user interface\n  '$label-overlay': {\n    // e.g. selection range bubble\n    fontSize: '$font-size--l',\n    fontFamily: '$font-family',\n    fill: '$gray-100', // background fill\n    color: '$font-color',\n    stroke: '$guide-color--inverted',\n    strokeWidth: 1,\n    borderRadius: 4,\n  },\n\n  $title: {\n    '@extend': '$label',\n    fontSize: '$font-size--l',\n  },\n\n  '$guide-line': {\n    strokeWidth: 1,\n    stroke: '$guide-color',\n  },\n\n  '$guide-line--minor': {\n    strokeWidth: 1,\n    stroke: '$gray-95', // needs alias\n  },\n\n  '$padding--s': {\n    left: '$spacing--s',\n    right: '$spacing--s',\n    top: '$spacing--s',\n    bottom: '$spacing--s',\n  },\n\n  $padding: {\n    left: '$spacing',\n    right: '$spacing',\n    top: '$spacing',\n    bottom: '$spacing',\n  },\n\n  '$selection-area-target': {\n    fill: '$primary-green',\n    strokeWidth: 0,\n    opacity: 0.2,\n  },\n};\n\nexport { style, palettes };\n","import 'path2d-polyfill';\nimport extend from 'extend';\nimport about from './about';\n\nimport { chart, renderer } from './core';\n\nimport { components, scales, renderers } from './api';\n\nimport componentRegistry from './core/component';\nimport dataRegistry from './core/data';\nimport formatterRegistry from './core/formatter';\nimport interactionRegistry from './core/interaction';\nimport scaleRegistry from './core/chart/scales';\nimport { symbolRegistry } from './core/symbols';\n\nimport loggerFn from './core/utils/logger';\nimport registry from './core/utils/registry';\n\nimport { style, palettes } from './core/theme/light';\n\nfunction usePlugin(plugin, options = {}, api) {\n  plugin(api, options);\n}\n\nfunction pic(config = {}, registries = {}) {\n  const logger = loggerFn(config.logger);\n\n  /**\n   * @lends picassojs\n   */\n  const regis = {\n    // -- registries --\n    /**\n     * Component registry\n     * @type {registry}\n     */\n    component: registry(registries.component, 'component', logger),\n    /**\n     * Data registry\n     * @type {registry}\n     */\n    data: registry(registries.data, 'data', logger),\n    /**\n     * Formatter registry\n     * @type {registry}\n     */\n    formatter: registry(registries.formatter, 'formatter', logger),\n    /**\n     * Interaction registry\n     * @type {registry}\n     */\n    interaction: registry(registries.interaction, 'interaction', logger),\n    /**\n     * Renderer registry\n     * @type {registry}\n     * @example\n     * const svgFactory = picassojs.renderer('svg');\n     * const svgRenderer = svgFactory();\n     */\n    renderer: renderer(registries.renderer, 'renderer', logger),\n    /**\n     * Scale registry\n     * @type {registry}\n     */\n    scale: registry(registries.scale, 'scale', logger),\n    /**\n     * Symbol registry\n     * @type {registry}\n     * @private\n     */\n    symbol: registry(registries.symbol, 'symbol', logger),\n    // -- misc --\n    /**\n     * log some some stuff\n     * @type {logger}\n     * @private\n     */\n    logger,\n  };\n\n  if (config.renderer && config.renderer.prio) {\n    regis.renderer.default(config.renderer.prio[0]);\n  }\n\n  /**\n   * picasso.js entry point\n   * @entry\n   * @alias picassojs\n   * @param {object} cfg\n   * @param {object} cfg.renderer\n   * @param {Array<string>} cfg.renderer.prio\n   * @param {object} cfg.logger\n   * @param {number} cfg.logger.level\n   * @param {object} cfg.style\n   * @param {Array<object>} cfg.palettes\n   * @returns {picassojs}\n   * @example\n   * import picasso from 'picasso.js';\n   *\n   * const configuredPicasso = picasso({ renderer: { prio: ['canvas'] } }) // All components will render using the canvas renderer\n   */\n  function picassojs(cfg = {}) {\n    let cc = {\n      palettes: config.palettes.concat(cfg.palettes || []),\n      style: extend({}, config.style, cfg.style),\n      logger: cfg.logger || config.logger,\n      renderer: cfg.renderer || config.renderer,\n    };\n    return pic(cc, regis);\n  }\n\n  /**\n   * @typedef {object} Registries\n   * @property {registry} component Component registry\n   * @property {registry} data Data registry\n   * @property {registry} formatter Formatter registry\n   * @property {registry} interaction Interaction registry\n   * @property {registry} renderer Renderer registry\n   * @property {registry} scale Scale registry\n   */\n\n  /**\n   * Callback function to register a plugin\n   * @callback plugin\n   * @param {Registries} registries\n   * @param {object} options\n   */\n\n  /**\n   * Plugin registry\n   * @param {plugin} plugin\n   * @param {object} [options]\n   */\n  picassojs.use = (plugin, options = {}) => usePlugin(plugin, options, regis);\n\n  /**\n   * @param {ChartDefinition} definition\n   * @returns {Chart}\n   * @example\n   * picasso.chart({\n    element: document.querySelector('#container'), // This is the element to render the chart in\n    data: [\n      {\n        type: 'matrix',\n        data: [\n          ['Month', 'Sales', 'Margin'],\n          ['Jan', 1106, 7],\n          ['Feb', 5444, 53],\n          ['Mar', 147, 64],\n          ['Apr', 7499, 47],\n          ['May', 430, 62],\n          ['June', 9735, 13],\n          ['July', 5832, 13],\n          ['Aug', 7435, 15],\n          ['Sep', 3467, 35],\n          ['Oct', 3554, 78],\n          ['Nov', 5633, 23],\n          ['Dec', 6354, 63],\n        ],\n      },\n    ],\n    settings: {\n      scales: {\n        x: { data: { field: 'Margin' } },\n        y: { data: { field: 'Sales' } },\n      },\n      components: [\n        {\n          // specify how to render the chart\n          type: 'axis',\n          scale: 'y',\n          layout: {\n            dock: 'left',\n          },\n        },\n        {\n          type: 'axis',\n          scale: 'x',\n          layout: {\n            dock: 'bottom',\n          },\n        },\n        {\n          type: 'point',\n          data: {\n            extract: {\n              field: 'Month',\n              props: {\n                x: { field: 'Margin' },\n                y: { field: 'Sales' },\n              },\n            },\n          },\n          settings: {\n            x: { scale: 'x' },\n            y: { scale: 'y' },\n            size: function () {\n              return Math.random();\n            },\n          },\n        },\n      ],\n    },\n  });\n   */\n  picassojs.chart = (definition) =>\n    chart(definition, {\n      registries: regis,\n      logger,\n      style: config.style,\n      palettes: config.palettes,\n    });\n  picassojs.config = () => config;\n\n  Object.keys(regis).forEach((key) => {\n    picassojs[key] = regis[key];\n  });\n\n  /**\n   * picasso.js version\n   * @type {string}\n   */\n  picassojs.version = about.version;\n\n  return picassojs;\n}\n\nconst p = pic(\n  {\n    renderer: {\n      prio: ['svg', 'canvas'],\n    },\n    logger: {\n      level: 0,\n    },\n    style,\n    palettes,\n  },\n  {\n    component: componentRegistry,\n    data: dataRegistry,\n    formatter: formatterRegistry,\n    interaction: interactionRegistry,\n    renderer: renderer(),\n    scale: scaleRegistry,\n    symbol: symbolRegistry,\n  }\n);\n\ncomponents.forEach(p.use);\nrenderers.forEach(p.use);\nscales.forEach(p.use);\n\nexport { p as default };\n"],"names":["ARG_LENGTH","a","c","h","l","m","q","s","t","v","z","SEGMENT_PATTERN","NUMBER","numbers","args","data","p","String","type","command","theArgs","parseValues","theCommand","version","detectTouchSupport","e","navigator","maxTouchPoints","isTouchEvent","changedTouches","isValidTapEvent","eventInfo","isTouch","ee","dt","Date","now","time","dx","isNaN","x","Math","abs","clientX","dy","y","clientY","button","multiTouch","isNumber","notNumber","value","getMinMax","points","num","length","xMin","NaN","xMax","yMin","yMax","i","min","max","lineToPoints","line","x1","y1","x2","y2","rectToPoints","rect","width","height","pointsToRect","pointsToCircle","r","cx","cy","pointsToLine","getShapeType","shape","vertices","Array","isArray","every","item","expandRect","size","datasets","dataSources","types","logger","sets","warn","push","forEach","d","datasetFactory","key","dataset","config","fn","Object","keys","pi","tau","epsilon","Path","constant","pointX","pointY","identity","slice","point","orderNone","offsetNone","none","registryFactory","parentRegistry","registerName","defaultValue","reg","parent","get","undefined","has","default","add","TypeError","remove","getKeys","getValues","map","deflt","registry","ret","register","formatLocale","formatter","pattern","thousand","decimal","locale","d3format","format","localeFn","settings","reset","thousands","grouping","currency","formatFn","patternFn","interval","day","timeMonday","timeDay","pad","timeYear","timeSunday","timeThursday","timeFormatLocale","dateTime","date","periods","days","shortDays","months","shortMonths","parse","parsePattern","formatterRegistry","d3NumberFormatter","d3TimeFormatter","getFormatter","f","formatterFn","accessors","id","source","title","tags","values","label","field","raw","items","OFFSETS","diverging","stackOffsetDiverging","stackOffsetNone","silhouette","stackOffsetSilhouette","expand","stackOffsetExpand","wiggle","stackOffsetWiggle","ORDERS","ascending","stackOrderAscending","insideout","stackOrderInsideOut","stackOrderNone","reverse","stackOrderReverse","stacked","ds","stackIds","stackFn","stackKey","valueFn","startProp","endProp","offset","order","valueRef","maxStackCount","valueFields","sourceField","ff","sid","apply","Number","call","matrix","d3Stack","stack","series","serie","range","stackedFields","dSource","filter","fieldFn","join","fields","extract","dataConfig","opts","extracted","collection","labelFn","groupBy","mapTo","hierarchy","root","extractionsConfigs","sourceFields","cfg","amend","obj","sort","create","extractor","collections","Error","k","coll","filtered","extend","options","deps","extractData","formatterType","formattersConfig","formatters","def","all","ordinal","linear","rgb","colorRgb","number","object","normalize","bisect","applyFormat","clamp","val","isObject","minorTicksGenerator","count","start","end","ticks","appendMinorTicks","majorTicks","minorCount","scale","concat","looseDistanceBasedGenerator","distance","unitDivider","step","round","b","ticksFormatted","tick","position","isMinor","indexOf","tightDistanceBasedGenerator","n","nice","ticksByCount","ticksByValue","ary","isObj","forceTicksAtBounds","ticksP","splice","lastTick","generateContinuousTicks","minorTicks","copy","tickGen","tight","forceBounds","generateDiscreteTicks","domain","dataItems","labels","bandwidth","resolveSettings","defaultSettings","context","stngs","DEFAULT_SETTINGS","include","invert","DEFAULT_TICKS_SETTINGS","DEFAULT_MINORTICKS_SETTINGS","fieldMin","fieldMax","minValues","maxValues","mini","maxi","initNormScale","normScale","instance","scaleLinear","resources","d3Scale","d3ScaleLinear","ctx","stgns","tickCache","rangeRound","cachedTicks","fnCachedTicks","clearTicksCache","fnClearTicks","input","tickFormat","interpolate","func","arguments","classify","segments","valueRange","samplePos","lastVal","calIntervalPos","calSamplePos","sampleColValue","pop","cop","norm","normInvert","padding","paddingInner","paddingOuter","align","maxPxStep","scaleBand","domainToDataMapping","augmentScaleBand","band","fsettings","datum","domainValue","trackBy","d3ScaleBand","pxScale","sizeRelativeToStep","newBand","arg","depth","keyGen","node","ancestors","toString","flattenTree","rootNode","ticksDepth","expando","eachAfter","leaves","isBranch","children","leftEdge","rightEdge","spill","scaleHierarchicalBand","bandInstance","bandScale","hBand","strVal","bw","isLeaf","left","right","leafCount","stepSize","orgPxScale","minAccessor","maxAccessor","minmax","arr","definedMin","definedMax","arrMin","numericFilter","arrMax","generateDomain","len","part","scaleSequentialColor","interpolateRgb","isDomain","isRange","DEFAULT_COLORS","theme","palette","getBreaks","generateRange","colors","seq","sequential","generateNiceDomain","numPoints","lin","shift","scaleThresholdColor","scaleThreshold","scaleOrdinal","unknown","DEFAULT_EXPLICIT_SETTINGS","override","scaleCategorical","explicit","un","explicitDomain","explicitRange","numCopies","floor","index","idx","scaleRegistry","threshold","categorical","getTypeFromMeta","deduceScaleTypeFromData","dataSourceConfig","scalesConfig","scales","EventEmitter","mixin","prototype","init","scrollApi","viewSize","move","moveTo","newStart","emit","update","triggerUpdate","getState","createOrUpdate","oldApi","builder","oldScrollApis","scrollApis","hasOwnProperty","getOrCreateScrollApi","lessThanOrEqual","limit","lessThan","boundaries","after","contains","minCondition","maxCondition","rangeCollection","configure","includeMax","includeMin","i0","i1","before","set","clear","containsValue","containsRange","toggle","ranges","valueCollection","vc","DEFAULT_RANGE_CONFIG","changedMap","changed","vi","collectUnique","filteredSet","createValueCollection","addedMap","removedMap","added","removed","fs","setKeys","addedKeys","removedKeys","diff","old","current","changedValues","filterFn","vCollection","oldMap","vcKeys","createValueCollectionFn","fsKeys","applyAliases","aliases","its","intercept","handlers","reduce","interceptor","toCamelCase","replace","$1","toUpperCase","toSnakeCase","toLowerCase","updateRange","action","interceptors","rc","rangeConfig","inter","sources","rangeValues","brush","activated","addValues","removeValues","toggleValues","setValues","addRanges","setRanges","removeRanges","toggleRanges","state","links","ls","_state","updateValues","updateRanges","attr","link","target","isActive","brushes","hasChanged","result","addValue","removeValue","addAndRemoveValues","addItems","removeItems","addIts","removeIts","toggleValue","toggled","addRange","removeRange","setRange","toggleRange","containsRangeValue","containsMappedData","props","mode","status","bool","some","name","ic","removeInterceptor","removeAllInterceptors","toRemove","interceptorHandlers","handler","addKeyAlias","alias","removeKeyAlias","nodeId","text","tween","renderer","ticker","toBeUpdated","entered","nodes","ips","exited","updated","stages","tweener","ids","interpolateObject","opacity","easing","easeCubic","duration","tweens","easeElasticOut","started","window","requestAnimationFrame","currentStage","stop","currentNodes","tweenedNodes","ip","render","cancelAnimationFrame","GLOBAL_DEFAULTS","fontFamily","fontSize","color","backgroundColor","stroke","strokeWidth","$fill","REF_RX","isPrimitive","normalizeSettings","defaults","chart","composition","defs","vType","test","defaultType","ref","resolveForItem","normalized","fallbackData","normalizedProp","exists","hasExplicitDataProp","hasImplicitDataProp","propData","updateScaleSize","path","o","scaleWithSize","externals","cache","resolve","scaled","res","resolved","reduceToLeafNodes","styler","style","brusher","dataProps","active","inactive","styleProps","activeNodes","globalActivation","getNodes","nodeData","globalChanged","evaluatedDataProps","__style","activeIdx","original","onStart","suppressRender","onEnd","onUpdate","externalUpdate","on","cleanUp","removeListener","brushDataPoints","dataPoints","trigger","rangeBrush","actionFn","valueBrush","dataPoint","it","contexts","brushFromSceneNodes","resolveEvent","collisions","brushCollisions","propagation","touchSingleContactPoint","top","singleContactPoint","resolveCollisions","element","getBoundingClientRect","touchRadius","mouseRadius","itemsAt","resolveAction","resolveTapEvent","resolveOverEvent","mappedAttributes","fill","strokeLinejoin","baseline","dominantBaseline","anchor","textAnchor","maxWidth","transform","strokeDasharray","assignMappedAttribute","sourceValue","mappedKey","circle","pointsToPath","close","diamond","generateCrossPoints","barWidth","innerLeft","innerTop","cross","angleToPoints","angle","segment","PI","diagonal","op","cos","sqrt","sin","toRadians","degreesToPoints","v1","v2","sub","scalarMultiply","distanceX","distanceY","sqrDistance","pow","dot","projectOnto","rotate","radians","origin","t1","t2","saltire","adjustedSize","asin","centroid","square","DIRECTION_TO_ANGLE","up","down","triangle","directionAngle","direction","halfSize","pp","createRectCollider","isVertical","collider","star","outerRadius","drawPoints","innerRadius","startAngle","pAngle","innerRadians","iy","ix","nPolygon","radius","sides","bar","halfWidth","parentReg","applyOpts","callbackContext","dock","displayOrder","prioOrder","preferredSize","minimumLayoutMode","show","dockConfig","computePreferredSize","inner","outer","isReservedProperty","prop","prepareContext","definition","require","mediatorSettings","mediator","registries","resolver","_DO_NOT_USE_getInfo","symbol","isVisible","defineProperty","bind","req","eventName","createDockDefinition","getLayoutProperty","propName","layout","setUpEmitter","emitter","event","eventListeners","listener","tearDownEmitter","componentFactory","container","settingsResolver","brushArgs","brushTriggers","tap","over","brushStylers","definitionContext","instanceContext","createCallback","method","defaultMethod","canBeValue","cb","inDefinition","inConfig","returnValue","resize","created","beforeMount","mounted","beforeUnmount","beforeUpdate","beforeRender","beforeDestroy","destroyed","addBrushStylers","consume","brushStyler","addBrushTriggers","rendString","rend","dockConfigCallbackContext","createDockConfig","appendComponentMeta","dataCollection","newSize","computedPhysical","computedOuter","computed","computedInner","getRect","getRenderArgs","renderArgs","hide","unmount","currentTween","bs","animations","enabled","setKey","destroy","updateNodes","createSymbolFactory","getBrushedShapes","brushCtx","shapes","sceneNodes","findShapes","selector","shapesAt","brushFromShapes","mount","appendTo","onBrushTap","globalPropagation","toggleBrushing","onBrushOver","EPSILON","closestPointToLine","startToPoint","startToEnd","pointOnLine","isPointOnLine","rectContainsRect","lineHasNoLength","rectHasNoSize","circleHasNoSize","toFewEdges","polygon","edges","testPolygonPolygonSubCase","polygon1","polygon2","intersects","testPolygonLine","testGeoPolygonPolygonCase1","geopolygon","testGeoPolygonLine","testGeoPolygonPolygonCase2","numPolygons","polygons","testPolygonPolygon","testGeoPolygonGeoPolygonSubCase","geopolygon1","geopolygon2","testGeoPolygonPolygon","testCirclePoint","center","sqrDist","testCircleRect","rX","rY","rcX","rcY","dX","dY","testCircleLine","p1","p2","dist","testCircleCircle","circle1","circle2","testCirclePolygon","testPolygonPoint","edge","testRectPoint","boundingRect","inside","j","tx","testLineLine","testPolygonRect","testRectLine","p3","p4","testRectRect","rect1","rect2","testRectContainsRect","rectEdges","line1","line2","dx1","dy1","dx2","dy2","dx3","dy3","ub","uat","ubt","ua","testLinePoint","testGeoPolygonGeoPolygon","testCircleGeoPolygon","testGeoPolygonPoint","testGeoPolygonRect","VARIABLE_RX","EXTEND","throwCyclical","references","refs","extendFrom","pext","themeFn","palettes","pals","internalStyle","setPalettes","pal","sizes","getPalette","styleResolver","setStyle","roundRect","resolveContainerRects","containerRect","logicalContainerRect","logicalSize","preserveAspectRatio","minWidthRatio","minHeightRatio","minWidth","minHeight","createRect","margin","cacheSize","reducedRect","layoutRect","cachedSize","comp","relevantSize","ceil","edgeBleed","validateReduceRect","minReduceWidth","minReduceHeight","reduceDocRect","addEdgeBleed","currentEdgeBleed","bottom","reduceEdgeBleed","reducedRectRightBoundary","reducedRectBottomBoundary","reduceSingleLayoutRect","newReduceRect","newEdgeBleed","isValid","filterReferencedDocks","visible","hidden","referencedDocks","isAllHidden","refDock","reduceLayoutRect","sortedComponents","filteredUnsortedComps","computeRect","scaleRatio","appendScaleRatio","outerRect","xLessThenY","minRatio","area","spread","boundingBox","rects","positionComponents","translation","vRect","hRect","referencedComponents","referenceArray","elementOrder","checkShowSettings","strategySettings","dockSettings","layoutModes","validateComponent","component","filterComponents","components","split","dockLayout","initialSettings","docker","ordered","settingsFn","findComponentByKeyInList","list","currComp","hasKey","wrapChildren","hideAll","customLayout","vcomponents","mapBack","normalLayout","layoutSettings","createDockLayout","getLayoutFn","strategy","collectionFn","createComponent","allComponents","topComponents","createComp","compSettings","childSettings","removeFromAllComponents","removeDeleted","compList","settingsList","currSettings","find","addAndUpdate","excludeFromUpdate","updateWith","recLayout","layoutFn","lFn","findComponentByKey","addComponentDelta","containerBounds","componentBounds","deltaShape","moveToPosition","el","additionalEl","additionalElements","Boolean","insertBefore","ae","appendChild","orderComponents","elToIdx","numElements","chartFn","listeners","mediatorFactory","visibleComponents","currentScales","currentFormatters","currentScrollApis","currentInteractions","stopBrushing","componentDefinition","compInstance","componentsC","componentCollectionFn","getElementRect","_data","_settings","partialData","scroll","datasources","dataCollections","scaleCollection","formatterCollection","buildScroll","setInteractions","interactions","newKeys","cit","intSettings","intDefinition","interaction","componentsFromPoint","br","tp","addDefaultEventListeners","addEventListener","onTapDown","touches","comps","disableTriggers","preventDefault","brushEventList","removeDefaultEventListeners","removeEventListener","innerHTML","newProps","visibleOrdered","toUpdate","toRender","toRenderOrUpdate","getAffectedShapes","compKeys","stopPropagation","iKey","compShapes","brushFn","instances","off","rendererRegistry","prio","componentRegistry","findField","query","filters","numeric","unfilteredReducers","sum","reducers","first","last","avg","normalizeProperties","dataProperties","main","mainField","pConfig","reduceLabel","getPropsInfo","collectItems","collect","trackedItems","propsArr","mainFormatter","propsFormatters","track","itemData","tracker","trackType","trackId","trackedItem","datumExtract","propCfg","cell","cfgs","sourceKey","mapped","mainCell","exclude","propCell","storeTracked","createFields","headers","content","rowFn","row","flds","fieldValues","fv","numericValues","isMeasure","dsv","rows","row0","row1","delimiter","guesses","parseData","dd","util","normalizeConfig","dataRegistry","native","nativeEvents","itKey","isOn","setDefaultSettings","newSettings","events","enable","addEvents","removeAddedEvents","cap","resolveDiff","minPx","maxPx","high","low","highModified","lowModified","wantedDiff","actualDiff","startModifier","actualLow","oob","boxCenter","rendWidth","rendHeight","flipXY","calcwidth","calcheight","box","boxWidth","boxPadding","minHeightPx","major","verticalLine","from","to","horizontalLine","getBoxWidth","maxMajorWidth","maxWidthPx","minWidthPx","sign","buildShapes","output","majorItems","majorSettings","minorProps","minor","numMinorProps","nonOobKeys","minorItem","isLowerOutOfBounds","isHigherOutOfBounds","isOutOfBounds","numKeys","numNonOobKeys","addBox","boxShapesHelper","addLine","addMedian","median","med","addWhisker","whisker","whiskerWidth","addOutOfBounds","addMarkerList","checkOutOfBounds","MAX_VALUE","majorItem","majorVal","majorEndVal","binStart","binEnd","majorEnd","complexResolver","orientation","majorResolved","minorSettings","defaultMinorSettings","minorResolved","ext","ki","DEFAULT_DATA_SETTINGS","dataKeys","picasso","DEFAULT_ERROR_SETTINGS","errorShape","PX_RX","SIZE_LIMITS","maxRelExtent","minRelExtent","maxRelDiscrete","minRelDiscrete","getPxSpaceFromScale","space","isBandwidth","getPointSizeLimits","limits","xSpacePx","ySpacePx","maxSizePx","minSizePx","maxGlobal","minGlobal","getType","createDisplayPoints","pointSize","shapeFn","parseInt","typeProps","shapeSpec","sizeLimits","pointMarker","pointMarkerComponent","endAngle","arc","cornerRadius","offsetSlice","vx","vy","vlen","createDisplayPies","arcData","slices","arcGen","or","ir","desc","share","arcValue","pieComponent","padAngle","arcValues","pieGen","pie","sortValues","crispifierFactory","crispMap","append","condition","conditionAppend","self","toAppend","crispItem","doAppend","rounded","multiple","crispifier","Transposer","coordinate","isFinite","firstChar","substring","storage","newItem","crisp","objectKeys","kl","nkey","evaluateKey","nval","transposeCoordinate","crispify","processItem","rest","transposer","lineGen","gridLineComponent","blueprint","lines","addTicks","dir","gridLine","directionMarker","directionTriangle","oobManager","oobKeys","charAt","xPadding","yPadding","indicator","refLabelDefaultSettings","background","alignmentToNumber","createLineWithLabel","doesNotCollide","measuredValue","valueString","scaleData","showValue","measureText","measuredLabel","measured","labelPadding","vAlign","calcWidth","calcHeight","rectWidth","rectHeight","curItem","createOobData","filterUndefinedValue","isInvert","getPosition","refLineComponent","x0","y0","refLine","appendStyle","struct","buildOpts","buildLine","innerRect","checkText","clampEnds","tilted","leftBoundary","rightBoundary","textWidth","textRect","leftTextBoundary","rightTextBoundary","topBoundary","bottomBoundary","textHeight","maxHeight","topTextBoundary","bottomTextBoundary","appendPadding","appendTilting","paddingEnd","bandwidthCollider","tickCenter","widthClip","heightClip","boundsCollider","tiltedCollider","startAnchor","em","sp","rotateVector","leftPoint","rightPoint","orderedPoints","appendCollider","layered","appendBounds","textBounds","w","buildNode","adjustForEnds","tickSize","isMajorTick","isVerticalLabelOverlapping","isHorizontalLabelOverlapping","activeMode","d1","d2","shouldAutoTilt","measure","glyphCount","maxGlyphCount","magicSizeRatioMultipler","tiltThreshold","ellipsCharSize","maxLabelWidth","minBandwidth","prev","curr","Infinity","isTiltedLabelOverlapping","bleedSize","absAngle","reciprocal","distanceBetweenLabels","isToLarge","horizontal","getClampedValue","maxValue","minValue","modifier","getSize","isDiscrete","maxLengthPx","minLengthPx","filterOverlapping","toLargeSize","sizeFromTextRect","tiltAngle","tickMeasures","labelSizes","textSize","extendLeft","labelWidth","adjustByPosition","pos","maxEdgeBleed","bleedDir","PADDING","tickDistance","getLeftEdgeWidth","nextWidth","leftEdgeBleed","minDubble","getRightEdgeWidth","prevWidth","rightEdgeBleed","getHorizontalWidth","next","tickSpacing","spacing","paddingStart","tickMinorSpacing","labelsSpacing","calcActualTextRect","tickBuilder","buildTick","tickBandwidth","labelBuilder","resolveTickOpts","buildLabel","layeredLabelBuilder","padding2","layer","filterOverlappingLabels","isOverlapping","discreteCalcMaxTextRect","textMetrics","continuousCalcMaxTextRect","getHorizontalContinuousWidth","getStepSizeFn","nodeBuilder","resolveLabelRect","continuous","discrete","build","majorTickNodes","maxSize","labelNodes","DEFAULT_DISCRETE_SETTINGS","DEFAULT_CONTINUOUS_SETTINGS","calcRequiredSize","getLabelSize","labelSize","minorTicksSize","alignTransform","resolveAlign","vertical","resolveLocalSettings","defaultStgns","localStgns","defaultDock","updateActiveMode","isHorizontal","axisComponent","concreteNodeBuilder","setState","reqSize","extendedInner","finalOuter","axis","containerComponent","parseTitle","titles","getTextAnchor","generateTitle","definitionSettings","paddingLeft","paddingRight","rotation","textComponent","_scrollbar","lengthAttr","currentMove","scrollState","startOffset","startScroll","swipe","scrollPoint","scrollMove","scrollStart","scrollCenter","getLocalPos","scrollbarComponent","panStart","startPos","deltaX","deltaY","panMove","panEnd","panCancel","thumbColor","_rect","thumbStart","thumbRange","pointerEvents","class","scrollbar","TARGET_SIZE","VERTICAL","HORIZONTAL","borderHit","isAlignStart","alignStart","alignEnd","alignStyle","targetRect","bubbles","onmouseover","srcElement","onmouseout","cursor","buildBubble","otherValue","rangeIdx","isOutside","placement","outside","bubbleDock","inEdit","edit","bubbleIdx","bubbleStyle","borderRadius","bubble","border","textAlign","overflow","textOverflow","whiteSpace","currentBorderColor","onkeyup","newValue","parseFloat","onEditConfirmed","onEditCanceled","buildArea","buildRange","els","vStart","vEnd","targetOffset","hasScale","targetFillRect","targetSize","targetStart","targetEnd","targetHeight","targetTop","targetArea","valStart","valEnd","isStartVisible","isEndVisible","getMoveDelta","posDelta","limitHigh","negDelta","limitLow","delta","rangelimits","areaLimits","findActive","rs","activeRange","startArea","document","elementFromPoint","tempState","relX","relY","startPoint","cssCoord","coord","relStart","hasAttribute","getAttribute","multi","pxStart","pxEnd","fauxBrushInstance","brushInstance","endArea","rel","moveArea","sourceData","ordRS","oldValues","findValues","addedValues","removedValues","setEditedRanges","startValue","endValue","limitMin","limitMax","findClosest","minDist","halfBandwidth","findClosestLabel","rangesOverlap","r1","r2","rangesValues","scaleRange","startIdx","endIdx","resolveNodeBounds","targetNodes","bounds","resolveTarget","targets","targetFillNodes","fillSelector","fillBounds","brushRangeComponent","rangeStart","rangeMove","rangeEnd","rangeClear","bubbleStart","renderRanges","editable","brushFactory","valueRanges","observeBrush","observe","sourcedFromThisComponent","srcEvent","ed","JSON","stringify","stopImmediatePropagation","wrapper","parentNode","inputEl","querySelector","focus","select","shapesFromRange","brushRange","shapeAt","brushFromShape","newShapes","getBubbleLabel","labelShape","s0","s1","bounds0","bounds1","compConfig","c0","c1","brushAreaDirectionalComponent","areaStart","areaMove","areaEnd","areaClear","getFormat","rangeBrushComponent","FILL","OPACITY","otherSize","setup","teardown","rangeComponent","getPoint","rendererBounds","eventOffsetX","eventOffsetY","withinThreshold","snapIndicator","appendToPath","setSnapIndictor","showSnapIndicator","setStartPoint","getComponentDelta","chartBounds","doLineBrush","lineBrushShape","componentDelta","brushConfig","doPolygonBrush","initPath","initSnapIndicator","initStartPoint","getBrushConfig","endBrush","resetState","brushLassoComponent","lasso","lassoStart","lassoEnd","lassoMove","lassoCancel","cancel","shouldSnap","lassoBrush","lassoBrushComponent","binaryLeftSearch","labelBounds","side","extractBounds","findLeft","renderLabels","getTextBounds","getNodeBounds","localBounds","doNotUse","labelIndex","labelNode","leftStartLabel","leftStartNode","labelRightBoundary","cbContext","isValidText","toBackground","rx","ry","backgroundBounds","isTextWidthInRectWidth","isTextHeightInRectHeight","isGoodPlacement","fitsHorizontally","fitWidth","fitHeight","isTextInRect","placeSegmentInSegment","majorSegmentPosition","majorSegmentSize","minorSegmentSize","majorSegmentCenter","minorSegmentCenter","minorSegmentPosition","placeTextInRect","baseLineOffset","justify","limitBounds","view","minY","maxY","minX","maxX","getBarRect","findBestPlacement","placementSettings","barRect","largest","testBounds","dimension","approxTextBounds","rotated","PADDING_OFFSET","placeInBars","collectiveOrientation","findPlacement","placer","postFilter","postFilterContext","lblStngs","placements","texts","labelSettings","measurements","bestPlacement","linkData","isRotated","filteredLabels","backgrounds","lb","precalculate","labelStruct","hasHorizontalDirection","lblStng","bars","labelSetting","LABEL_OVERLAP_THRESHOLD_X","PI2","getTopLeftBounds","getLineCircleIntersection","D","sqrtD","getRectFromCircleIntersection","lineOffset","section","intersection","getHorizontalInsideSliceRect","store","middle","insideLabelBounds","getHorizontalIntoSliceRect","startLine","endLine","getRotatedInsideSliceRect","tan","minReqWidth","getRotatedOusideSliceRect","minR","outOfSpace","q1maxY","q2minY","q3minY","q4maxY","adjustBounds","LINE_PADDING","LIMIT","updateContext","getHorizontalOusideSliceRect","placeTextOnPoint","getSliceRect","sliceRect","sortNodes","q1","q2","q3","q4","sortFn","middleA","middleB","reverseSortFn","metrics","topLeftBounds","LINEBREAK_REGEX","WHITESPACE_REGEX","HYPHEN_REGEX","NO_BREAK","MANDATORY","BREAK_ALLOWED","includesLineBreak","search","includesWhiteSpace","hyphenationAllowed","resolveBreakOpportunity","chunk","chunks","mandatory","noBreakAllowed","cleanEmptyChunks","stringTokenizer","string","separator","mandatoryBreakIdentifiers","noBreakAllowedIdentifiers","suppressIdentifier","hyphenationIdentifiers","isNotDone","peek","peekAt","textMeasure","opportunity","breakOpportunity","suppress","hyphenation","done","jumpToPosition","HYPHENS_CHAR","ELLIPSIS_CHAR","BASE","PAD","BUMP","DEFAULT_FONT_HEIGHT","DEFAULT_LINE_HEIGHT","TEXT_REGEX","isValidFontSize","fontSizeToHeight","fontSizeToLineHeight","lineHeight","resolveMaxAllowedLines","maxLines","computedLineHeight","initState","hyphens","char","newLine","appendToLine","token","insertHyphenAndJump","iterator","startIndex","pairToken","breakSequence","charTokenIterator","charToken","breakAll","reduced","breakWord","generateLineNodes","halfLead","currentY","_lineBreak","shouldLineBreak","wrappedMeasureText","resolveLineBreakAlgorithm","WORDBREAK","wordBreak","onLineBreak","wordBreakFn","tm","ellipsText","reduceIndex","reduceText","substr","baselineHeuristic","textNode","heightCache","widthCache","contextCache","setContext","createElement","getContext","setFont","font","measureTextWidth","measureTextHeight","calcTextBounds","attrs","measureFn","calWidth","lineBreakFn","resolvedLineBreaks","nodeCopy","widestLine","LINE_HEIGHT","CIRCLE_FACTOR","wiggleWidth","getRectFromCircle","getSliceBounds","getBounds","rowSettings","totalHeight","labelCount","wiggleHeight","maxYDistToCenter","ellipsed","labelsComponent","strategies","scrollOffset","navigation","tabIndex","disabled","shapeSettings","symbols","wiggleSymbol","createRenderItem","globalMetrics","createSymbol","displayObject","symbolItem","meta","rtl","labelRect","maxLabelBounds","maxSymbolSize","wiggled","maxItemBounds","getItemsToRender","viewRect","itemized","parallels","legendItems","renderItems","fixedHeight","fixedWidth","rowHeight","columnWidth","renderItem","itemize","sourceItems","sourceSymbols","sourceLabels","maxLabelHeight","extent","property","parallelize","availableExtent","availableSpread","extentProperty","extentInPx","numNeeded","spreadProperty","spreadMargin","spreadMarginSize","numAllowed","numInput","legend","onScroll","api","getContentOverflow","offsetProperty","hasContentOverflow","getNextSize","getPrevSize","hasNext","hasPrev","classString","classMap","className","DIR","btn","nav","attrsMerged","tabindex","itemRenderer","isRtl","buttonSize","display","navigationRenderer","titleRenderer","isPreliminary","paddedRect","availableExtentForItems","availableSpreadForItems","navigationSize","navigationSpread","tempLayout","contentItems","views","renderElement","panstart","contentOverflow","panmove","panend","itemRendererFactory","navigationRendererFactory","titleRendererFactory","categoricalLegend","applyAlignJustify","cmd","generateStopNodes","fillScale","majorScale","stops","createTitleNode","isTickLeft","isTickTop","requiredWidth","tag","createLegendRectNode","requiredHeight","degree","createTickNodes","legendNode","rangeSelectorRect","textBoundsFn","resolveAnchor","valid","resolveTickAnchor","dockAnchorMap","resolveTitleAnchor","initRect","getTicks","titleStgns","tickValues","tickAnchor","titleTextMetrics","titleTextBounds","mw","fnPos","legendDef","prefSize","paddings","tHeight","tWidth","titleNode","stopNodes","rectNode","tickNodes","targetNode","sequentialLegend","legendSeq","CURVES","curveStep","stepAfter","curveStepAfter","stepBefore","curveStepBefore","curveLinear","basis","curveBasis","cardinal","curveCardinal","tension","catmullRom","curveCatmullRom","monotonex","curveMonotoneX","monotoney","curveMonotoneY","natural","curveNatural","SETTINGS","coordinates","layerId","defined","connect","layers","curve","showMinor0","createDisplayLayer","generator","createDisplayLayers","missingMinor0","layerStngs","lineObj","layerObj","areaObj","areaGenerator","lineGenerator","secondaryLineGenerator","temp","minor0","dummy","filteredPoints","consumableData","injectDummy","layerIds","numLines","lid","lastItem","lastOrderIdx","metaLayers","layersData","layersResolved","linesResolved","areasResolved","areas","calculateVisibleLayers","visibleLayers","pData","lineMarkerComponent","sortable","getLocalPoint","localX","localY","localToChartPoint","doEndBrush","toRect","p0","doAreaBrush","areaCancel","areaBrush","dataCtx","resolveClasses","tooltip","tooltipClass","contentClass","arrow","arrowClass","resolveContent","classes","tooltipDefaultStyle","tooltipNode","computedTooltipStyle","computedArrowStyle","dispatcherState","pending","debounced","cancelled","rejected","fulfilled","timeSpanDispatcher","defaultDuration","defaultDelay","actionId","fulfilledId","invoke","delay","clearTimeout","setTimeout","getDockTransform","getDockOffset","getComputedArrowStyle","borderWidth","isInsideArea","calcOffset","offsetX","offsetY","alignToBounds","pointer","elmWidth","elmHeight","targetBounds","getNodeBoundsRelativeToTarget","docks","dockTransforms","innerWidth","innerHeight","dockOffsets","dockOrder","alignToPoint","results","edgeMargin","alignToPointer","alignToSlice","getComponentBoundsFromNode","componentSize","STRATEGIES","propCtx","plcm","setActive","removeActive","cancelActive","isEqual","beforeShow","afterShow","beforeHide","onHide","afterHide","DEFAULT_STYLE","borderStyle","borderTopColor","borderLeftColor","borderRightColor","borderBottomColor","toPoint","targetElement","prevent","dispatcher","fNodes","invokeRenderer","instanceId","listenerCtx","tooltipElm","pseudoElement","visibility","addTooltip","debugColliderDef","useOuterRect","draw","colliders","PI_X2","arcToCenter","largeArcFlag","sweepFlag","endX","endY","startX","startY","sweepAngle","radiusRatio","rad","hdx","hdy","x1d","y1d","rxry","rxy1d","ryx1d","den","frac","cxd","cyd","mx","my","ux","uy","atan2","flatness","cp1","cp2","mid","td","t0","t3","toPoints","maxNbrOfSplits","m0","m1","m2","q0","toCubic","cp","cp1x","cp1y","cp2x","cp2y","cubicToPoints","removeDuplicates","arcToPoints","resAngle","deltaAngle","pathToPoints","commands","p2dp","parsePath","cpx","cpy","qcpx","qcpy","pathType","cubicCurveToPoints","quadCurveToPoints","debugPathToPointsDef","circles","pathToSegments","debugCollider","createDebugCollider","debugPathToPoints","createDebugPathToPoints","boxComponent","pointComponent","lineComponent","brushAreaComponent","tooltipComponent","Node","_parent","_children","_ancestors","removeChild","descendants","nChildren","equals","ch","toJSON","GeoRect","GeoCircle","minRadius","vector","GeoLine","tolerance","vectors","zeroSize","v0","Polygon","_bounds","_boundingRect","GeoPolygon","createPolygon","pointsAreNotEqual","GeoPolyline","_points","testLine","polyline","GeometryCollection","geometries","geo","geoInstance","factory","containsPoint","intersectsLine","intersectsRect","intersectsCircle","intersectsPolygon","intersectsGeoPolygon","Matrix","_elements","_stack","mt","multiply","elements","radianAngle","g","determinant","vec","array","transformRegEx","parseTransform","exec","argsStr","trim","resolveRotateCmd","translate","resolveScaleCmd","resolveTranslateCmd","resolveMatrixCmd","resolveTransform","transforms","SELECTOR_MAPS","universal","FILTERS","objects","operator","attribute","attributeValue","tokenize","groups","info","match","validSelector","group","selectorMapsIterator","groupResults","tokens","gi","glen","levels","hasRemainder","selected","ancestor","ni","nlen","appendDpi","dpi","geometryToDef","geometry","mvm","transformPoints","colliderToShape","modelViewMatrix","isCollection","colliderType","SceneNode","includeTransform","_attrs","_type","_dpi","stage","_collider","_desc","_tag","_cache","elementBoundingRect","_getElementBoundingRect","_element","_key","selfRect","Collision","_node","createSceneNode","_input","appendParentNode","collision","createCollision","appendInputShape","resolveFrontChildCollision","resolveGeometryCollision","inverseTransform","transformedInput","inverseModelViewMatrix","transformPoint","createGeoPolygon","resolveCollision","intersectionType","findAllCollisions","hasCollision","resolveShape","ratio","_shape","vertex","resolveCollionsOnNode","hasCollisionOnNode","DisplayObject","_stage","strokeReference","fillReference","nodeSelector","clone","resolveLocalTransform","attrKeys","dAttrs","dAttrKeys","json","_mvm","_imvm","geometryCollection","NodeContainer","addChild","indx","NC","Container","__boundingRect","true","false","__bounds","child","_xMax","_yMax","appendChildRect","addChildren","removeChildren","Stage","_dpiRatio","allowedAttrs","GradientItem","attrKey","PatternItem","Rect","pt","Circle","Line","defaultCollider","hasSize","PI_2","lineAngle","rotatePoint","polylineToPolygonCollider","open","forceOrientation","unshift","currToPrev","currToNext","openAngle","closeAngle","maxAngle","minAngle","openClose","prevToCurr","opened","closed","nextToCurr","flatten2d","newAry","isClosed","visual","flatten","hasData","_textBoundsFn","Text","gradientItem","patternItem","contextFactory","whitelist","states","save","restore","styleContext","doEvent","updateState","traverse","siblings","displayNode","isIdentity","scene","createCanvasGradient","gradient","newGradient","createRadialGradient","createLinearGradient","addColorStop","getPattern","dummyCanvas","fillStyle","createPattern","patternizer","createRendererBox","destory","setAttribute","injectTextBoundsFn","toLineDash","dpiScale","dpr","devicePixelRatio","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","resolveMatrix","setTransform","applyContext","shapeToCanvasMap","computedKeys","shapeCmd","canvasCmd","convertCmd","renderShapes","patterns","strokeStyle","doFill","doStroke","sceneFn","sceneFactory","hasChangedRect","canvasRenderer","ownerDocument","dpiRatio","scaleX","scaleY","sceneContainer","newScene","hasChangedScene","doRender","getItemsFrom","newRect","parentElement","renderFn","clampRadius","quadraticRoundedRect","lineTo","quadraticCurveTo","beginPath","rangesOfLChars","rangesOfRChars","rangesOfALChars","rangesOfLRgExp","RegExp","rangesOfRRgExp","rangesOfALRgExp","isLtrChar","isRtlChar","detectTextDirection","textAnchorRTLMap","flipTextAnchor","canvas","bdy","fillText","Path2D","rendererComponent","updatedNew","updatedOld","fromIds","toIds","idMapper","nodeMapper","isTree","createNodes","destroyNodes","creator","maintainer","destroyer","createTree","oldItems","newItems","svgNs","createElementNS","textContent","TreeItemRenderer","treeCreator","nodeCreator","nodeMaintainer","nodeDestroyer","tree","hashObject","hash","chr","charCodeAt","gradienter","bucket","hasher","uid","getOrCreateGradient","url","gradientHash","gradientId","onCreate","location","href","inputs","patternHash","pnid","pn","patternUnits","treeFn","treeFactory","ns","svg","gradients","cloneNode","replaceChild","dNode","dom","vNode","firstChild","LOG_LEVEL","OFF","ERROR","WARN","INFO","DEBUG","loggerFn","level","pipe","console","currentlevel","LOG_FN","error","log","lev","debug","$spacing","$border","$shape","$label","$extend","$title","$padding","usePlugin","plugin","pic","regis","picassojs","cc","use","about","interactionRegistry","symbolRegistry","renderers"],"mappings":"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;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,SAAS4wB,iBAAT,CAA2BhhC,KAA3B,EAAkCihC,eAAlC,EAAmDC,eAAnD,EAAoE;EAClE,MAAM7jC,EAAE,GAAG4jC,eAAe,CAACtsB,IAAhB,GAAuBusB,eAAe,CAACvsB,IAAlD;EACA,MAAMhX,EAAE,GAAGsjC,eAAe,CAACpZ,GAAhB,GAAsBqZ,eAAe,CAACrZ,GAAjD;EACA,MAAM5rB,IAAI,GAAG8D,YAAY,CAACC,KAAD,CAAzB;EACA,MAAMmhC,UAAU,GAAGh2B,QAAM,CAAC,IAAD,EAAO,EAAP,EAAWnL,KAAX,CAAzB;;EAEA,UAAQ/D,IAAR;EACE,SAAK,QAAL;EACEklC,MAAAA,UAAU,CAACvhC,EAAX,IAAiBvC,EAAjB;EACA8jC,MAAAA,UAAU,CAACthC,EAAX,IAAiBlC,EAAjB;EACA;;EACF,SAAK,SAAL;EACE,WAAK,IAAIiB,CAAC,GAAG,CAAR,EAAWP,GAAG,GAAG8iC,UAAU,CAAClhC,QAAX,CAAoB3B,MAA1C,EAAkDM,CAAC,GAAGP,GAAtD,EAA2DO,CAAC,EAA5D,EAAgE;EAC9D,YAAMpD,CAAC,GAAG2lC,UAAU,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,CAACY,GAAD,EAAMrJ,OAAN,CAAhB;EAAA,KAnCK;;EAqCd;EACJ;EACA;EACIiJ,IAAAA,SAAS,EAAE;EAAA,aAAM,IAAN;EAAA;EAxCG,GAAhB;EA2CA8+B,EAAAA,SAAS,CAAC;EACRhoC,IAAAA,GAAG,EAAHA,IADQ;EAERpF,IAAAA,IAAI,EAAJA,IAFQ;EAGRsF,IAAAA,MAAM,EAANA,MAHQ;EAIR4jB,IAAAA,KAAK,EAALA;EAJQ,GAAD,CAAT;EAOA,SAAO7jB,OAAP;EACD;;EAED2G,EAAE,CAACshC,IAAH,GAAU;EACRC,EAAAA,eAAe,EAAE1C,YADT;EAERE,EAAAA,OAAO,EAAPA,OAFQ;EAGRK,EAAAA,KAAK,EAALA;EAHQ,CAAV;EAQA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;ECzXA,IAAMoC,YAAY,GAAGhmC,eAAQ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AC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,EAAE,CA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"}